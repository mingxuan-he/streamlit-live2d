/*! For license information please see main.4339a96b.js.LICENSE.txt */
(()=>{var t={961:t=>{"use strict";var e=Object.prototype.hasOwnProperty,r="~";function n(){}function i(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function o(t,e,n,o,s){if("function"!==typeof n)throw new TypeError("The listener must be a function");var a=new i(n,o||t,s),l=r?r+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],a]:t._events[l].push(a):(t._events[l]=a,t._eventsCount++),t}function s(t,e){0===--t._eventsCount?t._events=new n:delete t._events[e]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var t,n,i=[];if(0===this._eventsCount)return i;for(n in t=this._events)e.call(t,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},a.prototype.listeners=function(t){var e=r?r+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s},a.prototype.listenerCount=function(t){var e=r?r+t:t,n=this._events[e];return n?n.fn?1:n.length:0},a.prototype.emit=function(t,e,n,i,o,s){var a=r?r+t:t;if(!this._events[a])return!1;var l,u,h=this._events[a],c=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),c){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,n),!0;case 4:return h.fn.call(h.context,e,n,i),!0;case 5:return h.fn.call(h.context,e,n,i,o),!0;case 6:return h.fn.call(h.context,e,n,i,o,s),!0}for(u=1,l=new Array(c-1);u<c;u++)l[u-1]=arguments[u];h.fn.apply(h.context,l)}else{var d,f=h.length;for(u=0;u<f;u++)switch(h[u].once&&this.removeListener(t,h[u].fn,void 0,!0),c){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,e);break;case 3:h[u].fn.call(h[u].context,e,n);break;case 4:h[u].fn.call(h[u].context,e,n,i);break;default:if(!l)for(d=1,l=new Array(c-1);d<c;d++)l[d-1]=arguments[d];h[u].fn.apply(h[u].context,l)}}return!0},a.prototype.on=function(t,e,r){return o(this,t,e,r,!1)},a.prototype.once=function(t,e,r){return o(this,t,e,r,!0)},a.prototype.removeListener=function(t,e,n,i){var o=r?r+t:t;if(!this._events[o])return this;if(!e)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||i&&!a.once||n&&a.context!==n||s(this,o);else{for(var l=0,u=[],h=a.length;l<h;l++)(a[l].fn!==e||i&&!a[l].once||n&&a[l].context!==n)&&u.push(a[l]);u.length?this._events[o]=1===u.length?u[0]:u:s(this,o)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&s(this,e)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a},28:(t,e,r)=>{"use strict";var n=r(2),i=r(712),o=i(n("String.prototype.indexOf"));t.exports=function(t,e){var r=n(t,!!e);return"function"===typeof r&&o(t,".prototype.")>-1?i(r):r}},712:(t,e,r)=>{"use strict";var n=r(864),i=r(2),o=r(438),s=r(902),a=i("%Function.prototype.apply%"),l=i("%Function.prototype.call%"),u=i("%Reflect.apply%",!0)||n.call(l,a),h=r(90),c=i("%Math.max%");t.exports=function(t){if("function"!==typeof t)throw new s("a function is required");var e=u(n,l,arguments);return o(e,1+c(0,t.length-(arguments.length-1)),!0)};var d=function(){return u(n,a,arguments)};h?h(t.exports,"apply",{value:d}):t.exports.apply=d},992:(t,e,r)=>{"use strict";var n=r(90),i=r(557),o=r(902),s=r(558);t.exports=function(t,e,r){if(!t||"object"!==typeof t&&"function"!==typeof t)throw new o("`obj` must be an object or a function`");if("string"!==typeof e&&"symbol"!==typeof e)throw new o("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!==typeof arguments[3]&&null!==arguments[3])throw new o("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!==typeof arguments[4]&&null!==arguments[4])throw new o("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!==typeof arguments[5]&&null!==arguments[5])throw new o("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!==typeof arguments[6])throw new o("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,u=arguments.length>5?arguments[5]:null,h=arguments.length>6&&arguments[6],c=!!s&&s(t,e);if(n)n(t,e,{configurable:null===u&&c?c.configurable:!u,enumerable:null===a&&c?c.enumerable:!a,value:r,writable:null===l&&c?c.writable:!l});else{if(!h&&(a||l||u))throw new i("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");t[e]=r}}},973:t=>{"use strict";function e(t,e,n){n=n||2;var o,s,a,l,c,d,p,m=e&&e.length,y=m?e[0]*n:t.length,g=r(t,0,y,n,!0),_=[];if(!g||g.next===g.prev)return _;if(m&&(g=function(t,e,n,i){var o,s,a,l=[];for(o=0,s=e.length;o<s;o++)(a=r(t,e[o]*i,o<s-1?e[o+1]*i:t.length,i,!1))===a.next&&(a.steiner=!0),l.push(f(a));for(l.sort(u),o=0;o<l.length;o++)n=h(l[o],n);return n}(t,e,g,n)),t.length>80*n){o=a=t[0],s=l=t[1];for(var v=n;v<y;v+=n)(c=t[v])<o&&(o=c),(d=t[v+1])<s&&(s=d),c>a&&(a=c),d>l&&(l=d);p=0!==(p=Math.max(a-o,l-s))?32767/p:0}return i(g,_,n,o,s,p,0),_}function r(t,e,r,n,i){var o,s;if(i===I(t,e,r,n)>0)for(o=e;o<r;o+=n)s=S(o,t[o],t[o+1],s);else for(o=r-n;o>=e;o-=n)s=S(o,t[o],t[o+1],s);return s&&g(s,s.next)&&(w(s),s=s.next),s}function n(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!g(n,n.next)&&0!==y(n.prev,n,n.next))n=n.next;else{if(w(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function i(t,e,r,u,h,c,f){if(t){!f&&c&&function(t,e,r,n){var i=t;do{0===i.z&&(i.z=d(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,r,n,i,o,s,a,l,u=1;do{for(r=t,t=null,o=null,s=0;r;){for(s++,n=r,a=0,e=0;e<u&&(a++,n=n.nextZ);e++);for(l=u;a>0||l>0&&n;)0!==a&&(0===l||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(s>1)}(i)}(t,u,h,c);for(var p,m,y=t;t.prev!==t.next;)if(p=t.prev,m=t.next,c?s(t,u,h,c):o(t))e.push(p.i/r|0),e.push(t.i/r|0),e.push(m.i/r|0),w(t),t=m.next,y=m.next;else if((t=m)===y){f?1===f?i(t=a(n(t),e,r),e,r,u,h,c,2):2===f&&l(t,e,r,u,h,c):i(n(t),e,r,u,h,c,1);break}}}function o(t){var e=t.prev,r=t,n=t.next;if(y(e,r,n)>=0)return!1;for(var i=e.x,o=r.x,s=n.x,a=e.y,l=r.y,u=n.y,h=i<o?i<s?i:s:o<s?o:s,c=a<l?a<u?a:u:l<u?l:u,d=i>o?i>s?i:s:o>s?o:s,f=a>l?a>u?a:u:l>u?l:u,m=n.next;m!==e;){if(m.x>=h&&m.x<=d&&m.y>=c&&m.y<=f&&p(i,a,o,l,s,u,m.x,m.y)&&y(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function s(t,e,r,n){var i=t.prev,o=t,s=t.next;if(y(i,o,s)>=0)return!1;for(var a=i.x,l=o.x,u=s.x,h=i.y,c=o.y,f=s.y,m=a<l?a<u?a:u:l<u?l:u,g=h<c?h<f?h:f:c<f?c:f,_=a>l?a>u?a:u:l>u?l:u,v=h>c?h>f?h:f:c>f?c:f,b=d(m,g,e,r,n),x=d(_,v,e,r,n),T=t.prevZ,S=t.nextZ;T&&T.z>=b&&S&&S.z<=x;){if(T.x>=m&&T.x<=_&&T.y>=g&&T.y<=v&&T!==i&&T!==s&&p(a,h,l,c,u,f,T.x,T.y)&&y(T.prev,T,T.next)>=0)return!1;if(T=T.prevZ,S.x>=m&&S.x<=_&&S.y>=g&&S.y<=v&&S!==i&&S!==s&&p(a,h,l,c,u,f,S.x,S.y)&&y(S.prev,S,S.next)>=0)return!1;S=S.nextZ}for(;T&&T.z>=b;){if(T.x>=m&&T.x<=_&&T.y>=g&&T.y<=v&&T!==i&&T!==s&&p(a,h,l,c,u,f,T.x,T.y)&&y(T.prev,T,T.next)>=0)return!1;T=T.prevZ}for(;S&&S.z<=x;){if(S.x>=m&&S.x<=_&&S.y>=g&&S.y<=v&&S!==i&&S!==s&&p(a,h,l,c,u,f,S.x,S.y)&&y(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function a(t,e,r){var i=t;do{var o=i.prev,s=i.next.next;!g(o,s)&&_(o,i,i.next,s)&&x(o,s)&&x(s,o)&&(e.push(o.i/r|0),e.push(i.i/r|0),e.push(s.i/r|0),w(i),w(i.next),i=t=s),i=i.next}while(i!==t);return n(i)}function l(t,e,r,o,s,a){var l=t;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&m(l,u)){var h=T(l,u);return l=n(l,l.next),h=n(h,h.next),i(l,e,r,o,s,a,0),void i(h,e,r,o,s,a,0)}u=u.next}l=l.next}while(l!==t)}function u(t,e){return t.x-e.x}function h(t,e){var r=function(t,e){var r,n=e,i=t.x,o=t.y,s=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=i&&a>s&&(s=a,r=n.x<n.next.x?n:n.next,a===i))return r}n=n.next}while(n!==e);if(!r)return null;var l,u=r,h=r.x,d=r.y,f=1/0;n=r;do{i>=n.x&&n.x>=h&&i!==n.x&&p(o<d?i:s,o,h,d,o<d?s:i,o,n.x,n.y)&&(l=Math.abs(o-n.y)/(i-n.x),x(n,t)&&(l<f||l===f&&(n.x>r.x||n.x===r.x&&c(r,n)))&&(r=n,f=l)),n=n.next}while(n!==u);return r}(t,e);if(!r)return e;var i=T(r,t);return n(i,i.next),n(r,r.next)}function c(t,e){return y(t.prev,t,e.prev)<0&&y(e.next,t,t.next)<0}function d(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function p(t,e,r,n,i,o,s,a){return(i-s)*(e-a)>=(t-s)*(o-a)&&(t-s)*(n-a)>=(r-s)*(e-a)&&(r-s)*(o-a)>=(i-s)*(n-a)}function m(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&_(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(x(t,e)&&x(e,t)&&function(t,e){var r=t,n=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!==r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)&&(y(t.prev,t,e.prev)||y(t,e.prev,e))||g(t,e)&&y(t.prev,t,t.next)>0&&y(e.prev,e,e.next)>0)}function y(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function g(t,e){return t.x===e.x&&t.y===e.y}function _(t,e,r,n){var i=b(y(t,e,r)),o=b(y(t,e,n)),s=b(y(r,n,t)),a=b(y(r,n,e));return i!==o&&s!==a||(!(0!==i||!v(t,r,e))||(!(0!==o||!v(t,n,e))||(!(0!==s||!v(r,t,n))||!(0!==a||!v(r,e,n)))))}function v(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function b(t){return t>0?1:t<0?-1:0}function x(t,e){return y(t.prev,t,t.next)<0?y(t,e,t.next)>=0&&y(t,t.prev,e)>=0:y(t,e,t.prev)<0||y(t,t.next,e)<0}function T(t,e){var r=new E(t.i,t.x,t.y),n=new E(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function S(t,e,r,n){var i=new E(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function w(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function E(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function I(t,e,r,n){for(var i=0,o=e,s=r-n;o<r;o+=n)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}t.exports=e,t.exports.default=e,e.deviation=function(t,e,r,n){var i=e&&e.length,o=i?e[0]*r:t.length,s=Math.abs(I(t,0,o,r));if(i)for(var a=0,l=e.length;a<l;a++){var u=e[a]*r,h=a<l-1?e[a+1]*r:t.length;s-=Math.abs(I(t,u,h,r))}var c=0;for(a=0;a<n.length;a+=3){var d=n[a]*r,f=n[a+1]*r,p=n[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[p+1]-t[d+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},e.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[i][o][s]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r}},90:(t,e,r)=>{"use strict";var n=r(2)("%Object.defineProperty%",!0)||!1;if(n)try{n({},"a",{value:1})}catch(i){n=!1}t.exports=n},820:t=>{"use strict";t.exports=EvalError},304:t=>{"use strict";t.exports=Error},725:t=>{"use strict";t.exports=RangeError},77:t=>{"use strict";t.exports=ReferenceError},557:t=>{"use strict";t.exports=SyntaxError},902:t=>{"use strict";t.exports=TypeError},94:t=>{"use strict";t.exports=URIError},724:t=>{"use strict";var e=Object.prototype.toString,r=Math.max,n=function(t,e){for(var r=[],n=0;n<t.length;n+=1)r[n]=t[n];for(var i=0;i<e.length;i+=1)r[i+t.length]=e[i];return r};t.exports=function(t){var i=this;if("function"!==typeof i||"[object Function]"!==e.apply(i))throw new TypeError("Function.prototype.bind called on incompatible "+i);for(var o,s=function(t,e){for(var r=[],n=e||0,i=0;n<t.length;n+=1,i+=1)r[i]=t[n];return r}(arguments,1),a=r(0,i.length-s.length),l=[],u=0;u<a;u++)l[u]="$"+u;if(o=Function("binder","return function ("+function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r}(l,",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof o){var e=i.apply(this,n(s,arguments));return Object(e)===e?e:this}return i.apply(t,n(s,arguments))})),i.prototype){var h=function(){};h.prototype=i.prototype,o.prototype=new h,h.prototype=null}return o}},864:(t,e,r)=>{"use strict";var n=r(724);t.exports=Function.prototype.bind||n},2:(t,e,r)=>{"use strict";var n,i=r(304),o=r(820),s=r(725),a=r(77),l=r(557),u=r(902),h=r(94),c=Function,d=function(t){try{return c('"use strict"; return ('+t+").constructor;")()}catch(e){}},f=Object.getOwnPropertyDescriptor;if(f)try{f({},"")}catch(L){f=null}var p=function(){throw new u},m=f?function(){try{return p}catch(t){try{return f(arguments,"callee").get}catch(e){return p}}}():p,y=r(108)(),g=r(951)(),_=Object.getPrototypeOf||(g?function(t){return t.__proto__}:null),v={},b="undefined"!==typeof Uint8Array&&_?_(Uint8Array):n,x={__proto__:null,"%AggregateError%":"undefined"===typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":y&&_?_([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":v,"%AsyncGenerator%":v,"%AsyncGeneratorFunction%":v,"%AsyncIteratorPrototype%":v,"%Atomics%":"undefined"===typeof Atomics?n:Atomics,"%BigInt%":"undefined"===typeof BigInt?n:BigInt,"%BigInt64Array%":"undefined"===typeof BigInt64Array?n:BigInt64Array,"%BigUint64Array%":"undefined"===typeof BigUint64Array?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":i,"%eval%":eval,"%EvalError%":o,"%Float32Array%":"undefined"===typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":c,"%GeneratorFunction%":v,"%Int8Array%":"undefined"===typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":y&&_?_(_([][Symbol.iterator]())):n,"%JSON%":"object"===typeof JSON?JSON:n,"%Map%":"undefined"===typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&y&&_?_((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?n:Promise,"%Proxy%":"undefined"===typeof Proxy?n:Proxy,"%RangeError%":s,"%ReferenceError%":a,"%Reflect%":"undefined"===typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&y&&_?_((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":y&&_?_(""[Symbol.iterator]()):n,"%Symbol%":y?Symbol:n,"%SyntaxError%":l,"%ThrowTypeError%":m,"%TypedArray%":b,"%TypeError%":u,"%Uint8Array%":"undefined"===typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?n:Uint32Array,"%URIError%":h,"%WeakMap%":"undefined"===typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?n:WeakSet};if(_)try{null.error}catch(L){var T=_(_(L));x["%Error.prototype%"]=T}var S=function t(e){var r;if("%AsyncFunction%"===e)r=d("async function () {}");else if("%GeneratorFunction%"===e)r=d("function* () {}");else if("%AsyncGeneratorFunction%"===e)r=d("async function* () {}");else if("%AsyncGenerator%"===e){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===e){var i=t("%AsyncGenerator%");i&&_&&(r=_(i.prototype))}return x[e]=r,r},w={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},E=r(864),I=r(384),A=E.call(Function.call,Array.prototype.concat),M=E.call(Function.apply,Array.prototype.splice),P=E.call(Function.call,String.prototype.replace),O=E.call(Function.call,String.prototype.slice),R=E.call(Function.call,RegExp.prototype.exec),C=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,D=/\\(\\)?/g,F=function(t,e){var r,n=t;if(I(w,n)&&(n="%"+(r=w[n])[0]+"%"),I(x,n)){var i=x[n];if(i===v&&(i=S(n)),"undefined"===typeof i&&!e)throw new u("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new l("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!==typeof t||0===t.length)throw new u("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof e)throw new u('"allowMissing" argument must be a boolean');if(null===R(/^%?[^%]*%?$/,t))throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(t){var e=O(t,0,1),r=O(t,-1);if("%"===e&&"%"!==r)throw new l("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==e)throw new l("invalid intrinsic syntax, expected opening `%`");var n=[];return P(t,C,(function(t,e,r,i){n[n.length]=r?P(i,D,"$1"):e||t})),n}(t),n=r.length>0?r[0]:"",i=F("%"+n+"%",e),o=i.name,s=i.value,a=!1,h=i.alias;h&&(n=h[0],M(r,A([0,1],h)));for(var c=1,d=!0;c<r.length;c+=1){var p=r[c],m=O(p,0,1),y=O(p,-1);if(('"'===m||"'"===m||"`"===m||'"'===y||"'"===y||"`"===y)&&m!==y)throw new l("property names with quotes must have matching quotes");if("constructor"!==p&&d||(a=!0),I(x,o="%"+(n+="."+p)+"%"))s=x[o];else if(null!=s){if(!(p in s)){if(!e)throw new u("base intrinsic for "+t+" exists, but the property is not available.");return}if(f&&c+1>=r.length){var g=f(s,p);s=(d=!!g)&&"get"in g&&!("originalValue"in g.get)?g.get:s[p]}else d=I(s,p),s=s[p];d&&!a&&(x[o]=s)}}return s}},558:(t,e,r)=>{"use strict";var n=r(2)("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch(i){n=null}t.exports=n},101:(t,e,r)=>{"use strict";var n=r(90),i=function(){return!!n};i.hasArrayLengthDefineBug=function(){if(!n)return null;try{return 1!==n([],"length",{value:1}).length}catch(t){return!0}},t.exports=i},951:t=>{"use strict";var e={__proto__:null,foo:{}},r=Object;t.exports=function(){return{__proto__:e}.foo===e.foo&&!(e instanceof r)}},108:(t,e,r)=>{"use strict";var n="undefined"!==typeof Symbol&&Symbol,i=r(534);t.exports=function(){return"function"===typeof n&&("function"===typeof Symbol&&("symbol"===typeof n("foo")&&("symbol"===typeof Symbol("bar")&&i())))}},534:t=>{"use strict";t.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),r=Object(e);if("string"===typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(e in t[e]=42,t)return!1;if("function"===typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(t,e);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},384:(t,e,r)=>{"use strict";var n=Function.prototype.call,i=Object.prototype.hasOwnProperty,o=r(864);t.exports=o.call(n,i)},219:(t,e,r)=>{"use strict";var n=r(763),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(t){return n.isMemo(t)?s:a[t.$$typeof]||i}a[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[n.Memo]=s;var u=Object.defineProperty,h=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;t.exports=function t(e,r,n){if("string"!==typeof r){if(p){var i=f(r);i&&i!==p&&t(e,i,n)}var s=h(r);c&&(s=s.concat(c(r)));for(var a=l(e),m=l(r),y=0;y<s.length;++y){var g=s[y];if(!o[g]&&(!n||!n[g])&&(!m||!m[g])&&(!a||!a[g])){var _=d(r,g);try{u(e,g,_)}catch(v){}}}}return e}},983:(t,e)=>{"use strict";var r="function"===typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,o=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,a=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,h=r?Symbol.for("react.async_mode"):60111,c=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,f=r?Symbol.for("react.suspense"):60113,p=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,y=r?Symbol.for("react.lazy"):60116,g=r?Symbol.for("react.block"):60121,_=r?Symbol.for("react.fundamental"):60117,v=r?Symbol.for("react.responder"):60118,b=r?Symbol.for("react.scope"):60119;function x(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case n:switch(t=t.type){case h:case c:case o:case a:case s:case f:return t;default:switch(t=t&&t.$$typeof){case u:case d:case y:case m:case l:return t;default:return e}}case i:return e}}}function T(t){return x(t)===c}e.AsyncMode=h,e.ConcurrentMode=c,e.ContextConsumer=u,e.ContextProvider=l,e.Element=n,e.ForwardRef=d,e.Fragment=o,e.Lazy=y,e.Memo=m,e.Portal=i,e.Profiler=a,e.StrictMode=s,e.Suspense=f,e.isAsyncMode=function(t){return T(t)||x(t)===h},e.isConcurrentMode=T,e.isContextConsumer=function(t){return x(t)===u},e.isContextProvider=function(t){return x(t)===l},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===n},e.isForwardRef=function(t){return x(t)===d},e.isFragment=function(t){return x(t)===o},e.isLazy=function(t){return x(t)===y},e.isMemo=function(t){return x(t)===m},e.isPortal=function(t){return x(t)===i},e.isProfiler=function(t){return x(t)===a},e.isStrictMode=function(t){return x(t)===s},e.isSuspense=function(t){return x(t)===f},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===o||t===c||t===a||t===s||t===f||t===p||"object"===typeof t&&null!==t&&(t.$$typeof===y||t.$$typeof===m||t.$$typeof===l||t.$$typeof===u||t.$$typeof===d||t.$$typeof===_||t.$$typeof===v||t.$$typeof===b||t.$$typeof===g)},e.typeOf=x},763:(t,e,r)=>{"use strict";t.exports=r(983)},123:t=>{"use strict";var e=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(i){return!1}}()?Object.assign:function(t,i){for(var o,s,a=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),l=1;l<arguments.length;l++){for(var u in o=Object(arguments[l]))r.call(o,u)&&(a[u]=o[u]);if(e){s=e(o);for(var h=0;h<s.length;h++)n.call(o,s[h])&&(a[s[h]]=o[s[h]])}}return a}},206:(t,e,r)=>{var n="function"===typeof Map&&Map.prototype,i=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,o=n&&i&&"function"===typeof i.get?i.get:null,s=n&&Map.prototype.forEach,a="function"===typeof Set&&Set.prototype,l=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,u=a&&l&&"function"===typeof l.get?l.get:null,h=a&&Set.prototype.forEach,c="function"===typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,d="function"===typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,f="function"===typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,p=Boolean.prototype.valueOf,m=Object.prototype.toString,y=Function.prototype.toString,g=String.prototype.match,_=String.prototype.slice,v=String.prototype.replace,b=String.prototype.toUpperCase,x=String.prototype.toLowerCase,T=RegExp.prototype.test,S=Array.prototype.concat,w=Array.prototype.join,E=Array.prototype.slice,I=Math.floor,A="function"===typeof BigInt?BigInt.prototype.valueOf:null,M=Object.getOwnPropertySymbols,P="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?Symbol.prototype.toString:null,O="function"===typeof Symbol&&"object"===typeof Symbol.iterator,R="function"===typeof Symbol&&Symbol.toStringTag&&(typeof Symbol.toStringTag===O||"symbol")?Symbol.toStringTag:null,C=Object.prototype.propertyIsEnumerable,D=("function"===typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function F(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||T.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"===typeof t){var n=t<0?-I(-t):I(t);if(n!==t){var i=String(n),o=_.call(e,i.length+1);return v.call(i,r,"$&_")+"."+v.call(v.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return v.call(e,r,"$&_")}var L=r(634),N=L.custom,B=X(N)?N:null;function k(t,e,r){var n="double"===(r.quoteStyle||e)?'"':"'";return n+t+n}function U(t){return v.call(String(t),/"/g,"&quot;")}function G(t){return"[object Array]"===H(t)&&(!R||!("object"===typeof t&&R in t))}function j(t){return"[object RegExp]"===H(t)&&(!R||!("object"===typeof t&&R in t))}function X(t){if(O)return t&&"object"===typeof t&&t instanceof Symbol;if("symbol"===typeof t)return!0;if(!t||"object"!==typeof t||!P)return!1;try{return P.call(t),!0}catch(e){}return!1}t.exports=function t(e,n,i,a){var l=n||{};if(V(l,"quoteStyle")&&"single"!==l.quoteStyle&&"double"!==l.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(V(l,"maxStringLength")&&("number"===typeof l.maxStringLength?l.maxStringLength<0&&l.maxStringLength!==1/0:null!==l.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var m=!V(l,"customInspect")||l.customInspect;if("boolean"!==typeof m&&"symbol"!==m)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(V(l,"indent")&&null!==l.indent&&"\t"!==l.indent&&!(parseInt(l.indent,10)===l.indent&&l.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(V(l,"numericSeparator")&&"boolean"!==typeof l.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var b=l.numericSeparator;if("undefined"===typeof e)return"undefined";if(null===e)return"null";if("boolean"===typeof e)return e?"true":"false";if("string"===typeof e)return W(e,l);if("number"===typeof e){if(0===e)return 1/0/e>0?"0":"-0";var T=String(e);return b?F(e,T):T}if("bigint"===typeof e){var I=String(e)+"n";return b?F(e,I):I}var M="undefined"===typeof l.depth?5:l.depth;if("undefined"===typeof i&&(i=0),i>=M&&M>0&&"object"===typeof e)return G(e)?"[Array]":"[Object]";var N=function(t,e){var r;if("\t"===t.indent)r="\t";else{if(!("number"===typeof t.indent&&t.indent>0))return null;r=w.call(Array(t.indent+1)," ")}return{base:r,prev:w.call(Array(e+1),r)}}(l,i);if("undefined"===typeof a)a=[];else if(Y(a,e)>=0)return"[Circular]";function z(e,r,n){if(r&&(a=E.call(a)).push(r),n){var o={depth:l.depth};return V(l,"quoteStyle")&&(o.quoteStyle=l.quoteStyle),t(e,o,i+1,a)}return t(e,l,i+1,a)}if("function"===typeof e&&!j(e)){var q=function(t){if(t.name)return t.name;var e=g.call(y.call(t),/^function\s*([\w$]+)/);if(e)return e[1];return null}(e),tt=J(e,z);return"[Function"+(q?": "+q:" (anonymous)")+"]"+(tt.length>0?" { "+w.call(tt,", ")+" }":"")}if(X(e)){var et=O?v.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):P.call(e);return"object"!==typeof e||O?et:$(et)}if(function(t){if(!t||"object"!==typeof t)return!1;if("undefined"!==typeof HTMLElement&&t instanceof HTMLElement)return!0;return"string"===typeof t.nodeName&&"function"===typeof t.getAttribute}(e)){for(var rt="<"+x.call(String(e.nodeName)),nt=e.attributes||[],it=0;it<nt.length;it++)rt+=" "+nt[it].name+"="+k(U(nt[it].value),"double",l);return rt+=">",e.childNodes&&e.childNodes.length&&(rt+="..."),rt+="</"+x.call(String(e.nodeName))+">"}if(G(e)){if(0===e.length)return"[]";var ot=J(e,z);return N&&!function(t){for(var e=0;e<t.length;e++)if(Y(t[e],"\n")>=0)return!1;return!0}(ot)?"["+Z(ot,N)+"]":"[ "+w.call(ot,", ")+" ]"}if(function(t){return"[object Error]"===H(t)&&(!R||!("object"===typeof t&&R in t))}(e)){var st=J(e,z);return"cause"in Error.prototype||!("cause"in e)||C.call(e,"cause")?0===st.length?"["+String(e)+"]":"{ ["+String(e)+"] "+w.call(st,", ")+" }":"{ ["+String(e)+"] "+w.call(S.call("[cause]: "+z(e.cause),st),", ")+" }"}if("object"===typeof e&&m){if(B&&"function"===typeof e[B]&&L)return L(e,{depth:M-i});if("symbol"!==m&&"function"===typeof e.inspect)return e.inspect()}if(function(t){if(!o||!t||"object"!==typeof t)return!1;try{o.call(t);try{u.call(t)}catch(rt){return!0}return t instanceof Map}catch(e){}return!1}(e)){var at=[];return s&&s.call(e,(function(t,r){at.push(z(r,e,!0)+" => "+z(t,e))})),Q("Map",o.call(e),at,N)}if(function(t){if(!u||!t||"object"!==typeof t)return!1;try{u.call(t);try{o.call(t)}catch(e){return!0}return t instanceof Set}catch(r){}return!1}(e)){var lt=[];return h&&h.call(e,(function(t){lt.push(z(t,e))})),Q("Set",u.call(e),lt,N)}if(function(t){if(!c||!t||"object"!==typeof t)return!1;try{c.call(t,c);try{d.call(t,d)}catch(rt){return!0}return t instanceof WeakMap}catch(e){}return!1}(e))return K("WeakMap");if(function(t){if(!d||!t||"object"!==typeof t)return!1;try{d.call(t,d);try{c.call(t,c)}catch(rt){return!0}return t instanceof WeakSet}catch(e){}return!1}(e))return K("WeakSet");if(function(t){if(!f||!t||"object"!==typeof t)return!1;try{return f.call(t),!0}catch(e){}return!1}(e))return K("WeakRef");if(function(t){return"[object Number]"===H(t)&&(!R||!("object"===typeof t&&R in t))}(e))return $(z(Number(e)));if(function(t){if(!t||"object"!==typeof t||!A)return!1;try{return A.call(t),!0}catch(e){}return!1}(e))return $(z(A.call(e)));if(function(t){return"[object Boolean]"===H(t)&&(!R||!("object"===typeof t&&R in t))}(e))return $(p.call(e));if(function(t){return"[object String]"===H(t)&&(!R||!("object"===typeof t&&R in t))}(e))return $(z(String(e)));if("undefined"!==typeof window&&e===window)return"{ [object Window] }";if(e===r.g)return"{ [object globalThis] }";if(!function(t){return"[object Date]"===H(t)&&(!R||!("object"===typeof t&&R in t))}(e)&&!j(e)){var ut=J(e,z),ht=D?D(e)===Object.prototype:e instanceof Object||e.constructor===Object,ct=e instanceof Object?"":"null prototype",dt=!ht&&R&&Object(e)===e&&R in e?_.call(H(e),8,-1):ct?"Object":"",ft=(ht||"function"!==typeof e.constructor?"":e.constructor.name?e.constructor.name+" ":"")+(dt||ct?"["+w.call(S.call([],dt||[],ct||[]),": ")+"] ":"");return 0===ut.length?ft+"{}":N?ft+"{"+Z(ut,N)+"}":ft+"{ "+w.call(ut,", ")+" }"}return String(e)};var z=Object.prototype.hasOwnProperty||function(t){return t in this};function V(t,e){return z.call(t,e)}function H(t){return m.call(t)}function Y(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function W(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return W(_.call(t,0,e.maxStringLength),e)+n}return k(v.call(v.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,q),"single",e)}function q(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+b.call(e.toString(16))}function $(t){return"Object("+t+")"}function K(t){return t+" { ? }"}function Q(t,e,r,n){return t+" ("+e+") {"+(n?Z(r,n):w.call(r,", "))+"}"}function Z(t,e){if(0===t.length)return"";var r="\n"+e.prev+e.base;return r+w.call(t,","+r)+"\n"+e.prev}function J(t,e){var r=G(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=V(t,i)?e(t[i],t):""}var o,s="function"===typeof M?M(t):[];if(O){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in t)V(t,l)&&(r&&String(Number(l))===l&&l<t.length||O&&o["$"+l]instanceof Symbol||(T.call(/[^\w$]/,l)?n.push(e(l,t)+": "+e(t[l],t)):n.push(l+": "+e(t[l],t))));if("function"===typeof M)for(var u=0;u<s.length;u++)C.call(t,s[u])&&n.push("["+e(s[u])+"]: "+e(t[s[u]],t));return n}},730:(t,e,r)=>{"use strict";var n=r(43),i=r(853);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(t,e){u(t,e),u(t+"Capture",e)}function u(t,e){for(a[t]=e,t=0;t<e.length;t++)s.add(e[t])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(t,e,r,n,i,o,s){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){y[t]=new m(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];y[e]=new m(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){y[t]=new m(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){y[t]=new m(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){y[t]=new m(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){y[t]=new m(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){y[t]=new m(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){y[t]=new m(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){y[t]=new m(t,5,!1,t.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function _(t){return t[1].toUpperCase()}function v(t,e,r,n){var i=y.hasOwnProperty(e)?y[e]:null;(null!==i?0!==i.type:n||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,r,n){if(null===e||"undefined"===typeof e||function(t,e,r,n){if(null!==r&&0===r.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,r,i,n)&&(r=null),n||null===i?function(t){return!!c.call(p,t)||!c.call(f,t)&&(d.test(t)?p[t]=!0:(f[t]=!0,!1))}(e)&&(null===r?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=null===r?3!==i.type&&"":r:(e=i.attributeName,n=i.attributeNamespace,null===r?t.removeAttribute(e):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(g,_);y[e]=new m(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(g,_);y[e]=new m(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(g,_);y[e]=new m(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){y[t]=new m(t,1,!1,t.toLowerCase(),null,!1,!1)})),y.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){y[t]=new m(t,1,!1,t.toLowerCase(),null,!0,!0)}));var b=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),T=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),A=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),C=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var F=Symbol.iterator;function L(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=F&&t[F]||t["@@iterator"])?t:null}var N,B=Object.assign;function k(t){if(void 0===N)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);N=e&&e[1]||""}return"\n"+N+t}var U=!1;function G(t,e){if(!t||U)return"";U=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=n.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=s&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?k(t):""}function j(t){switch(t.tag){case 5:return k(t.type);case 16:return k("Lazy");case 13:return k("Suspense");case 19:return k("SuspenseList");case 0:case 2:case 15:return t=G(t.type,!1);case 11:return t=G(t.type.render,!1);case 1:return t=G(t.type,!0);default:return""}}function X(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case S:return"Fragment";case T:return"Portal";case E:return"Profiler";case w:return"StrictMode";case P:return"Suspense";case O:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case A:return(t.displayName||"Context")+".Consumer";case I:return(t._context.displayName||"Context")+".Provider";case M:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case R:return null!==(e=t.displayName||null)?e:X(t.type)||"Memo";case C:e=t._payload,t=t._init;try{return X(t(e))}catch(r){}}return null}function z(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return X(e);case 8:return e===w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function V(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function H(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Y(t){t._valueTracker||(t._valueTracker=function(t){var e=H(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var i=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){n=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(t){n=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function W(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=H(t)?t.checked?"true":"false":t.value),(t=n)!==r&&(e.setValue(t),!0)}function q(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function $(t,e){var r=e.checked;return B({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:t._wrapperState.initialChecked})}function K(t,e){var r=null==e.defaultValue?"":e.defaultValue,n=null!=e.checked?e.checked:e.defaultChecked;r=V(null!=e.value?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function Q(t,e){null!=(e=e.checked)&&v(t,"checked",e,!1)}function Z(t,e){Q(t,e);var r=V(e.value),n=e.type;if(null!=r)"number"===n?(0===r&&""===t.value||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if("submit"===n||"reset"===n)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,r):e.hasOwnProperty("defaultValue")&&tt(t,e.type,V(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function J(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!("submit"!==n&&"reset"!==n||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}""!==(r=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==r&&(t.name=r)}function tt(t,e,r){"number"===e&&q(t.ownerDocument)===t||(null==r?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var et=Array.isArray;function rt(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+V(r),e=null,i=0;i<t.length;i++){if(t[i].value===r)return t[i].selected=!0,void(n&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function nt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(o(91));return B({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function it(t,e){var r=e.value;if(null==r){if(r=e.children,e=e.defaultValue,null!=r){if(null!=e)throw Error(o(92));if(et(r)){if(1<r.length)throw Error(o(93));r=r[0]}e=r}null==e&&(e=""),r=e}t._wrapperState={initialValue:V(r)}}function ot(t,e){var r=V(e.value),n=V(e.defaultValue);null!=r&&((r=""+r)!==t.value&&(t.value=r),null==e.defaultValue&&t.defaultValue!==r&&(t.defaultValue=r)),null!=n&&(t.defaultValue=""+n)}function st(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function at(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?at(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ut,ht,ct=(ht=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ut=ut||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ut.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,r,n){MSApp.execUnsafeLocalFunction((function(){return ht(t,e)}))}:ht);function dt(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&3===r.nodeType)return void(r.nodeValue=e)}t.textContent=e}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pt=["Webkit","ms","Moz","O"];function mt(t,e,r){return null==e||"boolean"===typeof e||""===e?"":r||"number"!==typeof e||0===e||ft.hasOwnProperty(t)&&ft[t]?(""+e).trim():e+"px"}function yt(t,e){for(var r in t=t.style,e)if(e.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=mt(r,e[r],n);"float"===r&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}Object.keys(ft).forEach((function(t){pt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ft[e]=ft[t]}))}));var gt=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _t(t,e){if(e){if(gt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(o(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(o(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(o(62))}}function vt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bt=null;function xt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var Tt=null,St=null,wt=null;function Et(t){if(t=vi(t)){if("function"!==typeof Tt)throw Error(o(280));var e=t.stateNode;e&&(e=xi(e),Tt(t.stateNode,t.type,e))}}function It(t){St?wt?wt.push(t):wt=[t]:St=t}function At(){if(St){var t=St,e=wt;if(wt=St=null,Et(t),e)for(t=0;t<e.length;t++)Et(e[t])}}function Mt(t,e){return t(e)}function Pt(){}var Ot=!1;function Rt(t,e,r){if(Ot)return t(e,r);Ot=!0;try{return Mt(t,e,r)}finally{Ot=!1,(null!==St||null!==wt)&&(Pt(),At())}}function Ct(t,e){var r=t.stateNode;if(null===r)return null;var n=xi(r);if(null===n)return null;r=n[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!n;break t;default:t=!1}if(t)return null;if(r&&"function"!==typeof r)throw Error(o(231,e,typeof r));return r}var Dt=!1;if(h)try{var Ft={};Object.defineProperty(Ft,"passive",{get:function(){Dt=!0}}),window.addEventListener("test",Ft,Ft),window.removeEventListener("test",Ft,Ft)}catch(ht){Dt=!1}function Lt(t,e,r,n,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(h){this.onError(h)}}var Nt=!1,Bt=null,kt=!1,Ut=null,Gt={onError:function(t){Nt=!0,Bt=t}};function jt(t,e,r,n,i,o,s,a,l){Nt=!1,Bt=null,Lt.apply(Gt,arguments)}function Xt(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(r=e.return),t=e.return}while(t)}return 3===e.tag?r:null}function zt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Vt(t){if(Xt(t)!==t)throw Error(o(188))}function Ht(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=Xt(t)))throw Error(o(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(n=i.return)){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return Vt(i),t;if(s===n)return Vt(i),e;s=s.sibling}throw Error(o(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,l=i.child;l;){if(l===r){a=!0,r=i,n=s;break}if(l===n){a=!0,n=i,r=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===r){a=!0,r=s,n=i;break}if(l===n){a=!0,n=s,r=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(r.alternate!==n)throw Error(o(190))}if(3!==r.tag)throw Error(o(188));return r.stateNode.current===r?t:e}(t))?Yt(t):null}function Yt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Yt(t);if(null!==e)return e;t=t.sibling}return null}var Wt=i.unstable_scheduleCallback,qt=i.unstable_cancelCallback,$t=i.unstable_shouldYield,Kt=i.unstable_requestPaint,Qt=i.unstable_now,Zt=i.unstable_getCurrentPriorityLevel,Jt=i.unstable_ImmediatePriority,te=i.unstable_UserBlockingPriority,ee=i.unstable_NormalPriority,re=i.unstable_LowPriority,ne=i.unstable_IdlePriority,ie=null,oe=null;var se=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(ae(t)/le|0)|0},ae=Math.log,le=Math.LN2;var ue=64,he=4194304;function ce(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function de(t,e){var r=t.pendingLanes;if(0===r)return 0;var n=0,i=t.suspendedLanes,o=t.pingedLanes,s=268435455&r;if(0!==s){var a=s&~i;0!==a?n=ce(a):0!==(o&=s)&&(n=ce(o))}else 0!==(s=r&~i)?n=ce(s):0!==o&&(n=ce(o));if(0===n)return 0;if(0!==e&&e!==n&&0===(e&i)&&((i=n&-n)>=(o=e&-e)||16===i&&0!==(4194240&o)))return e;if(0!==(4&n)&&(n|=16&r),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=n;0<e;)i=1<<(r=31-se(e)),n|=t[r],e&=~i;return n}function fe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function pe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function me(){var t=ue;return 0===(4194240&(ue<<=1))&&(ue=64),t}function ye(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function ge(t,e,r){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-se(e)]=r}function _e(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-se(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var ve=0;function be(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var xe,Te,Se,we,Ee,Ie=!1,Ae=[],Me=null,Pe=null,Oe=null,Re=new Map,Ce=new Map,De=[],Fe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Le(t,e){switch(t){case"focusin":case"focusout":Me=null;break;case"dragenter":case"dragleave":Pe=null;break;case"mouseover":case"mouseout":Oe=null;break;case"pointerover":case"pointerout":Re.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ce.delete(e.pointerId)}}function Ne(t,e,r,n,i,o){return null===t||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},null!==e&&(null!==(e=vi(e))&&Te(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function Be(t){var e=_i(t.target);if(null!==e){var r=Xt(e);if(null!==r)if(13===(e=r.tag)){if(null!==(e=zt(r)))return t.blockedOn=e,void Ee(t.priority,(function(){Se(r)}))}else if(3===e&&r.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}t.blockedOn=null}function ke(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var r=$e(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==r)return null!==(e=vi(r))&&Te(e),t.blockedOn=r,!1;var n=new(r=t.nativeEvent).constructor(r.type,r);bt=n,r.target.dispatchEvent(n),bt=null,e.shift()}return!0}function Ue(t,e,r){ke(t)&&r.delete(e)}function Ge(){Ie=!1,null!==Me&&ke(Me)&&(Me=null),null!==Pe&&ke(Pe)&&(Pe=null),null!==Oe&&ke(Oe)&&(Oe=null),Re.forEach(Ue),Ce.forEach(Ue)}function je(t,e){t.blockedOn===e&&(t.blockedOn=null,Ie||(Ie=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ge)))}function Xe(t){function e(e){return je(e,t)}if(0<Ae.length){je(Ae[0],t);for(var r=1;r<Ae.length;r++){var n=Ae[r];n.blockedOn===t&&(n.blockedOn=null)}}for(null!==Me&&je(Me,t),null!==Pe&&je(Pe,t),null!==Oe&&je(Oe,t),Re.forEach(e),Ce.forEach(e),r=0;r<De.length;r++)(n=De[r]).blockedOn===t&&(n.blockedOn=null);for(;0<De.length&&null===(r=De[0]).blockedOn;)Be(r),null===r.blockedOn&&De.shift()}var ze=b.ReactCurrentBatchConfig,Ve=!0;function He(t,e,r,n){var i=ve,o=ze.transition;ze.transition=null;try{ve=1,We(t,e,r,n)}finally{ve=i,ze.transition=o}}function Ye(t,e,r,n){var i=ve,o=ze.transition;ze.transition=null;try{ve=4,We(t,e,r,n)}finally{ve=i,ze.transition=o}}function We(t,e,r,n){if(Ve){var i=$e(t,e,r,n);if(null===i)Vn(t,e,n,qe,r),Le(t,n);else if(function(t,e,r,n,i){switch(e){case"focusin":return Me=Ne(Me,t,e,r,n,i),!0;case"dragenter":return Pe=Ne(Pe,t,e,r,n,i),!0;case"mouseover":return Oe=Ne(Oe,t,e,r,n,i),!0;case"pointerover":var o=i.pointerId;return Re.set(o,Ne(Re.get(o)||null,t,e,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,Ce.set(o,Ne(Ce.get(o)||null,t,e,r,n,i)),!0}return!1}(i,t,e,r,n))n.stopPropagation();else if(Le(t,n),4&e&&-1<Fe.indexOf(t)){for(;null!==i;){var o=vi(i);if(null!==o&&xe(o),null===(o=$e(t,e,r,n))&&Vn(t,e,n,qe,r),o===i)break;i=o}null!==i&&n.stopPropagation()}else Vn(t,e,n,null,r)}}var qe=null;function $e(t,e,r,n){if(qe=null,null!==(t=_i(t=xt(n))))if(null===(e=Xt(t)))t=null;else if(13===(r=e.tag)){if(null!==(t=zt(e)))return t;t=null}else if(3===r){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return qe=t,null}function Ke(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zt()){case Jt:return 1;case te:return 4;case ee:case re:return 16;case ne:return 536870912;default:return 16}default:return 16}}var Qe=null,Ze=null,Je=null;function tr(){if(Je)return Je;var t,e,r=Ze,n=r.length,i="value"in Qe?Qe.value:Qe.textContent,o=i.length;for(t=0;t<n&&r[t]===i[t];t++);var s=n-t;for(e=1;e<=s&&r[n-e]===i[o-e];e++);return Je=i.slice(t,1<e?1-e:void 0)}function er(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function rr(){return!0}function nr(){return!1}function ir(t){function e(e,r,n,i,o){for(var s in this._reactName=e,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(s)&&(e=t[s],this[s]=e?e(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return B(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),e}var or,sr,ar,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ur=ir(lr),hr=B({},lr,{view:0,detail:0}),cr=ir(hr),dr=B({},hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wr,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ar&&(ar&&"mousemove"===t.type?(or=t.screenX-ar.screenX,sr=t.screenY-ar.screenY):sr=or=0,ar=t),or)},movementY:function(t){return"movementY"in t?t.movementY:sr}}),fr=ir(dr),pr=ir(B({},dr,{dataTransfer:0})),mr=ir(B({},hr,{relatedTarget:0})),yr=ir(B({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),gr=B({},lr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_r=ir(gr),vr=ir(B({},lr,{data:0})),br={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sr(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Tr[t])&&!!e[t]}function wr(){return Sr}var Er=B({},hr,{key:function(t){if(t.key){var e=br[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=er(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?xr[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wr,charCode:function(t){return"keypress"===t.type?er(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?er(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Ir=ir(Er),Ar=ir(B({},dr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mr=ir(B({},hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wr})),Pr=ir(B({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Or=B({},dr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Rr=ir(Or),Cr=[9,13,27,32],Dr=h&&"CompositionEvent"in window,Fr=null;h&&"documentMode"in document&&(Fr=document.documentMode);var Lr=h&&"TextEvent"in window&&!Fr,Nr=h&&(!Dr||Fr&&8<Fr&&11>=Fr),Br=String.fromCharCode(32),kr=!1;function Ur(t,e){switch(t){case"keyup":return-1!==Cr.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gr(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var jr=!1;var Xr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Xr[t.type]:"textarea"===e}function Vr(t,e,r,n){It(n),0<(e=Yn(e,"onChange")).length&&(r=new ur("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Hr=null,Yr=null;function Wr(t){kn(t,0)}function qr(t){if(W(bi(t)))return t}function $r(t,e){if("change"===t)return e}var Kr=!1;if(h){var Qr;if(h){var Zr="oninput"in document;if(!Zr){var Jr=document.createElement("div");Jr.setAttribute("oninput","return;"),Zr="function"===typeof Jr.oninput}Qr=Zr}else Qr=!1;Kr=Qr&&(!document.documentMode||9<document.documentMode)}function tn(){Hr&&(Hr.detachEvent("onpropertychange",en),Yr=Hr=null)}function en(t){if("value"===t.propertyName&&qr(Yr)){var e=[];Vr(e,Yr,t,xt(t)),Rt(Wr,e)}}function rn(t,e,r){"focusin"===t?(tn(),Yr=r,(Hr=e).attachEvent("onpropertychange",en)):"focusout"===t&&tn()}function nn(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return qr(Yr)}function on(t,e){if("click"===t)return qr(e)}function sn(t,e){if("input"===t||"change"===t)return qr(e)}var an="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function ln(t,e){if(an(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!c.call(e,i)||!an(t[i],e[i]))return!1}return!0}function un(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hn(t,e){var r,n=un(t);for(t=0;n;){if(3===n.nodeType){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}t:{for(;n;){if(n.nextSibling){n=n.nextSibling;break t}n=n.parentNode}n=void 0}n=un(n)}}function cn(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?cn(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function dn(){for(var t=window,e=q();e instanceof t.HTMLIFrameElement;){try{var r="string"===typeof e.contentWindow.location.href}catch(n){r=!1}if(!r)break;e=q((t=e.contentWindow).document)}return e}function fn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function pn(t){var e=dn(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&cn(r.ownerDocument.documentElement,r)){if(null!==n&&fn(r))if(e=n.start,void 0===(t=n.end)&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if((t=(e=r.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=void 0===n.end?o:Math.min(n.end,i),!t.extend&&o>n&&(i=n,n=o,o=i),i=hn(r,o);var s=hn(r,n);i&&s&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}for(e=[],t=r;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<e.length;r++)(t=e[r]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mn=h&&"documentMode"in document&&11>=document.documentMode,yn=null,gn=null,_n=null,vn=!1;function bn(t,e,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;vn||null==yn||yn!==q(n)||("selectionStart"in(n=yn)&&fn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},_n&&ln(_n,n)||(_n=n,0<(n=Yn(gn,"onSelect")).length&&(e=new ur("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=yn)))}function xn(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Tn={animationend:xn("Animation","AnimationEnd"),animationiteration:xn("Animation","AnimationIteration"),animationstart:xn("Animation","AnimationStart"),transitionend:xn("Transition","TransitionEnd")},Sn={},wn={};function En(t){if(Sn[t])return Sn[t];if(!Tn[t])return t;var e,r=Tn[t];for(e in r)if(r.hasOwnProperty(e)&&e in wn)return Sn[t]=r[e];return t}h&&(wn=document.createElement("div").style,"AnimationEvent"in window||(delete Tn.animationend.animation,delete Tn.animationiteration.animation,delete Tn.animationstart.animation),"TransitionEvent"in window||delete Tn.transitionend.transition);var In=En("animationend"),An=En("animationiteration"),Mn=En("animationstart"),Pn=En("transitionend"),On=new Map,Rn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cn(t,e){On.set(t,e),l(e,[t])}for(var Dn=0;Dn<Rn.length;Dn++){var Fn=Rn[Dn];Cn(Fn.toLowerCase(),"on"+(Fn[0].toUpperCase()+Fn.slice(1)))}Cn(In,"onAnimationEnd"),Cn(An,"onAnimationIteration"),Cn(Mn,"onAnimationStart"),Cn("dblclick","onDoubleClick"),Cn("focusin","onFocus"),Cn("focusout","onBlur"),Cn(Pn,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ln="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ln));function Bn(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,function(t,e,r,n,i,s,a,l,u){if(jt.apply(this,arguments),Nt){if(!Nt)throw Error(o(198));var h=Bt;Nt=!1,Bt=null,kt||(kt=!0,Ut=h)}}(n,e,void 0,t),t.currentTarget=null}function kn(t,e){e=0!==(4&e);for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;t:{var o=void 0;if(e)for(var s=n.length-1;0<=s;s--){var a=n[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break t;Bn(i,a,u),o=l}else for(s=0;s<n.length;s++){if(l=(a=n[s]).instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break t;Bn(i,a,u),o=l}}}if(kt)throw t=Ut,kt=!1,Ut=null,t}function Un(t,e){var r=e[mi];void 0===r&&(r=e[mi]=new Set);var n=t+"__bubble";r.has(n)||(zn(e,t,2,!1),r.add(n))}function Gn(t,e,r){var n=0;e&&(n|=4),zn(r,t,n,e)}var jn="_reactListening"+Math.random().toString(36).slice(2);function Xn(t){if(!t[jn]){t[jn]=!0,s.forEach((function(e){"selectionchange"!==e&&(Nn.has(e)||Gn(e,!1,t),Gn(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[jn]||(e[jn]=!0,Gn("selectionchange",!1,e))}}function zn(t,e,r,n){switch(Ke(e)){case 1:var i=He;break;case 4:i=Ye;break;default:i=We}r=i.bind(null,e,r,t),i=void 0,!Dt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),n?void 0!==i?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):void 0!==i?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Vn(t,e,r,n,i){var o=n;if(0===(1&e)&&0===(2&e)&&null!==n)t:for(;;){if(null===n)return;var s=n.tag;if(3===s||4===s){var a=n.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=n.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=_i(a)))return;if(5===(l=s.tag)||6===l){n=o=s;continue t}a=a.parentNode}}n=n.return}Rt((function(){var n=o,i=xt(r),s=[];t:{var a=On.get(t);if(void 0!==a){var l=ur,u=t;switch(t){case"keypress":if(0===er(r))break t;case"keydown":case"keyup":l=Ir;break;case"focusin":u="focus",l=mr;break;case"focusout":u="blur",l=mr;break;case"beforeblur":case"afterblur":l=mr;break;case"click":if(2===r.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Mr;break;case In:case An:case Mn:l=yr;break;case Pn:l=Pr;break;case"scroll":l=cr;break;case"wheel":l=Rr;break;case"copy":case"cut":case"paste":l=_r;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ar}var h=0!==(4&e),c=!h&&"scroll"===t,d=h?null!==a?a+"Capture":null:a;h=[];for(var f,p=n;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Ct(p,d))&&h.push(Hn(p,m,f)))),c)break;p=p.return}0<h.length&&(a=new l(a,u,null,r,i),s.push({event:a,listeners:h}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||r===bt||!(u=r.relatedTarget||r.fromElement)||!_i(u)&&!u[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=n,null!==(u=(u=r.relatedTarget||r.toElement)?_i(u):null)&&(u!==(c=Xt(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=n),l!==u)){if(h=fr,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==t&&"pointerover"!==t||(h=Ar,m="onPointerLeave",d="onPointerEnter",p="pointer"),c=null==l?a:bi(l),f=null==u?a:bi(u),(a=new h(m,p+"leave",l,r,i)).target=c,a.relatedTarget=f,m=null,_i(i)===n&&((h=new h(d,p+"enter",u,r,i)).target=f,h.relatedTarget=c,m=h),c=m,l&&u)t:{for(d=u,p=0,f=h=l;f;f=Wn(f))p++;for(f=0,m=d;m;m=Wn(m))f++;for(;0<p-f;)h=Wn(h),p--;for(;0<f-p;)d=Wn(d),f--;for(;p--;){if(h===d||null!==d&&h===d.alternate)break t;h=Wn(h),d=Wn(d)}h=null}else h=null;null!==l&&qn(s,a,l,h,!1),null!==u&&null!==c&&qn(s,c,u,h,!0)}if("select"===(l=(a=n?bi(n):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var y=$r;else if(zr(a))if(Kr)y=sn;else{y=nn;var g=rn}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(y=on);switch(y&&(y=y(t,n))?Vr(s,y,r,i):(g&&g(t,a,n),"focusout"===t&&(g=a._wrapperState)&&g.controlled&&"number"===a.type&&tt(a,"number",a.value)),g=n?bi(n):window,t){case"focusin":(zr(g)||"true"===g.contentEditable)&&(yn=g,gn=n,_n=null);break;case"focusout":_n=gn=yn=null;break;case"mousedown":vn=!0;break;case"contextmenu":case"mouseup":case"dragend":vn=!1,bn(s,r,i);break;case"selectionchange":if(mn)break;case"keydown":case"keyup":bn(s,r,i)}var _;if(Dr)t:{switch(t){case"compositionstart":var v="onCompositionStart";break t;case"compositionend":v="onCompositionEnd";break t;case"compositionupdate":v="onCompositionUpdate";break t}v=void 0}else jr?Ur(t,r)&&(v="onCompositionEnd"):"keydown"===t&&229===r.keyCode&&(v="onCompositionStart");v&&(Nr&&"ko"!==r.locale&&(jr||"onCompositionStart"!==v?"onCompositionEnd"===v&&jr&&(_=tr()):(Ze="value"in(Qe=i)?Qe.value:Qe.textContent,jr=!0)),0<(g=Yn(n,v)).length&&(v=new vr(v,t,null,r,i),s.push({event:v,listeners:g}),_?v.data=_:null!==(_=Gr(r))&&(v.data=_))),(_=Lr?function(t,e){switch(t){case"compositionend":return Gr(e);case"keypress":return 32!==e.which?null:(kr=!0,Br);case"textInput":return(t=e.data)===Br&&kr?null:t;default:return null}}(t,r):function(t,e){if(jr)return"compositionend"===t||!Dr&&Ur(t,e)?(t=tr(),Je=Ze=Qe=null,jr=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Nr&&"ko"!==e.locale?null:e.data}}(t,r))&&(0<(n=Yn(n,"onBeforeInput")).length&&(i=new vr("onBeforeInput","beforeinput",null,r,i),s.push({event:i,listeners:n}),i.data=_))}kn(s,e)}))}function Hn(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Yn(t,e){for(var r=e+"Capture",n=[];null!==t;){var i=t,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Ct(t,r))&&n.unshift(Hn(t,o,i)),null!=(o=Ct(t,e))&&n.push(Hn(t,o,i))),t=t.return}return n}function Wn(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function qn(t,e,r,n,i){for(var o=e._reactName,s=[];null!==r&&r!==n;){var a=r,l=a.alternate,u=a.stateNode;if(null!==l&&l===n)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Ct(r,o))&&s.unshift(Hn(r,l,a)):i||null!=(l=Ct(r,o))&&s.push(Hn(r,l,a))),r=r.return}0!==s.length&&t.push({event:e,listeners:s})}var $n=/\r\n?/g,Kn=/\u0000|\uFFFD/g;function Qn(t){return("string"===typeof t?t:""+t).replace($n,"\n").replace(Kn,"")}function Zn(t,e,r){if(e=Qn(e),Qn(t)!==e&&r)throw Error(o(425))}function Jn(){}var ti=null,ei=null;function ri(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ni="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(t){return oi.resolve(null).then(t).catch(ai)}:ni;function ai(t){setTimeout((function(){throw t}))}function li(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&8===i.nodeType)if("/$"===(r=i.data)){if(0===n)return t.removeChild(i),void Xe(e);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=i}while(r);Xe(e)}function ui(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function hi(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var r=t.data;if("$"===r||"$!"===r||"$?"===r){if(0===e)return t;e--}else"/$"===r&&e++}t=t.previousSibling}return null}var ci=Math.random().toString(36).slice(2),di="__reactFiber$"+ci,fi="__reactProps$"+ci,pi="__reactContainer$"+ci,mi="__reactEvents$"+ci,yi="__reactListeners$"+ci,gi="__reactHandles$"+ci;function _i(t){var e=t[di];if(e)return e;for(var r=t.parentNode;r;){if(e=r[pi]||r[di]){if(r=e.alternate,null!==e.child||null!==r&&null!==r.child)for(t=hi(t);null!==t;){if(r=t[di])return r;t=hi(t)}return e}r=(t=r).parentNode}return null}function vi(t){return!(t=t[di]||t[pi])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function bi(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(o(33))}function xi(t){return t[fi]||null}var Ti=[],Si=-1;function wi(t){return{current:t}}function Ei(t){0>Si||(t.current=Ti[Si],Ti[Si]=null,Si--)}function Ii(t,e){Si++,Ti[Si]=t.current,t.current=e}var Ai={},Mi=wi(Ai),Pi=wi(!1),Oi=Ai;function Ri(t,e){var r=t.type.contextTypes;if(!r)return Ai;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in r)o[i]=e[i];return n&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Ci(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Di(){Ei(Pi),Ei(Mi)}function Fi(t,e,r){if(Mi.current!==Ai)throw Error(o(168));Ii(Mi,e),Ii(Pi,r)}function Li(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var i in n=n.getChildContext())if(!(i in e))throw Error(o(108,z(t)||"Unknown",i));return B({},r,n)}function Ni(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ai,Oi=Mi.current,Ii(Mi,t),Ii(Pi,Pi.current),!0}function Bi(t,e,r){var n=t.stateNode;if(!n)throw Error(o(169));r?(t=Li(t,e,Oi),n.__reactInternalMemoizedMergedChildContext=t,Ei(Pi),Ei(Mi),Ii(Mi,t)):Ei(Pi),Ii(Pi,r)}var ki=null,Ui=!1,Gi=!1;function ji(t){null===ki?ki=[t]:ki.push(t)}function Xi(){if(!Gi&&null!==ki){Gi=!0;var t=0,e=ve;try{var r=ki;for(ve=1;t<r.length;t++){var n=r[t];do{n=n(!0)}while(null!==n)}ki=null,Ui=!1}catch(i){throw null!==ki&&(ki=ki.slice(t+1)),Wt(Jt,Xi),i}finally{ve=e,Gi=!1}}return null}var zi=[],Vi=0,Hi=null,Yi=0,Wi=[],qi=0,$i=null,Ki=1,Qi="";function Zi(t,e){zi[Vi++]=Yi,zi[Vi++]=Hi,Hi=t,Yi=e}function Ji(t,e,r){Wi[qi++]=Ki,Wi[qi++]=Qi,Wi[qi++]=$i,$i=t;var n=Ki;t=Qi;var i=32-se(n)-1;n&=~(1<<i),r+=1;var o=32-se(e)+i;if(30<o){var s=i-i%5;o=(n&(1<<s)-1).toString(32),n>>=s,i-=s,Ki=1<<32-se(e)+i|r<<i|n,Qi=o+t}else Ki=1<<o|r<<i|n,Qi=t}function to(t){null!==t.return&&(Zi(t,1),Ji(t,1,0))}function eo(t){for(;t===Hi;)Hi=zi[--Vi],zi[Vi]=null,Yi=zi[--Vi],zi[Vi]=null;for(;t===$i;)$i=Wi[--qi],Wi[qi]=null,Qi=Wi[--qi],Wi[qi]=null,Ki=Wi[--qi],Wi[qi]=null}var ro=null,no=null,io=!1,oo=null;function so(t,e){var r=Cu(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,null===(e=t.deletions)?(t.deletions=[r],t.flags|=16):e.push(r)}function ao(t,e){switch(t.tag){case 5:var r=t.type;return null!==(e=1!==e.nodeType||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,ro=t,no=ui(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,ro=t,no=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(r=null!==$i?{id:Ki,overflow:Qi}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},(r=Cu(18,null,null,0)).stateNode=e,r.return=t,t.child=r,ro=t,no=null,!0);default:return!1}}function lo(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function uo(t){if(io){var e=no;if(e){var r=e;if(!ao(t,e)){if(lo(t))throw Error(o(418));e=ui(r.nextSibling);var n=ro;e&&ao(t,e)?so(n,r):(t.flags=-4097&t.flags|2,io=!1,ro=t)}}else{if(lo(t))throw Error(o(418));t.flags=-4097&t.flags|2,io=!1,ro=t}}}function ho(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;ro=t}function co(t){if(t!==ro)return!1;if(!io)return ho(t),io=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!ri(t.type,t.memoizedProps)),e&&(e=no)){if(lo(t))throw fo(),Error(o(418));for(;e;)so(t,e),e=ui(e.nextSibling)}if(ho(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(o(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var r=t.data;if("/$"===r){if(0===e){no=ui(t.nextSibling);break t}e--}else"$"!==r&&"$!"!==r&&"$?"!==r||e++}t=t.nextSibling}no=null}}else no=ro?ui(t.stateNode.nextSibling):null;return!0}function fo(){for(var t=no;t;)t=ui(t.nextSibling)}function po(){no=ro=null,io=!1}function mo(t){null===oo?oo=[t]:oo.push(t)}var yo=b.ReactCurrentBatchConfig;function go(t,e){if(t&&t.defaultProps){for(var r in e=B({},e),t=t.defaultProps)void 0===e[r]&&(e[r]=t[r]);return e}return e}var _o=wi(null),vo=null,bo=null,xo=null;function To(){xo=bo=vo=null}function So(t){var e=_o.current;Ei(_o),t._currentValue=e}function wo(t,e,r){for(;null!==t;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==n&&(n.childLanes|=e)):null!==n&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Eo(t,e){vo=t,xo=bo=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(ba=!0),t.firstContext=null)}function Io(t){var e=t._currentValue;if(xo!==t)if(t={context:t,memoizedValue:e,next:null},null===bo){if(null===vo)throw Error(o(308));bo=t,vo.dependencies={lanes:0,firstContext:t}}else bo=bo.next=t;return e}var Ao=null;function Mo(t){null===Ao?Ao=[t]:Ao.push(t)}function Po(t,e,r,n){var i=e.interleaved;return null===i?(r.next=r,Mo(e)):(r.next=i.next,i.next=r),e.interleaved=r,Oo(t,n)}function Oo(t,e){t.lanes|=e;var r=t.alternate;for(null!==r&&(r.lanes|=e),r=t,t=t.return;null!==t;)t.childLanes|=e,null!==(r=t.alternate)&&(r.childLanes|=e),r=t,t=t.return;return 3===r.tag?r.stateNode:null}var Ro=!1;function Co(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Do(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lo(t,e,r){var n=t.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Pl)){var i=n.pending;return null===i?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Oo(t,r)}return null===(i=n.interleaved)?(e.next=e,Mo(n)):(e.next=i.next,i.next=e),n.interleaved=e,Oo(t,r)}function No(t,e,r){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&r))){var n=e.lanes;r|=n&=t.pendingLanes,e.lanes=r,_e(t,r)}}function Bo(t,e){var r=t.updateQueue,n=t.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,o=null;if(null!==(r=r.firstBaseUpdate)){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===o?i=o=s:o=o.next=s,r=r.next}while(null!==r);null===o?i=o=e:o=o.next=e}else i=o=e;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},void(t.updateQueue=r)}null===(t=r.lastBaseUpdate)?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function ko(t,e,r,n){var i=t.updateQueue;Ro=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===s?o=u:s.next=u,s=l;var h=t.alternate;null!==h&&((a=(h=h.updateQueue).lastBaseUpdate)!==s&&(null===a?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(null!==o){var c=i.baseState;for(s=0,h=u=l=null,a=o;;){var d=a.lane,f=a.eventTime;if((n&d)===d){null!==h&&(h=h.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var p=t,m=a;switch(d=e,f=r,m.tag){case 1:if("function"===typeof(p=m.payload)){c=p.call(f,c,d);break t}c=p;break t;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,c,d):p)||void 0===d)break t;c=B({},c,d);break t;case 2:Ro=!0}}null!==a.callback&&0!==a.lane&&(t.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(u=h=f,l=c):h=h.next=f,s|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===h&&(l=c),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,null!==(e=i.shared.interleaved)){i=e;do{s|=i.lane,i=i.next}while(i!==e)}else null===o&&(i.shared.lanes=0);Bl|=s,t.lanes=s,t.memoizedState=c}}function Uo(t,e,r){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(null!==i){if(n.callback=null,n=r,"function"!==typeof i)throw Error(o(191,i));i.call(n)}}}var Go=(new n.Component).refs;function jo(t,e,r,n){r=null===(r=r(n,e=t.memoizedState))||void 0===r?e:B({},e,r),t.memoizedState=r,0===t.lanes&&(t.updateQueue.baseState=r)}var Xo={isMounted:function(t){return!!(t=t._reactInternals)&&Xt(t)===t},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=eu(),i=ru(t),o=Fo(n,i);o.payload=e,void 0!==r&&null!==r&&(o.callback=r),null!==(e=Lo(t,o,i))&&(nu(e,t,i,n),No(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=eu(),i=ru(t),o=Fo(n,i);o.tag=1,o.payload=e,void 0!==r&&null!==r&&(o.callback=r),null!==(e=Lo(t,o,i))&&(nu(e,t,i,n),No(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=eu(),n=ru(t),i=Fo(r,n);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),null!==(e=Lo(t,i,n))&&(nu(e,t,n,r),No(e,t,n))}};function zo(t,e,r,n,i,o,s){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(n,o,s):!e.prototype||!e.prototype.isPureReactComponent||(!ln(r,n)||!ln(i,o))}function Vo(t,e,r){var n=!1,i=Ai,o=e.contextType;return"object"===typeof o&&null!==o?o=Io(o):(i=Ci(e)?Oi:Mi.current,o=(n=null!==(n=e.contextTypes)&&void 0!==n)?Ri(t,i):Ai),e=new e(r,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=Xo,t.stateNode=e,e._reactInternals=t,n&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Ho(t,e,r,n){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(r,n),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Xo.enqueueReplaceState(e,e.state,null)}function Yo(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=Go,Co(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=Io(o):(o=Ci(e)?Oi:Mi.current,i.context=Ri(t,o)),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(jo(t,e,o,r),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&Xo.enqueueReplaceState(i,i.state,null),ko(t,r,i,n),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308)}function Wo(t,e,r){if(null!==(t=r.ref)&&"function"!==typeof t&&"object"!==typeof t){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(o(309));var n=r.stateNode}if(!n)throw Error(o(147,t));var i=n,s=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===s?e.ref:(e=function(t){var e=i.refs;e===Go&&(e=i.refs={}),null===t?delete e[s]:e[s]=t},e._stringRef=s,e)}if("string"!==typeof t)throw Error(o(284));if(!r._owner)throw Error(o(290,t))}return t}function qo(t,e){throw t=Object.prototype.toString.call(e),Error(o(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $o(t){return(0,t._init)(t._payload)}function Ko(t){function e(e,r){if(t){var n=e.deletions;null===n?(e.deletions=[r],e.flags|=16):n.push(r)}}function r(r,n){if(!t)return null;for(;null!==n;)e(r,n),n=n.sibling;return null}function n(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Fu(t,e)).index=0,t.sibling=null,t}function s(e,r,n){return e.index=n,t?null!==(n=e.alternate)?(n=n.index)<r?(e.flags|=2,r):n:(e.flags|=2,r):(e.flags|=1048576,r)}function a(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,r,n){return null===e||6!==e.tag?((e=ku(r,t.mode,n)).return=t,e):((e=i(e,r)).return=t,e)}function u(t,e,r,n){var o=r.type;return o===S?c(t,e,r.props.children,n,r.key):null!==e&&(e.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===C&&$o(o)===e.type)?((n=i(e,r.props)).ref=Wo(t,e,r),n.return=t,n):((n=Lu(r.type,r.key,r.props,null,t.mode,n)).ref=Wo(t,e,r),n.return=t,n)}function h(t,e,r,n){return null===e||4!==e.tag||e.stateNode.containerInfo!==r.containerInfo||e.stateNode.implementation!==r.implementation?((e=Uu(r,t.mode,n)).return=t,e):((e=i(e,r.children||[])).return=t,e)}function c(t,e,r,n,o){return null===e||7!==e.tag?((e=Nu(r,t.mode,n,o)).return=t,e):((e=i(e,r)).return=t,e)}function d(t,e,r){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=ku(""+e,t.mode,r)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case x:return(r=Lu(e.type,e.key,e.props,null,t.mode,r)).ref=Wo(t,null,e),r.return=t,r;case T:return(e=Uu(e,t.mode,r)).return=t,e;case C:return d(t,(0,e._init)(e._payload),r)}if(et(e)||L(e))return(e=Nu(e,t.mode,r,null)).return=t,e;qo(t,e)}return null}function f(t,e,r,n){var i=null!==e?e.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==i?null:l(t,e,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return r.key===i?u(t,e,r,n):null;case T:return r.key===i?h(t,e,r,n):null;case C:return f(t,e,(i=r._init)(r._payload),n)}if(et(r)||L(r))return null!==i?null:c(t,e,r,n,null);qo(t,r)}return null}function p(t,e,r,n,i){if("string"===typeof n&&""!==n||"number"===typeof n)return l(e,t=t.get(r)||null,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return u(e,t=t.get(null===n.key?r:n.key)||null,n,i);case T:return h(e,t=t.get(null===n.key?r:n.key)||null,n,i);case C:return p(t,e,r,(0,n._init)(n._payload),i)}if(et(n)||L(n))return c(e,t=t.get(r)||null,n,i,null);qo(e,n)}return null}function m(i,o,a,l){for(var u=null,h=null,c=o,m=o=0,y=null;null!==c&&m<a.length;m++){c.index>m?(y=c,c=null):y=c.sibling;var g=f(i,c,a[m],l);if(null===g){null===c&&(c=y);break}t&&c&&null===g.alternate&&e(i,c),o=s(g,o,m),null===h?u=g:h.sibling=g,h=g,c=y}if(m===a.length)return r(i,c),io&&Zi(i,m),u;if(null===c){for(;m<a.length;m++)null!==(c=d(i,a[m],l))&&(o=s(c,o,m),null===h?u=c:h.sibling=c,h=c);return io&&Zi(i,m),u}for(c=n(i,c);m<a.length;m++)null!==(y=p(c,i,m,a[m],l))&&(t&&null!==y.alternate&&c.delete(null===y.key?m:y.key),o=s(y,o,m),null===h?u=y:h.sibling=y,h=y);return t&&c.forEach((function(t){return e(i,t)})),io&&Zi(i,m),u}function y(i,a,l,u){var h=L(l);if("function"!==typeof h)throw Error(o(150));if(null==(l=h.call(l)))throw Error(o(151));for(var c=h=null,m=a,y=a=0,g=null,_=l.next();null!==m&&!_.done;y++,_=l.next()){m.index>y?(g=m,m=null):g=m.sibling;var v=f(i,m,_.value,u);if(null===v){null===m&&(m=g);break}t&&m&&null===v.alternate&&e(i,m),a=s(v,a,y),null===c?h=v:c.sibling=v,c=v,m=g}if(_.done)return r(i,m),io&&Zi(i,y),h;if(null===m){for(;!_.done;y++,_=l.next())null!==(_=d(i,_.value,u))&&(a=s(_,a,y),null===c?h=_:c.sibling=_,c=_);return io&&Zi(i,y),h}for(m=n(i,m);!_.done;y++,_=l.next())null!==(_=p(m,i,y,_.value,u))&&(t&&null!==_.alternate&&m.delete(null===_.key?y:_.key),a=s(_,a,y),null===c?h=_:c.sibling=_,c=_);return t&&m.forEach((function(t){return e(i,t)})),io&&Zi(i,y),h}return function t(n,o,s,l){if("object"===typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case x:t:{for(var u=s.key,h=o;null!==h;){if(h.key===u){if((u=s.type)===S){if(7===h.tag){r(n,h.sibling),(o=i(h,s.props.children)).return=n,n=o;break t}}else if(h.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===C&&$o(u)===h.type){r(n,h.sibling),(o=i(h,s.props)).ref=Wo(n,h,s),o.return=n,n=o;break t}r(n,h);break}e(n,h),h=h.sibling}s.type===S?((o=Nu(s.props.children,n.mode,l,s.key)).return=n,n=o):((l=Lu(s.type,s.key,s.props,null,n.mode,l)).ref=Wo(n,o,s),l.return=n,n=l)}return a(n);case T:t:{for(h=s.key;null!==o;){if(o.key===h){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){r(n,o.sibling),(o=i(o,s.children||[])).return=n,n=o;break t}r(n,o);break}e(n,o),o=o.sibling}(o=Uu(s,n.mode,l)).return=n,n=o}return a(n);case C:return t(n,o,(h=s._init)(s._payload),l)}if(et(s))return m(n,o,s,l);if(L(s))return y(n,o,s,l);qo(n,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(r(n,o.sibling),(o=i(o,s)).return=n,n=o):(r(n,o),(o=ku(s,n.mode,l)).return=n,n=o),a(n)):r(n,o)}}var Qo=Ko(!0),Zo=Ko(!1),Jo={},ts=wi(Jo),es=wi(Jo),rs=wi(Jo);function ns(t){if(t===Jo)throw Error(o(174));return t}function is(t,e){switch(Ii(rs,e),Ii(es,t),Ii(ts,Jo),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Ei(ts),Ii(ts,e)}function os(){Ei(ts),Ei(es),Ei(rs)}function ss(t){ns(rs.current);var e=ns(ts.current),r=lt(e,t.type);e!==r&&(Ii(es,t),Ii(ts,r))}function as(t){es.current===t&&(Ei(ts),Ei(es))}var ls=wi(0);function us(t){for(var e=t;null!==e;){if(13===e.tag){var r=e.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hs=[];function cs(){for(var t=0;t<hs.length;t++)hs[t]._workInProgressVersionPrimary=null;hs.length=0}var ds=b.ReactCurrentDispatcher,fs=b.ReactCurrentBatchConfig,ps=0,ms=null,ys=null,gs=null,_s=!1,vs=!1,bs=0,xs=0;function Ts(){throw Error(o(321))}function Ss(t,e){if(null===e)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!an(t[r],e[r]))return!1;return!0}function ws(t,e,r,n,i,s){if(ps=s,ms=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ds.current=null===t||null===t.memoizedState?aa:la,t=r(n,i),vs){s=0;do{if(vs=!1,bs=0,25<=s)throw Error(o(301));s+=1,gs=ys=null,e.updateQueue=null,ds.current=ua,t=r(n,i)}while(vs)}if(ds.current=sa,e=null!==ys&&null!==ys.next,ps=0,gs=ys=ms=null,_s=!1,e)throw Error(o(300));return t}function Es(){var t=0!==bs;return bs=0,t}function Is(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===gs?ms.memoizedState=gs=t:gs=gs.next=t,gs}function As(){if(null===ys){var t=ms.alternate;t=null!==t?t.memoizedState:null}else t=ys.next;var e=null===gs?ms.memoizedState:gs.next;if(null!==e)gs=e,ys=t;else{if(null===t)throw Error(o(310));t={memoizedState:(ys=t).memoizedState,baseState:ys.baseState,baseQueue:ys.baseQueue,queue:ys.queue,next:null},null===gs?ms.memoizedState=gs=t:gs=gs.next=t}return gs}function Ms(t,e){return"function"===typeof e?e(t):e}function Ps(t){var e=As(),r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=t;var n=ys,i=n.baseQueue,s=r.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(null!==i){s=i.next,n=n.baseState;var l=a=null,u=null,h=s;do{var c=h.lane;if((ps&c)===c)null!==u&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),n=h.hasEagerState?h.eagerState:t(n,h.action);else{var d={lane:c,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};null===u?(l=u=d,a=n):u=u.next=d,ms.lanes|=c,Bl|=c}h=h.next}while(null!==h&&h!==s);null===u?a=n:u.next=l,an(n,e.memoizedState)||(ba=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=u,r.lastRenderedState=n}if(null!==(t=r.interleaved)){i=t;do{s=i.lane,ms.lanes|=s,Bl|=s,i=i.next}while(i!==t)}else null===i&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Os(t){var e=As(),r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(null!==i){r.pending=null;var a=i=i.next;do{s=t(s,a.action),a=a.next}while(a!==i);an(s,e.memoizedState)||(ba=!0),e.memoizedState=s,null===e.baseQueue&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function Rs(){}function Cs(t,e){var r=ms,n=As(),i=e(),s=!an(n.memoizedState,i);if(s&&(n.memoizedState=i,ba=!0),n=n.queue,Vs(Ls.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||null!==gs&&1&gs.memoizedState.tag){if(r.flags|=2048,Us(9,Fs.bind(null,r,n,i,e),void 0,null),null===Ol)throw Error(o(349));0!==(30&ps)||Ds(r,e,i)}return i}function Ds(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},null===(e=ms.updateQueue)?(e={lastEffect:null,stores:null},ms.updateQueue=e,e.stores=[t]):null===(r=e.stores)?e.stores=[t]:r.push(t)}function Fs(t,e,r,n){e.value=r,e.getSnapshot=n,Ns(e)&&Bs(t)}function Ls(t,e,r){return r((function(){Ns(e)&&Bs(t)}))}function Ns(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!an(t,r)}catch(n){return!0}}function Bs(t){var e=Oo(t,1);null!==e&&nu(e,t,1,-1)}function ks(t){var e=Is();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:t},e.queue=t,t=t.dispatch=ra.bind(null,ms,t),[e.memoizedState,t]}function Us(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},null===(e=ms.updateQueue)?(e={lastEffect:null,stores:null},ms.updateQueue=e,e.lastEffect=t.next=t):null===(r=e.lastEffect)?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t),t}function Gs(){return As().memoizedState}function js(t,e,r,n){var i=Is();ms.flags|=t,i.memoizedState=Us(1|e,r,void 0,void 0===n?null:n)}function Xs(t,e,r,n){var i=As();n=void 0===n?null:n;var o=void 0;if(null!==ys){var s=ys.memoizedState;if(o=s.destroy,null!==n&&Ss(n,s.deps))return void(i.memoizedState=Us(e,r,o,n))}ms.flags|=t,i.memoizedState=Us(1|e,r,o,n)}function zs(t,e){return js(8390656,8,t,e)}function Vs(t,e){return Xs(2048,8,t,e)}function Hs(t,e){return Xs(4,2,t,e)}function Ys(t,e){return Xs(4,4,t,e)}function Ws(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function qs(t,e,r){return r=null!==r&&void 0!==r?r.concat([t]):null,Xs(4,4,Ws.bind(null,e,t),r)}function $s(){}function Ks(t,e){var r=As();e=void 0===e?null:e;var n=r.memoizedState;return null!==n&&null!==e&&Ss(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Qs(t,e){var r=As();e=void 0===e?null:e;var n=r.memoizedState;return null!==n&&null!==e&&Ss(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function Zs(t,e,r){return 0===(21&ps)?(t.baseState&&(t.baseState=!1,ba=!0),t.memoizedState=r):(an(r,e)||(r=me(),ms.lanes|=r,Bl|=r,t.baseState=!0),e)}function Js(t,e){var r=ve;ve=0!==r&&4>r?r:4,t(!0);var n=fs.transition;fs.transition={};try{t(!1),e()}finally{ve=r,fs.transition=n}}function ta(){return As().memoizedState}function ea(t,e,r){var n=ru(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},na(t))ia(e,r);else if(null!==(r=Po(t,e,r,n))){nu(r,t,n,eu()),oa(r,e,n)}}function ra(t,e,r){var n=ru(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(na(t))ia(e,i);else{var o=t.alternate;if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var s=e.lastRenderedState,a=o(s,r);if(i.hasEagerState=!0,i.eagerState=a,an(a,s)){var l=e.interleaved;return null===l?(i.next=i,Mo(e)):(i.next=l.next,l.next=i),void(e.interleaved=i)}}catch(u){}null!==(r=Po(t,e,i,n))&&(nu(r,t,n,i=eu()),oa(r,e,n))}}function na(t){var e=t.alternate;return t===ms||null!==e&&e===ms}function ia(t,e){vs=_s=!0;var r=t.pending;null===r?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function oa(t,e,r){if(0!==(4194240&r)){var n=e.lanes;r|=n&=t.pendingLanes,e.lanes=r,_e(t,r)}}var sa={readContext:Io,useCallback:Ts,useContext:Ts,useEffect:Ts,useImperativeHandle:Ts,useInsertionEffect:Ts,useLayoutEffect:Ts,useMemo:Ts,useReducer:Ts,useRef:Ts,useState:Ts,useDebugValue:Ts,useDeferredValue:Ts,useTransition:Ts,useMutableSource:Ts,useSyncExternalStore:Ts,useId:Ts,unstable_isNewReconciler:!1},aa={readContext:Io,useCallback:function(t,e){return Is().memoizedState=[t,void 0===e?null:e],t},useContext:Io,useEffect:zs,useImperativeHandle:function(t,e,r){return r=null!==r&&void 0!==r?r.concat([t]):null,js(4194308,4,Ws.bind(null,e,t),r)},useLayoutEffect:function(t,e){return js(4194308,4,t,e)},useInsertionEffect:function(t,e){return js(4,2,t,e)},useMemo:function(t,e){var r=Is();return e=void 0===e?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Is();return e=void 0!==r?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=ea.bind(null,ms,t),[n.memoizedState,t]},useRef:function(t){return t={current:t},Is().memoizedState=t},useState:ks,useDebugValue:$s,useDeferredValue:function(t){return Is().memoizedState=t},useTransition:function(){var t=ks(!1),e=t[0];return t=Js.bind(null,t[1]),Is().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=ms,i=Is();if(io){if(void 0===r)throw Error(o(407));r=r()}else{if(r=e(),null===Ol)throw Error(o(349));0!==(30&ps)||Ds(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,zs(Ls.bind(null,n,s,t),[t]),n.flags|=2048,Us(9,Fs.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Is(),e=Ol.identifierPrefix;if(io){var r=Qi;e=":"+e+"R"+(r=(Ki&~(1<<32-se(Ki)-1)).toString(32)+r),0<(r=bs++)&&(e+="H"+r.toString(32)),e+=":"}else e=":"+e+"r"+(r=xs++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},la={readContext:Io,useCallback:Ks,useContext:Io,useEffect:Vs,useImperativeHandle:qs,useInsertionEffect:Hs,useLayoutEffect:Ys,useMemo:Qs,useReducer:Ps,useRef:Gs,useState:function(){return Ps(Ms)},useDebugValue:$s,useDeferredValue:function(t){return Zs(As(),ys.memoizedState,t)},useTransition:function(){return[Ps(Ms)[0],As().memoizedState]},useMutableSource:Rs,useSyncExternalStore:Cs,useId:ta,unstable_isNewReconciler:!1},ua={readContext:Io,useCallback:Ks,useContext:Io,useEffect:Vs,useImperativeHandle:qs,useInsertionEffect:Hs,useLayoutEffect:Ys,useMemo:Qs,useReducer:Os,useRef:Gs,useState:function(){return Os(Ms)},useDebugValue:$s,useDeferredValue:function(t){var e=As();return null===ys?e.memoizedState=t:Zs(e,ys.memoizedState,t)},useTransition:function(){return[Os(Ms)[0],As().memoizedState]},useMutableSource:Rs,useSyncExternalStore:Cs,useId:ta,unstable_isNewReconciler:!1};function ha(t,e){try{var r="",n=e;do{r+=j(n),n=n.return}while(n);var i=r}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:i,digest:null}}function ca(t,e,r){return{value:t,source:null,stack:null!=r?r:null,digest:null!=e?e:null}}function da(t,e){try{console.error(e.value)}catch(r){setTimeout((function(){throw r}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(t,e,r){(r=Fo(-1,r)).tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Hl||(Hl=!0,Yl=n),da(0,e)},r}function ma(t,e,r){(r=Fo(-1,r)).tag=3;var n=t.type.getDerivedStateFromError;if("function"===typeof n){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){da(0,e)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(r.callback=function(){da(0,e),"function"!==typeof n&&(null===Wl?Wl=new Set([this]):Wl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),r}function ya(t,e,r){var n=t.pingCache;if(null===n){n=t.pingCache=new fa;var i=new Set;n.set(e,i)}else void 0===(i=n.get(e))&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=Iu.bind(null,t,e,r),e.then(t,t))}function ga(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function _a(t,e,r,n,i){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((e=Fo(-1,1)).tag=2,Lo(r,e,1))),r.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var va=b.ReactCurrentOwner,ba=!1;function xa(t,e,r,n){e.child=null===t?Zo(e,null,r,n):Qo(e,t.child,r,n)}function Ta(t,e,r,n,i){r=r.render;var o=e.ref;return Eo(e,i),n=ws(t,e,r,n,o,i),r=Es(),null===t||ba?(io&&r&&to(e),e.flags|=1,xa(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ha(t,e,i))}function Sa(t,e,r,n,i){if(null===t){var o=r.type;return"function"!==typeof o||Du(o)||void 0!==o.defaultProps||null!==r.compare||void 0!==r.defaultProps?((t=Lu(r.type,null,n,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,wa(t,e,o,n,i))}if(o=t.child,0===(t.lanes&i)){var s=o.memoizedProps;if((r=null!==(r=r.compare)?r:ln)(s,n)&&t.ref===e.ref)return Ha(t,e,i)}return e.flags|=1,(t=Fu(o,n)).ref=e.ref,t.return=e,e.child=t}function wa(t,e,r,n,i){if(null!==t){var o=t.memoizedProps;if(ln(o,n)&&t.ref===e.ref){if(ba=!1,e.pendingProps=n=o,0===(t.lanes&i))return e.lanes=t.lanes,Ha(t,e,i);0!==(131072&t.flags)&&(ba=!0)}}return Aa(t,e,r,n,i)}function Ea(t,e,r){var n=e.pendingProps,i=n.children,o=null!==t?t.memoizedState:null;if("hidden"===n.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Fl,Dl),Dl|=r;else{if(0===(1073741824&r))return t=null!==o?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ii(Fl,Dl),Dl|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==o?o.baseLanes:r,Ii(Fl,Dl),Dl|=n}else null!==o?(n=o.baseLanes|r,e.memoizedState=null):n=r,Ii(Fl,Dl),Dl|=n;return xa(t,e,i,r),e.child}function Ia(t,e){var r=e.ref;(null===t&&null!==r||null!==t&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Aa(t,e,r,n,i){var o=Ci(r)?Oi:Mi.current;return o=Ri(e,o),Eo(e,i),r=ws(t,e,r,n,o,i),n=Es(),null===t||ba?(io&&n&&to(e),e.flags|=1,xa(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ha(t,e,i))}function Ma(t,e,r,n,i){if(Ci(r)){var o=!0;Ni(e)}else o=!1;if(Eo(e,i),null===e.stateNode)Va(t,e),Vo(e,r,n),Yo(e,r,n,i),n=!0;else if(null===t){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,u=r.contextType;"object"===typeof u&&null!==u?u=Io(u):u=Ri(e,u=Ci(r)?Oi:Mi.current);var h=r.getDerivedStateFromProps,c="function"===typeof h||"function"===typeof s.getSnapshotBeforeUpdate;c||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==n||l!==u)&&Ho(e,s,n,u),Ro=!1;var d=e.memoizedState;s.state=d,ko(e,n,s,i),l=e.memoizedState,a!==n||d!==l||Pi.current||Ro?("function"===typeof h&&(jo(e,r,h,n),l=e.memoizedState),(a=Ro||zo(e,r,a,n,d,l,u))?(c||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(e.flags|=4194308)):("function"===typeof s.componentDidMount&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),s.props=n,s.state=l,s.context=u,n=a):("function"===typeof s.componentDidMount&&(e.flags|=4194308),n=!1)}else{s=e.stateNode,Do(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:go(e.type,a),s.props=u,c=e.pendingProps,d=s.context,"object"===typeof(l=r.contextType)&&null!==l?l=Io(l):l=Ri(e,l=Ci(r)?Oi:Mi.current);var f=r.getDerivedStateFromProps;(h="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==c||d!==l)&&Ho(e,s,n,l),Ro=!1,d=e.memoizedState,s.state=d,ko(e,n,s,i);var p=e.memoizedState;a!==c||d!==p||Pi.current||Ro?("function"===typeof f&&(jo(e,r,f,n),p=e.memoizedState),(u=Ro||zo(e,r,u,n,d,p,l)||!1)?(h||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(n,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(n,p,l)),"function"===typeof s.componentDidUpdate&&(e.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),s.props=n,s.state=p,s.context=l,n=u):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),n=!1)}return Pa(t,e,r,n,o,i)}function Pa(t,e,r,n,i,o){Ia(t,e);var s=0!==(128&e.flags);if(!n&&!s)return i&&Bi(e,r,!1),Ha(t,e,o);n=e.stateNode,va.current=e;var a=s&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return e.flags|=1,null!==t&&s?(e.child=Qo(e,t.child,null,o),e.child=Qo(e,null,a,o)):xa(t,e,a,o),e.memoizedState=n.state,i&&Bi(e,r,!0),e.child}function Oa(t){var e=t.stateNode;e.pendingContext?Fi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Fi(0,e.context,!1),is(t,e.containerInfo)}function Ra(t,e,r,n,i){return po(),mo(i),e.flags|=256,xa(t,e,r,n),e.child}var Ca,Da,Fa,La,Na={dehydrated:null,treeContext:null,retryLane:0};function Ba(t){return{baseLanes:t,cachePool:null,transitions:null}}function ka(t,e,r){var n,i=e.pendingProps,s=ls.current,a=!1,l=0!==(128&e.flags);if((n=l)||(n=(null===t||null!==t.memoizedState)&&0!==(2&s)),n?(a=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(s|=1),Ii(ls,1&s),null===t)return uo(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=i.children,t=i.fallback,a?(i=e.mode,a=e.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Bu(l,i,0,null),t=Nu(t,i,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Ba(r),e.memoizedState=Na,t):Ua(e,l));if(null!==(s=t.memoizedState)&&null!==(n=s.dehydrated))return function(t,e,r,n,i,s,a){if(r)return 256&e.flags?(e.flags&=-257,Ga(t,e,a,n=ca(Error(o(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=Bu({mode:"visible",children:n.children},i,0,null),(s=Nu(s,i,a,null)).flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,0!==(1&e.mode)&&Qo(e,t.child,null,a),e.child.memoizedState=Ba(a),e.memoizedState=Na,s);if(0===(1&e.mode))return Ga(t,e,a,null);if("$!"===i.data){if(n=i.nextSibling&&i.nextSibling.dataset)var l=n.dgst;return n=l,Ga(t,e,a,n=ca(s=Error(o(419)),n,void 0))}if(l=0!==(a&t.childLanes),ba||l){if(null!==(n=Ol)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(n.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Oo(t,i),nu(n,t,i,-1))}return yu(),Ga(t,e,a,n=ca(Error(o(421))))}return"$?"===i.data?(e.flags|=128,e.child=t.child,e=Mu.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,no=ui(i.nextSibling),ro=e,io=!0,oo=null,null!==t&&(Wi[qi++]=Ki,Wi[qi++]=Qi,Wi[qi++]=$i,Ki=t.id,Qi=t.overflow,$i=e),e=Ua(e,n.children),e.flags|=4096,e)}(t,e,l,i,n,s,r);if(a){a=i.fallback,l=e.mode,n=(s=t.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&e.child!==s?((i=e.child).childLanes=0,i.pendingProps=u,e.deletions=null):(i=Fu(s,u)).subtreeFlags=14680064&s.subtreeFlags,null!==n?a=Fu(n,a):(a=Nu(a,l,r,null)).flags|=2,a.return=e,i.return=e,i.sibling=a,e.child=i,i=a,a=e.child,l=null===(l=t.child.memoizedState)?Ba(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~r,e.memoizedState=Na,i}return t=(a=t.child).sibling,i=Fu(a,{mode:"visible",children:i.children}),0===(1&e.mode)&&(i.lanes=r),i.return=e,i.sibling=null,null!==t&&(null===(r=e.deletions)?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=i,e.memoizedState=null,i}function Ua(t,e){return(e=Bu({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function Ga(t,e,r,n){return null!==n&&mo(n),Qo(e,t.child,null,r),(t=Ua(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function ja(t,e,r){t.lanes|=e;var n=t.alternate;null!==n&&(n.lanes|=e),wo(t.return,e,r)}function Xa(t,e,r,n,i){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function za(t,e,r){var n=e.pendingProps,i=n.revealOrder,o=n.tail;if(xa(t,e,n.children,r),0!==(2&(n=ls.current)))n=1&n|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&ja(t,r,e);else if(19===t.tag)ja(t,r,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Ii(ls,n),0===(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;null!==r;)null!==(t=r.alternate)&&null===us(t)&&(i=r),r=r.sibling;null===(r=i)?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Xa(e,!1,i,r,o);break;case"backwards":for(r=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===us(t)){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Xa(e,!0,r,null,o);break;case"together":Xa(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Va(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ha(t,e,r){if(null!==t&&(e.dependencies=t.dependencies),Bl|=e.lanes,0===(r&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(o(153));if(null!==e.child){for(r=Fu(t=e.child,t.pendingProps),e.child=r,r.return=e;null!==t.sibling;)t=t.sibling,(r=r.sibling=Fu(t,t.pendingProps)).return=e;r.sibling=null}return e.child}function Ya(t,e){if(!io)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;null!==e;)null!==e.alternate&&(r=e),e=e.sibling;null===r?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?e||null===t.tail?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Wa(t){var e=null!==t.alternate&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;null!==i;)r|=i.lanes|i.childLanes,n|=14680064&i.subtreeFlags,n|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function qa(t,e,r){var n=e.pendingProps;switch(eo(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wa(e),null;case 1:case 17:return Ci(e.type)&&Di(),Wa(e),null;case 3:return n=e.stateNode,os(),Ei(Pi),Ei(Mi),cs(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==t&&null!==t.child||(co(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==oo&&(au(oo),oo=null))),Da(t,e),Wa(e),null;case 5:as(e);var i=ns(rs.current);if(r=e.type,null!==t&&null!=e.stateNode)Fa(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(null===e.stateNode)throw Error(o(166));return Wa(e),null}if(t=ns(ts.current),co(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[di]=e,n[fi]=s,t=0!==(1&e.mode),r){case"dialog":Un("cancel",n),Un("close",n);break;case"iframe":case"object":case"embed":Un("load",n);break;case"video":case"audio":for(i=0;i<Ln.length;i++)Un(Ln[i],n);break;case"source":Un("error",n);break;case"img":case"image":case"link":Un("error",n),Un("load",n);break;case"details":Un("toggle",n);break;case"input":K(n,s),Un("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Un("invalid",n);break;case"textarea":it(n,s),Un("invalid",n)}for(var l in _t(r,s),i=null,s)if(s.hasOwnProperty(l)){var u=s[l];"children"===l?"string"===typeof u?n.textContent!==u&&(!0!==s.suppressHydrationWarning&&Zn(n.textContent,u,t),i=["children",u]):"number"===typeof u&&n.textContent!==""+u&&(!0!==s.suppressHydrationWarning&&Zn(n.textContent,u,t),i=["children",""+u]):a.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Un("scroll",n)}switch(r){case"input":Y(n),J(n,s,!0);break;case"textarea":Y(n),st(n);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(n.onclick=Jn)}n=i,e.updateQueue=n,null!==n&&(e.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=at(r)),"http://www.w3.org/1999/xhtml"===t?"script"===r?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof n.is?t=l.createElement(r,{is:n.is}):(t=l.createElement(r),"select"===r&&(l=t,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):t=l.createElementNS(t,r),t[di]=e,t[fi]=n,Ca(t,e,!1,!1),e.stateNode=t;t:{switch(l=vt(r,n),r){case"dialog":Un("cancel",t),Un("close",t),i=n;break;case"iframe":case"object":case"embed":Un("load",t),i=n;break;case"video":case"audio":for(i=0;i<Ln.length;i++)Un(Ln[i],t);i=n;break;case"source":Un("error",t),i=n;break;case"img":case"image":case"link":Un("error",t),Un("load",t),i=n;break;case"details":Un("toggle",t),i=n;break;case"input":K(t,n),i=$(t,n),Un("invalid",t);break;case"option":default:i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=B({},n,{value:void 0}),Un("invalid",t);break;case"textarea":it(t,n),i=nt(t,n),Un("invalid",t)}for(s in _t(r,i),u=i)if(u.hasOwnProperty(s)){var h=u[s];"style"===s?yt(t,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&ct(t,h):"children"===s?"string"===typeof h?("textarea"!==r||""!==h)&&dt(t,h):"number"===typeof h&&dt(t,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Un("scroll",t):null!=h&&v(t,s,h,l))}switch(r){case"input":Y(t),J(t,n,!1);break;case"textarea":Y(t),st(t);break;case"option":null!=n.value&&t.setAttribute("value",""+V(n.value));break;case"select":t.multiple=!!n.multiple,null!=(s=n.value)?rt(t,!!n.multiple,s,!1):null!=n.defaultValue&&rt(t,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof i.onClick&&(t.onclick=Jn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break t;case"img":n=!0;break t;default:n=!1}}n&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Wa(e),null;case 6:if(t&&null!=e.stateNode)La(t,e,t.memoizedProps,n);else{if("string"!==typeof n&&null===e.stateNode)throw Error(o(166));if(r=ns(rs.current),ns(ts.current),co(e)){if(n=e.stateNode,r=e.memoizedProps,n[di]=e,(s=n.nodeValue!==r)&&null!==(t=ro))switch(t.tag){case 3:Zn(n.nodeValue,r,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Zn(n.nodeValue,r,0!==(1&t.mode))}s&&(e.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[di]=e,e.stateNode=n}return Wa(e),null;case 13:if(Ei(ls),n=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(io&&null!==no&&0!==(1&e.mode)&&0===(128&e.flags))fo(),po(),e.flags|=98560,s=!1;else if(s=co(e),null!==n&&null!==n.dehydrated){if(null===t){if(!s)throw Error(o(318));if(!(s=null!==(s=e.memoizedState)?s.dehydrated:null))throw Error(o(317));s[di]=e}else po(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Wa(e),s=!1}else null!==oo&&(au(oo),oo=null),s=!0;if(!s)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=r,e):((n=null!==n)!==(null!==t&&null!==t.memoizedState)&&n&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&ls.current)?0===Ll&&(Ll=3):yu())),null!==e.updateQueue&&(e.flags|=4),Wa(e),null);case 4:return os(),Da(t,e),null===t&&Xn(e.stateNode.containerInfo),Wa(e),null;case 10:return So(e.type._context),Wa(e),null;case 19:if(Ei(ls),null===(s=e.memoizedState))return Wa(e),null;if(n=0!==(128&e.flags),null===(l=s.rendering))if(n)Ya(s,!1);else{if(0!==Ll||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=us(t))){for(e.flags|=128,Ya(s,!1),null!==(n=l.updateQueue)&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;null!==r;)t=n,(s=r).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Ii(ls,1&ls.current|2),e.child}t=t.sibling}null!==s.tail&&Qt()>zl&&(e.flags|=128,n=!0,Ya(s,!1),e.lanes=4194304)}else{if(!n)if(null!==(t=us(l))){if(e.flags|=128,n=!0,null!==(r=t.updateQueue)&&(e.updateQueue=r,e.flags|=4),Ya(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return Wa(e),null}else 2*Qt()-s.renderingStartTime>zl&&1073741824!==r&&(e.flags|=128,n=!0,Ya(s,!1),e.lanes=4194304);s.isBackwards?(l.sibling=e.child,e.child=l):(null!==(r=s.last)?r.sibling=l:e.child=l,s.last=l)}return null!==s.tail?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Qt(),e.sibling=null,r=ls.current,Ii(ls,n?1&r|2:1&r),e):(Wa(e),null);case 22:case 23:return du(),n=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==n&&(e.flags|=8192),n&&0!==(1&e.mode)?0!==(1073741824&Dl)&&(Wa(e),6&e.subtreeFlags&&(e.flags|=8192)):Wa(e),null;case 24:case 25:return null}throw Error(o(156,e.tag))}function $a(t,e){switch(eo(e),e.tag){case 1:return Ci(e.type)&&Di(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return os(),Ei(Pi),Ei(Mi),cs(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return as(e),null;case 13:if(Ei(ls),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(o(340));po()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Ei(ls),null;case 4:return os(),null;case 10:return So(e.type._context),null;case 22:case 23:return du(),null;default:return null}}Ca=function(t,e){for(var r=e.child;null!==r;){if(5===r.tag||6===r.tag)t.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Da=function(){},Fa=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,ns(ts.current);var o,s=null;switch(r){case"input":i=$(t,i),n=$(t,n),s=[];break;case"select":i=B({},i,{value:void 0}),n=B({},n,{value:void 0}),s=[];break;case"textarea":i=nt(t,i),n=nt(t,n),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof n.onClick&&(t.onclick=Jn)}for(h in _t(r,n),r=null,i)if(!n.hasOwnProperty(h)&&i.hasOwnProperty(h)&&null!=i[h])if("style"===h){var l=i[h];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(a.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in n){var u=n[h];if(l=null!=i?i[h]:void 0,n.hasOwnProperty(h)&&u!==l&&(null!=u||null!=l))if("style"===h)if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(s||(s=[]),s.push(h,r)),r=u;else"dangerouslySetInnerHTML"===h?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(s=s||[]).push(h,u)):"children"===h?"string"!==typeof u&&"number"!==typeof u||(s=s||[]).push(h,""+u):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(a.hasOwnProperty(h)?(null!=u&&"onScroll"===h&&Un("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}r&&(s=s||[]).push("style",r);var h=s;(e.updateQueue=h)&&(e.flags|=4)}},La=function(t,e,r,n){r!==n&&(e.flags|=4)};var Ka=!1,Qa=!1,Za="function"===typeof WeakSet?WeakSet:Set,Ja=null;function tl(t,e){var r=t.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){Eu(t,e,n)}else r.current=null}function el(t,e,r){try{r()}catch(n){Eu(t,e,n)}}var rl=!1;function nl(t,e,r){var n=e.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(e,r,o)}i=i.next}while(i!==n)}}function il(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function ol(t){var e=t.ref;if(null!==e){var r=t.stateNode;t.tag,t=r,"function"===typeof e?e(t):e.current=t}}function sl(t){var e=t.alternate;null!==e&&(t.alternate=null,sl(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[di],delete e[fi],delete e[mi],delete e[yi],delete e[gi])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function al(t){return 5===t.tag||3===t.tag||4===t.tag}function ll(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||al(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function ul(t,e,r){var n=t.tag;if(5===n||6===n)t=t.stateNode,e?8===r.nodeType?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(8===r.nodeType?(e=r.parentNode).insertBefore(t,r):(e=r).appendChild(t),null!==(r=r._reactRootContainer)&&void 0!==r||null!==e.onclick||(e.onclick=Jn));else if(4!==n&&null!==(t=t.child))for(ul(t,e,r),t=t.sibling;null!==t;)ul(t,e,r),t=t.sibling}function hl(t,e,r){var n=t.tag;if(5===n||6===n)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(4!==n&&null!==(t=t.child))for(hl(t,e,r),t=t.sibling;null!==t;)hl(t,e,r),t=t.sibling}var cl=null,dl=!1;function fl(t,e,r){for(r=r.child;null!==r;)pl(t,e,r),r=r.sibling}function pl(t,e,r){if(oe&&"function"===typeof oe.onCommitFiberUnmount)try{oe.onCommitFiberUnmount(ie,r)}catch(a){}switch(r.tag){case 5:Qa||tl(r,e);case 6:var n=cl,i=dl;cl=null,fl(t,e,r),dl=i,null!==(cl=n)&&(dl?(t=cl,r=r.stateNode,8===t.nodeType?t.parentNode.removeChild(r):t.removeChild(r)):cl.removeChild(r.stateNode));break;case 18:null!==cl&&(dl?(t=cl,r=r.stateNode,8===t.nodeType?li(t.parentNode,r):1===t.nodeType&&li(t,r),Xe(t)):li(cl,r.stateNode));break;case 4:n=cl,i=dl,cl=r.stateNode.containerInfo,dl=!0,fl(t,e,r),cl=n,dl=i;break;case 0:case 11:case 14:case 15:if(!Qa&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){i=n=n.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&el(r,e,s),i=i.next}while(i!==n)}fl(t,e,r);break;case 1:if(!Qa&&(tl(r,e),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Eu(r,e,a)}fl(t,e,r);break;case 21:fl(t,e,r);break;case 22:1&r.mode?(Qa=(n=Qa)||null!==r.memoizedState,fl(t,e,r),Qa=n):fl(t,e,r);break;default:fl(t,e,r)}}function ml(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var r=t.stateNode;null===r&&(r=t.stateNode=new Za),e.forEach((function(e){var n=Pu.bind(null,t,e);r.has(e)||(r.add(e),e.then(n,n))}))}}function yl(t,e){var r=e.deletions;if(null!==r)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,a=e,l=a;t:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,dl=!1;break t;case 3:case 4:cl=l.stateNode.containerInfo,dl=!0;break t}l=l.return}if(null===cl)throw Error(o(160));pl(s,a,i),cl=null,dl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(h){Eu(i,e,h)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)gl(e,t),e=e.sibling}function gl(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yl(e,t),_l(t),4&n){try{nl(3,t,t.return),il(3,t)}catch(y){Eu(t,t.return,y)}try{nl(5,t,t.return)}catch(y){Eu(t,t.return,y)}}break;case 1:yl(e,t),_l(t),512&n&&null!==r&&tl(r,r.return);break;case 5:if(yl(e,t),_l(t),512&n&&null!==r&&tl(r,r.return),32&t.flags){var i=t.stateNode;try{dt(i,"")}catch(y){Eu(t,t.return,y)}}if(4&n&&null!=(i=t.stateNode)){var s=t.memoizedProps,a=null!==r?r.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,null!==u)try{"input"===l&&"radio"===s.type&&null!=s.name&&Q(i,s),vt(l,a);var h=vt(l,s);for(a=0;a<u.length;a+=2){var c=u[a],d=u[a+1];"style"===c?yt(i,d):"dangerouslySetInnerHTML"===c?ct(i,d):"children"===c?dt(i,d):v(i,c,d,h)}switch(l){case"input":Z(i,s);break;case"textarea":ot(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?rt(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?rt(i,!!s.multiple,s.defaultValue,!0):rt(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(y){Eu(t,t.return,y)}}break;case 6:if(yl(e,t),_l(t),4&n){if(null===t.stateNode)throw Error(o(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){Eu(t,t.return,y)}}break;case 3:if(yl(e,t),_l(t),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Xe(e.containerInfo)}catch(y){Eu(t,t.return,y)}break;case 4:default:yl(e,t),_l(t);break;case 13:yl(e,t),_l(t),8192&(i=t.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Xl=Qt())),4&n&&ml(t);break;case 22:if(c=null!==r&&null!==r.memoizedState,1&t.mode?(Qa=(h=Qa)||c,yl(e,t),Qa=h):yl(e,t),_l(t),8192&n){if(h=null!==t.memoizedState,(t.stateNode.isHidden=h)&&!c&&0!==(1&t.mode))for(Ja=t,c=t.child;null!==c;){for(d=Ja=c;null!==Ja;){switch(p=(f=Ja).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:tl(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){n=f,r=f.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){Eu(n,r,y)}}break;case 5:tl(f,f.return);break;case 22:if(null!==f.memoizedState){Tl(d);continue}}null!==p?(p.return=f,Ja=p):Tl(d)}c=c.sibling}t:for(c=null,d=t;;){if(5===d.tag){if(null===c){c=d;try{i=d.stateNode,h?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=d.stateNode,a=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=mt("display",a))}catch(y){Eu(t,t.return,y)}}}else if(6===d.tag){if(null===c)try{d.stateNode.nodeValue=h?"":d.memoizedProps}catch(y){Eu(t,t.return,y)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===t)break t;for(;null===d.sibling;){if(null===d.return||d.return===t)break t;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:yl(e,t),_l(t),4&n&&ml(t);case 21:}}function _l(t){var e=t.flags;if(2&e){try{t:{for(var r=t.return;null!==r;){if(al(r)){var n=r;break t}r=r.return}throw Error(o(160))}switch(n.tag){case 5:var i=n.stateNode;32&n.flags&&(dt(i,""),n.flags&=-33),hl(t,ll(t),i);break;case 3:case 4:var s=n.stateNode.containerInfo;ul(t,ll(t),s);break;default:throw Error(o(161))}}catch(a){Eu(t,t.return,a)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function vl(t,e,r){Ja=t,bl(t,e,r)}function bl(t,e,r){for(var n=0!==(1&t.mode);null!==Ja;){var i=Ja,o=i.child;if(22===i.tag&&n){var s=null!==i.memoizedState||Ka;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Qa;a=Ka;var u=Qa;if(Ka=s,(Qa=l)&&!u)for(Ja=i;null!==Ja;)l=(s=Ja).child,22===s.tag&&null!==s.memoizedState?Sl(i):null!==l?(l.return=s,Ja=l):Sl(i);for(;null!==o;)Ja=o,bl(o,e,r),o=o.sibling;Ja=i,Ka=a,Qa=u}xl(t)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Ja=o):xl(t)}}function xl(t){for(;null!==Ja;){var e=Ja;if(0!==(8772&e.flags)){var r=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Qa||il(5,e);break;case 1:var n=e.stateNode;if(4&e.flags&&!Qa)if(null===r)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:go(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;null!==s&&Uo(e,s,n);break;case 3:var a=e.updateQueue;if(null!==a){if(r=null,null!==e.child)switch(e.child.tag){case 5:case 1:r=e.child.stateNode}Uo(e,a,r)}break;case 5:var l=e.stateNode;if(null===r&&4&e.flags){r=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var h=e.alternate;if(null!==h){var c=h.memoizedState;if(null!==c){var d=c.dehydrated;null!==d&&Xe(d)}}}break;default:throw Error(o(163))}Qa||512&e.flags&&ol(e)}catch(f){Eu(e,e.return,f)}}if(e===t){Ja=null;break}if(null!==(r=e.sibling)){r.return=e.return,Ja=r;break}Ja=e.return}}function Tl(t){for(;null!==Ja;){var e=Ja;if(e===t){Ja=null;break}var r=e.sibling;if(null!==r){r.return=e.return,Ja=r;break}Ja=e.return}}function Sl(t){for(;null!==Ja;){var e=Ja;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{il(4,e)}catch(l){Eu(e,r,l)}break;case 1:var n=e.stateNode;if("function"===typeof n.componentDidMount){var i=e.return;try{n.componentDidMount()}catch(l){Eu(e,i,l)}}var o=e.return;try{ol(e)}catch(l){Eu(e,o,l)}break;case 5:var s=e.return;try{ol(e)}catch(l){Eu(e,s,l)}}}catch(l){Eu(e,e.return,l)}if(e===t){Ja=null;break}var a=e.sibling;if(null!==a){a.return=e.return,Ja=a;break}Ja=e.return}}var wl,El=Math.ceil,Il=b.ReactCurrentDispatcher,Al=b.ReactCurrentOwner,Ml=b.ReactCurrentBatchConfig,Pl=0,Ol=null,Rl=null,Cl=0,Dl=0,Fl=wi(0),Ll=0,Nl=null,Bl=0,kl=0,Ul=0,Gl=null,jl=null,Xl=0,zl=1/0,Vl=null,Hl=!1,Yl=null,Wl=null,ql=!1,$l=null,Kl=0,Ql=0,Zl=null,Jl=-1,tu=0;function eu(){return 0!==(6&Pl)?Qt():-1!==Jl?Jl:Jl=Qt()}function ru(t){return 0===(1&t.mode)?1:0!==(2&Pl)&&0!==Cl?Cl&-Cl:null!==yo.transition?(0===tu&&(tu=me()),tu):0!==(t=ve)?t:t=void 0===(t=window.event)?16:Ke(t.type)}function nu(t,e,r,n){if(50<Ql)throw Ql=0,Zl=null,Error(o(185));ge(t,r,n),0!==(2&Pl)&&t===Ol||(t===Ol&&(0===(2&Pl)&&(kl|=r),4===Ll&&lu(t,Cl)),iu(t,n),1===r&&0===Pl&&0===(1&e.mode)&&(zl=Qt()+500,Ui&&Xi()))}function iu(t,e){var r=t.callbackNode;!function(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-se(o),a=1<<s,l=i[s];-1===l?0!==(a&r)&&0===(a&n)||(i[s]=fe(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}(t,e);var n=de(t,t===Ol?Cl:0);if(0===n)null!==r&&qt(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(null!=r&&qt(r),1===e)0===t.tag?function(t){Ui=!0,ji(t)}(uu.bind(null,t)):ji(uu.bind(null,t)),si((function(){0===(6&Pl)&&Xi()})),r=null;else{switch(be(n)){case 1:r=Jt;break;case 4:r=te;break;case 16:default:r=ee;break;case 536870912:r=ne}r=Ou(r,ou.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function ou(t,e){if(Jl=-1,tu=0,0!==(6&Pl))throw Error(o(327));var r=t.callbackNode;if(Su()&&t.callbackNode!==r)return null;var n=de(t,t===Ol?Cl:0);if(0===n)return null;if(0!==(30&n)||0!==(n&t.expiredLanes)||e)e=gu(t,n);else{e=n;var i=Pl;Pl|=2;var s=mu();for(Ol===t&&Cl===e||(Vl=null,zl=Qt()+500,fu(t,e));;)try{vu();break}catch(l){pu(t,l)}To(),Il.current=s,Pl=i,null!==Rl?e=0:(Ol=null,Cl=0,e=Ll)}if(0!==e){if(2===e&&(0!==(i=pe(t))&&(n=i,e=su(t,i))),1===e)throw r=Nl,fu(t,0),lu(t,n),iu(t,Qt()),r;if(6===e)lu(t,n);else{if(i=t.current.alternate,0===(30&n)&&!function(t){for(var e=t;;){if(16384&e.flags){var r=e.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!an(o(),i))return!1}catch(a){return!1}}}if(r=e.child,16384&e.subtreeFlags&&null!==r)r.return=e,e=r;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)&&(2===(e=gu(t,n))&&(0!==(s=pe(t))&&(n=s,e=su(t,s))),1===e))throw r=Nl,fu(t,0),lu(t,n),iu(t,Qt()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(o(345));case 2:case 5:Tu(t,jl,Vl);break;case 3:if(lu(t,n),(130023424&n)===n&&10<(e=Xl+500-Qt())){if(0!==de(t,0))break;if(((i=t.suspendedLanes)&n)!==n){eu(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ni(Tu.bind(null,t,jl,Vl),e);break}Tu(t,jl,Vl);break;case 4:if(lu(t,n),(4194240&n)===n)break;for(e=t.eventTimes,i=-1;0<n;){var a=31-se(n);s=1<<a,(a=e[a])>i&&(i=a),n&=~s}if(n=i,10<(n=(120>(n=Qt()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*El(n/1960))-n)){t.timeoutHandle=ni(Tu.bind(null,t,jl,Vl),n);break}Tu(t,jl,Vl);break;default:throw Error(o(329))}}}return iu(t,Qt()),t.callbackNode===r?ou.bind(null,t):null}function su(t,e){var r=Gl;return t.current.memoizedState.isDehydrated&&(fu(t,e).flags|=256),2!==(t=gu(t,e))&&(e=jl,jl=r,null!==e&&au(e)),t}function au(t){null===jl?jl=t:jl.push.apply(jl,t)}function lu(t,e){for(e&=~Ul,e&=~kl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-se(e),n=1<<r;t[r]=-1,e&=~n}}function uu(t){if(0!==(6&Pl))throw Error(o(327));Su();var e=de(t,0);if(0===(1&e))return iu(t,Qt()),null;var r=gu(t,e);if(0!==t.tag&&2===r){var n=pe(t);0!==n&&(e=n,r=su(t,n))}if(1===r)throw r=Nl,fu(t,0),lu(t,e),iu(t,Qt()),r;if(6===r)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Tu(t,jl,Vl),iu(t,Qt()),null}function hu(t,e){var r=Pl;Pl|=1;try{return t(e)}finally{0===(Pl=r)&&(zl=Qt()+500,Ui&&Xi())}}function cu(t){null!==$l&&0===$l.tag&&0===(6&Pl)&&Su();var e=Pl;Pl|=1;var r=Ml.transition,n=ve;try{if(Ml.transition=null,ve=1,t)return t()}finally{ve=n,Ml.transition=r,0===(6&(Pl=e))&&Xi()}}function du(){Dl=Fl.current,Ei(Fl)}function fu(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(-1!==r&&(t.timeoutHandle=-1,ii(r)),null!==Rl)for(r=Rl.return;null!==r;){var n=r;switch(eo(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Di();break;case 3:os(),Ei(Pi),Ei(Mi),cs();break;case 5:as(n);break;case 4:os();break;case 13:case 19:Ei(ls);break;case 10:So(n.type._context);break;case 22:case 23:du()}r=r.return}if(Ol=t,Rl=t=Fu(t.current,null),Cl=Dl=e,Ll=0,Nl=null,Ul=kl=Bl=0,jl=Gl=null,null!==Ao){for(e=0;e<Ao.length;e++)if(null!==(n=(r=Ao[e]).interleaved)){r.interleaved=null;var i=n.next,o=r.pending;if(null!==o){var s=o.next;o.next=i,n.next=s}r.pending=n}Ao=null}return t}function pu(t,e){for(;;){var r=Rl;try{if(To(),ds.current=sa,_s){for(var n=ms.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}_s=!1}if(ps=0,gs=ys=ms=null,vs=!1,bs=0,Al.current=null,null===r||null===r.return){Ll=1,Nl=e,Rl=null;break}t:{var s=t,a=r.return,l=r,u=e;if(e=Cl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var h=u,c=l,d=c.tag;if(0===(1&c.mode)&&(0===d||11===d||15===d)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=ga(a);if(null!==p){p.flags&=-257,_a(p,a,l,0,e),1&p.mode&&ya(s,h,e),u=h;var m=(e=p).updateQueue;if(null===m){var y=new Set;y.add(u),e.updateQueue=y}else m.add(u);break t}if(0===(1&e)){ya(s,h,e),yu();break t}u=Error(o(426))}else if(io&&1&l.mode){var g=ga(a);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),_a(g,a,l,0,e),mo(ha(u,l));break t}}s=u=ha(u,l),4!==Ll&&(Ll=2),null===Gl?Gl=[s]:Gl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e,Bo(s,pa(0,u,e));break t;case 1:l=u;var _=s.type,v=s.stateNode;if(0===(128&s.flags)&&("function"===typeof _.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Wl||!Wl.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e,Bo(s,ma(s,l,e));break t}}s=s.return}while(null!==s)}xu(r)}catch(b){e=b,Rl===r&&null!==r&&(Rl=r=r.return);continue}break}}function mu(){var t=Il.current;return Il.current=sa,null===t?sa:t}function yu(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Ol||0===(268435455&Bl)&&0===(268435455&kl)||lu(Ol,Cl)}function gu(t,e){var r=Pl;Pl|=2;var n=mu();for(Ol===t&&Cl===e||(Vl=null,fu(t,e));;)try{_u();break}catch(i){pu(t,i)}if(To(),Pl=r,Il.current=n,null!==Rl)throw Error(o(261));return Ol=null,Cl=0,Ll}function _u(){for(;null!==Rl;)bu(Rl)}function vu(){for(;null!==Rl&&!$t();)bu(Rl)}function bu(t){var e=wl(t.alternate,t,Dl);t.memoizedProps=t.pendingProps,null===e?xu(t):Rl=e,Al.current=null}function xu(t){var e=t;do{var r=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(r=qa(r,e,Dl)))return void(Rl=r)}else{if(null!==(r=$a(r,e)))return r.flags&=32767,void(Rl=r);if(null===t)return Ll=6,void(Rl=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Rl=e);Rl=e=t}while(null!==e);0===Ll&&(Ll=5)}function Tu(t,e,r){var n=ve,i=Ml.transition;try{Ml.transition=null,ve=1,function(t,e,r,n){do{Su()}while(null!==$l);if(0!==(6&Pl))throw Error(o(327));r=t.finishedWork;var i=t.finishedLanes;if(null===r)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(function(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-se(r),o=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~o}}(t,s),t===Ol&&(Rl=Ol=null,Cl=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||ql||(ql=!0,Ou(ee,(function(){return Su(),null}))),s=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||s){s=Ml.transition,Ml.transition=null;var a=ve;ve=1;var l=Pl;Pl|=4,Al.current=null,function(t,e){if(ti=Ve,fn(t=dn())){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else t:{var n=(r=(r=t.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch(x){r=null;break t}var a=0,l=-1,u=-1,h=0,c=0,d=t,f=null;e:for(;;){for(var p;d!==r||0!==i&&3!==d.nodeType||(l=a+i),d!==s||0!==n&&3!==d.nodeType||(u=a+n),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===t)break e;if(f===r&&++h===i&&(l=a),f===s&&++c===n&&(u=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}r=-1===l||-1===u?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(ei={focusedElem:t,selectionRange:r},Ve=!1,Ja=e;null!==Ja;)if(t=(e=Ja).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Ja=t;else for(;null!==Ja;){e=Ja;try{var m=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var y=m.memoizedProps,g=m.memoizedState,_=e.stateNode,v=_.getSnapshotBeforeUpdate(e.elementType===e.type?y:go(e.type,y),g);_.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=e.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(x){Eu(e,e.return,x)}if(null!==(t=e.sibling)){t.return=e.return,Ja=t;break}Ja=e.return}m=rl,rl=!1}(t,r),gl(r,t),pn(ei),Ve=!!ti,ei=ti=null,t.current=r,vl(r,t,i),Kt(),Pl=l,ve=a,Ml.transition=s}else t.current=r;if(ql&&(ql=!1,$l=t,Kl=i),s=t.pendingLanes,0===s&&(Wl=null),function(t){if(oe&&"function"===typeof oe.onCommitFiberRoot)try{oe.onCommitFiberRoot(ie,t,void 0,128===(128&t.current.flags))}catch(e){}}(r.stateNode),iu(t,Qt()),null!==e)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,t=Yl,Yl=null,t;0!==(1&Kl)&&0!==t.tag&&Su(),s=t.pendingLanes,0!==(1&s)?t===Zl?Ql++:(Ql=0,Zl=t):Ql=0,Xi()}(t,e,r,n)}finally{Ml.transition=i,ve=n}return null}function Su(){if(null!==$l){var t=be(Kl),e=Ml.transition,r=ve;try{if(Ml.transition=null,ve=16>t?16:t,null===$l)var n=!1;else{if(t=$l,$l=null,Kl=0,0!==(6&Pl))throw Error(o(331));var i=Pl;for(Pl|=4,Ja=t.current;null!==Ja;){var s=Ja,a=s.child;if(0!==(16&Ja.flags)){var l=s.deletions;if(null!==l){for(var u=0;u<l.length;u++){var h=l[u];for(Ja=h;null!==Ja;){var c=Ja;switch(c.tag){case 0:case 11:case 15:nl(8,c,s)}var d=c.child;if(null!==d)d.return=c,Ja=d;else for(;null!==Ja;){var f=(c=Ja).sibling,p=c.return;if(sl(c),c===h){Ja=null;break}if(null!==f){f.return=p,Ja=f;break}Ja=p}}}var m=s.alternate;if(null!==m){var y=m.child;if(null!==y){m.child=null;do{var g=y.sibling;y.sibling=null,y=g}while(null!==y)}}Ja=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Ja=a;else t:for(;null!==Ja;){if(0!==(2048&(s=Ja).flags))switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var _=s.sibling;if(null!==_){_.return=s.return,Ja=_;break t}Ja=s.return}}var v=t.current;for(Ja=v;null!==Ja;){var b=(a=Ja).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Ja=b;else t:for(a=v;null!==Ja;){if(0!==(2048&(l=Ja).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(T){Eu(l,l.return,T)}if(l===a){Ja=null;break t}var x=l.sibling;if(null!==x){x.return=l.return,Ja=x;break t}Ja=l.return}}if(Pl=i,Xi(),oe&&"function"===typeof oe.onPostCommitFiberRoot)try{oe.onPostCommitFiberRoot(ie,t)}catch(T){}n=!0}return n}finally{ve=r,Ml.transition=e}}return!1}function wu(t,e,r){t=Lo(t,e=pa(0,e=ha(r,e),1),1),e=eu(),null!==t&&(ge(t,1,e),iu(t,e))}function Eu(t,e,r){if(3===t.tag)wu(t,t,r);else for(;null!==e;){if(3===e.tag){wu(e,t,r);break}if(1===e.tag){var n=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Wl||!Wl.has(n))){e=Lo(e,t=ma(e,t=ha(r,t),1),1),t=eu(),null!==e&&(ge(e,1,t),iu(e,t));break}}e=e.return}}function Iu(t,e,r){var n=t.pingCache;null!==n&&n.delete(e),e=eu(),t.pingedLanes|=t.suspendedLanes&r,Ol===t&&(Cl&r)===r&&(4===Ll||3===Ll&&(130023424&Cl)===Cl&&500>Qt()-Xl?fu(t,0):Ul|=r),iu(t,e)}function Au(t,e){0===e&&(0===(1&t.mode)?e=1:(e=he,0===(130023424&(he<<=1))&&(he=4194304)));var r=eu();null!==(t=Oo(t,e))&&(ge(t,e,r),iu(t,r))}function Mu(t){var e=t.memoizedState,r=0;null!==e&&(r=e.retryLane),Au(t,r)}function Pu(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;null!==i&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(o(314))}null!==n&&n.delete(e),Au(t,r)}function Ou(t,e){return Wt(t,e)}function Ru(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cu(t,e,r,n){return new Ru(t,e,r,n)}function Du(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Fu(t,e){var r=t.alternate;return null===r?((r=Cu(t.tag,e,t.key,t.mode)).elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&t.flags,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Lu(t,e,r,n,i,s){var a=2;if(n=t,"function"===typeof t)Du(t)&&(a=1);else if("string"===typeof t)a=5;else t:switch(t){case S:return Nu(r.children,i,s,e);case w:a=8,i|=8;break;case E:return(t=Cu(12,r,e,2|i)).elementType=E,t.lanes=s,t;case P:return(t=Cu(13,r,e,i)).elementType=P,t.lanes=s,t;case O:return(t=Cu(19,r,e,i)).elementType=O,t.lanes=s,t;case D:return Bu(r,i,s,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case I:a=10;break t;case A:a=9;break t;case M:a=11;break t;case R:a=14;break t;case C:a=16,n=null;break t}throw Error(o(130,null==t?t:typeof t,""))}return(e=Cu(a,r,e,i)).elementType=t,e.type=n,e.lanes=s,e}function Nu(t,e,r,n){return(t=Cu(7,t,n,e)).lanes=r,t}function Bu(t,e,r,n){return(t=Cu(22,t,n,e)).elementType=D,t.lanes=r,t.stateNode={isHidden:!1},t}function ku(t,e,r){return(t=Cu(6,t,null,e)).lanes=r,t}function Uu(t,e,r){return(e=Cu(4,null!==t.children?t.children:[],t.key,e)).lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Gu(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ye(0),this.expirationTimes=ye(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ye(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ju(t,e,r,n,i,o,s,a,l){return t=new Gu(t,e,r,a,l),1===e?(e=1,!0===o&&(e|=8)):e=0,o=Cu(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Co(o),t}function Xu(t){if(!t)return Ai;t:{if(Xt(t=t._reactInternals)!==t||1!==t.tag)throw Error(o(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Ci(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(o(171))}if(1===t.tag){var r=t.type;if(Ci(r))return Li(t,r,e)}return e}function zu(t,e,r,n,i,o,s,a,l){return(t=ju(r,n,!0,t,0,o,0,a,l)).context=Xu(null),r=t.current,(o=Fo(n=eu(),i=ru(r))).callback=void 0!==e&&null!==e?e:null,Lo(r,o,i),t.current.lanes=i,ge(t,i,n),iu(t,n),t}function Vu(t,e,r,n){var i=e.current,o=eu(),s=ru(i);return r=Xu(r),null===e.context?e.context=r:e.pendingContext=r,(e=Fo(o,s)).payload={element:t},null!==(n=void 0===n?null:n)&&(e.callback=n),null!==(t=Lo(i,e,s))&&(nu(t,i,s,o),No(t,i,s)),s}function Hu(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Yu(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var r=t.retryLane;t.retryLane=0!==r&&r<e?r:e}}function Wu(t,e){Yu(t,e),(t=t.alternate)&&Yu(t,e)}wl=function(t,e,r){if(null!==t)if(t.memoizedProps!==e.pendingProps||Pi.current)ba=!0;else{if(0===(t.lanes&r)&&0===(128&e.flags))return ba=!1,function(t,e,r){switch(e.tag){case 3:Oa(e),po();break;case 5:ss(e);break;case 1:Ci(e.type)&&Ni(e);break;case 4:is(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Ii(_o,n._currentValue),n._currentValue=i;break;case 13:if(null!==(n=e.memoizedState))return null!==n.dehydrated?(Ii(ls,1&ls.current),e.flags|=128,null):0!==(r&e.child.childLanes)?ka(t,e,r):(Ii(ls,1&ls.current),null!==(t=Ha(t,e,r))?t.sibling:null);Ii(ls,1&ls.current);break;case 19:if(n=0!==(r&e.childLanes),0!==(128&t.flags)){if(n)return za(t,e,r);e.flags|=128}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(ls,ls.current),n)break;return null;case 22:case 23:return e.lanes=0,Ea(t,e,r)}return Ha(t,e,r)}(t,e,r);ba=0!==(131072&t.flags)}else ba=!1,io&&0!==(1048576&e.flags)&&Ji(e,Yi,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Va(t,e),t=e.pendingProps;var i=Ri(e,Mi.current);Eo(e,r),i=ws(null,e,n,t,i,r);var s=Es();return e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ci(n)?(s=!0,Ni(e)):s=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Co(e),i.updater=Xo,e.stateNode=i,i._reactInternals=e,Yo(e,n,t,r),e=Pa(null,e,n,!0,s,r)):(e.tag=0,io&&s&&to(e),xa(null,e,i,r),e=e.child),e;case 16:n=e.elementType;t:{switch(Va(t,e),t=e.pendingProps,n=(i=n._init)(n._payload),e.type=n,i=e.tag=function(t){if("function"===typeof t)return Du(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===M)return 11;if(t===R)return 14}return 2}(n),t=go(n,t),i){case 0:e=Aa(null,e,n,t,r);break t;case 1:e=Ma(null,e,n,t,r);break t;case 11:e=Ta(null,e,n,t,r);break t;case 14:e=Sa(null,e,n,go(n.type,t),r);break t}throw Error(o(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,Aa(t,e,n,i=e.elementType===n?i:go(n,i),r);case 1:return n=e.type,i=e.pendingProps,Ma(t,e,n,i=e.elementType===n?i:go(n,i),r);case 3:t:{if(Oa(e),null===t)throw Error(o(387));n=e.pendingProps,i=(s=e.memoizedState).element,Do(t,e),ko(e,n,null,r);var a=e.memoizedState;if(n=a.element,s.isDehydrated){if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,256&e.flags){e=Ra(t,e,n,r,i=ha(Error(o(423)),e));break t}if(n!==i){e=Ra(t,e,n,r,i=ha(Error(o(424)),e));break t}for(no=ui(e.stateNode.containerInfo.firstChild),ro=e,io=!0,oo=null,r=Zo(e,null,n,r),e.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(po(),n===i){e=Ha(t,e,r);break t}xa(t,e,n,r)}e=e.child}return e;case 5:return ss(e),null===t&&uo(e),n=e.type,i=e.pendingProps,s=null!==t?t.memoizedProps:null,a=i.children,ri(n,i)?a=null:null!==s&&ri(n,s)&&(e.flags|=32),Ia(t,e),xa(t,e,a,r),e.child;case 6:return null===t&&uo(e),null;case 13:return ka(t,e,r);case 4:return is(e,e.stateNode.containerInfo),n=e.pendingProps,null===t?e.child=Qo(e,null,n,r):xa(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,Ta(t,e,n,i=e.elementType===n?i:go(n,i),r);case 7:return xa(t,e,e.pendingProps,r),e.child;case 8:case 12:return xa(t,e,e.pendingProps.children,r),e.child;case 10:t:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Ii(_o,n._currentValue),n._currentValue=a,null!==s)if(an(s.value,a)){if(s.children===i.children&&!Pi.current){e=Ha(t,e,r);break t}}else for(null!==(s=e.child)&&(s.return=e);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var u=l.firstContext;null!==u;){if(u.context===n){if(1===s.tag){(u=Fo(-1,r&-r)).tag=2;var h=s.updateQueue;if(null!==h){var c=(h=h.shared).pending;null===c?u.next=u:(u.next=c.next,c.next=u),h.pending=u}}s.lanes|=r,null!==(u=s.alternate)&&(u.lanes|=r),wo(s.return,r,e),l.lanes|=r;break}u=u.next}}else if(10===s.tag)a=s.type===e.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=r,null!==(l=a.alternate)&&(l.lanes|=r),wo(a,r,e),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===e){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}xa(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Eo(e,r),n=n(i=Io(i)),e.flags|=1,xa(t,e,n,r),e.child;case 14:return i=go(n=e.type,e.pendingProps),Sa(t,e,n,i=go(n.type,i),r);case 15:return wa(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:go(n,i),Va(t,e),e.tag=1,Ci(n)?(t=!0,Ni(e)):t=!1,Eo(e,r),Vo(e,n,i),Yo(e,n,i,r),Pa(null,e,n,!0,t,r);case 19:return za(t,e,r);case 22:return Ea(t,e,r)}throw Error(o(156,e.tag))};var qu="function"===typeof reportError?reportError:function(t){console.error(t)};function $u(t){this._internalRoot=t}function Ku(t){this._internalRoot=t}function Qu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Zu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Ju(){}function th(t,e,r,n,i){var o=r._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var t=Hu(s);a.call(t)}}Vu(e,s,t,i)}else s=function(t,e,r,n,i){if(i){if("function"===typeof n){var o=n;n=function(){var t=Hu(s);o.call(t)}}var s=zu(e,n,t,0,null,!1,0,"",Ju);return t._reactRootContainer=s,t[pi]=s.current,Xn(8===t.nodeType?t.parentNode:t),cu(),s}for(;i=t.lastChild;)t.removeChild(i);if("function"===typeof n){var a=n;n=function(){var t=Hu(l);a.call(t)}}var l=ju(t,0,!1,null,0,!1,0,"",Ju);return t._reactRootContainer=l,t[pi]=l.current,Xn(8===t.nodeType?t.parentNode:t),cu((function(){Vu(e,l,r,n)})),l}(r,e,t,i,n);return Hu(s)}Ku.prototype.render=$u.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(o(409));Vu(t,e,null,null)},Ku.prototype.unmount=$u.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;cu((function(){Vu(null,t,null,null)})),e[pi]=null}},Ku.prototype.unstable_scheduleHydration=function(t){if(t){var e=we();t={blockedOn:null,target:t,priority:e};for(var r=0;r<De.length&&0!==e&&e<De[r].priority;r++);De.splice(r,0,t),0===r&&Be(t)}},xe=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=ce(e.pendingLanes);0!==r&&(_e(e,1|r),iu(e,Qt()),0===(6&Pl)&&(zl=Qt()+500,Xi()))}break;case 13:cu((function(){var e=Oo(t,1);if(null!==e){var r=eu();nu(e,t,1,r)}})),Wu(t,1)}},Te=function(t){if(13===t.tag){var e=Oo(t,134217728);if(null!==e)nu(e,t,134217728,eu());Wu(t,134217728)}},Se=function(t){if(13===t.tag){var e=ru(t),r=Oo(t,e);if(null!==r)nu(r,t,e,eu());Wu(t,e)}},we=function(){return ve},Ee=function(t,e){var r=ve;try{return ve=t,e()}finally{ve=r}},Tt=function(t,e,r){switch(e){case"input":if(Z(t,r),e=r.name,"radio"===r.type&&null!=e){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=xi(n);if(!i)throw Error(o(90));W(n),Z(n,i)}}}break;case"textarea":ot(t,r);break;case"select":null!=(e=r.value)&&rt(t,!!r.multiple,e,!1)}},Mt=hu,Pt=cu;var eh={usingClientEntryPoint:!1,Events:[vi,bi,xi,It,At,hu]},rh={findFiberByHostInstance:_i,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nh={bundleType:rh.bundleType,version:rh.version,rendererPackageName:rh.rendererPackageName,rendererConfig:rh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Ht(t))?null:t.stateNode},findFiberByHostInstance:rh.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ih.isDisabled&&ih.supportsFiber)try{ie=ih.inject(nh),oe=ih}catch(ht){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eh,e.createPortal=function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qu(e))throw Error(o(200));return function(t,e,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:T,key:null==n?null:""+n,children:t,containerInfo:e,implementation:r}}(t,e,null,r)},e.createRoot=function(t,e){if(!Qu(t))throw Error(o(299));var r=!1,n="",i=qu;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(r=!0),void 0!==e.identifierPrefix&&(n=e.identifierPrefix),void 0!==e.onRecoverableError&&(i=e.onRecoverableError)),e=ju(t,1,!1,null,0,r,0,n,i),t[pi]=e.current,Xn(8===t.nodeType?t.parentNode:t),new $u(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(o(188));throw t=Object.keys(t).join(","),Error(o(268,t))}return t=null===(t=Ht(e))?null:t.stateNode},e.flushSync=function(t){return cu(t)},e.hydrate=function(t,e,r){if(!Zu(e))throw Error(o(200));return th(null,t,e,!0,r)},e.hydrateRoot=function(t,e,r){if(!Qu(t))throw Error(o(405));var n=null!=r&&r.hydratedSources||null,i=!1,s="",a=qu;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(i=!0),void 0!==r.identifierPrefix&&(s=r.identifierPrefix),void 0!==r.onRecoverableError&&(a=r.onRecoverableError)),e=zu(e,null,t,1,null!=r?r:null,i,0,s,a),t[pi]=e.current,Xn(t),n)for(t=0;t<n.length;t++)i=(i=(r=n[t])._getVersion)(r._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Ku(e)},e.render=function(t,e,r){if(!Zu(e))throw Error(o(200));return th(null,t,e,!1,r)},e.unmountComponentAtNode=function(t){if(!Zu(t))throw Error(o(40));return!!t._reactRootContainer&&(cu((function(){th(null,null,t,!1,(function(){t._reactRootContainer=null,t[pi]=null}))})),!0)},e.unstable_batchedUpdates=hu,e.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Zu(r))throw Error(o(200));if(null==t||void 0===t._reactInternals)throw Error(o(38));return th(t,e,r,!1,n)},e.version="18.2.0-next-9e3b772b8-20220608"},950:(t,e,r)=>{"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=r(730)},153:(t,e,r)=>{"use strict";var n=r(43),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(t,e,r){var n,o={},u=null,h=null;for(n in void 0!==r&&(u=""+r),void 0!==e.key&&(u=""+e.key),void 0!==e.ref&&(h=e.ref),e)s.call(e,n)&&!l.hasOwnProperty(n)&&(o[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps)void 0===o[n]&&(o[n]=e[n]);return{$$typeof:i,type:t,key:u,ref:h,props:o,_owner:a.current}}e.Fragment=o,e.jsx=u},202:(t,e)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,y={};function g(t,e,r){this.props=t,this.context=e,this.refs=y,this.updater=r||p}function _(){}function v(t,e,r){this.props=t,this.context=e,this.refs=y,this.updater=r||p}g.prototype.isReactComponent={},g.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},g.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},_.prototype=g.prototype;var b=v.prototype=new _;b.constructor=v,m(b,g.prototype),b.isPureReactComponent=!0;var x=Array.isArray,T=Object.prototype.hasOwnProperty,S={current:null},w={key:!0,ref:!0,__self:!0,__source:!0};function E(t,e,n){var i,o={},s=null,a=null;if(null!=e)for(i in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)T.call(e,i)&&!w.hasOwnProperty(i)&&(o[i]=e[i]);var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];o.children=u}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:r,type:t,key:s,ref:a,props:o,_owner:S.current}}function I(t){return"object"===typeof t&&null!==t&&t.$$typeof===r}var A=/\/+/g;function M(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function P(t,e,i,o,s){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case r:case n:l=!0}}if(l)return s=s(l=t),t=""===o?"."+M(l,0):o,x(s)?(i="",null!=t&&(i=t.replace(A,"$&/")+"/"),P(s,e,i,"",(function(t){return t}))):null!=s&&(I(s)&&(s=function(t,e){return{$$typeof:r,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(A,"$&/")+"/")+t)),e.push(s)),1;if(l=0,o=""===o?".":o+":",x(t))for(var u=0;u<t.length;u++){var h=o+M(a=t[u],u);l+=P(a,e,i,h,s)}else if(h=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t),"function"===typeof h)for(t=h.call(t),u=0;!(a=t.next()).done;)l+=P(a=a.value,e,i,h=o+M(a,u++),s);else if("object"===a)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function O(t,e,r){if(null==t)return t;var n=[],i=0;return P(t,n,"","",(function(t){return e.call(r,t,i++)})),n}function R(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var C={current:null},D={transition:null},F={ReactCurrentDispatcher:C,ReactCurrentBatchConfig:D,ReactCurrentOwner:S};e.Children={map:O,forEach:function(t,e,r){O(t,(function(){e.apply(this,arguments)}),r)},count:function(t){var e=0;return O(t,(function(){e++})),e},toArray:function(t){return O(t,(function(t){return t}))||[]},only:function(t){if(!I(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=g,e.Fragment=i,e.Profiler=s,e.PureComponent=v,e.StrictMode=o,e.Suspense=h,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,e.cloneElement=function(t,e,n){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=m({},t.props),o=t.key,s=t.ref,a=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,a=S.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)T.call(e,u)&&!w.hasOwnProperty(u)&&(i[u]=void 0===e[u]&&void 0!==l?l[u]:e[u])}var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];i.children=l}return{$$typeof:r,type:t.type,key:o,ref:s,props:i,_owner:a}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=E,e.createFactory=function(t){var e=E.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:u,render:t}},e.isValidElement=I,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:R}},e.memo=function(t,e){return{$$typeof:c,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=D.transition;D.transition={};try{t()}finally{D.transition=e}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(t,e){return C.current.useCallback(t,e)},e.useContext=function(t){return C.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return C.current.useDeferredValue(t)},e.useEffect=function(t,e){return C.current.useEffect(t,e)},e.useId=function(){return C.current.useId()},e.useImperativeHandle=function(t,e,r){return C.current.useImperativeHandle(t,e,r)},e.useInsertionEffect=function(t,e){return C.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return C.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return C.current.useMemo(t,e)},e.useReducer=function(t,e,r){return C.current.useReducer(t,e,r)},e.useRef=function(t){return C.current.useRef(t)},e.useState=function(t){return C.current.useState(t)},e.useSyncExternalStore=function(t,e,r){return C.current.useSyncExternalStore(t,e,r)},e.useTransition=function(){return C.current.useTransition()},e.version="18.2.0"},43:(t,e,r)=>{"use strict";t.exports=r(202)},579:(t,e,r)=>{"use strict";t.exports=r(153)},234:(t,e)=>{"use strict";function r(t,e){var r=t.length;t.push(e);t:for(;0<r;){var n=r-1>>>1,i=t[n];if(!(0<o(i,e)))break t;t[n]=e,t[r]=i,r=n}}function n(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],r=t.pop();if(r!==e){t[0]=r;t:for(var n=0,i=t.length,s=i>>>1;n<s;){var a=2*(n+1)-1,l=t[a],u=a+1,h=t[u];if(0>o(l,r))u<i&&0>o(h,l)?(t[n]=h,t[u]=r,n=u):(t[n]=l,t[a]=r,n=a);else{if(!(u<i&&0>o(h,r)))break t;t[n]=h,t[u]=r,n=u}}}return e}function o(t,e){var r=t.sortIndex-e.sortIndex;return 0!==r?r:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],h=[],c=1,d=null,f=3,p=!1,m=!1,y=!1,g="function"===typeof setTimeout?setTimeout:null,_="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function b(t){for(var e=n(h);null!==e;){if(null===e.callback)i(h);else{if(!(e.startTime<=t))break;i(h),e.sortIndex=e.expirationTime,r(u,e)}e=n(h)}}function x(t){if(y=!1,b(t),!m)if(null!==n(u))m=!0,D(T);else{var e=n(h);null!==e&&F(x,e.startTime-t)}}function T(t,r){m=!1,y&&(y=!1,_(I),I=-1),p=!0;var o=f;try{for(b(r),d=n(u);null!==d&&(!(d.expirationTime>r)||t&&!P());){var s=d.callback;if("function"===typeof s){d.callback=null,f=d.priorityLevel;var a=s(d.expirationTime<=r);r=e.unstable_now(),"function"===typeof a?d.callback=a:d===n(u)&&i(u),b(r)}else i(u);d=n(u)}if(null!==d)var l=!0;else{var c=n(h);null!==c&&F(x,c.startTime-r),l=!1}return l}finally{d=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,w=!1,E=null,I=-1,A=5,M=-1;function P(){return!(e.unstable_now()-M<A)}function O(){if(null!==E){var t=e.unstable_now();M=t;var r=!0;try{r=E(!0,t)}finally{r?S():(w=!1,E=null)}}else w=!1}if("function"===typeof v)S=function(){v(O)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,C=R.port2;R.port1.onmessage=O,S=function(){C.postMessage(null)}}else S=function(){g(O,0)};function D(t){E=t,w||(w=!0,S())}function F(t,r){I=g((function(){t(e.unstable_now())}),r)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,D(T))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var r=f;f=e;try{return t()}finally{f=r}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var r=f;f=t;try{return e()}finally{f=r}},e.unstable_scheduleCallback=function(t,i,o){var s=e.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,t){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return t={id:c++,callback:i,priorityLevel:t,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(t.sortIndex=o,r(h,t),null===n(u)&&t===n(h)&&(y?(_(I),I=-1):y=!0,F(x,o-s))):(t.sortIndex=a,r(u,t),m||p||(m=!0,D(T))),t},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(t){var e=f;return function(){var r=f;f=e;try{return t.apply(this,arguments)}finally{f=r}}}},853:(t,e,r)=>{"use strict";t.exports=r(234)},438:(t,e,r)=>{"use strict";var n=r(2),i=r(992),o=r(101)(),s=r(558),a=r(902),l=n("%Math.floor%");t.exports=function(t,e){if("function"!==typeof t)throw new a("`fn` is not a function");if("number"!==typeof e||e<0||e>4294967295||l(e)!==e)throw new a("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],n=!0,u=!0;if("length"in t&&s){var h=s(t,"length");h&&!h.configurable&&(n=!1),h&&!h.writable&&(u=!1)}return(n||u||!r)&&(o?i(t,"length",e,!0,!0):i(t,"length",e)),t}},269:(t,e,r)=>{"use strict";var n=r(2),i=r(28),o=r(206),s=r(902),a=n("%WeakMap%",!0),l=n("%Map%",!0),u=i("WeakMap.prototype.get",!0),h=i("WeakMap.prototype.set",!0),c=i("WeakMap.prototype.has",!0),d=i("Map.prototype.get",!0),f=i("Map.prototype.set",!0),p=i("Map.prototype.has",!0),m=function(t,e){for(var r,n=t;null!==(r=n.next);n=r)if(r.key===e)return n.next=r.next,r.next=t.next,t.next=r,r};t.exports=function(){var t,e,r,n={assert:function(t){if(!n.has(t))throw new s("Side channel does not contain "+o(t))},get:function(n){if(a&&n&&("object"===typeof n||"function"===typeof n)){if(t)return u(t,n)}else if(l){if(e)return d(e,n)}else if(r)return function(t,e){var r=m(t,e);return r&&r.value}(r,n)},has:function(n){if(a&&n&&("object"===typeof n||"function"===typeof n)){if(t)return c(t,n)}else if(l){if(e)return p(e,n)}else if(r)return function(t,e){return!!m(t,e)}(r,n);return!1},set:function(n,i){a&&n&&("object"===typeof n||"function"===typeof n)?(t||(t=new a),h(t,n,i)):l?(e||(e=new l),f(e,n,i)):(r||(r={key:{},next:null}),function(t,e,r){var n=m(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}}(r,n,i))}};return n}},739:(t,e,r)=>{"use strict";var n=r(123),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,s=i?Symbol.for("react.portal"):60106,a=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,u=i?Symbol.for("react.profiler"):60114,h=i?Symbol.for("react.provider"):60109,c=i?Symbol.for("react.context"):60110,d=i?Symbol.for("react.forward_ref"):60112,f=i?Symbol.for("react.suspense"):60113,p=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,y="function"===typeof Symbol&&Symbol.iterator;function g(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function b(t,e,r){this.props=t,this.context=e,this.refs=v,this.updater=r||_}function x(){}function T(t,e,r){this.props=t,this.context=e,this.refs=v,this.updater=r||_}b.prototype.isReactComponent={},b.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(g(85));this.updater.enqueueSetState(this,t,e,"setState")},b.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},x.prototype=b.prototype;var S=T.prototype=new x;S.constructor=T,n(S,b.prototype),S.isPureReactComponent=!0;var w={current:null},E=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};function A(t,e,r){var n,i={},s=null,a=null;if(null!=e)for(n in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)E.call(e,n)&&!I.hasOwnProperty(n)&&(i[n]=e[n]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(n in l=t.defaultProps)void 0===i[n]&&(i[n]=l[n]);return{$$typeof:o,type:t,key:s,ref:a,props:i,_owner:w.current}}function M(t){return"object"===typeof t&&null!==t&&t.$$typeof===o}var P=/\/+/g,O=[];function R(t,e,r,n){if(O.length){var i=O.pop();return i.result=t,i.keyPrefix=e,i.func=r,i.context=n,i.count=0,i}return{result:t,keyPrefix:e,func:r,context:n,count:0}}function C(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>O.length&&O.push(t)}function D(t,e,r,n){var i=typeof t;"undefined"!==i&&"boolean"!==i||(t=null);var a=!1;if(null===t)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case o:case s:a=!0}}if(a)return r(n,t,""===e?"."+L(t,0):e),1;if(a=0,e=""===e?".":e+":",Array.isArray(t))for(var l=0;l<t.length;l++){var u=e+L(i=t[l],l);a+=D(i,u,r,n)}else if(null===t||"object"!==typeof t?u=null:u="function"===typeof(u=y&&t[y]||t["@@iterator"])?u:null,"function"===typeof u)for(t=u.call(t),l=0;!(i=t.next()).done;)a+=D(i=i.value,u=e+L(i,l++),r,n);else if("object"===i)throw r=""+t,Error(g(31,"[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r,""));return a}function F(t,e,r){return null==t?0:D(t,"",e,r)}function L(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function N(t,e){t.func.call(t.context,e,t.count++)}function B(t,e,r){var n=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?k(t,n,r,(function(t){return t})):null!=t&&(M(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(P,"$&/")+"/")+r)),n.push(t))}function k(t,e,r,n,i){var o="";null!=r&&(o=(""+r).replace(P,"$&/")+"/"),F(t,B,e=R(e,o,n,i)),C(e)}var U={current:null};function G(){var t=U.current;if(null===t)throw Error(g(321));return t}var j={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:n};e.Children={map:function(t,e,r){if(null==t)return t;var n=[];return k(t,n,null,e,r),n},forEach:function(t,e,r){if(null==t)return t;F(t,N,e=R(null,null,e,r)),C(e)},count:function(t){return F(t,(function(){return null}),null)},toArray:function(t){var e=[];return k(t,e,null,(function(t){return t})),e},only:function(t){if(!M(t))throw Error(g(143));return t}},e.Component=b,e.Fragment=a,e.Profiler=u,e.PureComponent=T,e.StrictMode=l,e.Suspense=f,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,e.cloneElement=function(t,e,r){if(null===t||void 0===t)throw Error(g(267,t));var i=n({},t.props),s=t.key,a=t.ref,l=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,l=w.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(h in e)E.call(e,h)&&!I.hasOwnProperty(h)&&(i[h]=void 0===e[h]&&void 0!==u?u[h]:e[h])}var h=arguments.length-2;if(1===h)i.children=r;else if(1<h){u=Array(h);for(var c=0;c<h;c++)u[c]=arguments[c+2];i.children=u}return{$$typeof:o,type:t.type,key:s,ref:a,props:i,_owner:l}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:c,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:h,_context:t},t.Consumer=t},e.createElement=A,e.createFactory=function(t){var e=A.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:d,render:t}},e.isValidElement=M,e.lazy=function(t){return{$$typeof:m,_ctor:t,_status:-1,_result:null}},e.memo=function(t,e){return{$$typeof:p,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return G().useCallback(t,e)},e.useContext=function(t,e){return G().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return G().useEffect(t,e)},e.useImperativeHandle=function(t,e,r){return G().useImperativeHandle(t,e,r)},e.useLayoutEffect=function(t,e){return G().useLayoutEffect(t,e)},e.useMemo=function(t,e){return G().useMemo(t,e)},e.useReducer=function(t,e,r){return G().useReducer(t,e,r)},e.useRef=function(t){return G().useRef(t)},e.useState=function(t){return G().useState(t)},e.version="16.14.0"},904:(t,e,r)=>{"use strict";t.exports=r(739)},907:function(t,e,r){var n;t=r.nmd(t),function(i){e&&e.nodeType,t&&t.nodeType;var o="object"==typeof r.g&&r.g;o.global!==o&&o.window!==o&&o.self;var s,a=2147483647,l=36,u=1,h=26,c=38,d=700,f=72,p=128,m="-",y=/^xn--/,g=/[^\x20-\x7E]/,_=/[\x2E\u3002\uFF0E\uFF61]/g,v={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=l-u,x=Math.floor,T=String.fromCharCode;function S(t){throw new RangeError(v[t])}function w(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function E(t,e){var r=t.split("@"),n="";return r.length>1&&(n=r[0]+"@",t=r[1]),n+w((t=t.replace(_,".")).split("."),e).join(".")}function I(t){for(var e,r,n=[],i=0,o=t.length;i<o;)(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<o?56320==(64512&(r=t.charCodeAt(i++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),i--):n.push(e);return n}function A(t){return w(t,(function(t){var e="";return t>65535&&(e+=T((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=T(t)})).join("")}function M(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function P(t,e,r){var n=0;for(t=r?x(t/d):t>>1,t+=x(t/e);t>b*h>>1;n+=l)t=x(t/b);return x(n+(b+1)*t/(t+c))}function O(t){var e,r,n,i,o,s,c,d,y,g,_,v=[],b=t.length,T=0,w=p,E=f;for((r=t.lastIndexOf(m))<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&S("not-basic"),v.push(t.charCodeAt(n));for(i=r>0?r+1:0;i<b;){for(o=T,s=1,c=l;i>=b&&S("invalid-input"),((d=(_=t.charCodeAt(i++))-48<10?_-22:_-65<26?_-65:_-97<26?_-97:l)>=l||d>x((a-T)/s))&&S("overflow"),T+=d*s,!(d<(y=c<=E?u:c>=E+h?h:c-E));c+=l)s>x(a/(g=l-y))&&S("overflow"),s*=g;E=P(T-o,e=v.length+1,0==o),x(T/e)>a-w&&S("overflow"),w+=x(T/e),T%=e,v.splice(T++,0,w)}return A(v)}function R(t){var e,r,n,i,o,s,c,d,y,g,_,v,b,w,E,A=[];for(v=(t=I(t)).length,e=p,r=0,o=f,s=0;s<v;++s)(_=t[s])<128&&A.push(T(_));for(n=i=A.length,i&&A.push(m);n<v;){for(c=a,s=0;s<v;++s)(_=t[s])>=e&&_<c&&(c=_);for(c-e>x((a-r)/(b=n+1))&&S("overflow"),r+=(c-e)*b,e=c,s=0;s<v;++s)if((_=t[s])<e&&++r>a&&S("overflow"),_==e){for(d=r,y=l;!(d<(g=y<=o?u:y>=o+h?h:y-o));y+=l)E=d-g,w=l-g,A.push(T(M(g+E%w,0))),d=x(E/w);A.push(T(M(d,0))),o=P(r,b,n==i),r=0,++n}++r,++e}return A.join("")}s={version:"1.4.1",ucs2:{decode:I,encode:A},decode:O,encode:R,toASCII:function(t){return E(t,(function(t){return g.test(t)?"xn--"+R(t):t}))},toUnicode:function(t){return E(t,(function(t){return y.test(t)?O(t.slice(4).toLowerCase()):t}))}},void 0===(n=function(){return s}.call(e,r,e,t))||(t.exports=n)}()},737:t=>{"use strict";var e=String.prototype.replace,r=/%20/g,n="RFC1738",i="RFC3986";t.exports={default:i,formatters:{RFC1738:function(t){return e.call(t,r,"+")},RFC3986:function(t){return String(t)}},RFC1738:n,RFC3986:i}},857:(t,e,r)=>{"use strict";var n=r(808),i=r(638),o=r(737);t.exports={formats:o,parse:i,stringify:n}},638:(t,e,r)=>{"use strict";var n=r(940),i=Object.prototype.hasOwnProperty,o=Array.isArray,s={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(t){return t.replace(/&#(\d+);/g,(function(t,e){return String.fromCharCode(parseInt(e,10))}))},l=function(t,e){return t&&"string"===typeof t&&e.comma&&t.indexOf(",")>-1?t.split(","):t},u=function(t,e,r,n){if(t){var o=r.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,s=/(\[[^[\]]*])/g,a=r.depth>0&&/(\[[^[\]]*])/.exec(o),u=a?o.slice(0,a.index):o,h=[];if(u){if(!r.plainObjects&&i.call(Object.prototype,u)&&!r.allowPrototypes)return;h.push(u)}for(var c=0;r.depth>0&&null!==(a=s.exec(o))&&c<r.depth;){if(c+=1,!r.plainObjects&&i.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;h.push(a[1])}return a&&h.push("["+o.slice(a.index)+"]"),function(t,e,r,n){for(var i=n?e:l(e,r),o=t.length-1;o>=0;--o){var s,a=t[o];if("[]"===a&&r.parseArrays)s=[].concat(i);else{s=r.plainObjects?Object.create(null):{};var u="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,h=parseInt(u,10);r.parseArrays||""!==u?!isNaN(h)&&a!==u&&String(h)===u&&h>=0&&r.parseArrays&&h<=r.arrayLimit?(s=[])[h]=i:"__proto__"!==u&&(s[u]=i):s={0:i}}i=s}return i}(h,e,r,n)}};t.exports=function(t,e){var r=function(t){if(!t)return s;if(null!==t.decoder&&void 0!==t.decoder&&"function"!==typeof t.decoder)throw new TypeError("Decoder has to be a function.");if("undefined"!==typeof t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var e="undefined"===typeof t.charset?s.charset:t.charset;return{allowDots:"undefined"===typeof t.allowDots?s.allowDots:!!t.allowDots,allowPrototypes:"boolean"===typeof t.allowPrototypes?t.allowPrototypes:s.allowPrototypes,allowSparse:"boolean"===typeof t.allowSparse?t.allowSparse:s.allowSparse,arrayLimit:"number"===typeof t.arrayLimit?t.arrayLimit:s.arrayLimit,charset:e,charsetSentinel:"boolean"===typeof t.charsetSentinel?t.charsetSentinel:s.charsetSentinel,comma:"boolean"===typeof t.comma?t.comma:s.comma,decoder:"function"===typeof t.decoder?t.decoder:s.decoder,delimiter:"string"===typeof t.delimiter||n.isRegExp(t.delimiter)?t.delimiter:s.delimiter,depth:"number"===typeof t.depth||!1===t.depth?+t.depth:s.depth,ignoreQueryPrefix:!0===t.ignoreQueryPrefix,interpretNumericEntities:"boolean"===typeof t.interpretNumericEntities?t.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:"number"===typeof t.parameterLimit?t.parameterLimit:s.parameterLimit,parseArrays:!1!==t.parseArrays,plainObjects:"boolean"===typeof t.plainObjects?t.plainObjects:s.plainObjects,strictNullHandling:"boolean"===typeof t.strictNullHandling?t.strictNullHandling:s.strictNullHandling}}(e);if(""===t||null===t||"undefined"===typeof t)return r.plainObjects?Object.create(null):{};for(var h="string"===typeof t?function(t,e){var r,u={__proto__:null},h=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,c=e.parameterLimit===1/0?void 0:e.parameterLimit,d=h.split(e.delimiter,c),f=-1,p=e.charset;if(e.charsetSentinel)for(r=0;r<d.length;++r)0===d[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[r]?p="utf-8":"utf8=%26%2310003%3B"===d[r]&&(p="iso-8859-1"),f=r,r=d.length);for(r=0;r<d.length;++r)if(r!==f){var m,y,g=d[r],_=g.indexOf("]="),v=-1===_?g.indexOf("="):_+1;-1===v?(m=e.decoder(g,s.decoder,p,"key"),y=e.strictNullHandling?null:""):(m=e.decoder(g.slice(0,v),s.decoder,p,"key"),y=n.maybeMap(l(g.slice(v+1),e),(function(t){return e.decoder(t,s.decoder,p,"value")}))),y&&e.interpretNumericEntities&&"iso-8859-1"===p&&(y=a(y)),g.indexOf("[]=")>-1&&(y=o(y)?[y]:y),i.call(u,m)?u[m]=n.combine(u[m],y):u[m]=y}return u}(t,r):t,c=r.plainObjects?Object.create(null):{},d=Object.keys(h),f=0;f<d.length;++f){var p=d[f],m=u(p,h[p],r,"string"===typeof t);c=n.merge(c,m,r)}return!0===r.allowSparse?c:n.compact(c)}},808:(t,e,r)=>{"use strict";var n=r(269),i=r(940),o=r(737),s=Object.prototype.hasOwnProperty,a={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},l=Array.isArray,u=Array.prototype.push,h=function(t,e){u.apply(t,l(e)?e:[e])},c=Date.prototype.toISOString,d=o.default,f={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,format:d,formatter:o.formatters[d],indices:!1,serializeDate:function(t){return c.call(t)},skipNulls:!1,strictNullHandling:!1},p={},m=function t(e,r,o,s,a,u,c,d,m,y,g,_,v,b,x,T){for(var S,w=e,E=T,I=0,A=!1;void 0!==(E=E.get(p))&&!A;){var M=E.get(e);if(I+=1,"undefined"!==typeof M){if(M===I)throw new RangeError("Cyclic object value");A=!0}"undefined"===typeof E.get(p)&&(I=0)}if("function"===typeof d?w=d(r,w):w instanceof Date?w=g(w):"comma"===o&&l(w)&&(w=i.maybeMap(w,(function(t){return t instanceof Date?g(t):t}))),null===w){if(a)return c&&!b?c(r,f.encoder,x,"key",_):r;w=""}if("string"===typeof(S=w)||"number"===typeof S||"boolean"===typeof S||"symbol"===typeof S||"bigint"===typeof S||i.isBuffer(w))return c?[v(b?r:c(r,f.encoder,x,"key",_))+"="+v(c(w,f.encoder,x,"value",_))]:[v(r)+"="+v(String(w))];var P,O=[];if("undefined"===typeof w)return O;if("comma"===o&&l(w))b&&c&&(w=i.maybeMap(w,c)),P=[{value:w.length>0?w.join(",")||null:void 0}];else if(l(d))P=d;else{var R=Object.keys(w);P=m?R.sort(m):R}for(var C=s&&l(w)&&1===w.length?r+"[]":r,D=0;D<P.length;++D){var F=P[D],L="object"===typeof F&&"undefined"!==typeof F.value?F.value:w[F];if(!u||null!==L){var N=l(w)?"function"===typeof o?o(C,F):C:C+(y?"."+F:"["+F+"]");T.set(e,I);var B=n();B.set(p,T),h(O,t(L,N,o,s,a,u,"comma"===o&&b&&l(w)?null:c,d,m,y,g,_,v,b,x,B))}}return O};t.exports=function(t,e){var r,i=t,u=function(t){if(!t)return f;if(null!==t.encoder&&"undefined"!==typeof t.encoder&&"function"!==typeof t.encoder)throw new TypeError("Encoder has to be a function.");var e=t.charset||f.charset;if("undefined"!==typeof t.charset&&"utf-8"!==t.charset&&"iso-8859-1"!==t.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=o.default;if("undefined"!==typeof t.format){if(!s.call(o.formatters,t.format))throw new TypeError("Unknown format option provided.");r=t.format}var n=o.formatters[r],i=f.filter;return("function"===typeof t.filter||l(t.filter))&&(i=t.filter),{addQueryPrefix:"boolean"===typeof t.addQueryPrefix?t.addQueryPrefix:f.addQueryPrefix,allowDots:"undefined"===typeof t.allowDots?f.allowDots:!!t.allowDots,charset:e,charsetSentinel:"boolean"===typeof t.charsetSentinel?t.charsetSentinel:f.charsetSentinel,delimiter:"undefined"===typeof t.delimiter?f.delimiter:t.delimiter,encode:"boolean"===typeof t.encode?t.encode:f.encode,encoder:"function"===typeof t.encoder?t.encoder:f.encoder,encodeValuesOnly:"boolean"===typeof t.encodeValuesOnly?t.encodeValuesOnly:f.encodeValuesOnly,filter:i,format:r,formatter:n,serializeDate:"function"===typeof t.serializeDate?t.serializeDate:f.serializeDate,skipNulls:"boolean"===typeof t.skipNulls?t.skipNulls:f.skipNulls,sort:"function"===typeof t.sort?t.sort:null,strictNullHandling:"boolean"===typeof t.strictNullHandling?t.strictNullHandling:f.strictNullHandling}}(e);"function"===typeof u.filter?i=(0,u.filter)("",i):l(u.filter)&&(r=u.filter);var c,d=[];if("object"!==typeof i||null===i)return"";c=e&&e.arrayFormat in a?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices";var p=a[c];if(e&&"commaRoundTrip"in e&&"boolean"!==typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var y="comma"===p&&e&&e.commaRoundTrip;r||(r=Object.keys(i)),u.sort&&r.sort(u.sort);for(var g=n(),_=0;_<r.length;++_){var v=r[_];u.skipNulls&&null===i[v]||h(d,m(i[v],v,p,y,u.strictNullHandling,u.skipNulls,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.format,u.formatter,u.encodeValuesOnly,u.charset,g))}var b=d.join(u.delimiter),x=!0===u.addQueryPrefix?"?":"";return u.charsetSentinel&&("iso-8859-1"===u.charset?x+="utf8=%26%2310003%3B&":x+="utf8=%E2%9C%93&"),b.length>0?x+b:""}},940:(t,e,r)=>{"use strict";var n=r(737),i=Object.prototype.hasOwnProperty,o=Array.isArray,s=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),a=function(t,e){for(var r=e&&e.plainObjects?Object.create(null):{},n=0;n<t.length;++n)"undefined"!==typeof t[n]&&(r[n]=t[n]);return r};t.exports={arrayToObject:a,assign:function(t,e){return Object.keys(e).reduce((function(t,r){return t[r]=e[r],t}),t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],r=[],n=0;n<e.length;++n)for(var i=e[n],s=i.obj[i.prop],a=Object.keys(s),l=0;l<a.length;++l){var u=a[l],h=s[u];"object"===typeof h&&null!==h&&-1===r.indexOf(h)&&(e.push({obj:s,prop:u}),r.push(h))}return function(t){for(;t.length>1;){var e=t.pop(),r=e.obj[e.prop];if(o(r)){for(var n=[],i=0;i<r.length;++i)"undefined"!==typeof r[i]&&n.push(r[i]);e.obj[e.prop]=n}}}(e),t},decode:function(t,e,r){var n=t.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(i){return n}},encode:function(t,e,r,i,o){if(0===t.length)return t;var a=t;if("symbol"===typeof t?a=Symbol.prototype.toString.call(t):"string"!==typeof t&&(a=String(t)),"iso-8859-1"===r)return escape(a).replace(/%u[0-9a-f]{4}/gi,(function(t){return"%26%23"+parseInt(t.slice(2),16)+"%3B"}));for(var l="",u=0;u<a.length;++u){var h=a.charCodeAt(u);45===h||46===h||95===h||126===h||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||o===n.RFC1738&&(40===h||41===h)?l+=a.charAt(u):h<128?l+=s[h]:h<2048?l+=s[192|h>>6]+s[128|63&h]:h<55296||h>=57344?l+=s[224|h>>12]+s[128|h>>6&63]+s[128|63&h]:(u+=1,h=65536+((1023&h)<<10|1023&a.charCodeAt(u)),l+=s[240|h>>18]+s[128|h>>12&63]+s[128|h>>6&63]+s[128|63&h])}return l},isBuffer:function(t){return!(!t||"object"!==typeof t)&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},maybeMap:function(t,e){if(o(t)){for(var r=[],n=0;n<t.length;n+=1)r.push(e(t[n]));return r}return e(t)},merge:function t(e,r,n){if(!r)return e;if("object"!==typeof r){if(o(e))e.push(r);else{if(!e||"object"!==typeof e)return[e,r];(n&&(n.plainObjects||n.allowPrototypes)||!i.call(Object.prototype,r))&&(e[r]=!0)}return e}if(!e||"object"!==typeof e)return[e].concat(r);var s=e;return o(e)&&!o(r)&&(s=a(e,n)),o(e)&&o(r)?(r.forEach((function(r,o){if(i.call(e,o)){var s=e[o];s&&"object"===typeof s&&r&&"object"===typeof r?e[o]=t(s,r,n):e.push(r)}else e[o]=r})),e):Object.keys(r).reduce((function(e,o){var s=r[o];return i.call(e,o)?e[o]=t(e[o],s,n):e[o]=s,e}),s)}}},80:(t,e,r)=>{"use strict";var n=r(907);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var o=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,a=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(l),h=["%","/","?",";","#"].concat(u),c=["/","?","#"],d=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,p={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},g=r(857);function _(t,e,r){if(t&&"object"===typeof t&&t instanceof i)return t;var n=new i;return n.parse(t,e,r),n}i.prototype.parse=function(t,e,r){if("string"!==typeof t)throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),s=-1!==i&&i<t.indexOf("#")?"?":"#",l=t.split(s);l[0]=l[0].replace(/\\/g,"/");var _=t=l.join(s);if(_=_.trim(),!r&&1===t.split("#").length){var v=a.exec(_);if(v)return this.path=_,this.href=_,this.pathname=v[1],v[2]?(this.search=v[2],this.query=e?g.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var b=o.exec(_);if(b){var x=(b=b[0]).toLowerCase();this.protocol=x,_=_.substr(b.length)}if(r||b||_.match(/^\/\/[^@/]+@[^@/]+/)){var T="//"===_.substr(0,2);!T||b&&m[b]||(_=_.substr(2),this.slashes=!0)}if(!m[b]&&(T||b&&!y[b])){for(var S,w,E=-1,I=0;I<c.length;I++){-1!==(A=_.indexOf(c[I]))&&(-1===E||A<E)&&(E=A)}-1!==(w=-1===E?_.lastIndexOf("@"):_.lastIndexOf("@",E))&&(S=_.slice(0,w),_=_.slice(w+1),this.auth=decodeURIComponent(S)),E=-1;for(I=0;I<h.length;I++){var A;-1!==(A=_.indexOf(h[I]))&&(-1===E||A<E)&&(E=A)}-1===E&&(E=_.length),this.host=_.slice(0,E),_=_.slice(E),this.parseHost(),this.hostname=this.hostname||"";var M="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!M)for(var P=this.hostname.split(/\./),O=(I=0,P.length);I<O;I++){var R=P[I];if(R&&!R.match(d)){for(var C="",D=0,F=R.length;D<F;D++)R.charCodeAt(D)>127?C+="x":C+=R[D];if(!C.match(d)){var L=P.slice(0,I),N=P.slice(I+1),B=R.match(f);B&&(L.push(B[1]),N.unshift(B[2])),N.length&&(_="/"+N.join(".")+_),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),M||(this.hostname=n.toASCII(this.hostname));var k=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+k,this.href+=this.host,M&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!p[x])for(I=0,O=u.length;I<O;I++){var G=u[I];if(-1!==_.indexOf(G)){var j=encodeURIComponent(G);j===G&&(j=escape(G)),_=_.split(G).join(j)}}var X=_.indexOf("#");-1!==X&&(this.hash=_.substr(X),_=_.slice(0,X));var z=_.indexOf("?");if(-1!==z?(this.search=_.substr(z),this.query=_.substr(z+1),e&&(this.query=g.parse(this.query)),_=_.slice(0,z)):e&&(this.search="",this.query={}),_&&(this.pathname=_),y[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){k=this.pathname||"";var V=this.search||"";this.path=k+V}return this.href=this.format(),this},i.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&"object"===typeof this.query&&Object.keys(this.query).length&&(o=g.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||y[e])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),s&&"?"!==s.charAt(0)&&(s="?"+s),e+i+(r=r.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(s=s.replace("#","%23"))+n},i.prototype.resolve=function(t){return this.resolveObject(_(t,!1,!0)).format()},i.prototype.resolveObject=function(t){if("string"===typeof t){var e=new i;e.parse(t,!1,!0),t=e}for(var r=new i,n=Object.keys(this),o=0;o<n.length;o++){var s=n[o];r[s]=this[s]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),l=0;l<a.length;l++){var u=a[l];"protocol"!==u&&(r[u]=t[u])}return y[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!y[t.protocol]){for(var h=Object.keys(t),c=0;c<h.length;c++){var d=h[c];r[d]=t[d]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||m[t.protocol])r.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),r.pathname=f.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var p=r.pathname||"",g=r.search||"";r.path=p+g}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var _=r.pathname&&"/"===r.pathname.charAt(0),v=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=v||_||r.host&&t.pathname,x=b,T=r.pathname&&r.pathname.split("/")||[],S=(f=t.pathname&&t.pathname.split("/")||[],r.protocol&&!y[r.protocol]);if(S&&(r.hostname="",r.port=null,r.host&&(""===T[0]?T[0]=r.host:T.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),b=b&&(""===f[0]||""===T[0])),v)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,T=f;else if(f.length)T||(T=[]),T.pop(),T=T.concat(f),r.search=t.search,r.query=t.query;else if(null!=t.search){if(S)r.host=T.shift(),r.hostname=r.host,(M=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=M.shift(),r.hostname=M.shift(),r.host=r.hostname);return r.search=t.search,r.query=t.query,null===r.pathname&&null===r.search||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!T.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var w=T.slice(-1)[0],E=(r.host||t.host||T.length>1)&&("."===w||".."===w)||""===w,I=0,A=T.length;A>=0;A--)"."===(w=T[A])?T.splice(A,1):".."===w?(T.splice(A,1),I++):I&&(T.splice(A,1),I--);if(!b&&!x)for(;I--;I)T.unshift("..");!b||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),E&&"/"!==T.join("/").substr(-1)&&T.push("");var M,P=""===T[0]||T[0]&&"/"===T[0].charAt(0);S&&(r.hostname=P?"":T.length?T.shift():"",r.host=r.hostname,(M=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=M.shift(),r.hostname=M.shift(),r.host=r.hostname));return(b=b||r.host&&T.length)&&!P&&T.unshift(""),T.length>0?r.pathname=T.join("/"):(r.pathname=null,r.path=null),null===r.pathname&&null===r.search||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},i.prototype.parseHost=function(){var t=this.host,e=s.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)},e.qg=_,e.hd=function(t,e){return _(t,!1,!0).resolve(e)},e.GP=function(t){return"string"===typeof t&&(t=_(t)),t instanceof i?t.format():i.prototype.format.call(t)}},634:()=>{}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t={};r.r(t),r.d(t,{BaseTextureCache:()=>$t,CanvasRenderTarget:()=>Zt,DATA_URI:()=>ee,EventEmitter:()=>ct,ProgramCache:()=>Wt,TextureCache:()=>qt,clearTextureCache:()=>Qt,correctBlendMode:()=>Ot,createIndicesForQuads:()=>Ft,decomposeDataUri:()=>re,deprecation:()=>Yt,destroyTextureCache:()=>Kt,determineCrossOrigin:()=>ne,earcut:()=>dt,getBufferType:()=>Lt,getResolutionOfUrl:()=>ie,hex2rgb:()=>Et,hex2string:()=>It,interleaveTypedArrays:()=>Bt,isMobile:()=>ut,isPow2:()=>Ut,isWebGLSupported:()=>St,log2:()=>Gt,nextPow2:()=>kt,path:()=>gt,premultiplyBlendMode:()=>Pt,premultiplyRgba:()=>Rt,premultiplyTint:()=>Ct,premultiplyTintToRgba:()=>Dt,removeItems:()=>jt,rgb2hex:()=>Mt,sayHello:()=>Tt,sign:()=>Xt,skipHello:()=>xt,string2hex:()=>At,trimCanvas:()=>Jt,uid:()=>Vt,url:()=>pt});var e={};r.r(e),r.d(e,{ALPHA_MODES:()=>F,AbstractBatchRenderer:()=>oi,AbstractMultiResource:()=>Ze,AbstractRenderer:()=>qn,AccessibilityManager:()=>bi,AnimatedSprite:()=>ml,AppLoaderPlugin:()=>Wi,Application:()=>ol,ArrayResource:()=>Je,Attribute:()=>gr,BLEND_MODES:()=>E,BUFFER_BITS:()=>w,BUFFER_TYPE:()=>j,BaseImageResource:()=>tr,BasePrepare:()=>ea,BaseRenderTexture:()=>hr,BaseTexture:()=>Qe,BatchDrawCall:()=>ri,BatchGeometry:()=>ai,BatchPluginFactory:()=>hi,BatchRenderer:()=>ci,BatchShaderGenerator:()=>si,BatchSystem:()=>Fr,BatchTextureArray:()=>ni,BitmapFont:()=>Fa,BitmapFontData:()=>Ea,BitmapFontLoader:()=>Ua,BitmapText:()=>ka,BlobResource:()=>ao,Bounds:()=>Ae,BrowserAdapter:()=>Y,Buffer:()=>vr,BufferResource:()=>$e,CLEAR_MODES:()=>L,COLOR_MASK_BITS:()=>U,CanvasResource:()=>er,Circle:()=>de,CompressedTextureLoader:()=>uo,CompressedTextureResource:()=>lo,Container:()=>De,ContextSystem:()=>Nr,CountLimiter:()=>Ws,CubeResource:()=>rr,DDSLoader:()=>Ho,DEG_TO_RAD:()=>le,DRAW_MODES:()=>I,DisplayObject:()=>Oe,ENV:()=>T,Ellipse:()=>fe,ExtensionType:()=>Fe,Extract:()=>Oi,FORMATS:()=>A,FORMATS_TO_COMPONENTS:()=>jo,FillStyle:()=>es,Filter:()=>yn,FilterState:()=>Pr,FilterSystem:()=>Cr,Framebuffer:()=>ur,FramebufferSystem:()=>Ur,GC_MODES:()=>N,GLFramebuffer:()=>Br,GLProgram:()=>Bn,GLTexture:()=>Vn,GRAPHICS_CURVES:()=>ts,Geometry:()=>wr,GeometrySystem:()=>jr,Graphics:()=>Ms,GraphicsData:()=>Ts,GraphicsGeometry:()=>ws,IGLUniformData:()=>Nn,INSTALLED:()=>ze,INTERNAL_FORMATS:()=>Zi,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:()=>to,ImageBitmapResource:()=>sr,ImageResource:()=>nr,InteractionData:()=>xi,InteractionEvent:()=>Si,InteractionManager:()=>Mi,InteractionTrackingData:()=>wi,KTXLoader:()=>Yo,LINE_CAP:()=>Ko,LINE_JOIN:()=>$o,LineStyle:()=>Es,Loader:()=>Yi,LoaderResource:()=>Gi,MASK_TYPES:()=>k,MIPMAP_MODES:()=>D,MSAA_QUALITY:()=>G,MaskData:()=>Xr,MaskSystem:()=>bn,Matrix:()=>ge,Mesh:()=>xa,MeshBatchUvs:()=>_a,MeshGeometry:()=>Sa,MeshMaterial:()=>Ta,NineSlicePlane:()=>fl,ObjectRenderer:()=>Dr,ObservablePoint:()=>ye,PI_2:()=>se,PRECISION:()=>B,ParticleContainer:()=>Qo,ParticleRenderer:()=>Jo,PlaneGeometry:()=>ll,Point:()=>ue,Polygon:()=>pe,Prepare:()=>oa,Program:()=>fn,ProjectionSystem:()=>In,Quad:()=>Er,QuadUv:()=>Ir,RAD_TO_DEG:()=>ae,RENDERER_TYPE:()=>S,Rectangle:()=>ce,RenderTexture:()=>mr,RenderTexturePool:()=>yr,RenderTextureSystem:()=>Pn,Renderer:()=>Qn,ResizePlugin:()=>il,Resource:()=>qe,RopeGeometry:()=>ul,RoundedRectangle:()=>me,Runner:()=>Ue,SAMPLER_TYPES:()=>O,SCALE_MODES:()=>R,SHAPES:()=>oe,SVGResource:()=>ir,ScissorSystem:()=>wn,Shader:()=>pn,ShaderSystem:()=>jn,SimpleMesh:()=>dl,SimplePlane:()=>cl,SimpleRope:()=>hl,Sprite:()=>Fs,SpriteMaskFilter:()=>vn,Spritesheet:()=>aa,SpritesheetLoader:()=>la,State:()=>mn,StateSystem:()=>Xn,StencilSystem:()=>En,System:()=>ei,TARGETS:()=>M,TEXT_GRADIENT:()=>Rs,TYPES:()=>P,TYPES_TO_BYTES_PER_COMPONENT:()=>Go,TYPES_TO_BYTES_PER_PIXEL:()=>Xo,TemporaryDisplayObject:()=>Re,Text:()=>Hs,TextFormat:()=>Ia,TextMetrics:()=>zs,TextStyle:()=>ks,Texture:()=>pr,TextureGCSystem:()=>zn,TextureLoader:()=>qi,TextureMatrix:()=>_n,TextureSystem:()=>Hn,TextureUvs:()=>cr,Ticker:()=>je,TickerPlugin:()=>Xe,TilingSprite:()=>da,TilingSpriteRenderer:()=>ma,TimeLimiter:()=>sa,Transform:()=>Ie,UPDATE_PRIORITY:()=>Ne,UniformGroup:()=>Mr,VERSION:()=>gi,VideoResource:()=>or,ViewableBuffer:()=>ii,WRAP_MODES:()=>C,XMLFormat:()=>Aa,XMLStringFormat:()=>Ma,accessibleTarget:()=>_i,autoDetectFormat:()=>Oa,autoDetectRenderer:()=>Zn,autoDetectResource:()=>Ve,checkMaxIfStatementsInShader:()=>hn,createUBOElements:()=>Dn,defaultFilterVertex:()=>ti,defaultVertex:()=>Jn,extensions:()=>ke,filters:()=>yl,generateProgram:()=>kn,generateUniformBufferSync:()=>Ln,getTestContext:()=>Kr,getUBOData:()=>Fn,graphicsUtils:()=>Ps,groupD8:()=>Ee,interactiveTarget:()=>Ii,isMobile:()=>ut,parseDDS:()=>Lo,parseKTX:()=>zo,resources:()=>di,settings:()=>ht,systems:()=>mi,uniformParsers:()=>nn,utils:()=>t});var n=r(43),i=r(950);const o=function(t){var e=this.constructor;return this.then((function(r){return e.resolve(t()).then((function(){return r}))}),(function(r){return e.resolve(t()).then((function(){return e.reject(r)}))}))};const s=function(t){return new this((function(e,r){if(!t||"undefined"===typeof t.length)return r(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var i=n.length;function o(t,r){if(r&&("object"===typeof r||"function"===typeof r)){var s=r.then;if("function"===typeof s)return void s.call(r,(function(e){o(t,e)}),(function(r){n[t]={status:"rejected",reason:r},0===--i&&e(n)}))}n[t]={status:"fulfilled",value:r},0===--i&&e(n)}for(var s=0;s<n.length;s++)o(s,n[s])}))};function a(t,e){this.name="AggregateError",this.errors=t,this.message=e||""}a.prototype=Error.prototype;const l=function(t){var e=this;return new e((function(r,n){if(!t||"undefined"===typeof t.length)return n(new TypeError("Promise.any accepts an array"));var i=Array.prototype.slice.call(t);if(0===i.length)return n();for(var o=[],s=0;s<i.length;s++)try{e.resolve(i[s]).then(r).catch((function(t){o.push(t),o.length===i.length&&n(new a(o,"All promises were rejected"))}))}catch(l){n(l)}}))};var u=setTimeout;function h(t){return Boolean(t&&"undefined"!==typeof t.length)}function c(){}function d(t){if(!(this instanceof d))throw new TypeError("Promises must be constructed via new");if("function"!==typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],_(t,this)}function f(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,d._immediateFn((function(){var r=1===t._state?e.onFulfilled:e.onRejected;if(null!==r){var n;try{n=r(t._value)}catch(i){return void m(e.promise,i)}p(e.promise,n)}else(1===t._state?p:m)(e.promise,t._value)}))):t._deferreds.push(e)}function p(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===typeof e||"function"===typeof e)){var r=e.then;if(e instanceof d)return t._state=3,t._value=e,void y(t);if("function"===typeof r)return void _((n=r,i=e,function(){n.apply(i,arguments)}),t)}t._state=1,t._value=e,y(t)}catch(o){m(t,o)}var n,i}function m(t,e){t._state=2,t._value=e,y(t)}function y(t){2===t._state&&0===t._deferreds.length&&d._immediateFn((function(){t._handled||d._unhandledRejectionFn(t._value)}));for(var e=0,r=t._deferreds.length;e<r;e++)f(t,t._deferreds[e]);t._deferreds=null}function g(t,e,r){this.onFulfilled="function"===typeof t?t:null,this.onRejected="function"===typeof e?e:null,this.promise=r}function _(t,e){var r=!1;try{t((function(t){r||(r=!0,p(e,t))}),(function(t){r||(r=!0,m(e,t))}))}catch(n){if(r)return;r=!0,m(e,n)}}d.prototype.catch=function(t){return this.then(null,t)},d.prototype.then=function(t,e){var r=new this.constructor(c);return f(this,new g(t,e,r)),r},d.prototype.finally=o,d.all=function(t){return new d((function(e,r){if(!h(t))return r(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var i=n.length;function o(t,s){try{if(s&&("object"===typeof s||"function"===typeof s)){var a=s.then;if("function"===typeof a)return void a.call(s,(function(e){o(t,e)}),r)}n[t]=s,0===--i&&e(n)}catch(l){r(l)}}for(var s=0;s<n.length;s++)o(s,n[s])}))},d.any=l,d.allSettled=s,d.resolve=function(t){return t&&"object"===typeof t&&t.constructor===d?t:new d((function(e){e(t)}))},d.reject=function(t){return new d((function(e,r){r(t)}))},d.race=function(t){return new d((function(e,r){if(!h(t))return r(new TypeError("Promise.race accepts an array"));for(var n=0,i=t.length;n<i;n++)d.resolve(t[n]).then(e,r)}))},d._immediateFn="function"===typeof setImmediate&&function(t){setImmediate(t)}||function(t){u(t,0)},d._unhandledRejectionFn=function(t){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};const v=d;var b=r(123);"undefined"===typeof globalThis&&("undefined"!==typeof self?self.globalThis=self:"undefined"!==typeof global&&(global.globalThis=global)),globalThis.Promise||(globalThis.Promise=v),Object.assign||(Object.assign=b);if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!globalThis.performance||!globalThis.performance.now){var x=Date.now();globalThis.performance||(globalThis.performance={}),globalThis.performance.now=function(){return Date.now()-x}}for(var T,S,w,E,I,A,M,P,O,R,C,D,F,L,N,B,k,U,G,j,X=Date.now(),z=["ms","moz","webkit","o"],V=0;V<z.length&&!globalThis.requestAnimationFrame;++V){var H=z[V];globalThis.requestAnimationFrame=globalThis[H+"RequestAnimationFrame"],globalThis.cancelAnimationFrame=globalThis[H+"CancelAnimationFrame"]||globalThis[H+"CancelRequestAnimationFrame"]}globalThis.requestAnimationFrame||(globalThis.requestAnimationFrame=function(t){if("function"!==typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),r=16+X-e;return r<0&&(r=0),X=e,globalThis.self.setTimeout((function(){X=Date.now(),t(performance.now())}),r)}),globalThis.cancelAnimationFrame||(globalThis.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t}),globalThis.ArrayBuffer||(globalThis.ArrayBuffer=Array),globalThis.Float32Array||(globalThis.Float32Array=Array),globalThis.Uint32Array||(globalThis.Uint32Array=Array),globalThis.Uint16Array||(globalThis.Uint16Array=Array),globalThis.Uint8Array||(globalThis.Uint8Array=Array),globalThis.Int32Array||(globalThis.Int32Array=Array),function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(T||(T={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(S||(S={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(w||(w={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(E||(E={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(I||(I={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(A||(A={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(M||(M={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(P||(P={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(O||(O={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(R||(R={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(C||(C={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(D||(D={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(F||(F={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(L||(L={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(N||(N={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(B||(B={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR"}(k||(k={})),function(t){t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA"}(U||(U={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(G||(G={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(j||(j={}));var Y={createCanvas:function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,r},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var t;return null!==(t=document.baseURI)&&void 0!==t?t:window.location.href},fetch:function(t,e){return fetch(t,e)}},W=/iPhone/i,q=/iPod/i,$=/iPad/i,K=/\biOS-universal(?:.+)Mac\b/i,Q=/\bAndroid(?:.+)Mobile\b/i,Z=/Android/i,J=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,tt=/Silk/i,et=/Windows Phone/i,rt=/\bWindows(?:.+)ARM\b/i,nt=/BlackBerry/i,it=/BB10/i,ot=/Opera Mini/i,st=/\b(CriOS|Chrome)(?:.+)Mobile/i,at=/Mobile(?:.+)Firefox\b/i,lt=function(t){return"undefined"!==typeof t&&"MacIntel"===t.platform&&"number"===typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"===typeof MSStream};var ut=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"===typeof navigator?"string"===typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var r=e.userAgent,n=r.split("[FBAN");"undefined"!==typeof n[1]&&(r=n[0]),"undefined"!==typeof(n=r.split("Twitter"))[1]&&(r=n[0]);var i=function(t){return function(e){return e.test(t)}}(r),o={apple:{phone:i(W)&&!i(et),ipod:i(q),tablet:!i(W)&&(i($)||lt(e))&&!i(et),universal:i(K),device:(i(W)||i(q)||i($)||i(K)||lt(e))&&!i(et)},amazon:{phone:i(J),tablet:!i(J)&&i(tt),device:i(J)||i(tt)},android:{phone:!i(et)&&i(J)||!i(et)&&i(Q),tablet:!i(et)&&!i(J)&&!i(Q)&&(i(tt)||i(Z)),device:!i(et)&&(i(J)||i(tt)||i(Q)||i(Z))||i(/\bokhttp\b/i)},windows:{phone:i(et),tablet:i(rt),device:i(et)||i(rt)},other:{blackberry:i(nt),blackberry10:i(it),opera:i(ot),firefox:i(at),chrome:i(st),device:i(nt)||i(it)||i(ot)||i(at)||i(st)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}(globalThis.navigator);var ht={ADAPTER:Y,MIPMAP_TEXTURES:D.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:G.NONE,SPRITE_MAX_TEXTURES:function(t){var e=!0;if(ut.tablet||ut.phone){var r;if(ut.apple.device)if(r=navigator.userAgent.match(/OS (\d+)_(\d+)?/))parseInt(r[1],10)<11&&(e=!1);if(ut.android.device)if(r=navigator.userAgent.match(/Android\s([0-9.]*)/))parseInt(r[1],10)<7&&(e=!1)}return e?t:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,width:800,height:600,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,antialias:!1,preserveDrawingBuffer:!1},GC_MODE:N.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:C.CLAMP,SCALE_MODE:R.LINEAR,PRECISION_VERTEX:B.HIGH,PRECISION_FRAGMENT:ut.apple.device?B.HIGH:B.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!ut.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},ct=r(961),dt=r(973),ft=r(80),pt={parse:ft.qg,format:ft.GP,resolve:ft.hd};function mt(t){if("string"!==typeof t)throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function yt(t){return t.split("?")[0].split("#")[0]}var gt={toPosix:function(t){return e="\\",r="/",t.replace(new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),r);var e,r},isUrl:function(t){return/^https?:/.test(this.toPosix(t))},isDataUrl:function(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},hasProtocol:function(t){return/^[^/:]+:\//.test(this.toPosix(t))},getProtocol:function(t){mt(t),t=this.toPosix(t);var e="",r=/^file:\/\/\//.exec(t),n=/^[^/:]+:\/\//.exec(t),i=/^[^/:]+:\//.exec(t);if(r||n||i){var o=(null===r||void 0===r?void 0:r[0])||(null===n||void 0===n?void 0:n[0])||(null===i||void 0===i?void 0:i[0]);e=o,t=t.slice(o.length)}return e},toAbsolute:function(t,e,r){if(this.isDataUrl(t))return t;var n=yt(this.toPosix(null!==e&&void 0!==e?e:ht.ADAPTER.getBaseUrl())),i=yt(this.toPosix(null!==r&&void 0!==r?r:this.rootname(n)));return mt(t),(t=this.toPosix(t)).startsWith("/")?gt.join(i,t.slice(1)):this.isAbsolute(t)?t:this.join(n,t)},normalize:function(t){if(mt(t=this.toPosix(t)),0===t.length)return".";var e="",r=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));var n=t.endsWith("/");return(t=function(t,e){for(var r,n="",i=0,o=-1,s=0,a=0;a<=t.length;++a){if(a<t.length)r=t.charCodeAt(a);else{if(47===r)break;r=47}if(47===r){if(o===a-1||1===s);else if(o!==a-1&&2===s){if(n.length<2||2!==i||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){-1===l?(n="",i=0):i=(n=n.slice(0,l)).length-1-n.lastIndexOf("/"),o=a,s=0;continue}}else if(2===n.length||1===n.length){n="",i=0,o=a,s=0;continue}e&&(n.length>0?n+="/..":n="..",i=2)}else n.length>0?n+="/"+t.slice(o+1,a):n=t.slice(o+1,a),i=a-o-1;o=a,s=0}else 46===r&&-1!==s?++s:s=-1}return n}(t,!1)).length>0&&n&&(t+="/"),r?"/"+t:e+t},isAbsolute:function(t){return mt(t),t=this.toPosix(t),!!this.hasProtocol(t)||t.startsWith("/")},join:function(){for(var t,e,r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];if(0===n.length)return".";for(var o=0;o<n.length;++o){var s=n[o];if(mt(s),s.length>0)if(void 0===e)e=s;else{var a=null!==(t=n[o-1])&&void 0!==t?t:"";this.extname(a)?e+="/../"+s:e+="/"+s}}return void 0===e?".":this.normalize(e)},dirname:function(t){if(mt(t),0===t.length)return".";for(var e=(t=this.toPosix(t)).charCodeAt(0),r=47===e,n=-1,i=!0,o=this.getProtocol(t),s=t,a=(t=t.slice(o.length)).length-1;a>=1;--a)if(47===(e=t.charCodeAt(a))){if(!i){n=a;break}}else i=!1;return-1===n?r?"/":this.isUrl(s)?o+t:o:r&&1===n?"//":o+t.slice(0,n)},rootname:function(t){mt(t);var e="";if(e=(t=this.toPosix(t)).startsWith("/")?"/":this.getProtocol(t),this.isUrl(t)){var r=t.indexOf("/",e.length);(e=-1!==r?t.slice(0,r):t).endsWith("/")||(e+="/")}return e},basename:function(t,e){mt(t),e&&mt(e),t=this.toPosix(t);var r,n=0,i=-1,o=!0;if(void 0!==e&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var s=e.length-1,a=-1;for(r=t.length-1;r>=0;--r){var l=t.charCodeAt(r);if(47===l){if(!o){n=r+1;break}}else-1===a&&(o=!1,a=r+1),s>=0&&(l===e.charCodeAt(s)?-1===--s&&(i=r):(s=-1,i=a))}return n===i?i=a:-1===i&&(i=t.length),t.slice(n,i)}for(r=t.length-1;r>=0;--r)if(47===t.charCodeAt(r)){if(!o){n=r+1;break}}else-1===i&&(o=!1,i=r+1);return-1===i?"":t.slice(n,i)},extname:function(t){mt(t);for(var e=-1,r=0,n=-1,i=!0,o=0,s=(t=this.toPosix(t)).length-1;s>=0;--s){var a=t.charCodeAt(s);if(47!==a)-1===n&&(i=!1,n=s+1),46===a?-1===e?e=s:1!==o&&(o=1):-1!==e&&(o=-1);else if(!i){r=s+1;break}}return-1===e||-1===n||0===o||1===o&&e===n-1&&e===r+1?"":t.slice(e,n)},parse:function(t){mt(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return e;var r,n=(t=this.toPosix(t)).charCodeAt(0),i=this.isAbsolute(t);e.root=this.rootname(t),r=i||this.hasProtocol(t)?1:0;for(var o=-1,s=0,a=-1,l=!0,u=t.length-1,h=0;u>=r;--u)if(47!==(n=t.charCodeAt(u)))-1===a&&(l=!1,a=u+1),46===n?-1===o?o=u:1!==h&&(h=1):-1!==o&&(h=-1);else if(!l){s=u+1;break}return-1===o||-1===a||0===h||1===h&&o===a-1&&o===s+1?-1!==a&&(e.base=e.name=0===s&&i?t.slice(1,a):t.slice(s,a)):(0===s&&i?(e.name=t.slice(1,o),e.base=t.slice(1,a)):(e.name=t.slice(s,o),e.base=t.slice(s,a)),e.ext=t.slice(o,a)),e.dir=this.dirname(t),e},sep:"/",delimiter:":"};ht.RETINA_PREFIX=/@([0-9\.]+)x/,ht.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var _t,vt=!1,bt="6.5.10";function xt(){vt=!0}function Tt(t){var e;if(!vt){if(ht.ADAPTER.getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){var r=["\n %c %c %c PixiJS "+bt+" - \u2730 "+t+" \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=globalThis.console).log.apply(e,r)}else globalThis.console&&globalThis.console.log("PixiJS "+bt+" - "+t+" - http://www.pixijs.com/");vt=!0}}function St(){return"undefined"===typeof _t&&(_t=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:ht.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!ht.ADAPTER.getWebGLRenderingContext())return!1;var e=ht.ADAPTER.createCanvas(),r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!(!r||!r.getContextAttributes().stencil);if(r){var i=r.getExtension("WEBGL_lose_context");i&&i.loseContext()}return r=null,n}catch(o){return!1}}()),_t}var wt={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Et(t,e){return void 0===e&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function It(t){var e=t.toString(16);return"#"+(e="000000".substring(0,6-e.length)+e)}function At(t){return"string"===typeof t&&"#"===(t=wt[t.toLowerCase()]||t)[0]&&(t=t.slice(1)),parseInt(t,16)}function Mt(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}var Pt=function(){for(var t=[],e=[],r=0;r<32;r++)t[r]=r,e[r]=r;t[E.NORMAL_NPM]=E.NORMAL,t[E.ADD_NPM]=E.ADD,t[E.SCREEN_NPM]=E.SCREEN,e[E.NORMAL]=E.NORMAL_NPM,e[E.ADD]=E.ADD_NPM,e[E.SCREEN]=E.SCREEN_NPM;var n=[];return n.push(e),n.push(t),n}();function Ot(t,e){return Pt[e?1:0][t]}function Rt(t,e,r,n){return r=r||new Float32Array(4),n||void 0===n?(r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e):(r[0]=t[0],r[1]=t[1],r[2]=t[2]),r[3]=e,r}function Ct(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var r=t>>16&255,n=t>>8&255,i=255&t;return(255*e<<24)+((r=r*e+.5|0)<<16)+((n=n*e+.5|0)<<8)+(i=i*e+.5|0)}function Dt(t,e,r,n){return(r=r||new Float32Array(4))[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(255&t)/255,(n||void 0===n)&&(r[0]*=e,r[1]*=e,r[2]*=e),r[3]=e,r}function Ft(t,e){void 0===e&&(e=null);var r=6*t;if((e=e||new Uint16Array(r)).length!==r)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+r);for(var n=0,i=0;n<r;n+=6,i+=4)e[n+0]=i+0,e[n+1]=i+1,e[n+2]=i+2,e[n+3]=i+0,e[n+4]=i+2,e[n+5]=i+3;return e}function Lt(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var Nt={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function Bt(t,e){for(var r=0,n=0,i={},o=0;o<t.length;o++)n+=e[o],r+=t[o].length;var s=new ArrayBuffer(4*r),a=null,l=0;for(o=0;o<t.length;o++){var u=e[o],h=t[o],c=Lt(h);i[c]||(i[c]=new Nt[c](s)),a=i[c];for(var d=0;d<h.length;d++){a[(d/u|0)*n+l+d%u]=h[d]}l+=u}return new Float32Array(s)}function kt(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1}function Ut(t){return!(t&t-1)&&!!t}function Gt(t){var e=(t>65535?1:0)<<4,r=((t>>>=e)>255?1:0)<<3;return e|=r,e|=r=((t>>>=r)>15?1:0)<<2,(e|=r=((t>>>=r)>3?1:0)<<1)|(t>>>=r)>>1}function jt(t,e,r){var n,i=t.length;if(!(e>=i||0===r)){var o=i-(r=e+r>i?i-e:r);for(n=e;n<o;++n)t[n]=t[n+r];t.length=o}}function Xt(t){return 0===t?0:t<0?-1:1}var zt=0;function Vt(){return++zt}var Ht={};function Yt(t,e,r){if(void 0===r&&(r=3),!Ht[e]){var n=(new Error).stack;"undefined"===typeof n?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(n=n.split("\n").splice(r).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(n))),Ht[e]=!0}}var Wt={},qt=Object.create(null),$t=Object.create(null);function Kt(){var t;for(t in qt)qt[t].destroy();for(t in $t)$t[t].destroy()}function Qt(){var t;for(t in qt)delete qt[t];for(t in $t)delete $t[t]}var Zt=function(){function t(t,e,r){this.canvas=ht.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=r||ht.RESOLUTION,this.resize(t,e)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(e*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0}),t}();function Jt(t){var e,r,n,i=t.width,o=t.height,s=t.getContext("2d",{willReadFrequently:!0}),a=s.getImageData(0,0,i,o).data,l=a.length,u={top:null,left:null,right:null,bottom:null},h=null;for(e=0;e<l;e+=4)0!==a[e+3]&&(r=e/4%i,n=~~(e/4/i),null===u.top&&(u.top=n),(null===u.left||r<u.left)&&(u.left=r),(null===u.right||u.right<r)&&(u.right=r+1),(null===u.bottom||u.bottom<n)&&(u.bottom=n));return null!==u.top&&(i=u.right-u.left,o=u.bottom-u.top+1,h=s.getImageData(u.left,u.top,i,o)),{height:o,width:i,data:h}}var te,ee=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function re(t){var e=ee.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function ne(t,e){if(void 0===e&&(e=globalThis.location),0===t.indexOf("data:"))return"";e=e||globalThis.location,te||(te=document.createElement("a")),te.href=t;var r=pt.parse(te.href),n=!r.port&&""===e.port||r.port===e.port;return r.hostname===e.hostname&&n&&r.protocol===e.protocol?"":"anonymous"}function ie(t,e){var r=ht.RETINA_PREFIX.exec(t);return r?parseFloat(r[1]):void 0!==e?e:1}var oe,se=2*Math.PI,ae=180/Math.PI,le=Math.PI/180;!function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"}(oe||(oe={}));var ue=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},t}(),he=[new ue,new ue,new ue,new ue],ce=function(){function t(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(n),this.type=oe.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.intersects=function(t,e){if(!e){var r=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=r)return!1;var n=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>n}var i=this.left,o=this.right,s=this.top,a=this.bottom;if(o<=i||a<=s)return!1;var l=he[0].set(t.left,t.top),u=he[1].set(t.left,t.bottom),h=he[2].set(t.right,t.top),c=he[3].set(t.right,t.bottom);if(h.x<=l.x||u.y<=l.y)return!1;var d=Math.sign(e.a*e.d-e.b*e.c);if(0===d)return!1;if(e.apply(l,l),e.apply(u,u),e.apply(h,h),e.apply(c,c),Math.max(l.x,u.x,h.x,c.x)<=i||Math.min(l.x,u.x,h.x,c.x)>=o||Math.max(l.y,u.y,h.y,c.y)<=s||Math.min(l.y,u.y,h.y,c.y)>=a)return!1;var f=d*(u.y-l.y),p=d*(l.x-u.x),m=f*i+p*s,y=f*o+p*s,g=f*i+p*a,_=f*o+p*a;if(Math.max(m,y,g,_)<=f*l.x+p*l.y||Math.min(m,y,g,_)>=f*c.x+p*c.y)return!1;var v=d*(l.y-h.y),b=d*(h.x-l.x),x=v*i+b*s,T=v*o+b*s,S=v*i+b*a,w=v*o+b*a;return!(Math.max(x,T,S,w)<=v*l.x+b*l.y||Math.min(x,T,S,w)>=v*c.x+b*c.y)},t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),i=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(r-e,0),this.y=n,this.height=Math.max(i-n,0),this},t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var r=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=r-this.x,this.height=n-this.y,this},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),i=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=r-e,this.y=n,this.height=i-n,this},t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),de=function(){function t(t,e,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),this.x=t,this.y=e,this.radius=r,this.type=oe.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,n=this.x-t,i=this.y-e;return(n*=n)+(i*=i)<=r},t.prototype.getBounds=function(){return new ce(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},t}(),fe=function(){function t(t,e,r,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=0),this.x=t,this.y=e,this.width=r,this.height=n,this.type=oe.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var r=(t-this.x)/this.width,n=(e-this.y)/this.height;return(r*=r)+(n*=n)<=1},t.prototype.getBounds=function(){return new ce(this.x-this.width,this.y-this.height,this.width,this.height)},t.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),pe=function(){function t(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var n=Array.isArray(e[0])?e[0]:e;if("number"!==typeof n[0]){for(var i=[],o=0,s=n.length;o<s;o++)i.push(n[o].x,n[o].y);n=i}this.points=n,this.type=oe.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=new t(this.points.slice());return e.closeStroke=this.closeStroke,e},t.prototype.contains=function(t,e){for(var r=!1,n=this.points.length/2,i=0,o=n-1;i<n;o=i++){var s=this.points[2*i],a=this.points[2*i+1],l=this.points[2*o],u=this.points[2*o+1];a>e!==u>e&&t<(e-a)/(u-a)*(l-s)+s&&(r=!r)}return r},t.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce((function(t,e){return t+", "+e}),"")+"]"},t}(),me=function(){function t(t,e,r,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===i&&(i=20),this.x=t,this.y=e,this.width=r,this.height=n,this.radius=i,this.type=oe.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){var r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+r&&e<=this.y+this.height-r||t>=this.x+r&&t<=this.x+this.width-r)return!0;var n=t-(this.x+r),i=e-(this.y+r),o=r*r;if(n*n+i*i<=o)return!0;if((n=t-(this.x+this.width-r))*n+i*i<=o)return!0;if(n*n+(i=e-(this.y+this.height-r))*i<=o)return!0;if((n=t-(this.x+r))*n+i*i<=o)return!0}return!1},t.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"},t}(),ye=function(){function t(t,e,r,n){void 0===r&&(r=0),void 0===n&&(n=0),this._x=r,this._y=n,this.cb=t,this.scope=e}return t.prototype.clone=function(e,r){return void 0===e&&(e=this.cb),void 0===r&&(r=this.scope),new t(e,r,this._x,this._y)},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),ge=function(){function t(t,e,r,n,i,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===r&&(r=0),void 0===n&&(n=1),void 0===i&&(i=0),void 0===o&&(o=0),this.array=null,this.a=t,this.b=e,this.c=r,this.d=n,this.tx=i,this.ty=o}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,r,n,i,o){return this.a=t,this.b=e,this.c=r,this.d=n,this.tx=i,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},t.prototype.apply=function(t,e){e=e||new ue;var r=t.x,n=t.y;return e.x=this.a*r+this.c*n+this.tx,e.y=this.b*r+this.d*n+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new ue;var r=1/(this.a*this.d+this.c*-this.b),n=t.x,i=t.y;return e.x=this.d*r*n+-this.c*r*i+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*i+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),n=this.a,i=this.c,o=this.tx;return this.a=n*e-this.b*r,this.b=n*r+this.b*e,this.c=i*e-this.d*r,this.d=i*r+this.d*e,this.tx=o*e-this.ty*r,this.ty=o*r+this.ty*e,this},t.prototype.append=function(t){var e=this.a,r=this.b,n=this.c,i=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*r+t.b*i,this.c=t.c*e+t.d*n,this.d=t.c*r+t.d*i,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*r+t.ty*i+this.ty,this},t.prototype.setTransform=function(t,e,r,n,i,o,s,a,l){return this.a=Math.cos(s+l)*i,this.b=Math.sin(s+l)*i,this.c=-Math.sin(s-a)*o,this.d=Math.cos(s-a)*o,this.tx=t-(r*this.a+n*this.c),this.ty=e-(r*this.b+n*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var r=this.a,n=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,r=this.b,n=this.c,i=this.d,o=t.pivot,s=-Math.atan2(-n,i),a=Math.atan2(r,e),l=Math.abs(s+a);return l<1e-5||Math.abs(se-l)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=s,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(n*n+i*i),t.position.x=this.tx+(o.x*e+o.y*n),t.position.y=this.ty+(o.x*r+o.y*i),t},t.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,n=this.d,i=this.tx,o=t*n-e*r;return this.a=n/o,this.b=-e/o,this.c=-r/o,this.d=t/o,this.tx=(r*this.ty-n*i)/o,this.ty=-(t*this.ty-e*i)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),_e=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ve=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],be=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],xe=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Te=[],Se=[],we=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];Te.push(e);for(var r=0;r<16;r++)for(var n=we(_e[t]*_e[r]+be[t]*ve[r]),i=we(ve[t]*_e[r]+xe[t]*ve[r]),o=we(_e[t]*be[r]+be[t]*xe[r]),s=we(ve[t]*be[r]+xe[t]*xe[r]),a=0;a<16;a++)if(_e[a]===n&&ve[a]===i&&be[a]===o&&xe[a]===s){e.push(a);break}}for(t=0;t<16;t++){var l=new ge;l.set(_e[t],ve[t],be[t],xe[t],0,0),Se.push(l)}}();var Ee={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return _e[t]},uY:function(t){return ve[t]},vX:function(t){return be[t]},vY:function(t){return xe[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return Te[t][e]},sub:function(t,e){return Te[t][Ee.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2===(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?Ee.S:Ee.N:2*Math.abs(e)<=Math.abs(t)?t>0?Ee.E:Ee.W:e>0?t>0?Ee.SE:Ee.SW:t>0?Ee.NE:Ee.NW},matrixAppendRotationInv:function(t,e,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var i=Se[Ee.inv(e)];i.tx=r,i.ty=n,t.append(i)}},Ie=function(){function t(){this.worldTransform=new ge,this.localTransform=new ge,this.position=new ye(this.onChange,this,0,0),this.scale=new ye(this.onChange,this,1,1),this.pivot=new ye(this.onChange,this,0,0),this.skew=new ye(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var r=t.worldTransform,n=this.worldTransform;n.a=e.a*r.a+e.b*r.c,n.b=e.a*r.b+e.b*r.d,n.c=e.c*r.a+e.d*r.c,n.d=e.c*r.b+e.d*r.d,n.tx=e.tx*r.a+e.ty*r.c+r.tx,n.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}();ht.SORTABLE_CHILDREN=!1;var Ae=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?ce.EMPTY:((t=t||new ce(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addPointMatrix=function(t,e){var r=t.a,n=t.b,i=t.c,o=t.d,s=t.tx,a=t.ty,l=r*e.x+i*e.y+s,u=n*e.x+o*e.y+a;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)},t.prototype.addQuad=function(t){var e=this.minX,r=this.minY,n=this.maxX,i=this.maxY,o=t[0],s=t[1];e=o<e?o:e,r=s<r?s:r,n=o>n?o:n,i=s>i?s:i,e=(o=t[2])<e?o:e,r=(s=t[3])<r?s:r,n=o>n?o:n,i=s>i?s:i,e=(o=t[4])<e?o:e,r=(s=t[5])<r?s:r,n=o>n?o:n,i=s>i?s:i,e=(o=t[6])<e?o:e,r=(s=t[7])<r?s:r,n=o>n?o:n,i=s>i?s:i,this.minX=e,this.minY=r,this.maxX=n,this.maxY=i},t.prototype.addFrame=function(t,e,r,n,i){this.addFrameMatrix(t.worldTransform,e,r,n,i)},t.prototype.addFrameMatrix=function(t,e,r,n,i){var o=t.a,s=t.b,a=t.c,l=t.d,u=t.tx,h=t.ty,c=this.minX,d=this.minY,f=this.maxX,p=this.maxY,m=o*e+a*r+u,y=s*e+l*r+h;c=m<c?m:c,d=y<d?y:d,f=m>f?m:f,p=y>p?y:p,c=(m=o*n+a*r+u)<c?m:c,d=(y=s*n+l*r+h)<d?y:d,f=m>f?m:f,p=y>p?y:p,c=(m=o*e+a*i+u)<c?m:c,d=(y=s*e+l*i+h)<d?y:d,f=m>f?m:f,p=y>p?y:p,c=(m=o*n+a*i+u)<c?m:c,d=(y=s*n+l*i+h)<d?y:d,f=m>f?m:f,p=y>p?y:p,this.minX=c,this.minY=d,this.maxX=f,this.maxY=p},t.prototype.addVertexData=function(t,e,r){for(var n=this.minX,i=this.minY,o=this.maxX,s=this.maxY,a=e;a<r;a+=2){var l=t[a],u=t[a+1];n=l<n?l:n,i=u<i?u:i,o=l>o?l:o,s=u>s?u:s}this.minX=n,this.minY=i,this.maxX=o,this.maxY=s},t.prototype.addVertices=function(t,e,r,n){this.addVerticesMatrix(t.worldTransform,e,r,n)},t.prototype.addVerticesMatrix=function(t,e,r,n,i,o){void 0===i&&(i=0),void 0===o&&(o=i);for(var s=t.a,a=t.b,l=t.c,u=t.d,h=t.tx,c=t.ty,d=this.minX,f=this.minY,p=this.maxX,m=this.maxY,y=r;y<n;y+=2){var g=e[y],_=e[y+1],v=s*g+l*_+h,b=u*_+a*g+c;d=Math.min(d,v-i),p=Math.max(p,v+i),f=Math.min(f,b-o),m=Math.max(m,b+o)}this.minX=d,this.minY=f,this.maxX=p,this.maxY=m},t.prototype.addBounds=function(t){var e=this.minX,r=this.minY,n=this.maxX,i=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>i?t.maxY:i},t.prototype.addBoundsMask=function(t,e){var r=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,i=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(r<=i&&n<=o){var s=this.minX,a=this.minY,l=this.maxX,u=this.maxY;this.minX=r<s?r:s,this.minY=n<a?n:a,this.maxX=i>l?i:l,this.maxY=o>u?o:u}},t.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},t.prototype.addBoundsArea=function(t,e){var r=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,i=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(r<=i&&n<=o){var s=this.minX,a=this.minY,l=this.maxX,u=this.maxY;this.minX=r<s?r:s,this.minY=n<a?n:a,this.maxX=i>l?i:l,this.maxY=o>u?o:u}},t.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},t.prototype.addFramePad=function(t,e,r,n,i,o){t-=i,e-=o,r+=i,n+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>n?this.maxY:n},t}(),Me=function(t,e){return Me=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},Me(t,e)};function Pe(t,e){function r(){this.constructor=t}Me(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var Oe=function(t){function e(){var e=t.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new Ie,e.alpha=1,e.visible=!0,e.renderable=!0,e.cullable=!1,e.cullArea=null,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new Ae,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._maskRefCount=0,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return Pe(e,t),e.mixin=function(t){for(var r=Object.keys(t),n=0;n<r.length;++n){var i=r[n];Object.defineProperty(e.prototype,i,Object.getOwnPropertyDescriptor(t,i))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new ce),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new ce),t=this._localBoundsRect),this._localBounds||(this._localBounds=new Ae);var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var n=this._bounds,i=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,t);return this.parent=r,this.transform=e,this._bounds=n,this._bounds.updateID+=this._boundsID-i,o},e.prototype.toGlobal=function(t,e,r){return void 0===r&&(r=!1),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,r,n){return e&&(t=e.toGlobal(t,r,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,r,n,i,o,s,a,l){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===r&&(r=1),void 0===n&&(n=1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===l&&(l=0),this.position.x=t,this.position.y=e,this.scale.x=r||1,this.scale.y=n||1,this.rotation=i,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=l,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new Re),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*ae},set:function(t){this.transform.rotation=t*le},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){if(this._mask!==t){var e;if(this._mask)(e=this._mask.isMaskData?this._mask.maskObject:this._mask)&&(e._maskRefCount--,0===e._maskRefCount&&(e.renderable=!0,e.isMask=!1));if(this._mask=t,this._mask)(e=this._mask.isMaskData?this._mask.maskObject:this._mask)&&(0===e._maskRefCount&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++)}},enumerable:!1,configurable:!0}),e}(ct),Re=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sortDirty=null,e}return Pe(e,t),e}(Oe);function Ce(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}Oe.prototype.displayObjectUpdateTransform=Oe.prototype.updateTransform;var De=function(t){function e(){var e=t.call(this)||this;return e.children=[],e.sortableChildren=ht.SORTABLE_CHILDREN,e.sortDirty=!1,e}return Pe(e,t),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(e.length>1)for(var n=0;n<e.length;n++)this.addChild(e[n]);else{var i=e[0];i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.push(i),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this)}return e[0]},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.swapChildren=function(t,e){if(t!==e){var r=this.getChildIndex(t),n=this.getChildIndex(e);this.children[r]=e,this.children[n]=t,this.onChildrenChange(r<n?r:n)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(t);jt(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];if(e.length>1)for(var n=0;n<e.length;n++)this.removeChild(e[n]);else{var i=e[0],o=this.children.indexOf(i);if(-1===o)return null;i.parent=null,i.transform._parentID=-1,jt(this.children,o,1),this._boundsID++,this.onChildrenChange(o),i.emit("removed",this),this.emit("childRemoved",i,this,o)}return e[0]},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,jt(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.children.length);var r,n=t,i=e-n;if(i>0&&i<=e){r=this.children.splice(n,i);for(var o=0;o<r.length;++o)r[o].parent=null,r[o].transform&&(r[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(o=0;o<r.length;++o)r[o].emit("removed",this),this.emit("childRemoved",r[o],this,o);return r}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,e=0,r=this.children.length;e<r;++e){var n=this.children[e];n._lastSortedIndex=e,t||0===n.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(Ce),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var r=this.children[t];r.visible&&r.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var r=e._mask.isMaskData?e._mask.maskObject:e._mask;r?(r.calculateBounds(),this._bounds.addBoundsMask(e._bounds,r._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(e,r){void 0===r&&(r=!1);var n=t.prototype.getLocalBounds.call(this,e);if(!r)for(var i=0,o=this.children.length;i<o;++i){var s=this.children[i];s.visible&&s.updateTransform()}return n},e.prototype._calculateBounds=function(){},e.prototype._renderWithCulling=function(t){var r=t.renderTexture.sourceFrame;if(r.width>0&&r.height>0){var n,i;if(this.cullArea?(n=this.cullArea,i=this.worldTransform):this._render!==e.prototype._render&&(n=this.getBounds(!0)),n&&r.intersects(n,i))this._render(t);else if(this.cullArea)return;for(var o=0,s=this.children.length;o<s;++o){var a=this.children[o],l=a.cullable;a.cullable=l||!this.cullArea,a.render(t),a.cullable=l}}},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].render(t)}},e.prototype.renderAdvanced=function(t){var e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<e.length;n++)e[n].enabled&&this._enabledFilters.push(e[n])}var i=e&&this._enabledFilters&&this._enabledFilters.length||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==k.NONE));if(i&&t.batch.flush(),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.push(this,this._enabledFilters),r&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);n=0;for(var o=this.children.length;n<o;++n)this.children[n].render(t)}i&&t.batch.flush(),r&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var r="boolean"===typeof e?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(r)for(var i=0;i<n.length;++i)n[i].destroy(e)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),e}(Oe);De.prototype.containerUpdateTransform=De.prototype.updateTransform;var Fe,Le=function(){return Le=Object.assign||function(t){for(var e,r=arguments,n=1,i=arguments.length;n<i;n++)for(var o in e=r[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Le.apply(this,arguments)};!function(t){t.Application="application",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Loader="loader",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser"}(Fe||(Fe={}));var Ne,Be=function(t){if("function"===typeof t||"object"===typeof t&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");var e="object"!==typeof t.extension?{type:t.extension}:t.extension;t=Le(Le({},e),{ref:t})}if("object"!==typeof t)throw new Error("Invalid extension type");return"string"===typeof(t=Le({},t)).type&&(t.type=[t.type]),t},ke={_addHandlers:null,_removeHandlers:null,_queue:{},remove:function(){for(var t=arguments,e=this,r=[],n=0;n<arguments.length;n++)r[n]=t[n];return r.map(Be).forEach((function(t){t.type.forEach((function(r){var n,i;return null===(i=(n=e._removeHandlers)[r])||void 0===i?void 0:i.call(n,t)}))})),this},add:function(){for(var t=arguments,e=this,r=[],n=0;n<arguments.length;n++)r[n]=t[n];return r.map(Be).forEach((function(t){t.type.forEach((function(r){var n=e._addHandlers,i=e._queue;n[r]?n[r](t):(i[r]=i[r]||[],i[r].push(t))}))})),this},handle:function(t,e,r){var n=this._addHandlers=this._addHandlers||{},i=this._removeHandlers=this._removeHandlers||{};if(n[t]||i[t])throw new Error("Extension type "+t+" already has a handler");n[t]=e,i[t]=r;var o=this._queue;return o[t]&&(o[t].forEach((function(t){return e(t)})),delete o[t]),this},handleByMap:function(t,e){return this.handle(t,(function(t){e[t.name]=t.ref}),(function(t){delete e[t.name]}))},handleByList:function(t,e){return this.handle(t,(function(r){var n,i;e.includes(r.ref)||(e.push(r.ref),t===Fe.Loader&&(null===(i=(n=r.ref).add)||void 0===i||i.call(n)))}),(function(t){var r=e.indexOf(t.ref);-1!==r&&e.splice(r,1)}))}},Ue=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,r,n,i,o,s,a){if(arguments.length>8)throw new Error("max arguments reached");var l=this.name,u=this.items;this._aliasCount++;for(var h=0,c=u.length;h<c;h++)u[h][l](t,e,r,n,i,o,s,a);return u===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(Ue.prototype,{dispatch:{value:Ue.prototype.emit},run:{value:Ue.prototype.emit}}),ht.TARGET_FPMS=.06,function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"}(Ne||(Ne={}));var Ge=function(){function t(t,e,r,n){void 0===e&&(e=null),void 0===r&&(r=0),void 0===n&&(n=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=r,this.once=n}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),je=function(){function t(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Ge(null,null,1/0),this.deltaMS=1/ht.TARGET_FPMS,this.elapsedMS=1/ht.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e,r){return void 0===r&&(r=Ne.NORMAL),this._addListener(new Ge(t,e,r))},t.prototype.addOnce=function(t,e,r){return void 0===r&&(r=Ne.NORMAL),this._addListener(new Ge(t,e,r,!0))},t.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}r=e,e=e.next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var r=t-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=t-r%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*ht.TARGET_FPMS;for(var n=this._head,i=n.next;i;)i=i.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),r=Math.min(Math.max(0,e)/1e3,ht.TARGET_FPMS);this._maxElapsedMS=1/r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),Xe=function(){function t(){}return t.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,Ne.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?je.shared:new je,t.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},t.extension=Fe.Application,t}();ht.PREFER_ENV=ut.any?T.WEBGL:T.WEBGL2,ht.STRICT_TEXTURE_CACHE=!1;var ze=[];function Ve(t,e){if(!t)return null;var r="";if("string"===typeof t){var n=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);n&&(r=n[1].toLowerCase())}for(var i=ze.length-1;i>=0;--i){var o=ze[i];if(o.test&&o.test(t,r))return new o(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var He=function(t,e){return He=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},He(t,e)};function Ye(t,e){function r(){this.constructor=t}He(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var We=function(){return We=Object.assign||function(t){for(var e,r=arguments,n=1,i=arguments.length;n<i;n++)for(var o in e=r[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},We.apply(this,arguments)};var qe=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new Ue("setRealSize"),this.onUpdate=new Ue("update"),this.onError=new Ue("onError")}return t.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},t.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(t,e,r){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(t,e){return!1},t}(),$e=function(t){function e(e,r){var n=this,i=r||{},o=i.width,s=i.height;if(!o||!s)throw new Error("BufferResource width or height invalid");return(n=t.call(this,o,s)||this).data=e,n}return Ye(e,t),e.prototype.upload=function(t,e,r){var n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===F.UNPACK);var i=e.realWidth,o=e.realHeight;return r.width===i&&r.height===o?n.texSubImage2D(e.target,0,0,0,i,o,e.format,r.type,this.data):(r.width=i,r.height=o,n.texImage2D(e.target,0,r.internalFormat,i,o,0,e.format,r.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(qe),Ke={scaleMode:R.NEAREST,format:A.RGBA,alphaMode:F.NPM},Qe=function(t){function e(e,r){void 0===e&&(e=null),void 0===r&&(r=null);var n=t.call(this)||this,i=(r=r||{}).alphaMode,o=r.mipmap,s=r.anisotropicLevel,a=r.scaleMode,l=r.width,u=r.height,h=r.wrapMode,c=r.format,d=r.type,f=r.target,p=r.resolution,m=r.resourceOptions;return!e||e instanceof qe||((e=Ve(e,m)).internal=!0),n.resolution=p||ht.RESOLUTION,n.width=Math.round((l||0)*n.resolution)/n.resolution,n.height=Math.round((u||0)*n.resolution)/n.resolution,n._mipmap=void 0!==o?o:ht.MIPMAP_TEXTURES,n.anisotropicLevel=void 0!==s?s:ht.ANISOTROPIC_LEVEL,n._wrapMode=h||ht.WRAP_MODE,n._scaleMode=void 0!==a?a:ht.SCALE_MODE,n.format=c||A.RGBA,n.type=d||P.UNSIGNED_BYTE,n.target=f||M.TEXTURE_2D,n.alphaMode=void 0!==i?i:F.UNPACK,n.uid=Vt(),n.touched=0,n.isPowerOfTwo=!1,n._refreshPOT(),n._glTextures={},n.dirtyId=0,n.dirtyStyleId=0,n.cacheId=null,n.valid=l>0&&u>0,n.textureCacheIds=[],n.destroyed=!1,n.resource=null,n._batchEnabled=0,n._batchLocation=0,n.parentTextureArray=null,n.setResource(e),n}return Ye(e,t),Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,e){var r;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,e,r){return r=r||this.resolution,this.setRealSize(t*r,e*r,r)},e.prototype.setRealSize=function(t,e,r){return this.resolution=r||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=Ut(this.realWidth)&&Ut(this.realHeight)},e.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT()),this},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete $t[this.cacheId],delete qt[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,r,n){void 0===n&&(n=ht.STRICT_TEXTURE_CACHE);var i="string"===typeof t,o=null;if(i)o=t;else{if(!t._pixiId){var s=r&&r.pixiIdPrefix||"pixiid";t._pixiId=s+"_"+Vt()}o=t._pixiId}var a=$t[o];if(i&&n&&!a)throw new Error('The cacheId "'+o+'" does not exist in BaseTextureCache.');return a||((a=new e(t,r)).cacheId=o,e.addToCache(a,o)),a},e.fromBuffer=function(t,r,n,i){t=t||new Float32Array(r*n*4);var o=new $e(t,{width:r,height:n}),s=t instanceof Float32Array?P.FLOAT:P.UNSIGNED_BYTE;return new e(o,Object.assign({},Ke,i||{width:r,height:n,type:s}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),$t[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),$t[e]=t)},e.removeFromCache=function(t){if("string"===typeof t){var e=$t[t];if(e){var r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete $t[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)delete $t[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(ct),Ze=function(t){function e(e,r){var n=this,i=r||{},o=i.width,s=i.height;(n=t.call(this,o,s)||this).items=[],n.itemDirtyIds=[];for(var a=0;a<e;a++){var l=new Qe;n.items.push(l),n.itemDirtyIds.push(-2)}return n.length=e,n._load=null,n.baseTexture=null,n}return Ye(e,t),e.prototype.initFromArray=function(t,e){for(var r=0;r<this.length;r++)t[r]&&(t[r].castToBaseTexture?this.addBaseTextureAt(t[r].castToBaseTexture(),r):t[r]instanceof qe?this.addResourceAt(t[r],r):this.addResourceAt(Ve(t[r],e),r))},e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,e);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=e,this.items[r].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map((function(t){return t.resource})).filter((function(t){return t})).map((function(t){return t.load()}));return this._load=Promise.all(e).then((function(){var e=t.items[0],r=e.realWidth,n=e.realHeight;return t.resize(r,n),Promise.resolve(t)})),this._load},e}(qe),Je=function(t){function e(e,r){var n,i,o=this,s=r||{},a=s.width,l=s.height;return Array.isArray(e)?(n=e,i=e.length):i=e,o=t.call(this,i,{width:a,height:l})||this,n&&o.initFromArray(n,r),o}return Ye(e,t),e.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=M.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,e,r){var n=this,i=n.length,o=n.itemDirtyIds,s=n.items,a=t.gl;r.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,i,0,e.format,r.type,null);for(var l=0;l<i;l++){var u=s[l];o[l]<u.dirtyId&&(o[l]=u.dirtyId,u.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,u.resource.width,u.resource.height,1,e.format,r.type,u.resource.source))}return!0},e}(Ze),tr=function(t){function e(e){var r=this,n=e,i=n.naturalWidth||n.videoWidth||n.width,o=n.naturalHeight||n.videoHeight||n.height;return(r=t.call(this,i,o)||this).source=e,r.noSubImage=!1,r}return Ye(e,t),e.crossOrigin=function(t,e,r){void 0===r&&0!==e.indexOf("data:")?t.crossOrigin=ne(e):!1!==r&&(t.crossOrigin="string"===typeof r?r:"anonymous")},e.prototype.upload=function(t,e,r,n){var i=t.gl,o=e.realWidth,s=e.realHeight;if((n=n||this.source)instanceof HTMLImageElement){if(!n.complete||0===n.naturalWidth)return!1}else if(n instanceof HTMLVideoElement&&n.readyState<=1)return!1;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===F.UNPACK),this.noSubImage||e.target!==i.TEXTURE_2D||r.width!==o||r.height!==s?(r.width=o,r.height=s,i.texImage2D(e.target,0,r.internalFormat,e.format,r.type,n)):i.texSubImage2D(i.TEXTURE_2D,0,0,0,e.format,r.type,n),!0},e.prototype.update=function(){if(!this.destroyed){var e=this.source,r=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(r,n),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(qe),er=function(t){function e(e){return t.call(this,e)||this}return Ye(e,t),e.test=function(t){var e=globalThis.OffscreenCanvas;return!!(e&&t instanceof e)||globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement},e}(tr),rr=function(t){function e(r,n){var i=this,o=n||{},s=o.width,a=o.height,l=o.autoLoad,u=o.linkBaseTexture;if(r&&r.length!==e.SIDES)throw new Error("Invalid length. Got "+r.length+", expected 6");i=t.call(this,6,{width:s,height:a})||this;for(var h=0;h<e.SIDES;h++)i.items[h].target=M.TEXTURE_CUBE_MAP_POSITIVE_X+h;return i.linkBaseTexture=!1!==u,r&&i.initFromArray(r,n),!1!==l&&i.load(),i}return Ye(e,t),e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=M.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,e,r){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=M.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},e.prototype.upload=function(t,r,n){for(var i=this.itemDirtyIds,o=0;o<e.SIDES;o++){var s=this.items[o];(i[o]<s.dirtyId||n.dirtyId<r.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(t,s,n),i[o]=s.dirtyId):i[o]<-1&&(t.gl.texImage2D(s.target,0,n.internalFormat,r.realWidth,r.realHeight,0,r.format,n.type,null),i[o]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(Ze),nr=function(t){function e(e,r){var n=this;if(r=r||{},!(e instanceof HTMLImageElement)){var i=new Image;tr.crossOrigin(i,e,r.crossorigin),i.src=e,e=i}return n=t.call(this,e)||this,!e.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=e.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(void 0!==r.createBitmap?r.createBitmap:ht.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,n.alphaMode="number"===typeof r.alphaMode?r.alphaMode:null,n.bitmap=null,n._load=null,!1!==r.autoLoad&&n.load(),n}return Ye(e,t),e.prototype.load=function(t){var e=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise((function(t,r){var n=e.source;e.url=n.src;var i=function(){e.destroyed||(n.onload=null,n.onerror=null,e.resize(n.width,n.height),e._load=null,e.createBitmap?t(e.process()):t(e))};n.complete&&n.src?i():(n.onload=i,n.onerror=function(t){r(t),e.onError.emit(t)})}))),this._load},e.prototype.process=function(){var t=this,e=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);var r=globalThis.createImageBitmap,n=!e.crossOrigin||"anonymous"===e.crossOrigin;return this._process=fetch(e.src,{mode:n?"cors":"no-cors"}).then((function(t){return t.blob()})).then((function(n){return r(n,0,0,e.width,e.height,{premultiplyAlpha:null===t.alphaMode||t.alphaMode===F.UNPACK?"premultiply":"none"})})).then((function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))})),this._process},e.prototype.upload=function(e,r,n){if("number"===typeof this.alphaMode&&(r.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,r,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,r,n,this.bitmap),!this.preserveBitmap){var i=!0,o=r._glTextures;for(var s in o){var a=o[s];if(a!==n&&a.dirtyId!==r.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return"string"===typeof t||t instanceof HTMLImageElement},e}(tr),ir=function(t){function e(e,r){var n=this;return r=r||{},(n=t.call(this,ht.ADAPTER.createCanvas())||this)._width=0,n._height=0,n.svg=e,n.scale=r.scale||1,n._overrideWidth=r.width,n._overrideHeight=r.height,n._resolve=null,n._crossorigin=r.crossorigin,n._load=null,!1!==r.autoLoad&&n.load(),n}return Ye(e,t),e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise((function(r){if(t._resolve=function(){t.resize(t.source.width,t.source.height),r(t)},e.SVG_XML.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}))),this._load},e.prototype._loadSvg=function(){var t=this,e=new Image;tr.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=function(r){t._resolve&&(e.onerror=null,t.onError.emit(r))},e.onload=function(){if(t._resolve){var r=e.width,n=e.height;if(!r||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var i=r*t.scale,o=n*t.scale;(t._overrideWidth||t._overrideHeight)&&(i=t._overrideWidth||t._overrideHeight/n*r,o=t._overrideHeight||t._overrideWidth/r*n),i=Math.round(i),o=Math.round(o);var s=t.source;s.width=i,s.height=o,s._pixiId="canvas_"+Vt(),s.getContext("2d").drawImage(e,0,0,r,n,0,0,i,o),t._resolve(),t._resolve=null}}},e.getSize=function(t){var r=e.SVG_SIZE.exec(t),n={};return r&&(n[r[1]]=Math.round(parseFloat(r[3])),n[r[5]]=Math.round(parseFloat(r[7]))),n},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,r){return"svg"===r||"string"===typeof t&&t.startsWith("data:image/svg+xml")||"string"===typeof t&&e.SVG_XML.test(t)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(tr),or=function(t){function e(r,n){var i=this;if(n=n||{},!(r instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),"string"===typeof r&&(r=[r]);var s=r[0].src||r[0];tr.crossOrigin(o,s,n.crossorigin);for(var a=0;a<r.length;++a){var l=document.createElement("source"),u=r[a],h=u.src,c=u.mime,d=(h=h||r[a]).split("?").shift().toLowerCase(),f=d.slice(d.lastIndexOf(".")+1);c=c||e.MIME_TYPES[f]||"video/"+f,l.src=h,l.type=c,o.appendChild(l)}r=o}return(i=t.call(this,r)||this).noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=n.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=!1!==n.autoPlay,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(i),i._onError=i._onError.bind(i),!1!==n.autoLoad&&i.load(),i}return Ye(e,t),e.prototype.update=function(e){if(!this.destroyed){var r=je.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-r),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((function(r){t.valid?r(t):(t._resolve=r,e.load())})),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return!t.paused&&!t.ended&&this._isSourceReady()},e.prototype._isSourceReady=function(){return this.source.readyState>2},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(je.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(je.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(je.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(je.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(je.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,r){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.indexOf(r)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(tr),sr=function(t){function e(e){return t.call(this,e)||this}return Ye(e,t),e.test=function(t){return!!globalThis.createImageBitmap&&"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap},e}(tr);ze.push(nr,sr,er,or,ir,$e,rr,Je);var ar={__proto__:null,Resource:qe,BaseImageResource:tr,INSTALLED:ze,autoDetectResource:Ve,AbstractMultiResource:Ze,ArrayResource:Je,BufferResource:$e,CanvasResource:er,CubeResource:rr,ImageResource:nr,SVGResource:ir,VideoResource:or,ImageBitmapResource:sr},lr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ye(e,t),e.prototype.upload=function(t,e,r){var n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===F.UNPACK);var i=e.realWidth,o=e.realHeight;return r.width===i&&r.height===o?n.texSubImage2D(e.target,0,0,0,i,o,e.format,r.type,this.data):(r.width=i,r.height=o,n.texImage2D(e.target,0,r.internalFormat,i,o,0,e.format,r.type,this.data)),!0},e}($e),ur=function(){function t(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Ue("disposeFramebuffer"),this.multisample=G.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new Qe(null,{scaleMode:R.NEAREST,resolution:1,mipmap:D.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(t){return this.depthTexture=t||new Qe(new lr(null,{width:this.width,height:this.height}),{scaleMode:R.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:D.OFF,format:A.DEPTH_COMPONENT,type:P.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var n=this.colorTextures[r],i=n.resolution;n.setSize(t/i,e/i)}if(this.depthTexture){i=this.depthTexture.resolution;this.depthTexture.setSize(t/i,e/i)}}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),hr=function(t){function e(e){void 0===e&&(e={});var r=this;"number"===typeof e&&(e={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]});return e.width=e.width||100,e.height=e.height||100,e.multisample=void 0!==e.multisample?e.multisample:G.NONE,(r=t.call(this,null,e)||this).mipmap=D.OFF,r.valid=!0,r.clearColor=[0,0,0,0],r.framebuffer=new ur(r.realWidth,r.realHeight).addColorTexture(0,r),r.framebuffer.multisample=e.multisample,r.maskStack=[],r.filterStack=[{}],r}return Ye(e,t),e.prototype.resize=function(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(Qe),cr=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(t,e,r){var n=e.width,i=e.height;if(r){var o=t.width/2/n,s=t.height/2/i,a=t.x/n+o,l=t.y/i+s;r=Ee.add(r,Ee.NW),this.x0=a+o*Ee.uX(r),this.y0=l+s*Ee.uY(r),r=Ee.add(r,2),this.x1=a+o*Ee.uX(r),this.y1=l+s*Ee.uY(r),r=Ee.add(r,2),this.x2=a+o*Ee.uX(r),this.y2=l+s*Ee.uY(r),r=Ee.add(r,2),this.x3=a+o*Ee.uX(r),this.y3=l+s*Ee.uY(r)}else this.x0=t.x/n,this.y0=t.y/i,this.x1=(t.x+t.width)/n,this.y1=t.y/i,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/i,this.x3=t.x/n,this.y3=(t.y+t.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},t}(),dr=new cr;function fr(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}var pr=function(t){function e(r,n,i,o,s,a){var l=t.call(this)||this;if(l.noFrame=!1,n||(l.noFrame=!0,n=new ce(0,0,1,1)),r instanceof e&&(r=r.baseTexture),l.baseTexture=r,l._frame=n,l.trim=o,l.valid=!1,l._uvs=dr,l.uvMatrix=null,l.orig=i||n,l._rotate=Number(s||0),!0===s)l._rotate=2;else if(l._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return l.defaultAnchor=a?new ue(a.x,a.y):new ue(0,0),l._updateID=0,l.textureCacheIds=[],r.valid?l.noFrame?r.valid&&l.onBaseTextureUpdated(r):l.frame=n:r.once("loaded",l.onBaseTextureUpdated,l),l.noFrame&&r.on("update",l.onBaseTextureUpdated,l),l}return Ye(e,t),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var r=this.baseTexture.resource;r&&r.url&&qt[r.url]&&e.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var t=this._frame.clone(),r=this._frame===this.orig?t:this.orig.clone(),n=new e(this.baseTexture,!this.noFrame&&t,r,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=t),n},e.prototype.updateUvs=function(){this._uvs===dr&&(this._uvs=new cr),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,r,n){void 0===r&&(r={}),void 0===n&&(n=ht.STRICT_TEXTURE_CACHE);var i="string"===typeof t,o=null;if(i)o=t;else if(t instanceof Qe){if(!t.cacheId){var s=r&&r.pixiIdPrefix||"pixiid";t.cacheId=s+"-"+Vt(),Qe.addToCache(t,t.cacheId)}o=t.cacheId}else{if(!t._pixiId){s=r&&r.pixiIdPrefix||"pixiid";t._pixiId=s+"_"+Vt()}o=t._pixiId}var a=qt[o];if(i&&n&&!a)throw new Error('The cacheId "'+o+'" does not exist in TextureCache.');return a||t instanceof Qe?!a&&t instanceof Qe&&(a=new e(t),e.addToCache(a,o)):(r.resolution||(r.resolution=ie(t)),(a=new e(new Qe(t,r))).baseTexture.cacheId=o,Qe.addToCache(a.baseTexture,o),e.addToCache(a,o)),a},e.fromURL=function(t,r){var n=Object.assign({autoLoad:!1},null===r||void 0===r?void 0:r.resourceOptions),i=e.from(t,Object.assign({resourceOptions:n},r),!1),o=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):o.load().then((function(){return Promise.resolve(i)}))},e.fromBuffer=function(t,r,n,i){return new e(Qe.fromBuffer(t,r,n,i))},e.fromLoader=function(t,r,n,i){var o=new Qe(t,Object.assign({scaleMode:ht.SCALE_MODE,resolution:ie(r)},i)),s=o.resource;s instanceof nr&&(s.url=r);var a=new e(o);return n||(n=r),Qe.addToCache(a.baseTexture,n),e.addToCache(a,n),n!==r&&(Qe.addToCache(a.baseTexture,r),e.addToCache(a,r)),a.baseTexture.valid?Promise.resolve(a):new Promise((function(t){a.baseTexture.once("loaded",(function(){return t(a)}))}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),qt[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),qt[e]=t)},e.removeFromCache=function(t){if("string"===typeof t){var e=qt[t];if(e){var r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete qt[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)qt[t.textureCacheIds[n]]===t&&delete qt[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,n=t.width,i=t.height,o=e+n>this.baseTexture.width,s=r+i>this.baseTexture.height;if(o||s){var a=o&&s?"and":"or",l="X: "+e+" + "+n+" = "+(e+n)+" > "+this.baseTexture.width,u="Y: "+r+" + "+i+" = "+(r+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+l+" "+a+" "+u)}this.valid=n&&i&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},Object.defineProperty(e,"EMPTY",{get:function(){return e._EMPTY||(e._EMPTY=new e(new Qe),fr(e._EMPTY),fr(e._EMPTY.baseTexture)),e._EMPTY},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){if(!e._WHITE){var t=ht.ADAPTER.createCanvas(16,16),r=t.getContext("2d");t.width=16,t.height=16,r.fillStyle="white",r.fillRect(0,0,16,16),e._WHITE=new e(Qe.from(t)),fr(e._WHITE),fr(e._WHITE.baseTexture)}return e._WHITE},enumerable:!1,configurable:!0}),e}(ct),mr=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.valid=!0,n.filterFrame=null,n.filterPoolKey=null,n.updateUvs(),n}return Ye(e,t),Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(t){this.framebuffer.multisample=t},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e,r){void 0===r&&(r=!0);var n=this.baseTexture.resolution,i=Math.round(t*n)/n,o=Math.round(e*n)/n;this.valid=i>0&&o>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=o,r&&this.baseTexture.resize(i,o),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){for(var r=arguments,n=[],i=1;i<arguments.length;i++)n[i-1]=r[i];return"number"===typeof t&&(Yt("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:n[0],scaleMode:n[1],resolution:n[2]}),new e(new hr(t))},e}(pr),yr=function(){function t(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(t,e,r){void 0===r&&(r=G.NONE);var n=new hr(Object.assign({width:t,height:e,resolution:1,multisample:r},this.textureOptions));return new mr(n)},t.prototype.getOptimalTexture=function(t,e,r,n){var i;void 0===r&&(r=1),void 0===n&&(n=G.NONE),t=Math.ceil(t*r-1e-6),e=Math.ceil(e*r-1e-6),this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight?i=n>1?-n:-1:(i=((65535&(t=kt(t)))<<16|65535&(e=kt(e)))>>>0,n>1&&(i+=4294967296*n)),this.texturePool[i]||(this.texturePool[i]=[]);var o=this.texturePool[i].pop();return o||(o=this.createTexture(t,e,n)),o.filterPoolKey=i,o.setResolution(r),o},t.prototype.getFilterTexture=function(t,e,r){var n=this.getOptimalTexture(t.width,t.height,e||t.resolution,r||G.NONE);return n.filterFrame=t.filterFrame,n},t.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},t.prototype.returnFilterTexture=function(t){this.returnTexture(t)},t.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var r=this.texturePool[e];if(r)for(var n=0;n<r.length;n++)r[n].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){for(var e in this.enableFullScreen=t.width>0&&t.height>0,this.texturePool)if(Number(e)<0){var r=this.texturePool[e];if(r)for(var n=0;n<r.length;n++)r[n].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},t.SCREEN_KEY=-1,t}(),gr=function(){function t(t,e,r,n,i,o,s){void 0===e&&(e=0),void 0===r&&(r=!1),void 0===n&&(n=P.FLOAT),this.buffer=t,this.size=e,this.normalized=r,this.type=n,this.stride=i,this.start=o,this.instance=s}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,r,n,i,o){return new t(e,r,n,i,o)},t}(),_r=0,vr=function(){function t(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=e,this.id=_r++,this.disposeRunner=new Ue("disposeBuffer")}return t.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(t.prototype,"index",{get:function(){return this.type===j.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?j.ELEMENT_ARRAY_BUFFER:j.ARRAY_BUFFER},enumerable:!1,configurable:!0}),t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}(),br={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var xr={5126:4,5123:2,5121:1},Tr=0,Sr={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},wr=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=Tr++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Ue("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(t,e,r,n,i,o,s,a){if(void 0===r&&(r=0),void 0===n&&(n=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof vr||(e instanceof Array&&(e=new Float32Array(e)),e=new vr(e));var l=t.split("|");if(l.length>1){for(var u=0;u<l.length;u++)this.addAttribute(l[u],e,r,n,i);return this}var h=this.buffers.indexOf(e);return-1===h&&(this.buffers.push(e),h=this.buffers.length-1),this.attributes[t]=new gr(h,r,n,i,o,s,a),this.instanced=this.instanced||a,this},t.prototype.getAttribute=function(t){return this.attributes[t]},t.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},t.prototype.addIndex=function(t){return t instanceof vr||(t instanceof Array&&(t=new Uint16Array(t)),t=new vr(t)),t.type=j.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],r=[],n=new vr;for(t in this.attributes){var i=this.attributes[t],o=this.buffers[i.buffer];e.push(o.data),r.push(i.size*xr[i.type]/4),i.buffer=0}for(n.data=function(t,e){for(var r=0,n=0,i={},o=0;o<t.length;o++)n+=e[o],r+=t[o].length;var s=new ArrayBuffer(4*r),a=null,l=0;for(o=0;o<t.length;o++){var u=e[o],h=t[o],c=Lt(h);i[c]||(i[c]=new br[c](s)),a=i[c];for(var d=0;d<h.length;d++)a[(d/u|0)*n+l+d%u]=h[d];l+=u}return new Float32Array(s)}(e,r),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,r=0;r<this.buffers.length;r++)e.buffers[r]=new vr(this.buffers[r].data.slice(0));for(var r in this.attributes){var n=this.attributes[r];e.attributes[r]=new gr(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=j.ELEMENT_ARRAY_BUFFER),e},t.merge=function(e){for(var r,n=new t,i=[],o=[],s=[],a=0;a<e.length;a++){r=e[a];for(var l=0;l<r.buffers.length;l++)o[l]=o[l]||0,o[l]+=r.buffers[l].data.length,s[l]=0}for(a=0;a<r.buffers.length;a++)i[a]=new(Sr[Lt(r.buffers[a].data)])(o[a]),n.buffers[a]=new vr(i[a]);for(a=0;a<e.length;a++){r=e[a];for(l=0;l<r.buffers.length;l++)i[l].set(r.buffers[l].data,s[l]),s[l]+=r.buffers[l].data.length}if(n.attributes=r.attributes,r.indexBuffer){n.indexBuffer=n.buffers[r.buffers.indexOf(r.indexBuffer)],n.indexBuffer.type=j.ELEMENT_ARRAY_BUFFER;var u=0,h=0,c=0,d=0;for(a=0;a<r.buffers.length;a++)if(r.buffers[a]!==r.indexBuffer){d=a;break}for(var a in r.attributes){var f=r.attributes[a];(0|f.buffer)===d&&(h+=f.size*xr[f.type]/4)}for(a=0;a<e.length;a++){var p=e[a].indexBuffer.data;for(l=0;l<p.length;l++)n.indexBuffer.data[l+c]+=u;u+=e[a].buffers[d].data.length/h,c+=p.length}}return n},t}(),Er=function(t){function e(){var e=t.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return Ye(e,t),e}(wr),Ir=function(t){function e(){var e=t.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new vr(e.vertices),e.uvBuffer=new vr(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return Ye(e,t),e.prototype.map=function(t,e){var r=0,n=0;return this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+e.width/t.width,this.uvs[3]=n,this.uvs[4]=r+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=r,this.uvs[7]=n+e.height/t.height,r=e.x,n=e.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+e.width,this.vertices[3]=n,this.vertices[4]=r+e.width,this.vertices[5]=n+e.height,this.vertices[6]=r,this.vertices[7]=n+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(wr),Ar=0,Mr=function(){function t(t,e,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Ar++,this.static=!!e,this.ubo=!!r,t instanceof vr?(this.buffer=t,this.buffer.type=j.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new vr(new Float32Array(1)),this.buffer.type=j.UNIFORM_BUFFER,this.autoManage=!0))}return t.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},t.prototype.add=function(e,r,n){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new t(r,n)},t.from=function(e,r,n){return new t(e,r,n)},t.uboFrom=function(e,r){return new t(e,null===r||void 0===r||r,!0)},t}(),Pr=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=G.NONE,this.sourceFrame=new ce,this.destinationFrame=new ce,this.bindingSourceFrame=new ce,this.bindingDestinationFrame=new ce,this.filters=[],this.transform=null}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),Or=[new ue,new ue,new ue,new ue],Rr=new ge,Cr=function(){function t(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new yr,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new Er,this.quadUv=new Ir,this.tempRect=new ce,this.activeState={},this.globalUniforms=new Mr({outputFrame:new ce,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return t.prototype.push=function(t,e){for(var r,n,i=this.renderer,o=this.defaultFilterStack,s=this.statePool.pop()||new Pr,a=this.renderer.renderTexture,l=e[0].resolution,u=e[0].multisample,h=e[0].padding,c=e[0].autoFit,d=null===(r=e[0].legacy)||void 0===r||r,f=1;f<e.length;f++){var p=e[f];l=Math.min(l,p.resolution),u=Math.min(u,p.multisample),h=this.useMaxPadding?Math.max(h,p.padding):h+p.padding,c=c&&p.autoFit,d=d||null===(n=p.legacy)||void 0===n||n}1===o.length&&(this.defaultFilterStack[0].renderTexture=a.current),o.push(s),s.resolution=l,s.multisample=u,s.legacy=d,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(h);var m=this.tempRect.copyFrom(a.sourceFrame);i.projection.transform&&this.transformAABB(Rr.copyFrom(i.projection.transform).invert(),m),c?(s.sourceFrame.fit(m),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(m)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,a.current?a.current.resolution:i.resolution,a.sourceFrame,a.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,l,u),s.filters=e,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;var y=this.tempRect;y.x=0,y.y=0,y.width=s.sourceFrame.width,y.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(a.sourceFrame),s.bindingDestinationFrame.copyFrom(a.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,a.bind(s.renderTexture,s.sourceFrame,y),i.framebuffer.clear(0,0,0,0)},t.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),r=e.filters;this.activeState=e;var n=this.globalUniforms.uniforms;n.outputFrame=e.sourceFrame,n.resolution=e.resolution;var i=n.inputSize,o=n.inputPixel,s=n.inputClamp;if(i[0]=e.destinationFrame.width,i[1]=e.destinationFrame.height,i[2]=1/i[0],i[3]=1/i[1],o[0]=Math.round(i[0]*e.resolution),o[1]=Math.round(i[1]*e.resolution),o[2]=1/o[0],o[3]=1/o[1],s[0]=.5*o[2],s[1]=.5*o[3],s[2]=e.sourceFrame.width*i[2]-.5*o[2],s[3]=e.sourceFrame.height*i[3]-.5*o[3],e.legacy){var a=n.filterArea;a[0]=e.destinationFrame.width,a[1]=e.destinationFrame.height,a[2]=e.sourceFrame.x,a[3]=e.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();var l=t[t.length-1];if(this.renderer.framebuffer.blit(),1===r.length)r[0].apply(this,e.renderTexture,l.renderTexture,L.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var u=e.renderTexture,h=this.getOptimalFilterTexture(u.width,u.height,e.resolution);h.filterFrame=u.filterFrame;var c=0;for(c=0;c<r.length-1;++c){1===c&&e.multisample>1&&((h=this.getOptimalFilterTexture(u.width,u.height,e.resolution)).filterFrame=u.filterFrame),r[c].apply(this,u,h,L.CLEAR,e);var d=u;u=h,h=d}r[c].apply(this,u,l.renderTexture,L.BLEND,e),c>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(h)}e.clear(),this.statePool.push(e)},t.prototype.bindAndClear=function(t,e){void 0===e&&(e=L.CLEAR);var r=this.renderer,n=r.renderTexture,i=r.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,n.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var s=1&i.stateId||this.forceClear;(e===L.CLEAR||e===L.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)},t.prototype.applyFilter=function(t,e,r,n){var i=this.renderer;i.state.set(t.state),this.bindAndClear(r,n),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,i.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),i.geometry.bind(this.quadUv),i.geometry.draw(I.TRIANGLES)):(i.geometry.bind(this.quad),i.geometry.draw(I.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(t,e){var r=this.activeState,n=r.sourceFrame,i=r.destinationFrame,o=e._texture.orig,s=t.set(i.width,0,0,i.height,n.x,n.y),a=e.worldTransform.copyTo(ge.TEMP_MATRIX);return a.invert(),s.prepend(a),s.scale(1/o.width,1/o.height),s.translate(e.anchor.x,e.anchor.y),s},t.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(t,e,r,n){return void 0===r&&(r=1),void 0===n&&(n=G.NONE),this.texturePool.getOptimalTexture(t,e,r,n)},t.prototype.getFilterTexture=function(t,e,r){if("number"===typeof t){var n=t;t=e,e=n}t=t||this.activeState.renderTexture;var i=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,r||G.NONE);return i.filterFrame=t.filterFrame,i},t.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t.prototype.transformAABB=function(t,e){var r=Or[0],n=Or[1],i=Or[2],o=Or[3];r.set(e.left,e.top),n.set(e.left,e.bottom),i.set(e.right,e.top),o.set(e.right,e.bottom),t.apply(r,r),t.apply(n,n),t.apply(i,i),t.apply(o,o);var s=Math.min(r.x,n.x,i.x,o.x),a=Math.min(r.y,n.y,i.y,o.y),l=Math.max(r.x,n.x,i.x,o.x),u=Math.max(r.y,n.y,i.y,o.y);e.x=s,e.y=a,e.width=l-s,e.height=u-a},t.prototype.roundFrame=function(t,e,r,n,i){if(!(t.width<=0||t.height<=0||r.width<=0||r.height<=0)){if(i){var o=i.a,s=i.b,a=i.c,l=i.d;if((Math.abs(s)>1e-4||Math.abs(a)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(l)>1e-4))return}(i=i?Rr.copyFrom(i):Rr.identity()).translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.transformAABB(i,t),t.ceil(e),this.transformAABB(i.invert(),t)}},t}(),Dr=function(){function t(t){this.renderer=t}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(t){},t}(),Fr=function(){function t(t){this.renderer=t,this.emptyRenderer=new Dr(t),this.currentRenderer=this.emptyRenderer}return t.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(t,e){for(var r=this.renderer.texture.boundTextures,n=e-1;n>=0;--n)t[n]=r[n]||null,t[n]&&(t[n]._batchLocation=n)},t.prototype.boundArray=function(t,e,r,n){for(var i=t.elements,o=t.ids,s=t.count,a=0,l=0;l<s;l++){var u=i[l],h=u._batchLocation;if(h>=0&&h<n&&e[h]===u)o[l]=h;else for(;a<n;){var c=e[a];if(!c||c._batchEnabled!==r||c._batchLocation!==a){o[l]=a,u._batchLocation=a,e[a]=u;break}a++}}},t.prototype.destroy=function(){this.renderer=null},t}(),Lr=0,Nr=function(){function t(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=Lr++},t.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=Lr++,this.renderer.runners.contextChange.emit(t)},t.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},t.prototype.createContext=function(t,e){var r;if(ht.PREFER_ENV>=T.WEBGL2&&(r=t.getContext("webgl2",e)),r)this.webGLVersion=2;else if(this.webGLVersion=1,!(r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var t=this.gl,e={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},t.prototype.handleContextLost=function(t){var e=this;t.preventDefault(),setTimeout((function(){e.gl.isContextLost()&&e.extensions.loseContext&&e.extensions.loseContext.restoreContext()}),0)},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(t){var e=t.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),e&&!e.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var n=r||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(),Br=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=G.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},kr=new ce,Ur=function(){function t(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new ur(10,10),this.msaaSamples=null}return t.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ce,this.hasMRT=!0,this.writeDepthTexture=!0,1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;ht.PREFER_ENV===T.WEBGL_LEGACY&&(e=null,r=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},t.prototype.bind=function(t,e,r){void 0===r&&(r=0);var n=this.gl;if(t){var i=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,i.framebuffer)),i.mipLevel!==r&&(t.dirtyId++,t.dirtyFormat++,i.mipLevel=r),i.dirtyId!==t.dirtyId&&(i.dirtyId=t.dirtyId,i.dirtyFormat!==t.dirtyFormat?(i.dirtyFormat=t.dirtyFormat,i.dirtySize=t.dirtySize,this.updateFramebuffer(t,r)):i.dirtySize!==t.dirtySize&&(i.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var o=0;o<t.colorTextures.length;o++){var s=t.colorTextures[o];this.renderer.texture.unbind(s.parentTextureArray||s)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var a=e.width>>r,l=e.height>>r,u=a/e.width;this.setViewport(e.x*u,e.y*u,a,l)}else{a=t.width>>r,l=t.height>>r;this.setViewport(0,0,a,l)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(t,e,r,n){var i=this.viewport;t=Math.round(t),e=Math.round(e),r=Math.round(r),n=Math.round(n),i.width===r&&i.height===n&&i.x===t&&i.y===e||(i.x=t,i.y=e,i.width=r,i.height=n,this.gl.viewport(t,e,r,n))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(t,e,r,n,i){void 0===i&&(i=w.COLOR|w.DEPTH);var o=this.gl;o.clearColor(t,e,r,n),o.clear(i)},t.prototype.initFramebuffer=function(t){var e=this.gl,r=new Br(e.createFramebuffer());return r.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(t),t.disposeRunner.add(this),r},t.prototype.resizeFramebuffer=function(t){var e=this.gl,r=t.glFramebuffers[this.CONTEXT_UID];r.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,r.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.RGBA8,t.width,t.height)),r.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,r.stencil),r.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,r.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var n=t.colorTextures,i=n.length;e.drawBuffers||(i=Math.min(i,1));for(var o=0;o<i;o++){var s=n[o],a=s.parentTextureArray||s;this.renderer.texture.bind(a,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},t.prototype.updateFramebuffer=function(t,e){var r=this.gl,n=t.glFramebuffers[this.CONTEXT_UID],i=t.colorTextures,o=i.length;r.drawBuffers||(o=Math.min(o,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?(n.msaaBuffer=n.msaaBuffer||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.RGBA8,t.width,t.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,n.msaaBuffer)):n.msaaBuffer&&(r.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));for(var s=[],a=0;a<o;a++){var l=i[a],u=l.parentTextureArray||l;this.renderer.texture.bind(u,0),0===a&&n.msaaBuffer||(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+a,l.target,u._glTextures[this.CONTEXT_UID].texture,e),s.push(r.COLOR_ATTACHMENT0+a))}if((s.length>1&&r.drawBuffers(s),t.depthTexture)&&this.writeDepthTexture){var h=t.depthTexture;this.renderer.texture.bind(h,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,e)}!t.stencil&&!t.depth||t.depthTexture&&this.writeDepthTexture?n.stencil&&(r.deleteRenderbuffer(n.stencil),n.stencil=null):(n.stencil=n.stencil||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.DEPTH24_STENCIL8,t.width,t.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t.width,t.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,n.stencil))},t.prototype.canMultisampleFramebuffer=function(t){return 1!==this.renderer.context.webGLVersion&&t.colorTextures.length<=1&&!t.depthTexture},t.prototype.detectSamples=function(t){var e=this.msaaSamples,r=G.NONE;if(t<=1||null===e)return r;for(var n=0;n<e.length;n++)if(e[n]<=t){r=e[n];break}return 1===r&&(r=G.NONE),r},t.prototype.blit=function(t,e,r){var n=this,i=n.current,o=n.renderer,s=n.gl,a=n.CONTEXT_UID;if(2===o.context.webGLVersion&&i){var l=i.glFramebuffers[a];if(l){if(!t){if(!l.msaaBuffer)return;var u=i.colorTextures[0];if(!u)return;l.blitFramebuffer||(l.blitFramebuffer=new ur(i.width,i.height),l.blitFramebuffer.addColorTexture(0,u)),(t=l.blitFramebuffer).colorTextures[0]!==u&&(t.colorTextures[0]=u,t.dirtyId++,t.dirtyFormat++),t.width===i.width&&t.height===i.height||(t.width=i.width,t.height=i.height,t.dirtyId++,t.dirtySize++)}e||((e=kr).width=i.width,e.height=i.height),r||(r=e);var h=e.width===r.width&&e.height===r.height;this.bind(t),s.bindFramebuffer(s.READ_FRAMEBUFFER,l.framebuffer),s.blitFramebuffer(e.left,e.top,e.right,e.bottom,r.left,r.top,r.right,r.bottom,s.COLOR_BUFFER_BIT,h?s.NEAREST:s.LINEAR)}}},t.prototype.disposeFramebuffer=function(t,e){var r=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(r){delete t.glFramebuffers[this.CONTEXT_UID];var i=this.managedFramebuffers.indexOf(t);i>=0&&this.managedFramebuffers.splice(i,1),t.disposeRunner.remove(this),e||(n.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&n.deleteRenderbuffer(r.msaaBuffer),r.stencil&&n.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&r.blitFramebuffer.dispose()}},t.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<e.length;r++)this.disposeFramebuffer(e[r],t)},t.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.stencil=!0;var r=t.width,n=t.height,i=this.gl,o=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,o),e.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,e.multisample,i.DEPTH24_STENCIL8,r,n):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,r,n),e.stencil=o,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,o)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new ce},t.prototype.destroy=function(){this.renderer=null},t}(),Gr={5126:4,5123:2,5121:1},jr=function(){function t(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return t.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==e.webGLVersion){var r=this.renderer.context.extensions.vertexArrayObject;ht.PREFER_ENV===T.WEBGL_LEGACY&&(r=null),r?(t.createVertexArray=function(){return r.createVertexArrayOES()},t.bindVertexArray=function(t){return r.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return r.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(2!==e.webGLVersion){var n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=function(t,e){return n.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,r,i,o){return n.drawElementsInstancedANGLE(t,e,r,i,o)},t.drawArraysInstanced=function(t,e,r,i){return n.drawArraysInstancedANGLE(t,e,r,i)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},t.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var r=this.gl,n=t.glVertexArrayObjects[this.CONTEXT_UID],i=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},i=!0);var o=n[e.program.id]||this.initGeometryVao(t,e,i);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?r.bindVertexArray(o):this.activateVao(t,e.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,r=0;r<t.buffers.length;r++){var n=t.buffers[r];e.update(n)}},t.prototype.checkCompatibility=function(t,e){var r=t.attributes,n=e.attributeData;for(var i in n)if(!r[i])throw new Error('shader and geometry incompatible, geometry missing the "'+i+'" attribute')},t.prototype.getSignature=function(t,e){var r=t.attributes,n=e.attributeData,i=["g",t.id];for(var o in r)n[o]&&i.push(o,n[o].location);return i.join("-")},t.prototype.initGeometryVao=function(t,e,r){void 0===r&&(r=!0);var n=this.gl,i=this.CONTEXT_UID,o=this.renderer.buffer,s=e.program;s.glPrograms[i]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,s);var a=this.getSignature(t,s),l=t.glVertexArrayObjects[this.CONTEXT_UID],u=l[a];if(u)return l[s.id]=u,u;var h=t.buffers,c=t.attributes,d={},f={};for(var p in h)d[p]=0,f[p]=0;for(var p in c)!c[p].size&&s.attributeData[p]?c[p].size=s.attributeData[p].size:c[p].size||console.warn("PIXI Geometry attribute '"+p+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[c[p].buffer]+=c[p].size*Gr[c[p].type];for(var p in c){var m=c[p],y=m.size;void 0===m.stride&&(d[m.buffer]===y*Gr[m.type]?m.stride=0:m.stride=d[m.buffer]),void 0===m.start&&(m.start=f[m.buffer],f[m.buffer]+=y*Gr[m.type])}u=n.createVertexArray(),n.bindVertexArray(u);for(var g=0;g<h.length;g++){var _=h[g];o.bind(_),r&&_._glBuffers[i].refCount++}return this.activateVao(t,s),this._activeVao=u,l[s.id]=u,l[a]=u,u},t.prototype.disposeGeometry=function(t,e){var r;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var n=t.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,o=t.buffers,s=null===(r=this.renderer)||void 0===r?void 0:r.buffer;if(t.disposeRunner.remove(this),n){if(s)for(var a=0;a<o.length;a++){var l=o[a]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,0!==l.refCount||e||s.dispose(o[a],e))}if(!e)for(var u in n)if("g"===u[0]){var h=n[u];this._activeVao===h&&this.unbind(),i.deleteVertexArray(h)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),r=0;r<e.length;r++)this.disposeGeometry(this.managedGeometries[e[r]],t)},t.prototype.activateVao=function(t,e){var r=this.gl,n=this.CONTEXT_UID,i=this.renderer.buffer,o=t.buffers,s=t.attributes;t.indexBuffer&&i.bind(t.indexBuffer);var a=null;for(var l in s){var u=s[l],h=o[u.buffer],c=h._glBuffers[n];if(e.attributeData[l]){a!==c&&(i.bind(h),a=c);var d=e.attributeData[l].location;if(r.enableVertexAttribArray(d),r.vertexAttribPointer(d,u.size,u.type||r.FLOAT,u.normalized,u.stride,u.start),u.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");r.vertexAttribDivisor(d,1)}}}},t.prototype.draw=function(t,e,r,n){var i=this.gl,o=this._activeGeometry;if(o.indexBuffer){var s=o.indexBuffer.data.BYTES_PER_ELEMENT,a=2===s?i.UNSIGNED_SHORT:i.UNSIGNED_INT;2===s||4===s&&this.canUseUInt32ElementIndex?o.instanced?i.drawElementsInstanced(t,e||o.indexBuffer.data.length,a,(r||0)*s,n||1):i.drawElements(t,e||o.indexBuffer.data.length,a,(r||0)*s):console.warn("unsupported index buffer type: uint32")}else o.instanced?i.drawArraysInstanced(t,r,e||o.getSize(),n||1):i.drawArrays(t,r,e||o.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t.prototype.destroy=function(){this.renderer=null},t}(),Xr=function(){function t(t){void 0===t&&(t=null),this.type=k.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=ht.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}return Object.defineProperty(t.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=k.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},t.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function zr(t,e,r){var n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),n}function Vr(t,e){var r=t.getShaderSource(e).split("\n").map((function(t,e){return e+": "+t})),n=t.getShaderInfoLog(e),i=n.split("\n"),o={},s=i.map((function(t){return parseFloat(t.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))})).filter((function(t){return!(!t||o[t])&&(o[t]=!0,!0)})),a=[""];s.forEach((function(t){r[t-1]="%c"+r[t-1]+"%c",a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));var l=r.join("\n");a[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,a),console.groupEnd()}function Hr(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e}function Yr(t,e){switch(t){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Hr(2*e);case"bvec3":return Hr(3*e);case"bvec4":return Hr(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var Wr,qr={},$r=qr;function Kr(){if($r===qr||$r&&$r.isContextLost()){var t=ht.ADAPTER.createCanvas(),e=void 0;ht.PREFER_ENV>=T.WEBGL2&&(e=t.getContext("webgl2",{})),e||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),$r=e}return $r}function Qr(t,e,r){if("precision"!==t.substring(0,9)){var n=e;return e===B.HIGH&&r!==B.HIGH&&(n=B.MEDIUM),"precision "+n+" float;\n"+t}return r!==B.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var Zr={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Jr(t){return Zr[t]}var tn=null,en={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function rn(t,e){if(!tn){var r=Object.keys(en);tn={};for(var n=0;n<r.length;++n){var i=r[n];tn[t[i]]=en[i]}}return tn[e]}var nn=[{test:function(t){return"float"===t.type&&1===t.size&&!t.isArray},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t,e){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray&&(null==e||void 0!==e.castToBaseTexture)},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&!t.isArray&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '},codeUbo:function(t){return"\n                var "+t+"_matrix = uv."+t+".toArray(true);\n\n                data[offset] = "+t+"_matrix[0];\n                data[offset+1] = "+t+"_matrix[1];\n                data[offset+2] = "+t+"_matrix[2];\n        \n                data[offset + 4] = "+t+"_matrix[3];\n                data[offset + 5] = "+t+"_matrix[4];\n                data[offset + 6] = "+t+"_matrix[5];\n        \n                data[offset + 8] = "+t+"_matrix[6];\n                data[offset + 9] = "+t+"_matrix[7];\n                data[offset + 10] = "+t+"_matrix[8];\n            "}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&!t.isArray&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'},codeUbo:function(t){return"\n                v = uv."+t+";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "}},{test:function(t){return"vec2"===t.type&&1===t.size&&!t.isArray},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&!t.isArray&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'},codeUbo:function(t){return"\n                    v = uv."+t+";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "}},{test:function(t){return"vec4"===t.type&&1===t.size&&!t.isArray},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],on={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},sn={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var an,ln=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function un(t){for(var e="",r=0;r<t;++r)r>0&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}function hn(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var r=e.createShader(e.FRAGMENT_SHADER);;){var n=ln.replace(/%forloop%/gi,un(t));if(e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))break;t=t/2|0}return t}var cn=0,dn={},fn=function(){function t(e,r,n){void 0===n&&(n="pixi-shader"),this.id=cn++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=r||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(n=n.replace(/\s+/g,"-"),dn[n]?(dn[n]++,n+="-"+dn[n]):dn[n]=1,this.vertexSrc="#define SHADER_NAME "+n+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+n+"\n"+this.fragmentSrc,this.vertexSrc=Qr(this.vertexSrc,ht.PRECISION_VERTEX,B.HIGH),this.fragmentSrc=Qr(this.fragmentSrc,ht.PRECISION_FRAGMENT,function(){if(!Wr){Wr=B.MEDIUM;var t=Kr();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);Wr=e.precision?B.HIGH:B.MEDIUM}}return Wr}())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),t.from=function(e,r,n){var i=e+r,o=Wt[i];return o||(Wt[i]=o=new t(e,r,n)),o},t}(),pn=function(){function t(t,e){this.uniformBindCount=0,this.program=t,this.uniformGroup=e?e instanceof Mr?e:new Mr(e):new Mr({}),this.disposeRunner=new Ue("disposeShader")}return t.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var r in e.uniforms){var n=e.uniforms[r];if(n.group&&this.checkUniformExists(t,n))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,r,n){return new t(fn.from(e,r),n)},t}(),mn=function(){function t(){this.data=0,this.blendMode=E.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==E.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),yn=function(t){function e(r,n,i){var o=this,s=fn.from(r||e.defaultVertexSrc,n||e.defaultFragmentSrc);return(o=t.call(this,s,i)||this).padding=0,o.resolution=ht.FILTER_RESOLUTION,o.multisample=ht.FILTER_MULTISAMPLE,o.enabled=!0,o.autoFit=!0,o.state=new mn,o}return Ye(e,t),e.prototype.apply=function(t,e,r,n,i){t.applyFilter(this,e,r,n)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),e}(pn),gn=new ge,_n=function(){function t(t,e){this._texture=t,this.mapCoord=new ge,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin="undefined"===typeof e?.5:e,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,n=0;n<t.length;n+=2){var i=t[n],o=t[n+1];e[n]=i*r.a+o*r.c+r.tx,e[n+1]=i*r.b+o*r.d+r.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var n=e.orig,i=e.trim;i&&(gn.set(n.width/i.width,0,0,n.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(gn));var o=e.baseTexture,s=this.uClampFrame,a=this.clampMargin/o.resolution,l=this.clampOffset;return s[0]=(e._frame.x+a+l)/o.width,s[1]=(e._frame.y+a+l)/o.height,s[2]=(e._frame.x+e._frame.width-a+l)/o.width,s[3]=(e._frame.y+e._frame.height-a+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,this.isSimple=e._frame.width===o.width&&e._frame.height===o.height&&0===e.rotate,!0},t}(),vn=function(t){function e(e,r,n){var i=this,o=null;return"string"!==typeof e&&void 0===r&&void 0===n&&(o=e,e=void 0,r=void 0,n=void 0),(i=t.call(this,e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",r||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",n)||this).maskSprite=o,i.maskMatrix=new ge,i}return Ye(e,t),Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(t,e,r,n){var i=this._maskSprite,o=i._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new _n(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,i).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,r,n))},e}(yn),bn=function(){function t(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},t.prototype.push=function(t,e){var r=e;if(!r.isMaskData){var n=this.maskDataPool.pop()||new Xr;n.pooled=!0,n.maskObject=e,r=n}var i=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(i),r._colorMask=i?i._colorMask:15,r.autoDetect&&this.detect(r),r._target=t,r.type!==k.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case k.SCISSOR:this.renderer.scissor.push(r);break;case k.STENCIL:this.renderer.stencil.push(r);break;case k.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case k.COLOR:this.pushColorMask(r)}r.type===k.SPRITE&&this.maskStack.push(r)},t.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){if(e.enabled)switch(e.type){case k.SCISSOR:this.renderer.scissor.pop(e);break;case k.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case k.SPRITE:this.popSpriteMask(e);break;case k.COLOR:this.popColorMask(e)}if(e.reset(),e.pooled&&this.maskDataPool.push(e),0!==this.maskStack.length){var r=this.maskStack[this.maskStack.length-1];r.type===k.SPRITE&&r._filters&&(r._filters[0].maskSprite=r.maskObject)}}},t.prototype.detect=function(t){var e=t.maskObject;e?e.isSprite?t.type=k.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=k.SCISSOR:t.type=k.STENCIL:t.type=k.COLOR},t.prototype.pushSpriteMask=function(t){var e,r,n=t.maskObject,i=t._target,o=t._filters;o||(o=this.alphaMaskPool[this.alphaMaskIndex])||(o=this.alphaMaskPool[this.alphaMaskIndex]=[new vn]);var s,a,l=this.renderer,u=l.renderTexture;if(u.current){var h=u.current;s=t.resolution||h.resolution,a=null!==(e=t.multisample)&&void 0!==e?e:h.multisample}else s=t.resolution||l.resolution,a=null!==(r=t.multisample)&&void 0!==r?r:l.multisample;o[0].resolution=s,o[0].multisample=a,o[0].maskSprite=n;var c=i.filterArea;i.filterArea=n.getBounds(!0),l.filter.push(i,o),i.filterArea=c,t._filters||this.alphaMaskIndex++},t.prototype.popSpriteMask=function(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},t.prototype.pushColorMask=function(t){var e=t._colorMask,r=t._colorMask=e&t.colorMask;r!==e&&this.renderer.gl.colorMask(0!==(1&r),0!==(2&r),0!==(4&r),0!==(8&r))},t.prototype.popColorMask=function(t){var e=t._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==e&&this.renderer.gl.colorMask(0!==(1&r),0!==(2&r),0!==(4&r),0!==(8&r))},t.prototype.destroy=function(){this.renderer=null},t}(),xn=function(){function t(t){this.renderer=t,this.maskStack=[],this.glConst=0}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(t){var e=this.renderer.gl,r=this.getStackLength();this.maskStack=t;var n=this.getStackLength();n!==r&&(0===n?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){this.renderer=null,this.maskStack=null},t}(),Tn=new ge,Sn=[],wn=function(t){function e(e){var r=t.call(this,e)||this;return r.glConst=ht.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,r}return Ye(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.calcScissorRect=function(t){var e;if(!t._scissorRectLocal){var r=t._scissorRect,n=t.maskObject,i=this.renderer,o=i.renderTexture,s=n.getBounds(!0,null!==(e=Sn.pop())&&void 0!==e?e:new ce);this.roundFrameToPixels(s,o.current?o.current.resolution:i.resolution,o.sourceFrame,o.destinationFrame,i.projection.transform),r&&s.fit(r),t._scissorRectLocal=s}},e.isMatrixRotated=function(t){if(!t)return!1;var e=t.a,r=t.b,n=t.c,i=t.d;return(Math.abs(r)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(i)>1e-4)},e.prototype.testScissor=function(t){var r=t.maskObject;if(!r.isFastRect||!r.isFastRect())return!1;if(e.isMatrixRotated(r.worldTransform))return!1;if(e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);var n=t._scissorRectLocal;return n.width>0&&n.height>0},e.prototype.roundFrameToPixels=function(t,r,n,i,o){e.isMatrixRotated(o)||((o=o?Tn.copyFrom(o):Tn.identity()).translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.renderer.filter.transformAABB(o,t),t.fit(i),t.x=Math.round(t.x*r),t.y=Math.round(t.y*r),t.width=Math.round(t.width*r),t.height=Math.round(t.height*r))},e.prototype.push=function(t){t._scissorRectLocal||this.calcScissorRect(t);var e=this.renderer.gl;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;t&&Sn.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t,e=this.maskStack[this.maskStack.length-1]._scissorRect;t=this.renderer.renderTexture.current?e.y:this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)},e}(xn),En=function(t){function e(e){var r=t.call(this,e)||this;return r.glConst=ht.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,r}return Ye(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,r=this.renderer.gl,n=t._stencilCounter;0===n&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),t._stencilCounter++;var i=t._colorMask;0!==i&&(t._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,n,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,0!==i&&(t._colorMask=i,r.colorMask(0!==(1&i),0!==(2&i),0!==(4&i),0!==(8&i))),this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;if(0===this.getStackLength())e.disable(e.STENCIL_TEST);else{var r=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,n=r?r._colorMask:15;0!==n&&(r._colorMask=0,e.colorMask(!1,!1,!1,!1)),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,0!==n&&(r._colorMask=n,e.colorMask(0!==(1&n),0!==(2&n),0!==(4&n),0!==(8&n))),this._useCurrent()}},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e}(xn),In=function(){function t(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ge,this.transform=null}return t.prototype.update=function(t,e,r,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,n),this.transform&&this.projectionMatrix.append(this.transform);var i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(t,e,r,n){var i=this.projectionMatrix,o=n?-1:1;i.identity(),i.a=1/e.width*2,i.d=o*(1/e.height*2),i.tx=-1-e.x*i.a,i.ty=-o-e.y*i.d},t.prototype.setTransform=function(t){},t.prototype.destroy=function(){this.renderer=null},t}(),An=new ce,Mn=new ce,Pn=function(){function t(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new ce,this.destinationFrame=new ce,this.viewportFrame=new ce}return t.prototype.bind=function(t,e,r){void 0===t&&(t=null);var n,i,o,s=this.renderer;this.current=t,t?(o=(n=t.baseTexture).resolution,e||(An.width=t.frame.width,An.height=t.frame.height,e=An),r||(Mn.x=t.frame.x,Mn.y=t.frame.y,Mn.width=e.width,Mn.height=e.height,r=Mn),i=n.framebuffer):(o=s.resolution,e||(An.width=s.screen.width,An.height=s.screen.height,e=An),r||((r=An).width=e.width,r.height=e.height));var a=this.viewportFrame;a.x=r.x*o,a.y=r.y*o,a.width=r.width*o,a.height=r.height*o,t||(a.y=s.view.height-(a.y+a.height)),a.ceil(),this.renderer.framebuffer.bind(i,a),this.renderer.projection.update(r,e,o,!i),t?this.renderer.mask.setMaskStack(n.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(r)},t.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var r=this.destinationFrame,n=this.current?this.current.baseTexture:this.renderer.screen,i=r.width!==n.width||r.height!==n.height;if(i){var o=this.viewportFrame,s=o.x,a=o.y,l=o.width,u=o.height;s=Math.round(s),a=Math.round(a),l=Math.round(l),u=Math.round(u),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(s,a,l,u)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),i&&this.renderer.scissor.pop()},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t.prototype.destroy=function(){this.renderer=null},t}();function On(t,e,r,n,i){r.buffer.update(i)}var Rn={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},Cn={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function Dn(t){for(var e=t.map((function(t){return{data:t,offset:0,dataLen:0,dirty:0}})),r=0,n=0,i=0,o=0;o<e.length;o++){var s=e[o];if(r=Cn[s.data.type],s.data.size>1&&(r=Math.max(r,16)*s.data.size),s.dataLen=r,n%r!==0&&n<16){var a=n%r%16;n+=a,i+=a}n+r>16?(i=16*Math.ceil(i/16),s.offset=i,i+=r,n=r):(s.offset=i,n+=r,i+=r)}return{uboElements:e,size:i=16*Math.ceil(i/16)}}function Fn(t,e){var r=[];for(var n in t)e[n]&&r.push(e[n]);return r.sort((function(t,e){return t.index-e.index})),r}function Ln(t,e){if(!t.autoManage)return{size:0,syncFunc:On};for(var r=Dn(Fn(t.uniforms,e)),n=r.uboElements,i=r.size,o=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],s=0;s<n.length;s++){for(var a=n[s],l=t.uniforms[a.data.name],u=a.data.name,h=!1,c=0;c<nn.length;c++){var d=nn[c];if(d.codeUbo&&d.test(a.data,l)){o.push("offset = "+a.offset/4+";",nn[c].codeUbo(a.data.name,l)),h=!0;break}}if(!h)if(a.data.size>1){var f=Jr(a.data.type),p=Math.max(Cn[a.data.type]/16,1),m=f/p,y=(4-m%4)%4;o.push("\n                cv = ud."+u+".value;\n                v = uv."+u+";\n                offset = "+a.offset/4+";\n\n                t = 0;\n\n                for(var i=0; i < "+a.data.size*p+"; i++)\n                {\n                    for(var j = 0; j < "+m+"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += "+y+";\n                }\n\n                ")}else{var g=Rn[a.data.type];o.push("\n                cv = ud."+u+".value;\n                v = uv."+u+";\n                offset = "+a.offset/4+";\n                "+g+";\n                ")}}return o.push("\n       renderer.buffer.update(buffer);\n    "),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join("\n"))}}var Nn=function(){},Bn=function(){function t(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},t}();function kn(t,e){var r=zr(t,t.VERTEX_SHADER,e.vertexSrc),n=zr(t,t.FRAGMENT_SHADER,e.fragmentSrc),i=t.createProgram();if(t.attachShader(i,r),t.attachShader(i,n),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||function(t,e,r,n){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||Vr(t,r),t.getShaderParameter(n,t.COMPILE_STATUS)||Vr(t,n),console.error("PixiJS Error: Could not initialize shader."),""!==t.getProgramInfoLog(e)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}(t,i,r,n),e.attributeData=function(t,e){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<n;i++){var o=e.getActiveAttrib(t,i);if(0!==o.name.indexOf("gl_")){var s=rn(e,o.type),a={type:s,name:o.name,size:Jr(s),location:e.getAttribLocation(t,o.name)};r[o.name]=a}}return r}(i,t),e.uniformData=function(t,e){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<n;i++){var o=e.getActiveUniform(t,i),s=o.name.replace(/\[.*?\]$/,""),a=!!o.name.match(/\[.*?\]$/),l=rn(e,o.type);r[s]={name:s,index:i,type:l,size:o.size,isArray:a,value:Yr(l,o.size)}}return r}(i,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var o=Object.keys(e.attributeData);o.sort((function(t,e){return t>e?1:-1}));for(var s=0;s<o.length;s++)e.attributeData[o[s]].location=s,t.bindAttribLocation(i,s,o[s]);t.linkProgram(i)}t.deleteShader(r),t.deleteShader(n);var a={};for(var s in e.uniformData){var l=e.uniformData[s];a[s]={location:t.getUniformLocation(i,s),value:Yr(l.type,l.size)}}return new Bn(i,a)}var Un=0,Gn={textureCount:0,uboCount:0},jn=function(){function t(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=Un++}return t.prototype.systemCheck=function(){if(!function(){if("boolean"===typeof an)return an;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");an=!0===t({a:"b"},"a","b")}catch(e){an=!1}return an}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(t){this.gl=t,this.reset()},t.prototype.bind=function(t,e){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;var r=t.program,n=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==r&&(this.program=r,this.gl.useProgram(n.program)),e||(Gn.textureCount=0,Gn.uboCount=0,this.syncUniformGroup(t.uniformGroup,Gn)),n},t.prototype.setUniforms=function(t){var e=this.shader.program,r=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(r.uniformData,t,this.renderer)},t.prototype.syncUniformGroup=function(t,e){var r=this.getGlProgram();t.static&&t.dirtyId===r.uniformDirtyGroups[t.id]||(r.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,r,e))},t.prototype.syncUniforms=function(t,e,r){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,r)},t.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=function(t,e){var r,n=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(var i in t.uniforms){var o=e[i];if(o){for(var s=t.uniforms[i],a=!1,l=0;l<nn.length;l++)if(nn[l].test(o,s)){n.push(nn[l].code(i,s)),a=!0;break}if(!a){var u=(1!==o.size||o.isArray?sn:on)[o.type].replace("location",'ud["'+i+'"].location');n.push('\n            cu = ud["'+i+'"];\n            cv = cu.value;\n            v = uv["'+i+'"];\n            '+u+";")}}else(null===(r=t.uniforms[i])||void 0===r?void 0:r.group)&&(t.uniforms[i].ubo?n.push("\n                        renderer.shader.syncUniformBufferGroup(uv."+i+", '"+i+"');\n                    "):n.push("\n                        renderer.shader.syncUniformGroup(uv."+i+", syncData);\n                    "))}return new Function("ud","uv","renderer","syncData",n.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},t.prototype.syncUniformBufferGroup=function(t,e){var r=this.getGlProgram();if(!t.static||0!==t.dirtyId||!r.uniformGroups[t.id]){t.dirtyId=0;var n=r.uniformGroups[t.id]||this.createSyncBufferGroup(t,r,e);t.buffer.update(),n(r.uniformData,t.uniforms,this.renderer,Gn,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,r.uniformBufferBindings[e])},t.prototype.createSyncBufferGroup=function(t,e,r){var n=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var i=this.gl.getUniformBlockIndex(e.program,r);e.uniformBufferBindings[r]=this.shader.uniformBindCount,n.uniformBlockBinding(e.program,i,this.shader.uniformBindCount),this.shader.uniformBindCount++;var o=this.getSignature(t,this.shader.program.uniformData,"ubo"),s=this._uboCache[o];if(s||(s=this._uboCache[o]=Ln(t,this.shader.program.uniformData)),t.autoManage){var a=new Float32Array(s.size/4);t.buffer.update(a)}return e.uniformGroups[t.id]=s.syncFunc,e.uniformGroups[t.id]},t.prototype.getSignature=function(t,e,r){var n=t.uniforms,i=[r+"-"];for(var o in n)i.push(o),e[o]&&i.push(e[o].type);return i.join("-")},t.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateProgram=function(t){var e=this.gl,r=t.program,n=kn(e,r);return r.glPrograms[this.renderer.CONTEXT_UID]=n,n},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.disposeShader=function(t){this.shader===t&&(this.shader=null)},t.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},t}();var Xn=function(){function t(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=E.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new mn,this.defaultState.blend=!0}return t.prototype.contextChange=function(t){this.gl=t,this.blendModes=function(t,e){return void 0===e&&(e=[]),e[E.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[E.ADD]=[t.ONE,t.ONE],e[E.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[E.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[E.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[E.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[E.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[E.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[E.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[E.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[E.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[E.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[E.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[E.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[E.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[E.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[E.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[E.NONE]=[0,0],e[E.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[E.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[E.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[E.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[E.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[E.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[E.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[E.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[E.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[E.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[E.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[E.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()},t.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,r=0;e;)1&e&&this.map[r].call(this,!!(t.data&1<<r)),e>>=1,r++;this.stateId=t.data}for(r=0;r<this.checks.length;r++)this.checks[r](this,t)},t.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setDepthMask=function(t){this.gl.depthMask(t)},t.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},t.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],r=this.gl;2===e.length?r.blendFunc(e[0],e[1]):r.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,r.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}},t.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(t,e){var r=this.checks.indexOf(t);e&&-1===r?this.checks.push(t):e||-1===r||this.checks.splice(r,1)},t.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},t.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},t.prototype.destroy=function(){this.gl=null},t}(),zn=function(){function t(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=ht.GC_MAX_IDLE,this.checkCountMax=ht.GC_MAX_CHECK_COUNT,this.mode=ht.GC_MODE}return t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==N.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,r=!1,n=0;n<e.length;n++){var i=e[n];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),e[n]=null,r=!0)}if(r){var o=0;for(n=0;n<e.length;n++)null!==e[n]&&(e[o++]=e[n]);e.length=o}},t.prototype.unload=function(t){var e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(var n=t.children.length-1;n>=0;n--)this.unload(t.children[n])},t.prototype.destroy=function(){this.renderer=null},t}();var Vn=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=P.UNSIGNED_BYTE,this.internalFormat=A.RGBA,this.samplerType=0},Hn=function(){function t(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Qe,this.hasIntegerTextures=!1}return t.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(t){var e,r,n,i,o,s,a,l,u,h,c,d,f,p,m,y,g,_,v,b,x,T,S;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?((e={})[P.UNSIGNED_BYTE]=((r={})[A.RGBA]=t.RGBA8,r[A.RGB]=t.RGB8,r[A.RG]=t.RG8,r[A.RED]=t.R8,r[A.RGBA_INTEGER]=t.RGBA8UI,r[A.RGB_INTEGER]=t.RGB8UI,r[A.RG_INTEGER]=t.RG8UI,r[A.RED_INTEGER]=t.R8UI,r[A.ALPHA]=t.ALPHA,r[A.LUMINANCE]=t.LUMINANCE,r[A.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,r),e[P.BYTE]=((n={})[A.RGBA]=t.RGBA8_SNORM,n[A.RGB]=t.RGB8_SNORM,n[A.RG]=t.RG8_SNORM,n[A.RED]=t.R8_SNORM,n[A.RGBA_INTEGER]=t.RGBA8I,n[A.RGB_INTEGER]=t.RGB8I,n[A.RG_INTEGER]=t.RG8I,n[A.RED_INTEGER]=t.R8I,n),e[P.UNSIGNED_SHORT]=((i={})[A.RGBA_INTEGER]=t.RGBA16UI,i[A.RGB_INTEGER]=t.RGB16UI,i[A.RG_INTEGER]=t.RG16UI,i[A.RED_INTEGER]=t.R16UI,i[A.DEPTH_COMPONENT]=t.DEPTH_COMPONENT16,i),e[P.SHORT]=((o={})[A.RGBA_INTEGER]=t.RGBA16I,o[A.RGB_INTEGER]=t.RGB16I,o[A.RG_INTEGER]=t.RG16I,o[A.RED_INTEGER]=t.R16I,o),e[P.UNSIGNED_INT]=((s={})[A.RGBA_INTEGER]=t.RGBA32UI,s[A.RGB_INTEGER]=t.RGB32UI,s[A.RG_INTEGER]=t.RG32UI,s[A.RED_INTEGER]=t.R32UI,s[A.DEPTH_COMPONENT]=t.DEPTH_COMPONENT24,s),e[P.INT]=((a={})[A.RGBA_INTEGER]=t.RGBA32I,a[A.RGB_INTEGER]=t.RGB32I,a[A.RG_INTEGER]=t.RG32I,a[A.RED_INTEGER]=t.R32I,a),e[P.FLOAT]=((l={})[A.RGBA]=t.RGBA32F,l[A.RGB]=t.RGB32F,l[A.RG]=t.RG32F,l[A.RED]=t.R32F,l[A.DEPTH_COMPONENT]=t.DEPTH_COMPONENT32F,l),e[P.HALF_FLOAT]=((u={})[A.RGBA]=t.RGBA16F,u[A.RGB]=t.RGB16F,u[A.RG]=t.RG16F,u[A.RED]=t.R16F,u),e[P.UNSIGNED_SHORT_5_6_5]=((h={})[A.RGB]=t.RGB565,h),e[P.UNSIGNED_SHORT_4_4_4_4]=((c={})[A.RGBA]=t.RGBA4,c),e[P.UNSIGNED_SHORT_5_5_5_1]=((d={})[A.RGBA]=t.RGB5_A1,d),e[P.UNSIGNED_INT_2_10_10_10_REV]=((f={})[A.RGBA]=t.RGB10_A2,f[A.RGBA_INTEGER]=t.RGB10_A2UI,f),e[P.UNSIGNED_INT_10F_11F_11F_REV]=((p={})[A.RGB]=t.R11F_G11F_B10F,p),e[P.UNSIGNED_INT_5_9_9_9_REV]=((m={})[A.RGB]=t.RGB9_E5,m),e[P.UNSIGNED_INT_24_8]=((y={})[A.DEPTH_STENCIL]=t.DEPTH24_STENCIL8,y),e[P.FLOAT_32_UNSIGNED_INT_24_8_REV]=((g={})[A.DEPTH_STENCIL]=t.DEPTH32F_STENCIL8,g),S=e):((_={})[P.UNSIGNED_BYTE]=((v={})[A.RGBA]=t.RGBA,v[A.RGB]=t.RGB,v[A.ALPHA]=t.ALPHA,v[A.LUMINANCE]=t.LUMINANCE,v[A.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,v),_[P.UNSIGNED_SHORT_5_6_5]=((b={})[A.RGB]=t.RGB,b),_[P.UNSIGNED_SHORT_4_4_4_4]=((x={})[A.RGBA]=t.RGBA,x),_[P.UNSIGNED_SHORT_5_5_5_1]=((T={})[A.RGBA]=t.RGBA,T),S=_),S}(t);var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var r=0;r<e;r++)this.boundTextures[r]=null;this.emptyTextures={};var n=new Vn(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new Vn(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(r=0;r<this.boundTextures.length;r++)this.bind(null,r)},t.prototype.bind=function(t,e){void 0===e&&(e=0);var r=this.gl;if((t=null===t||void 0===t?void 0:t.castToBaseTexture())&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId?(this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),this.updateTexture(t)):n.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,r.activeTexture(r.TEXTURE0+e)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[e]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},t.prototype.unbind=function(t){var e=this.gl,r=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var n=0;n<r.length;n++)r[n]===this.unknownTexture&&this.bind(null,n)}for(n=0;n<r.length;n++)r[n]===t&&(this.currentLocation!==n&&(e.activeTexture(e.TEXTURE0+n),this.currentLocation=n),e.bindTexture(t.target,this.emptyTextures[t.target].texture),r[n]=null)},t.prototype.ensureSamplerType=function(t){var e=this,r=e.boundTextures,n=e.hasIntegerTextures,i=e.CONTEXT_UID;if(n)for(var o=t-1;o>=0;--o){var s=r[o];if(s)s._glTextures[i].samplerType!==O.FLOAT&&this.renderer.texture.unbind(s)}},t.prototype.initTexture=function(t){var e=new Vn(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},t.prototype.initTextureType=function(t,e){var r,n;e.internalFormat=null!==(n=null===(r=this.internalFormats[t.type])||void 0===r?void 0:r[t.format])&&void 0!==n?n:t.format,2===this.webGLVersion&&t.type===P.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},t.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var r=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(r,t,e))e.samplerType!==O.FLOAT&&(this.hasIntegerTextures=!0);else{var n=t.realWidth,i=t.realHeight,o=r.gl;(e.width!==n||e.height!==i||e.dirtyId<0)&&(e.width=n,e.height=i,o.texImage2D(t.target,0,e.internalFormat,n,i,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},t.prototype.destroyTexture=function(t,e){var r=this.gl;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),r.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var n=this.managedTextures.indexOf(t);-1!==n&&jt(this.managedTextures,n,1)}},t.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==D.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=C.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},t.prototype.setStyle=function(t,e){var r=this.gl;if(e.mipmap&&t.mipmap!==D.ON_MANUAL&&r.generateMipmap(t.target),r.texParameteri(t.target,r.TEXTURE_WRAP_S,e.wrapMode),r.texParameteri(t.target,r.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===R.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);var n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===R.LINEAR){var i=Math.min(t.anisotropicLevel,r.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,i)}}else r.texParameteri(t.target,r.TEXTURE_MIN_FILTER,t.scaleMode===R.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(t.target,r.TEXTURE_MAG_FILTER,t.scaleMode===R.LINEAR?r.LINEAR:r.NEAREST)},t.prototype.destroy=function(){this.renderer=null},t}(),Yn={__proto__:null,FilterSystem:Cr,BatchSystem:Fr,ContextSystem:Nr,FramebufferSystem:Ur,GeometrySystem:jr,MaskSystem:bn,ScissorSystem:wn,StencilSystem:En,ProjectionSystem:In,RenderTextureSystem:Pn,ShaderSystem:jn,StateSystem:Xn,TextureGCSystem:zn,TextureSystem:Hn},Wn=new ge,qn=function(t){function e(e,r){void 0===e&&(e=S.UNKNOWN);var n=t.call(this)||this;return r=Object.assign({},ht.RENDER_OPTIONS,r),n.options=r,n.type=e,n.screen=new ce(0,0,r.width,r.height),n.view=r.view||ht.ADAPTER.createCanvas(),n.resolution=r.resolution||ht.RESOLUTION,n.useContextAlpha=r.useContextAlpha,n.autoDensity=!!r.autoDensity,n.preserveDrawingBuffer=r.preserveDrawingBuffer,n.clearBeforeRender=r.clearBeforeRender,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,1],n._backgroundColorString="#000000",n.backgroundColor=r.backgroundColor||n._backgroundColor,n.backgroundAlpha=r.backgroundAlpha,void 0!==r.transparent&&(Yt("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),n.useContextAlpha=r.transparent,n.backgroundAlpha=r.transparent?0:1),n._lastObjectRendered=null,n.plugins={},n}return Ye(e,t),e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e){this.view.width=Math.round(t*this.resolution),this.view.height=Math.round(e*this.resolution);var r=this.view.width/this.resolution,n=this.view.height/this.resolution;this.screen.width=r,this.screen.height=n,this.autoDensity&&(this.view.style.width=r+"px",this.view.style.height=n+"px"),this.emit("resize",r,n)},e.prototype.generateTexture=function(t,e,r,n){void 0===e&&(e={}),"number"===typeof e&&(Yt("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),e={scaleMode:e,resolution:r,region:n});var i=e.region,o=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}(e,["region"]);0===(n=i||t.getLocalBounds(null,!0)).width&&(n.width=1),0===n.height&&(n.height=1);var s=mr.create(We({width:n.width,height:n.height},o));return Wn.tx=-n.x,Wn.ty=-n.y,this.render(t,{renderTexture:s,clear:!1,transform:Wn,skipUpdateTransform:!!t.parent}),s},e.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var r=this;r.plugins=null,r.type=S.UNKNOWN,r.view=null,r.screen=null,r._tempDisplayObjectParent=null,r.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=It(t),Et(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),e}(ct),$n=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},Kn=function(){function t(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return t.prototype.destroy=function(){this.renderer=null},t.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},t.prototype.bind=function(t){var e=this.gl,r=this.CONTEXT_UID,n=t._glBuffers[r]||this.createGLBuffer(t);e.bindBuffer(t.type,n.buffer)},t.prototype.bindBufferBase=function(t,e){var r=this.gl,n=this.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var i=t._glBuffers[n]||this.createGLBuffer(t);this.boundBufferBases[e]=t,r.bindBufferBase(r.UNIFORM_BUFFER,e,i.buffer)}},t.prototype.bindBufferRange=function(t,e,r){var n=this.gl,i=this.CONTEXT_UID;r=r||0;var o=t._glBuffers[i]||this.createGLBuffer(t);n.bindBufferRange(n.UNIFORM_BUFFER,e||0,o.buffer,256*r,256)},t.prototype.update=function(t){var e=this.gl,r=this.CONTEXT_UID,n=t._glBuffers[r];if(t._updateID!==n.updateID)if(n.updateID=t._updateID,e.bindBuffer(t.type,n.buffer),n.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{var i=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;n.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,i)}},t.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var r=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),r&&(e||n.deleteBuffer(r.buffer),delete t._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),r=0;r<e.length;r++)this.dispose(this.managedBuffers[e[r]],t)},t.prototype.createGLBuffer=function(t){var e=this.CONTEXT_UID,r=this.gl;return t._glBuffers[e]=new $n(r.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]},t}(),Qn=function(t){function e(r){var n=t.call(this,S.WEBGL,r)||this;return r=n.options,n.gl=null,n.CONTEXT_UID=0,n.runners={destroy:new Ue("destroy"),contextChange:new Ue("contextChange"),reset:new Ue("reset"),update:new Ue("update"),postrender:new Ue("postrender"),prerender:new Ue("prerender"),resize:new Ue("resize")},n.runners.contextChange.add(n),n.globalUniforms=new Mr({projectionMatrix:new ge},!0),n.addSystem(bn,"mask").addSystem(Nr,"context").addSystem(Xn,"state").addSystem(jn,"shader").addSystem(Hn,"texture").addSystem(Kn,"buffer").addSystem(jr,"geometry").addSystem(Ur,"framebuffer").addSystem(wn,"scissor").addSystem(En,"stencil").addSystem(In,"projection").addSystem(zn,"textureGC").addSystem(Cr,"filter").addSystem(Pn,"renderTexture").addSystem(Fr,"batch"),n.initPlugins(e.__plugins),n.multisample=void 0,r.context?n.context.initFromContext(r.context):n.context.initFromOptions({alpha:!!n.useContextAlpha,antialias:r.antialias,premultipliedAlpha:n.useContextAlpha&&"notMultiplied"!==n.useContextAlpha,stencil:!0,preserveDrawingBuffer:r.preserveDrawingBuffer,powerPreference:n.options.powerPreference}),n.renderingToScreen=!0,Tt(2===n.context.webGLVersion?"WebGL 2":"WebGL 1"),n.resize(n.options.width,n.options.height),n}return Ye(e,t),e.create=function(t){if(St())return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var t,e=this.gl;if(1===this.context.webGLVersion){var r=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,r)}else{r=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,r)}t>=G.HIGH?this.multisample=G.HIGH:t>=G.MEDIUM?this.multisample=G.MEDIUM:t>=G.LOW?this.multisample=G.LOW:this.multisample=G.NONE},e.prototype.addSystem=function(t,e){var r=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var n in this[e]=r,this.runners)this.runners[n].add(r);return this},e.prototype.render=function(t,e){var r,n,i,o;if(e&&(e instanceof mr?(Yt("6.0.0","Renderer#render arguments changed, use options instead."),r=e,n=arguments[2],i=arguments[3],o=arguments[4]):(r=e.renderTexture,n=e.clear,i=e.transform,o=e.skipUpdateTransform)),this.renderingToScreen=!r,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=i,!this.context.isLost){if(r||(this._lastObjectRendered=t),!o){var s=t.enableTempParent();t.updateTransform(),t.disableTempParent(s)}this.renderTexture.bind(r),this.batch.currentRenderer.start(),(void 0!==n?n:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),r&&r.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(e,r,n,i){void 0===r&&(r={});var o=t.prototype.generateTexture.call(this,e,r,n,i);return this.framebuffer.blit(),o},e.prototype.resize=function(e,r){t.prototype.resize.call(this,e,r),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(e){for(var r in this.runners.destroy.emit(),this.runners)this.runners[r].destroy();t.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return Yt("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(t,e){Yt("6.5.0","Renderer.registerPlugin() has been deprecated, please use extensions.add() instead."),ke.add({name:t,type:Fe.RendererPlugin,ref:e})},e.__plugins={},e}(qn);function Zn(t){return Qn.create(t)}ke.handleByMap(Fe.RendererPlugin,Qn.__plugins);var Jn="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",ti="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",ei=function(){function t(t){Yt("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=t}return t.prototype.destroy=function(){this.renderer=null},t}(),ri=function(){this.texArray=null,this.blend=0,this.type=I.TRIANGLES,this.start=0,this.size=0,this.data=null},ni=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},t}(),ii=function(){function t(t){"number"===typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(t){return this[t+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},t}(),oi=function(t){function e(e){var r=t.call(this,e)||this;return r.shaderGenerator=null,r.geometryClass=null,r.vertexSize=null,r.state=mn.for2d(),r.size=4*ht.SPRITE_BATCH_SIZE,r._vertexCount=0,r._indexCount=0,r._bufferedElements=[],r._bufferedTextures=[],r._bufferSize=0,r._shader=null,r._packedGeometries=[],r._packedGeometryPoolSize=2,r._flushId=0,r._aBuffers={},r._iBuffers={},r.MAX_TEXTURES=1,r.renderer.on("prerender",r.onPrerender,r),e.runners.contextChange.add(r),r._dcIndex=0,r._aIndex=0,r._iIndex=0,r._attributeBuffer=null,r._indexBuffer=null,r._tempBoundTextures=[],r}return Ye(e,t),e.prototype.contextChange=function(){var t=this.renderer.gl;ht.PREFER_ENV===T.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),ht.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=hn(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,r=e._textureArrayPool,n=this.size/4,i=Math.floor(n/this.MAX_TEXTURES)+1;t.length<n;)t.push(new ri);for(;r.length<i;)r.push(new ni);for(var o=0;o<this.MAX_TEXTURES;o++)this._tempBoundTextures[o]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,r=this.MAX_TEXTURES,n=e._textureArrayPool,i=this.renderer.batch,o=this._tempBoundTextures,s=this.renderer.textureGC.count,a=++Qe._globalBatch,l=0,u=n[0],h=0;i.copyBoundTextures(o,r);for(var c=0;c<this._bufferSize;++c){var d=t[c];t[c]=null,d._batchEnabled!==a&&(u.count>=r&&(i.boundArray(u,o,a,r),this.buildDrawCalls(u,h,c),h=c,u=n[++l],++a),d._batchEnabled=a,d.touched=s,u.elements[u.count++]=d)}u.count>0&&(i.boundArray(u,o,a,r),this.buildDrawCalls(u,h,this._bufferSize),++l,++a);for(c=0;c<o.length;c++)o[c]=null;Qe._globalBatch=a},e.prototype.buildDrawCalls=function(t,r,n){var i=this,o=i._bufferedElements,s=i._attributeBuffer,a=i._indexBuffer,l=i.vertexSize,u=e._drawCallPool,h=this._dcIndex,c=this._aIndex,d=this._iIndex,f=u[h];f.start=this._iIndex,f.texArray=t;for(var p=r;p<n;++p){var m=o[p],y=m._texture.baseTexture,g=Pt[y.alphaMode?1:0][m.blendMode];o[p]=null,r<p&&f.blend!==g&&(f.size=d-f.start,r=p,(f=u[++h]).texArray=t,f.start=d),this.packInterleavedGeometry(m,s,a,c,d),c+=m.vertexData.length/2*l,d+=m.indices.length,f.blend=g}r<n&&(f.size=d-f.start,++h),this._dcIndex=h,this._aIndex=c,this._iIndex=d},e.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this,e=t._packedGeometries,r=t._attributeBuffer,n=t._indexBuffer;ht.CAN_UPLOAD_SAME_BUFFER?(e[this._flushId]._buffer.update(r.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(r.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,r=this.renderer,n=r.gl,i=r.state,o=e._drawCallPool,s=null,a=0;a<t;a++){var l=o[a],u=l.texArray,h=l.type,c=l.size,d=l.start,f=l.blend;s!==u&&(s=u,this.bindAndClearTexArray(u)),this.state.blendMode=f,i.set(this.state),n.drawElements(h,c,n.UNSIGNED_SHORT,2*d)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),ht.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var e=kt(Math.ceil(t/8)),r=Gt(e),n=8*e;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);var i=this._aBuffers[n];return i||(this._aBuffers[n]=i=new ii(n*this.vertexSize*4)),i},e.prototype.getIndexBuffer=function(t){var e=kt(Math.ceil(t/12)),r=Gt(e),n=12*e;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);var i=this._iBuffers[r];return i||(this._iBuffers[r]=i=new Uint16Array(n)),i},e.prototype.packInterleavedGeometry=function(t,e,r,n,i){for(var o=e.uint32View,s=e.float32View,a=n/this.vertexSize,l=t.uvs,u=t.indices,h=t.vertexData,c=t._texture.baseTexture._batchLocation,d=Math.min(t.worldAlpha,1),f=d<1&&t._texture.baseTexture.alphaMode?Ct(t._tintRGB,d):t._tintRGB+(255*d<<24),p=0;p<h.length;p+=2)s[n++]=h[p],s[n++]=h[p+1],s[n++]=l[p],s[n++]=l[p+1],o[n++]=f,s[n++]=c;for(p=0;p<u.length;p++)r[i++]=a+u[p]},e._drawCallPool=[],e._textureArrayPool=[],e}(Dr),si=function(){function t(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),r=0;r<t;r++)e[r]=r;this.defaultGroupCache[t]=Mr.from({uSamplers:e},!0);var n=this.fragTemplate;n=(n=n.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new fn(this.vertexSrc,n)}var i={tint:new Float32Array([1,1,1,1]),translationMatrix:new ge,default:this.defaultGroupCache[t]};return new pn(this.programCache[t],i)},t.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)r>0&&(e+="\nelse "),r<t-1&&(e+="if(vTextureId < "+r+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"},t}(),ai=function(t){function e(e){void 0===e&&(e=!1);var r=t.call(this)||this;return r._buffer=new vr(null,e,!1),r._indexBuffer=new vr(null,e,!0),r.addAttribute("aVertexPosition",r._buffer,2,!1,P.FLOAT).addAttribute("aTextureCoord",r._buffer,2,!1,P.FLOAT).addAttribute("aColor",r._buffer,4,!0,P.UNSIGNED_BYTE).addAttribute("aTextureId",r._buffer,1,!0,P.FLOAT).addIndex(r._indexBuffer),r}return Ye(e,t),e}(wr),li="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",ui="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",hi=function(){function t(){}return t.create=function(t){var e=Object.assign({vertex:li,fragment:ui,geometryClass:ai,vertexSize:6},t),r=e.vertex,n=e.fragment,i=e.vertexSize,o=e.geometryClass;return function(t){function e(e){var s=t.call(this,e)||this;return s.shaderGenerator=new si(r,n),s.geometryClass=o,s.vertexSize=i,s}return Ye(e,t),e}(oi)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return li},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return ui},enumerable:!1,configurable:!0}),t}(),ci=hi.create();Object.assign(ci,{extension:{name:"batch",type:Fe.RendererPlugin}});var di={},fi=function(t){Object.defineProperty(di,t,{get:function(){return Yt("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),ar[t]}})};for(var pi in ar)fi(pi);var mi={},yi=function(t){Object.defineProperty(mi,t,{get:function(){return Yt("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),Yn[t]}})};for(var pi in Yn)yi(pi);var gi="6.5.10",_i={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Oe.mixin(_i);var vi=100,bi=function(){function t(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(ut.tablet||ut.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width=vi+"px",e.style.height=vi+"px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2..toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",(function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()})),document.body.appendChild(e),this._hookDiv=e},t.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},t.prototype.activate=function(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null===(t=this.renderer.view.parentNode)||void 0===t||t.appendChild(this.div))},t.prototype.deactivate=function(){var t;this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null===(t=this.div.parentNode)||void 0===t||t.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);var e=t.children;if(e)for(var r=0;r<e.length;r++)this.updateAccessibleObjects(e[r])}},t.prototype.update=function(){var t=performance.now();if(!(ut.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),r=e.left,n=e.top,i=e.width,o=e.height,s=this.renderer,a=s.width,l=s.height,u=s.resolution,h=i/a*u,c=o/l*u,d=this.div;d.style.left=r+"px",d.style.top=n+"px",d.style.width=a+"px",d.style.height=l+"px";for(var f=0;f<this.children.length;f++){var p=this.children[f];if(p.renderId!==this.renderId)p._accessibleActive=!1,jt(this.children,f,1),this.div.removeChild(p._accessibleDiv),this.pool.push(p._accessibleDiv),p._accessibleDiv=null,f--;else{d=p._accessibleDiv;var m=p.hitArea,y=p.worldTransform;p.hitArea?(d.style.left=(y.tx+m.x*y.a)*h+"px",d.style.top=(y.ty+m.y*y.d)*c+"px",d.style.width=m.width*y.a*h+"px",d.style.height=m.height*y.d*c+"px"):(m=p.getBounds(),this.capHitArea(m),d.style.left=m.x*h+"px",d.style.top=m.y*c+"px",d.style.width=m.width*h+"px",d.style.height=m.height*c+"px",d.title!==p.accessibleTitle&&null!==p.accessibleTitle&&(d.title=p.accessibleTitle),d.getAttribute("aria-label")!==p.accessibleHint&&null!==p.accessibleHint&&d.setAttribute("aria-label",p.accessibleHint)),p.accessibleTitle===d.title&&p.tabIndex===d.tabIndex||(d.title=p.accessibleTitle,d.tabIndex=p.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}},t.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);var e=this.renderer,r=e.width,n=e.height;t.x+t.width>r&&(t.width=r-t.x),t.y+t.height>n&&(t.height=n-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width=vi+"px",e.style.height=vi+"px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2..toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction,r=t.target.displayObject,n=e.eventData;e.dispatchEvent(r,"click",n),e.dispatchEvent(r,"pointertap",n),e.dispatchEvent(r,"tap",n)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction,r=t.target.displayObject,n=e.eventData;e.dispatchEvent(r,"mouseover",n)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction,r=t.target.displayObject,n=e.eventData;e.dispatchEvent(r,"mouseout",n)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t.extension={name:"accessibility",type:[Fe.RendererPlugin,Fe.CanvasRendererPlugin]},t}(),xi=function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new ue,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(t,e,r){return t.worldTransform.applyInverse(r||this.global,e)},t.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t}(),Ti=function(t,e){return Ti=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},Ti(t,e)};var Si=function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t}(),wi=function(){function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return 0!==(this._flags&t.FLAGS.OVER)},set:function(e){this._doSet(t.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return 0!==(this._flags&t.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(t.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return 0!==(this._flags&t.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(t.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),t}(),Ei=function(){function t(){this._tempPoint=new ue}return t.prototype.recursiveFindHit=function(t,e,r,n,i){var o;if(!e||!e.visible)return!1;var s=t.data.global,a=!1,l=i=e.interactive||i,u=!0;if(e.hitArea)n&&(e.worldTransform.applyInverse(s,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?a=!0:(n=!1,u=!1)),l=!1;else if(e._mask&&n){var h=e._mask.isMaskData?e._mask.maskObject:e._mask;h&&!(null===(o=h.containsPoint)||void 0===o?void 0:o.call(h,s))&&(n=!1)}if(u&&e.interactiveChildren&&e.children)for(var c=e.children,d=c.length-1;d>=0;d--){var f=c[d],p=this.recursiveFindHit(t,f,r,n,l);if(p){if(!f.parent)continue;l=!1,p&&(t.target&&(n=!1),a=!0)}}return i&&(n&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(s)&&(a=!0),e.interactive&&(a&&!t.target&&(t.target=e),r&&r(t,e,!!a))),a},t.prototype.findHit=function(t,e,r,n){this.recursiveFindHit(t,e,r,n,!1)},t}(),Ii={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};Oe.mixin(Ii);var Ai={target:null,data:{global:null}},Mi=function(t){function e(e,r){var n=t.call(this)||this;return r=r||{},n.renderer=e,n.autoPreventDefault=void 0===r.autoPreventDefault||r.autoPreventDefault,n.interactionFrequency=r.interactionFrequency||10,n.mouse=new xi,n.mouse.identifier=1,n.mouse.global.set(-999999),n.activeInteractionData={},n.activeInteractionData[1]=n.mouse,n.interactionDataPool=[],n.eventData=new Si,n.interactionDOMElement=null,n.moveWhenInside=!1,n.eventsAdded=!1,n.tickerAdded=!1,n.mouseOverRenderer=!("PointerEvent"in globalThis),n.supportsTouchEvents="ontouchstart"in globalThis,n.supportsPointerEvents=!!globalThis.PointerEvent,n.onPointerUp=n.onPointerUp.bind(n),n.processPointerUp=n.processPointerUp.bind(n),n.onPointerCancel=n.onPointerCancel.bind(n),n.processPointerCancel=n.processPointerCancel.bind(n),n.onPointerDown=n.onPointerDown.bind(n),n.processPointerDown=n.processPointerDown.bind(n),n.onPointerMove=n.onPointerMove.bind(n),n.processPointerMove=n.processPointerMove.bind(n),n.onPointerOut=n.onPointerOut.bind(n),n.processPointerOverOut=n.processPointerOverOut.bind(n),n.onPointerOver=n.onPointerOver.bind(n),n.cursorStyles={default:"inherit",pointer:"pointer"},n.currentCursorMode=null,n.cursor=null,n.resolution=1,n.delayedEvents=[],n.search=new Ei,n._tempDisplayObject=new Re,n._eventListenerOptions={capture:!0,passive:!1},n._useSystemTicker=void 0===r.useSystemTicker||r.useSystemTicker,n.setTargetElement(n.renderer.view,n.renderer.resolution),n}return function(t,e){function r(){this.constructor=t}Ti(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,e){return Ai.target=null,Ai.data.global=t,e||(e=this.lastObjectRendered),this.processInteractive(Ai,e,null,!0),Ai.target},e.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(je.system.add(this.tickerUpdate,this,Ne.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(je.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),globalThis.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),globalThis.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&"touch"!==e.pointerType){var r=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(r,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){t=t||"default";var e=!0;if(globalThis.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(e=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var r=this.cursorStyles[t];if(r)switch(typeof r){case"string":e&&(this.interactionDOMElement.style.cursor=r);break;case"function":r(t);break;case"object":e&&Object.assign(this.interactionDOMElement.style,r)}else e&&"string"===typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,r){r.stopPropagationHint&&t!==r.stopsPropagatingAt||(r.currentTarget=t,r.type=e,t.emit(e,r),t[e]&&t[e](r))},e.prototype.delayDispatchEvent=function(t,e,r){this.delayedEvents.push({displayObject:t,eventString:e,eventData:r})},e.prototype.mapPositionToPoint=function(t,e,r){var n;n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var i=1/this.resolution;t.x=(e-n.left)*(this.interactionDOMElement.width/n.width)*i,t.y=(r-n.top)*(this.interactionDOMElement.height/n.height)*i},e.prototype.processInteractive=function(t,e,r,n){var i=this.search.findHit(t,e,r,n),o=this.delayedEvents;if(!o.length)return i;t.stopPropagationHint=!1;var s=o.length;this.delayedEvents=[];for(var a=0;a<s;a++){var l=o[a],u=l.displayObject,h=l.eventString,c=l.eventData;c.stopsPropagatingAt===u&&(c.stopPropagationHint=!0),this.dispatchEvent(u,h,c)}return i},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);if(this.autoPreventDefault&&e[0].isNormalized)(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var r=e.length,n=0;n<r;n++){var i=e[n],o=this.getInteractionDataForPointerId(i),s=this.configureInteractionEventForDOMEvent(this.eventData,i,o);if(s.data.originalEvent=t,this.processInteractive(s,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===i.pointerType)this.emit("touchstart",s);else if("mouse"===i.pointerType||"pen"===i.pointerType){var a=2===i.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,r){var n=t.data,i=t.data.identifier;if(r)if(e.trackedPointers[i]||(e.trackedPointers[i]=new wi(i)),this.dispatchEvent(e,"pointerdown",t),"touch"===n.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===n.pointerType||"pen"===n.pointerType){var o=2===n.button;o?e.trackedPointers[i].rightDown=!0:e.trackedPointers[i].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,r){var n=this.normalizeToPointerData(t),i=n.length,o=t.target;t.composedPath&&t.composedPath().length>0&&(o=t.composedPath()[0]);for(var s=o!==this.interactionDOMElement?"outside":"",a=0;a<i;a++){var l=n[a],u=this.getInteractionDataForPointerId(l),h=this.configureInteractionEventForDOMEvent(this.eventData,l,u);if(h.data.originalEvent=t,this.processInteractive(h,this.lastObjectRendered,r,e||!s),this.emit(e?"pointercancel":"pointerup"+s,h),"mouse"===l.pointerType||"pen"===l.pointerType){var c=2===l.button;this.emit(c?"rightup"+s:"mouseup"+s,h)}else"touch"===l.pointerType&&(this.emit(e?"touchcancel":"touchend"+s,h),this.releaseInteractionDataForPointerId(l.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var r=t.data,n=t.data.identifier;void 0!==e.trackedPointers[n]&&(delete e.trackedPointers[n],this.dispatchEvent(e,"pointercancel",t),"touch"===r.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,r){var n=t.data,i=t.data.identifier,o=e.trackedPointers[i],s="touch"===n.pointerType,a="mouse"===n.pointerType||"pen"===n.pointerType,l=!1;if(a){var u=2===n.button,h=wi.FLAGS,c=u?h.RIGHT_DOWN:h.LEFT_DOWN,d=void 0!==o&&o.flags&c;r?(this.dispatchEvent(e,u?"rightup":"mouseup",t),d&&(this.dispatchEvent(e,u?"rightclick":"click",t),l=!0)):d&&this.dispatchEvent(e,u?"rightupoutside":"mouseupoutside",t),o&&(u?o.rightDown=!1:o.leftDown=!1)}r?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),o&&(a&&!l||this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[i]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this._didMove=!0,this.cursor=null);for(var r=e.length,n=0;n<r;n++){var i=e[n],o=this.getInteractionDataForPointerId(i),s=this.configureInteractionEventForDOMEvent(this.eventData,i,o);s.data.originalEvent=t,this.processInteractive(s,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",s),"touch"===i.pointerType&&this.emit("touchmove",s),"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,r){var n=t.data,i="touch"===n.pointerType,o="mouse"===n.pointerType||"pen"===n.pointerType;o&&this.processPointerOverOut(t,e,r),this.moveWhenInside&&!r||(this.dispatchEvent(e,"pointermove",t),i&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var r=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,r);n.data.originalEvent=e,this.processInteractive(n,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",n),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",n):this.releaseInteractionDataForPointerId(r.identifier)}},e.prototype.processPointerOverOut=function(t,e,r){var n=t.data,i=t.data.identifier,o="mouse"===n.pointerType||"pen"===n.pointerType,s=e.trackedPointers[i];r&&!s&&(s=e.trackedPointers[i]=new wi(i)),void 0!==s&&(r&&this.mouseOverRenderer?(s.over||(s.over=!0,this.delayDispatchEvent(e,"pointerover",t),o&&this.delayDispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),s.none&&delete e.trackedPointers[i]))},e.prototype.onPointerOver=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0],r=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,r);n.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",n),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",n)}},e.prototype.getInteractionDataForPointerId=function(t){var e,r=t.pointerId;return 1===r||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[r]?e=this.activeInteractionData[r]:((e=this.interactionDataPool.pop()||new xi).identifier=r,this.activeInteractionData[r]=e),e.copyEvent(t),e},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,r){return t.data=r,this.mapPositionToPoint(r.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=r.global.x,e.globalY=r.global.y),r.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var r=0,n=t.changedTouches.length;r<n;r++){var i=t.changedTouches[r];"undefined"===typeof i.button&&(i.button=t.touches.length?1:0),"undefined"===typeof i.buttons&&(i.buttons=t.touches.length?1:0),"undefined"===typeof i.isPrimary&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),"undefined"===typeof i.width&&(i.width=i.radiusX||1),"undefined"===typeof i.height&&(i.height=i.radiusY||1),"undefined"===typeof i.tiltX&&(i.tiltX=0),"undefined"===typeof i.tiltY&&(i.tiltY=0),"undefined"===typeof i.pointerType&&(i.pointerType="touch"),"undefined"===typeof i.pointerId&&(i.pointerId=i.identifier||0),"undefined"===typeof i.pressure&&(i.pressure=i.force||.5),"undefined"===typeof i.twist&&(i.twist=0),"undefined"===typeof i.tangentialPressure&&(i.tangentialPressure=0),"undefined"===typeof i.layerX&&(i.layerX=i.offsetX=i.clientX),"undefined"===typeof i.layerY&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,e.push(i)}else if(globalThis.MouseEvent&&(!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof globalThis.PointerEvent))e.push(t);else{var o=t;"undefined"===typeof o.isPrimary&&(o.isPrimary=!0),"undefined"===typeof o.width&&(o.width=1),"undefined"===typeof o.height&&(o.height=1),"undefined"===typeof o.tiltX&&(o.tiltX=0),"undefined"===typeof o.tiltY&&(o.tiltY=0),"undefined"===typeof o.pointerType&&(o.pointerType="mouse"),"undefined"===typeof o.pointerId&&(o.pointerId=1),"undefined"===typeof o.pressure&&(o.pressure=.5),"undefined"===typeof o.twist&&(o.twist=0),"undefined"===typeof o.tangentialPressure&&(o.tangentialPressure=0),o.isNormalized=!0,e.push(o)}return e},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e.extension={name:"interaction",type:[Fe.RendererPlugin,Fe.CanvasRendererPlugin]},e}(ct),Pi=new ce,Oi=function(){function t(t){this.renderer=t}return t.prototype.image=function(t,e,r){var n=new Image;return n.src=this.base64(t,e,r),n},t.prototype.base64=function(t,e,r){return this.canvas(t).toDataURL(e,r)},t.prototype.canvas=function(e,r){var n=this._rawPixels(e,r),i=n.pixels,o=n.width,s=n.height,a=n.flipY,l=new Zt(o,s,1),u=l.context.getImageData(0,0,o,s);if(t.arrayPostDivide(i,u.data),l.context.putImageData(u,0,0),a){var h=new Zt(l.width,l.height,1);h.context.scale(1,-1),h.context.drawImage(l.canvas,0,-s),l.destroy(),l=h}return l.canvas},t.prototype.pixels=function(e,r){var n=this._rawPixels(e,r).pixels;return t.arrayPostDivide(n,n),n},t.prototype._rawPixels=function(t,e){var r,n,i=this.renderer,o=!1,s=!1;if(t)if(t instanceof mr)n=t;else{var a=i.context.webGLVersion>=2?i.multisample:G.NONE;if(n=this.renderer.generateTexture(t,{multisample:a}),a!==G.NONE){var l=mr.create({width:n.width,height:n.height});i.framebuffer.bind(n.framebuffer),i.framebuffer.blit(l.framebuffer),i.framebuffer.bind(null),n.destroy(!0),n=l}s=!0}n?(r=n.baseTexture.resolution,e=null!==e&&void 0!==e?e:n.frame,o=!1,i.renderTexture.bind(n)):(r=i.resolution,e||((e=Pi).width=i.width,e.height=i.height),o=!0,i.renderTexture.bind(null));var u=Math.round(e.width*r),h=Math.round(e.height*r),c=new Uint8Array(4*u*h),d=i.gl;return d.readPixels(Math.round(e.x*r),Math.round(e.y*r),u,h,d.RGBA,d.UNSIGNED_BYTE,c),s&&n.destroy(!0),{pixels:c,width:u,height:h,flipY:o}},t.prototype.destroy=function(){this.renderer=null},t.arrayPostDivide=function(t,e){for(var r=0;r<t.length;r+=4){var n=e[r+3]=t[r+3];0!==n?(e[r]=Math.round(Math.min(255*t[r]/n,255)),e[r+1]=Math.round(Math.min(255*t[r+1]/n,255)),e[r+2]=Math.round(Math.min(255*t[r+2]/n,255))):(e[r]=t[r],e[r+1]=t[r+1],e[r+2]=t[r+2])}},t.extension={name:"extract",type:Fe.RendererPlugin},t}(),Ri=function(){function t(t,e,r){void 0===e&&(e=!1),this._fn=t,this._once=e,this._thisArg=r,this._next=this._prev=this._owner=null}return t.prototype.detach=function(){return null!==this._owner&&(this._owner.detach(this),!0)},t}();function Ci(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var Di,Fi=function(){function t(){this._head=this._tail=void 0}return t.prototype.handlers=function(t){void 0===t&&(t=!1);var e=this._head;if(t)return!!e;for(var r=[];e;)r.push(e),e=e._next;return r},t.prototype.has=function(t){if(!(t instanceof Ri))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return t._owner===this},t.prototype.dispatch=function(){for(var t=arguments,e=[],r=0;r<arguments.length;r++)e[r]=t[r];var n=this._head;if(!n)return!1;for(;n;)n._once&&this.detach(n),n._fn.apply(n._thisArg,e),n=n._next;return!0},t.prototype.add=function(t,e){if(void 0===e&&(e=null),"function"!==typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return Ci(this,new Ri(t,!1,e))},t.prototype.once=function(t,e){if(void 0===e&&(e=null),"function"!==typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return Ci(this,new Ri(t,!0,e))},t.prototype.detach=function(t){if(!(t instanceof Ri))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this},t.prototype.detachAll=function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this},t}();function Li(t,e){e=e||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=r.parser[e.strictMode?"strict":"loose"].exec(t),i={},o=14;o--;)i[r.key[o]]=n[o]||"";return i[r.q.name]={},i[r.key[12]].replace(r.q.parser,(function(t,e,n){e&&(i[r.q.name][e]=n)})),i}var Ni=null;function Bi(){}function ki(t,e,r){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=r)}function Ui(t){return t.toString().replace("object ","")}var Gi=function(){function t(e,r,n){if(this._dequeue=Bi,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,"string"!==typeof e||"string"!==typeof r)throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===r.indexOf("data:")),this.name=e,this.url=r,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===n.crossOrigin?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=Bi,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new Fi,this.onProgress=new Fi,this.onComplete=new Fi,this.onAfterMiddleware=new Fi}return t.setExtensionLoadType=function(e,r){ki(t._loadTypeMap,e,r)},t.setExtensionXhrType=function(e,r){ki(t._xhrTypeMap,e,r)},Object.defineProperty(t.prototype,"isDataUrl",{get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(e){var r=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout((function(){return e(r)}),1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"===typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:"undefined"===typeof Di&&(Di=!(!globalThis.XDomainRequest||"withCredentials"in new XMLHttpRequest)),Di&&this.crossOrigin?this._loadXdr():this._loadXhr()}},t.prototype._hasFlag=function(t){return 0!==(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&"undefined"!==typeof globalThis.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&"undefined"!==typeof globalThis.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(t,this.url[r],Array.isArray(e)?e[r]:e));else{e=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(e)?e[0]:e))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},t.prototype._loadXhr=function(){"string"!==typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;"use-credentials"===this.crossOrigin&&(e.withCredentials=!0),e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!==typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new globalThis.XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout((function(){return t.send()}),1)},t.prototype._createSource=function(t,e,r){r||(r=t+"/"+this._getExtension(e));var n=document.createElement("source");return n.src=e,n.type=r,n},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(Ui(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(Ui(t)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(Ui(t)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,r="",n="undefined"===typeof e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&"undefined"!==typeof e.responseType||(r=e.responseText),0===n&&(r.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?n=200:1223===n&&(n=204),2===(n/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=r,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(r),this.type=t.TYPE.JSON}catch(s){return void this.abort("Error trying to parse loaded json: "+s)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(globalThis.DOMParser){var i=new DOMParser;this.data=i.parseFromString(r,"text/xml")}else{var o=document.createElement("div");o.innerHTML=r,this.data=o}this.type=t.TYPE.XML}catch(a){return void this.abort("Error trying to parse loaded xml: "+a)}else this.data=e.response||r;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(globalThis.origin!==globalThis.location.origin)return"anonymous";e=e||globalThis.location,Ni||(Ni=document.createElement("a")),Ni.href=t;var r=Li(Ni.href,{strictMode:!0}),n=!r.port&&""===e.port||r.port===e.port,i=r.protocol?r.protocol+":":"";return r.host===e.hostname&&n&&i===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(t){void 0===t&&(t=this.url);var e="";if(this.isDataUrl){var r=t.indexOf("/");e=t.substring(r+1,t.indexOf(";",r))}else{var n=t.indexOf("?"),i=t.indexOf("#"),o=Math.min(n>-1?n:t.length,i>-1?i:t.length);e=(t=t.substring(0,o)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},t}();function ji(){}function Xi(t){return function(){for(var e=arguments,r=[],n=0;n<arguments.length;n++)r[n]=e[n];if(null===t)throw new Error("Callback was already called.");var i=t;t=null,i.apply(this,r)}}!function(t){var e,r,n,i;(e=t.STATUS_FLAGS||(t.STATUS_FLAGS={}))[e.NONE=0]="NONE",e[e.DATA_URL=1]="DATA_URL",e[e.COMPLETE=2]="COMPLETE",e[e.LOADING=4]="LOADING",(r=t.TYPE||(t.TYPE={}))[r.UNKNOWN=0]="UNKNOWN",r[r.JSON=1]="JSON",r[r.XML=2]="XML",r[r.IMAGE=3]="IMAGE",r[r.AUDIO=4]="AUDIO",r[r.VIDEO=5]="VIDEO",r[r.TEXT=6]="TEXT",(n=t.LOAD_TYPE||(t.LOAD_TYPE={}))[n.XHR=1]="XHR",n[n.IMAGE=2]="IMAGE",n[n.AUDIO=3]="AUDIO",n[n.VIDEO=4]="VIDEO",(i=t.XHR_RESPONSE_TYPE||(t.XHR_RESPONSE_TYPE={})).DEFAULT="text",i.BUFFER="arraybuffer",i.BLOB="blob",i.DOCUMENT="document",i.JSON="json",i.TEXT="text",t._loadTypeMap={gif:t.LOAD_TYPE.IMAGE,png:t.LOAD_TYPE.IMAGE,bmp:t.LOAD_TYPE.IMAGE,jpg:t.LOAD_TYPE.IMAGE,jpeg:t.LOAD_TYPE.IMAGE,tif:t.LOAD_TYPE.IMAGE,tiff:t.LOAD_TYPE.IMAGE,webp:t.LOAD_TYPE.IMAGE,tga:t.LOAD_TYPE.IMAGE,avif:t.LOAD_TYPE.IMAGE,svg:t.LOAD_TYPE.IMAGE,"svg+xml":t.LOAD_TYPE.IMAGE,mp3:t.LOAD_TYPE.AUDIO,ogg:t.LOAD_TYPE.AUDIO,wav:t.LOAD_TYPE.AUDIO,mp4:t.LOAD_TYPE.VIDEO,webm:t.LOAD_TYPE.VIDEO},t._xhrTypeMap={xhtml:t.XHR_RESPONSE_TYPE.DOCUMENT,html:t.XHR_RESPONSE_TYPE.DOCUMENT,htm:t.XHR_RESPONSE_TYPE.DOCUMENT,xml:t.XHR_RESPONSE_TYPE.DOCUMENT,tmx:t.XHR_RESPONSE_TYPE.DOCUMENT,svg:t.XHR_RESPONSE_TYPE.DOCUMENT,tsx:t.XHR_RESPONSE_TYPE.DOCUMENT,gif:t.XHR_RESPONSE_TYPE.BLOB,png:t.XHR_RESPONSE_TYPE.BLOB,bmp:t.XHR_RESPONSE_TYPE.BLOB,jpg:t.XHR_RESPONSE_TYPE.BLOB,jpeg:t.XHR_RESPONSE_TYPE.BLOB,tif:t.XHR_RESPONSE_TYPE.BLOB,tiff:t.XHR_RESPONSE_TYPE.BLOB,webp:t.XHR_RESPONSE_TYPE.BLOB,tga:t.XHR_RESPONSE_TYPE.BLOB,avif:t.XHR_RESPONSE_TYPE.BLOB,json:t.XHR_RESPONSE_TYPE.JSON,text:t.XHR_RESPONSE_TYPE.TEXT,txt:t.XHR_RESPONSE_TYPE.TEXT,ttf:t.XHR_RESPONSE_TYPE.BUFFER,otf:t.XHR_RESPONSE_TYPE.BUFFER},t.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="}(Gi||(Gi={}));var zi=function(t,e){this.data=t,this.callback=e},Vi=function(){function t(t,e){var r=this;if(void 0===e&&(e=1),this.workers=0,this.saturated=ji,this.unsaturated=ji,this.empty=ji,this.drain=ji,this.error=ji,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(t,e,n){if(n&&"function"!==typeof n)throw new Error("task callback must be a function");if(r.started=!0,null==t&&r.idle())setTimeout((function(){return r.drain()}),1);else{var i=new zi(t,"function"===typeof n?n:ji);e?r._tasks.unshift(i):r._tasks.push(i),setTimeout(r.process,1)}},this.process=function(){for(;!r.paused&&r.workers<r.concurrency&&r._tasks.length;){var t=r._tasks.shift();0===r._tasks.length&&r.empty(),r.workers+=1,r.workers===r.concurrency&&r.saturated(),r._worker(t.data,Xi(r._next(t)))}},this._worker=t,0===e)throw new Error("Concurrency must not be zero");this.concurrency=e,this.buffer=e/4}return t.prototype._next=function(t){var e=this;return function(){for(var r=arguments,n=[],i=0;i<arguments.length;i++)n[i]=r[i];e.workers-=1,t.callback.apply(t,n),null!=n[0]&&e.error(n[0],t.data),e.workers<=e.concurrency-e.buffer&&e.unsaturated(),e.idle()&&e.drain(),e.process()}},t.prototype.push=function(t,e){this._insert(t,!1,e)},t.prototype.kill=function(){this.workers=0,this.drain=ji,this.started=!1,this._tasks=[]},t.prototype.unshift=function(t,e){this._insert(t,!0,e)},t.prototype.length=function(){return this._tasks.length},t.prototype.running=function(){return this.workers},t.prototype.idle=function(){return this._tasks.length+this.workers===0},t.prototype.pause=function(){!0!==this.paused&&(this.paused=!0)},t.prototype.resume=function(){if(!1!==this.paused){this.paused=!1;for(var t=1;t<=this.concurrency;t++)this.process()}},t.eachSeries=function(t,e,r,n){var i=0,o=t.length;!function s(a){a||i===o?r&&r(a):n?setTimeout((function(){e(t[i++],s)}),1):e(t[i++],s)}()},t.queue=function(e,r){return new t(e,r)},t}(),Hi=/(#[\w-]+)?$/,Yi=function(){function t(e,r){var n=this;void 0===e&&(e=""),void 0===r&&(r=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return n._loadResource(t,e)},this.resources={},this.baseUrl=e,this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return n._loadResource(t,e)},this._queue=Vi.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new Fi,this.onError=new Fi,this.onLoad=new Fi,this.onStart=new Fi,this.onComplete=new Fi;for(var i=0;i<t._plugins.length;++i){var o=t._plugins[i],s=o.pre,a=o.use;s&&this.pre(s),a&&this.use(a)}this._protected=!1}return t.prototype._add=function(t,e,r,n){if(this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new Gi(t,e,r),"function"===typeof n&&this.resources[t].onAfterMiddleware.once(n),this.loading){for(var i=r.parentResource,o=[],s=0;s<i.children.length;++s)i.children[s].isComplete||o.push(i.children[s]);var a=i.progressChunk*(o.length+1)/(o.length+2);i.children.push(this.resources[t]),i.progressChunk=a;for(s=0;s<o.length;++s)o[s].progressChunk=a;this.resources[t].progressChunk=a}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort("loader reset")}return this.resources={},this},t.prototype.load=function(t){if(Yt("6.5.0","@pixi/loaders is being replaced with @pixi/assets in the next major release."),"function"===typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,r=0;r<this._queue._tasks.length;++r)this._queue._tasks[r].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},Object.defineProperty(t.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t},enumerable:!1,configurable:!0}),t.prototype._prepareUrl=function(t){var e,r=Li(t,{strictMode:!0});if(e=r.protocol||!r.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var n=Hi.exec(e)[0];-1!==(e=e.slice(0,e.length-n.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=n}return e},t.prototype._loadResource=function(t,e){var r=this;t._dequeue=e,Vi.eachSeries(this._beforeMiddleware,(function(e,n){e.call(r,t,(function(){n(t.isComplete?{}:null)}))}),(function(){t.isComplete?r._onLoad(t):(t._onLoadBinding=t.onComplete.once(r._onLoad,r),t.load())}),!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),Vi.eachSeries(this._afterMiddleware,(function(r,n){r.call(e,t,n)}),(function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()}),!0)},t.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(t,"shared",{get:function(){var e=t._shared;return e||((e=new t)._protected=!0,t._shared=e),e},enumerable:!1,configurable:!0}),t.registerPlugin=function(e){return Yt("6.5.0","Loader.registerPlugin() is deprecated, use extensions.add() instead."),ke.add({type:Fe.Loader,ref:e}),t},t._plugins=[],t}();ke.handleByList(Fe.Loader,Yi._plugins),Yi.prototype.add=function(t,e,r,n){if(Array.isArray(t)){for(var i=0;i<t.length;++i)this.add(t[i]);return this}if("object"===typeof t&&(r=t,n=e||r.callback||r.onComplete,e=r.url,t=r.name||r.key||r.url),"string"!==typeof e&&(n=r,r=e,e=t),"string"!==typeof e)throw new Error("No url passed to add resource to loader.");return"function"===typeof r&&(n=r,r=null),this._add(t,e,r,n)};var Wi=function(){function t(){}return t.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?Yi.shared:new Yi},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t.extension=Fe.Application,t}(),qi=function(){function t(){}return t.add=function(){Gi.setExtensionLoadType("svg",Gi.LOAD_TYPE.XHR),Gi.setExtensionXhrType("svg",Gi.XHR_RESPONSE_TYPE.TEXT)},t.use=function(t,e){if(!t.data||t.type!==Gi.TYPE.IMAGE&&"svg"!==t.extension)e();else{var r=t.data,n=t.url,i=t.name,o=t.metadata;pr.fromLoader(r,n,i,o).then((function(r){t.texture=r,e()})).catch(e)}},t.extension=Fe.Loader,t}(),$i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Ki(t,e){if(t.data){if(t.xhr&&t.xhrType===Gi.XHR_RESPONSE_TYPE.BLOB)if(self.Blob&&"string"!==typeof t.data){if(0===t.data.type.indexOf("image")){var r=globalThis.URL||globalThis.webkitURL,n=r.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=n,t.type=Gi.TYPE.IMAGE,void(t.data.onload=function(){r.revokeObjectURL(n),t.data.onload=null,e()})}}else{var i=t.xhr.getResponseHeader("content-type");if(i&&0===i.indexOf("image"))return t.data=new Image,t.data.src="data:"+i+";base64,"+function(t){for(var e="",r=0;r<t.length;){for(var n=[0,0,0],i=[0,0,0,0],o=0;o<n.length;++o)r<t.length?n[o]=255&t.charCodeAt(r++):n[o]=0;switch(i[0]=n[0]>>2,i[1]=(3&n[0])<<4|n[1]>>4,i[2]=(15&n[1])<<2|n[2]>>6,i[3]=63&n[2],r-(t.length-1)){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64}for(o=0;o<i.length;++o)e+=$i.charAt(i[o])}return e}(t.xhr.responseText),t.type=Gi.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}var Qi,Zi,Ji=function(){function t(){}return t.extension=Fe.Loader,t.use=Ki,t}();ke.add(qi,Ji),function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR"}(Zi||(Zi={}));var to=((Qi={})[Zi.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,Qi[Zi.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,Qi[Zi.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,Qi[Zi.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,Qi[Zi.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,Qi[Zi.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,Qi[Zi.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,Qi[Zi.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,Qi[Zi.COMPRESSED_R11_EAC]=.5,Qi[Zi.COMPRESSED_SIGNED_R11_EAC]=.5,Qi[Zi.COMPRESSED_RG11_EAC]=1,Qi[Zi.COMPRESSED_SIGNED_RG11_EAC]=1,Qi[Zi.COMPRESSED_RGB8_ETC2]=.5,Qi[Zi.COMPRESSED_RGBA8_ETC2_EAC]=1,Qi[Zi.COMPRESSED_SRGB8_ETC2]=.5,Qi[Zi.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,Qi[Zi.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,Qi[Zi.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,Qi[Zi.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,Qi[Zi.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,Qi[Zi.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,Qi[Zi.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,Qi[Zi.COMPRESSED_RGB_ETC1_WEBGL]=.5,Qi[Zi.COMPRESSED_RGB_ATC_WEBGL]=.5,Qi[Zi.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,Qi[Zi.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,Qi[Zi.COMPRESSED_RGBA_ASTC_4x4_KHR]=1,Qi),eo=function(t,e){return eo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},eo(t,e)};function ro(t,e){function r(){this.constructor=t}eo(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function no(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{l(n.next(t))}catch(e){o(e)}}function a(t){try{l(n.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}l((n=n.apply(t,e||[])).next())}))}function io(t,e){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var oo,so,ao=function(t){function e(e,r){void 0===r&&(r={width:1,height:1,autoLoad:!0});var n,i,o=this;return"string"===typeof e?(n=e,i=new Uint8Array):(n=null,i=e),(o=t.call(this,i,r)||this).origin=n,o.buffer=i?new ii(i):null,o.origin&&!1!==r.autoLoad&&o.load(),i&&i.length&&(o.loaded=!0,o.onBlobLoaded(o.buffer.rawBinaryData)),o}return ro(e,t),e.prototype.onBlobLoaded=function(t){},e.prototype.load=function(){return no(this,void 0,Promise,(function(){var t;return io(this,(function(e){switch(e.label){case 0:return[4,fetch(this.origin)];case 1:return[4,e.sent().blob()];case 2:return[4,e.sent().arrayBuffer()];case 3:return t=e.sent(),this.data=new Uint32Array(t),this.buffer=new ii(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),[2,this]}}))}))},e}($e),lo=function(t){function e(r,n){var i=t.call(this,r,n)||this;return i.format=n.format,i.levels=n.levels||1,i._width=n.width,i._height=n.height,i._extension=e._formatToExtension(i.format),(n.levelBuffers||i.buffer)&&(i._levelBuffers=n.levelBuffers||e._createLevelBuffers(r instanceof Uint8Array?r:i.buffer.uint8View,i.format,i.levels,4,4,i.width,i.height)),i}return ro(e,t),e.prototype.upload=function(t,e,r){var n=t.gl;if(!t.context.extensions[this._extension])throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var i=0,o=this.levels;i<o;i++){var s=this._levelBuffers[i],a=s.levelID,l=s.levelWidth,u=s.levelHeight,h=s.levelBuffer;n.compressedTexImage2D(n.TEXTURE_2D,a,this.format,l,u,0,h)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(t,e,r,n,i,o,s){for(var a=new Array(r),l=t.byteOffset,u=o,h=s,c=u+n-1&~(n-1),d=h+i-1&~(i-1),f=c*d*to[e],p=0;p<r;p++)a[p]={levelID:p,levelWidth:r>1?u:c,levelHeight:r>1?h:d,levelBuffer:new Uint8Array(t.buffer,l,f)},l+=f,f=(c=(u=u>>1||1)+n-1&~(n-1))*(d=(h=h>>1||1)+i-1&~(i-1))*to[e];return a},e}(ao),uo=function(){function t(){}return t.use=function(e,r){var n=e.data;if(e.type===Gi.TYPE.JSON&&n&&n.cacheID&&n.textures){for(var i=n.textures,o=void 0,s=void 0,a=0,l=i.length;a<l;a++){var u=i[a],h=u.src,c=u.format;if(c||(s=h),t.textureFormats[c]){o=h;break}}if(!(o=o||s))return void r(new Error("Cannot load compressed-textures in "+e.url+", make sure you provide a fallback"));if(o===e.url)return void r(new Error("URL of compressed texture cannot be the same as the manifest's URL"));var d={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},f=pt.resolve(e.url.replace(this.baseUrl,""),o),p=n.cacheID;this.add(p,f,d,(function(t){if(t.error)r(t.error);else{var n=t.texture,i=void 0===n?null:n,o=t.textures,s=void 0===o?{}:o;Object.assign(e,{texture:i,textures:s}),r()}}))}else r()},Object.defineProperty(t,"textureExtensions",{get:function(){if(!t._textureExtensions){var e=ht.ADAPTER.createCanvas().getContext("webgl");if(!e)return console.warn("WebGL not available for compressed textures. Silently failing."),{};var r={s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};t._textureExtensions=r}return t._textureExtensions},enumerable:!1,configurable:!0}),Object.defineProperty(t,"textureFormats",{get:function(){if(!t._textureFormats){var e=t.textureExtensions;for(var r in t._textureFormats={},e){var n=e[r];n&&Object.assign(t._textureFormats,Object.getPrototypeOf(n))}}return t._textureFormats},enumerable:!1,configurable:!0}),t.extension=Fe.Loader,t}();function ho(t,e,r){var n={textures:{},texture:null};return e?(e.map((function(t){return new pr(new Qe(t,Object.assign({mipmap:D.OFF,alphaMode:F.NO_PREMULTIPLIED_ALPHA},r)))})).forEach((function(e,r){var i=e.baseTexture,o=t+"-"+(r+1);Qe.addToCache(i,o),pr.addToCache(e,o),0===r&&(Qe.addToCache(i,t),pr.addToCache(e,t),n.texture=e),n.textures[o]=e})),n):n}var co,fo,po=4,mo=124,yo=32,go=20,_o=542327876,vo={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},bo={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},xo={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4};!function(t){t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"}(co||(co={})),function(t){t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"}(fo||(fo={}));var To,So,wo,Eo=1,Io=2,Ao=4,Mo=64,Po=512,Oo=131072,Ro=808540228,Co=4,Do=((oo={})[827611204]=Zi.COMPRESSED_RGBA_S3TC_DXT1_EXT,oo[861165636]=Zi.COMPRESSED_RGBA_S3TC_DXT3_EXT,oo[894720068]=Zi.COMPRESSED_RGBA_S3TC_DXT5_EXT,oo),Fo=((so={})[co.DXGI_FORMAT_BC1_TYPELESS]=Zi.COMPRESSED_RGBA_S3TC_DXT1_EXT,so[co.DXGI_FORMAT_BC1_UNORM]=Zi.COMPRESSED_RGBA_S3TC_DXT1_EXT,so[co.DXGI_FORMAT_BC2_TYPELESS]=Zi.COMPRESSED_RGBA_S3TC_DXT3_EXT,so[co.DXGI_FORMAT_BC2_UNORM]=Zi.COMPRESSED_RGBA_S3TC_DXT3_EXT,so[co.DXGI_FORMAT_BC3_TYPELESS]=Zi.COMPRESSED_RGBA_S3TC_DXT5_EXT,so[co.DXGI_FORMAT_BC3_UNORM]=Zi.COMPRESSED_RGBA_S3TC_DXT5_EXT,so[co.DXGI_FORMAT_BC1_UNORM_SRGB]=Zi.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,so[co.DXGI_FORMAT_BC2_UNORM_SRGB]=Zi.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,so[co.DXGI_FORMAT_BC3_UNORM_SRGB]=Zi.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,so);function Lo(t){var e=new Uint32Array(t);if(e[0]!==_o)throw new Error("Invalid DDS file magic word");var r=new Uint32Array(t,0,mo/Uint32Array.BYTES_PER_ELEMENT),n=r[vo.HEIGHT],i=r[vo.WIDTH],o=r[vo.MIPMAP_COUNT],s=new Uint32Array(t,vo.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,yo/Uint32Array.BYTES_PER_ELEMENT),a=s[Eo];if(a&Ao){var l=s[bo.FOURCC];if(l!==Ro){var u=Do[l],h=new Uint8Array(t,po+mo);return[new lo(h,{format:u,width:i,height:n,levels:o})]}var c=po+mo,d=new Uint32Array(e.buffer,c,go/Uint32Array.BYTES_PER_ELEMENT),f=d[xo.DXGI_FORMAT],p=d[xo.RESOURCE_DIMENSION],m=d[xo.MISC_FLAG],y=d[xo.ARRAY_SIZE],g=Fo[f];if(void 0===g)throw new Error("DDSParser cannot parse texture data with DXGI format "+f);if(m===Co)throw new Error("DDSParser does not support cubemap textures");if(p===fo.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");var _=new Array,v=po+mo+go;if(1===y)_.push(new Uint8Array(t,v));else{for(var b=to[g],x=0,T=i,S=n,w=0;w<o;w++){x+=Math.max(1,T+3&-4)*Math.max(1,S+3&-4)*b,T>>>=1,S>>>=1}var E=v;for(w=0;w<y;w++)_.push(new Uint8Array(t,E,x)),E+=x}return _.map((function(t){return new lo(t,{format:g,width:i,height:n,levels:o})}))}if(a&Mo)throw new Error("DDSParser does not support uncompressed texture data.");if(a&Po)throw new Error("DDSParser does not supported YUV uncompressed texture data.");if(a&Oo)throw new Error("DDSParser does not support single-channel (lumninance) texture data!");if(a&Io)throw new Error("DDSParser does not support single-channel (alpha) texture data!");throw new Error("DDSParser failed to load a texture file due to an unknown reason!")}var No=[171,75,84,88,32,49,49,187,13,10,26,10],Bo=67305985,ko={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Uo=64,Go=((To={})[P.UNSIGNED_BYTE]=1,To[P.UNSIGNED_SHORT]=2,To[P.INT]=4,To[P.UNSIGNED_INT]=4,To[P.FLOAT]=4,To[P.HALF_FLOAT]=8,To),jo=((So={})[A.RGBA]=4,So[A.RGB]=3,So[A.RG]=2,So[A.RED]=1,So[A.LUMINANCE]=1,So[A.LUMINANCE_ALPHA]=2,So[A.ALPHA]=1,So),Xo=((wo={})[P.UNSIGNED_SHORT_4_4_4_4]=2,wo[P.UNSIGNED_SHORT_5_5_5_1]=2,wo[P.UNSIGNED_SHORT_5_6_5]=2,wo);function zo(t,e,r){void 0===r&&(r=!1);var n=new DataView(e);if(!function(t,e){for(var r=0;r<No.length;r++)if(e.getUint8(r)!==No[r])return console.error(t+" is not a valid *.ktx file!"),!1;return!0}(t,n))return null;var i=n.getUint32(ko.ENDIANNESS,!0)===Bo,o=n.getUint32(ko.GL_TYPE,i),s=n.getUint32(ko.GL_FORMAT,i),a=n.getUint32(ko.GL_INTERNAL_FORMAT,i),l=n.getUint32(ko.PIXEL_WIDTH,i),u=n.getUint32(ko.PIXEL_HEIGHT,i)||1,h=n.getUint32(ko.PIXEL_DEPTH,i)||1,c=n.getUint32(ko.NUMBER_OF_ARRAY_ELEMENTS,i)||1,d=n.getUint32(ko.NUMBER_OF_FACES,i),f=n.getUint32(ko.NUMBER_OF_MIPMAP_LEVELS,i),p=n.getUint32(ko.BYTES_OF_KEY_VALUE_DATA,i);if(0===u||1!==h)throw new Error("Only 2D textures are supported");if(1!==d)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==c)throw new Error("WebGL does not support array textures");var m,y=l+3&-4,g=u+3&-4,_=new Array(c),v=l*u;if(0===o&&(v=y*g),void 0===(m=0!==o?Go[o]?Go[o]*jo[s]:Xo[o]:to[a]))throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var b=r?function(t,e,r){var n=new Map,i=0;for(;i<e;){var o=t.getUint32(Uo+i,r),s=Uo+i+4,a=3-(o+3)%4;if(0===o||o>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}for(var l=0;l<o&&0!==t.getUint8(s+l);l++);if(-1===l){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}var u=(new TextDecoder).decode(new Uint8Array(t.buffer,s,l)),h=new DataView(t.buffer,s+l+1,o-l-1);n.set(u,h),i+=4+o+a}return n}(n,p,i):null,x=v*m,T=l,S=u,w=y,E=g,I=Uo+p,A=0;A<f;A++){for(var M=n.getUint32(I,i),O=I+4,R=0;R<c;R++){var C=_[R];C||(C=_[R]=new Array(f)),C[A]={levelID:A,levelWidth:f>1||0!==o?T:w,levelHeight:f>1||0!==o?S:E,levelBuffer:new Uint8Array(e,O,x)},O+=x}I=(I+=M+4)%4!==0?I+4-I%4:I,x=(w=(T=T>>1||1)+4-1&-4)*(E=(S=S>>1||1)+4-1&-4)*m}return 0!==o?{uncompressed:_.map((function(t){var e=t[0].levelBuffer,r=!1;return o===P.FLOAT?e=new Float32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4):o===P.UNSIGNED_INT?(r=!0,e=new Uint32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4)):o===P.INT&&(r=!0,e=new Int32Array(t[0].levelBuffer.buffer,t[0].levelBuffer.byteOffset,t[0].levelBuffer.byteLength/4)),{resource:new $e(e,{width:t[0].levelWidth,height:t[0].levelHeight}),type:o,format:r?Vo(s):s}})),kvData:b}:{compressed:_.map((function(t){return new lo(null,{format:a,width:l,height:u,levels:f,levelBuffers:t})})),kvData:b}}function Vo(t){switch(t){case A.RGBA:return A.RGBA_INTEGER;case A.RGB:return A.RGB_INTEGER;case A.RG:return A.RG_INTEGER;case A.RED:return A.RED_INTEGER;default:return t}}Gi.setExtensionXhrType("dds",Gi.XHR_RESPONSE_TYPE.BUFFER);var Ho=function(){function t(){}return t.use=function(t,e){if("dds"===t.extension&&t.data)try{Object.assign(t,ho(t.name||t.url,Lo(t.data),t.metadata))}catch(r){return void e(r)}e()},t.extension=Fe.Loader,t}();Gi.setExtensionXhrType("ktx",Gi.XHR_RESPONSE_TYPE.BUFFER);var Yo=function(){function t(){}return t.use=function(t,e){if("ktx"===t.extension&&t.data)try{var r=t.name||t.url,n=zo(r,t.data,this.loadKeyValueData),i=n.compressed,o=n.uncompressed,s=n.kvData;if(i){var a=ho(r,i,t.metadata);if(s&&a.textures)for(var l in a.textures)a.textures[l].baseTexture.ktxKeyValueData=s;Object.assign(t,a)}else if(o){var u={};o.forEach((function(t,e){var n=new pr(new Qe(t.resource,{mipmap:D.OFF,alphaMode:F.NO_PREMULTIPLIED_ALPHA,type:t.type,format:t.format})),i=r+"-"+(e+1);s&&(n.baseTexture.ktxKeyValueData=s),Qe.addToCache(n.baseTexture,i),pr.addToCache(n,i),0===e&&(u[r]=n,Qe.addToCache(n.baseTexture,r),pr.addToCache(n,r)),u[i]=n})),Object.assign(t,{textures:u})}}catch(h){return void e(h)}e()},t.extension=Fe.Loader,t.loadKeyValueData=!1,t}(),Wo=function(t,e){return Wo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},Wo(t,e)};function qo(t,e){function r(){this.constructor=t}Wo(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var $o,Ko,Qo=function(t){function e(e,r,n,i){void 0===e&&(e=1500),void 0===n&&(n=16384),void 0===i&&(i=!1);var o=t.call(this)||this;return n>16384&&(n=16384),o._properties=[!1,!0,!1,!1,!1],o._maxSize=e,o._batchSize=n,o._buffers=null,o._bufferUpdateIDs=[],o._updateID=0,o.interactiveChildren=!1,o.blendMode=E.NORMAL,o.autoResize=i,o.roundPixels=!0,o.baseTexture=null,o.setProperties(r),o._tint=0,o.tintRgb=new Float32Array(4),o.tint=16777215,o}return qo(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,Et(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return e.onChildrenChange(0)}))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},e}(De),Zo=function(){function t(t,e,r){this.geometry=new wr,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<t.length;++n){var i=t[n];i={attributeName:i.attributeName,size:i.size,uploadFunction:i.uploadFunction,type:i.type||P.FLOAT,offset:i.offset},e[n]?this.dynamicProperties.push(i):this.staticProperties.push(i)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new vr(Ft(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var r=0;r<this.dynamicProperties.length;++r){(s=this.dynamicProperties[r]).offset=e,e+=s.size,this.dynamicStride+=s.size}var n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new vr(this.dynamicData,!1,!1);var i=0;this.staticStride=0;for(r=0;r<this.staticProperties.length;++r){(s=this.staticProperties[r]).offset=i,i+=s.size,this.staticStride+=s.size}var o=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(o),this.staticDataUint32=new Uint32Array(o),this.staticBuffer=new vr(this.staticData,!0,!1);for(r=0;r<this.dynamicProperties.length;++r){var s=this.dynamicProperties[r];t.addAttribute(s.attributeName,this.dynamicBuffer,0,s.type===P.UNSIGNED_BYTE,s.type,4*this.dynamicStride,4*s.offset)}for(r=0;r<this.staticProperties.length;++r){s=this.staticProperties[r];t.addAttribute(s.attributeName,this.staticBuffer,0,s.type===P.UNSIGNED_BYTE,s.type,4*this.staticStride,4*s.offset)}},t.prototype.uploadDynamic=function(t,e,r){for(var n=0;n<this.dynamicProperties.length;n++){var i=this.dynamicProperties[n];i.uploadFunction(t,e,r,i.type===P.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer._updateID++},t.prototype.uploadStatic=function(t,e,r){for(var n=0;n<this.staticProperties.length;n++){var i=this.staticProperties[n];i.uploadFunction(t,e,r,i.type===P.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer._updateID++},t.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},t}(),Jo=function(t){function e(e){var r=t.call(this,e)||this;return r.shader=null,r.properties=null,r.tempMatrix=new ge,r.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:r.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:r.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:r.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:r.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:P.UNSIGNED_BYTE,uploadFunction:r.uploadTint,offset:0}],r.shader=pn.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),r.state=mn.for2d(),r}return qo(e,t),e.prototype.render=function(t){var e=t.children,r=t._maxSize,n=t._batchSize,i=this.renderer,o=e.length;if(0!==o){o>r&&!t.autoResize&&(o=r);var s=t._buffers;s||(s=t._buffers=this.generateBuffers(t));var a=e[0]._texture.baseTexture,l=a.alphaMode>0;this.state.blendMode=Ot(t.blendMode,l),i.state.set(this.state);var u=i.gl,h=t.worldTransform.copyTo(this.tempMatrix);h.prepend(i.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=h.toArray(!0),this.shader.uniforms.uColor=Rt(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,l),this.shader.uniforms.uSampler=a,this.renderer.shader.bind(this.shader);for(var c=!1,d=0,f=0;d<o;d+=n,f+=1){var p=o-d;p>n&&(p=n),f>=s.length&&s.push(this._generateOneMoreBuffer(t));var m=s[f];m.uploadDynamic(e,d,p);var y=t._bufferUpdateIDs[f]||0;(c=c||m._updateID<y)&&(m._updateID=t._updateID,m.uploadStatic(e,d,p)),i.geometry.bind(m.geometry),u.drawElements(u.TRIANGLES,6*p,u.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var e=[],r=t._maxSize,n=t._batchSize,i=t._properties,o=0;o<r;o+=n)e.push(new Zo(this.properties,i,n));return e},e.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,r=t._properties;return new Zo(this.properties,r,e)},e.prototype.uploadVertices=function(t,e,r,n,i,o){for(var s=0,a=0,l=0,u=0,h=0;h<r;++h){var c=t[e+h],d=c._texture,f=c.scale.x,p=c.scale.y,m=d.trim,y=d.orig;m?(s=(a=m.x-c.anchor.x*y.width)+m.width,l=(u=m.y-c.anchor.y*y.height)+m.height):(s=y.width*(1-c.anchor.x),a=y.width*-c.anchor.x,l=y.height*(1-c.anchor.y),u=y.height*-c.anchor.y),n[o]=a*f,n[o+1]=u*p,n[o+i]=s*f,n[o+i+1]=u*p,n[o+2*i]=s*f,n[o+2*i+1]=l*p,n[o+3*i]=a*f,n[o+3*i+1]=l*p,o+=4*i}},e.prototype.uploadPosition=function(t,e,r,n,i,o){for(var s=0;s<r;s++){var a=t[e+s].position;n[o]=a.x,n[o+1]=a.y,n[o+i]=a.x,n[o+i+1]=a.y,n[o+2*i]=a.x,n[o+2*i+1]=a.y,n[o+3*i]=a.x,n[o+3*i+1]=a.y,o+=4*i}},e.prototype.uploadRotation=function(t,e,r,n,i,o){for(var s=0;s<r;s++){var a=t[e+s].rotation;n[o]=a,n[o+i]=a,n[o+2*i]=a,n[o+3*i]=a,o+=4*i}},e.prototype.uploadUvs=function(t,e,r,n,i,o){for(var s=0;s<r;++s){var a=t[e+s]._texture._uvs;a?(n[o]=a.x0,n[o+1]=a.y0,n[o+i]=a.x1,n[o+i+1]=a.y1,n[o+2*i]=a.x2,n[o+2*i+1]=a.y2,n[o+3*i]=a.x3,n[o+3*i+1]=a.y3,o+=4*i):(n[o]=0,n[o+1]=0,n[o+i]=0,n[o+i+1]=0,n[o+2*i]=0,n[o+2*i+1]=0,n[o+3*i]=0,n[o+3*i+1]=0,o+=4*i)}},e.prototype.uploadTint=function(t,e,r,n,i,o){for(var s=0;s<r;++s){var a=t[e+s],l=a._texture.baseTexture.alphaMode>0,u=a.alpha,h=u<1&&l?Ct(a._tintRGB,u):a._tintRGB+(255*u<<24);n[o]=h,n[o+i]=h,n[o+2*i]=h,n[o+3*i]=h,o+=4*i}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e.extension={name:"particle",type:Fe.RendererPlugin},e}(Dr);!function(t){t.MITER="miter",t.BEVEL="bevel",t.ROUND="round"}($o||($o={})),function(t){t.BUTT="butt",t.ROUND="round",t.SQUARE="square"}(Ko||(Ko={}));var ts={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive||!t||isNaN(t))return e;var r=Math.ceil(t/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}},es=function(){function t(){this.color=16777215,this.alpha=1,this.texture=pr.WHITE,this.matrix=null,this.visible=!1,this.reset()}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=pr.WHITE,this.matrix=null,this.visible=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t}(),rs=function(t,e){return rs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},rs(t,e)};function ns(t,e){function r(){this.constructor=t}rs(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function is(t,e){var r,n;void 0===e&&(e=!1);var i=t.length;if(!(i<6)){for(var o=0,s=0,a=t[i-2],l=t[i-1];s<i;s+=2){var u=t[s],h=t[s+1];o+=(u-a)*(h+l),a=u,l=h}if(!e&&o>0||e&&o<=0){var c=i/2;for(s=c+c%2;s<i;s+=2){var d=i-s-2,f=i-s-1,p=s,m=s+1;r=[t[p],t[d]],t[d]=r[0],t[p]=r[1],n=[t[m],t[f]],t[f]=n[0],t[m]=n[1]}}}}var os={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var r=t.points,n=t.holes,i=e.points,o=e.indices;if(r.length>=6){is(r,!1);for(var s=[],a=0;a<n.length;a++){var l=n[a];is(l.points,!0),s.push(r.length/2),r=r.concat(l.points)}var u=dt(r,s,2);if(!u)return;var h=i.length/2;for(a=0;a<u.length;a+=3)o.push(u[a]+h),o.push(u[a+1]+h),o.push(u[a+2]+h);for(a=0;a<r.length;a++)i.push(r[a])}}},ss={build:function(t){var e,r,n,i,o,s,a=t.points;if(t.type===oe.CIRC){var l=t.shape;e=l.x,r=l.y,o=s=l.radius,n=i=0}else if(t.type===oe.ELIP){var u=t.shape;e=u.x,r=u.y,o=u.width,s=u.height,n=i=0}else{var h=t.shape,c=h.width/2,d=h.height/2;e=h.x+c,r=h.y+d,n=c-(o=s=Math.max(0,Math.min(h.radius,Math.min(c,d)))),i=d-s}if(o>=0&&s>=0&&n>=0&&i>=0){var f=Math.ceil(2.3*Math.sqrt(o+s)),p=8*f+(n?4:0)+(i?4:0);if(a.length=p,0!==p){if(0===f)return a.length=8,a[0]=a[6]=e+n,a[1]=a[3]=r+i,a[2]=a[4]=e-n,void(a[5]=a[7]=r-i);var m=0,y=4*f+(n?2:0)+2,g=y,_=p,v=e+(E=n+o),b=e-E,x=r+(I=i);if(a[m++]=v,a[m++]=x,a[--y]=x,a[--y]=b,i){var T=r-I;a[g++]=b,a[g++]=T,a[--_]=T,a[--_]=v}for(var S=1;S<f;S++){var w=Math.PI/2*(S/f);v=e+(E=n+Math.cos(w)*o),b=e-E,x=r+(I=i+Math.sin(w)*s),T=r-I;a[m++]=v,a[m++]=x,a[--y]=x,a[--y]=b,a[g++]=b,a[g++]=T,a[--_]=T,a[--_]=v}var E,I;v=e+(E=n),b=e-E,x=r+(I=i+s),T=r-I;a[m++]=v,a[m++]=x,a[--_]=T,a[--_]=v,n&&(a[m++]=b,a[m++]=x,a[--_]=T,a[--_]=b)}}else a.length=0},triangulate:function(t,e){var r=t.points,n=e.points,i=e.indices;if(0!==r.length){var o,s,a=n.length/2,l=a;if(t.type!==oe.RREC){var u=t.shape;o=u.x,s=u.y}else{var h=t.shape;o=h.x+h.width/2,s=h.y+h.height/2}var c=t.matrix;n.push(t.matrix?c.a*o+c.c*s+c.tx:o,t.matrix?c.b*o+c.d*s+c.ty:s),a++,n.push(r[0],r[1]);for(var d=2;d<r.length;d+=2)n.push(r[d],r[d+1]),i.push(a++,l,a);i.push(l+1,l,a)}}},as={build:function(t){var e=t.shape,r=e.x,n=e.y,i=e.width,o=e.height,s=t.points;s.length=0,s.push(r,n,r+i,n,r+i,n+o,r,n+o)},triangulate:function(t,e){var r=t.points,n=e.points,i=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}};function ls(t,e,r){return t+(e-t)*r}function us(t,e,r,n,i,o,s){void 0===s&&(s=[]);for(var a=s,l=0,u=0,h=0,c=0,d=0,f=0,p=0,m=0;p<=20;++p)l=ls(t,r,m=p/20),u=ls(e,n,m),h=ls(r,i,m),c=ls(n,o,m),d=ls(l,h,m),f=ls(u,c,m),0===p&&a[a.length-2]===d&&a[a.length-1]===f||a.push(d,f);return a}var hs={build:function(t){if(Ms.nextRoundedRectBehavior)ss.build(t);else{var e=t.shape,r=t.points,n=e.x,i=e.y,o=e.width,s=e.height,a=Math.max(0,Math.min(e.radius,Math.min(o,s)/2));r.length=0,a?(us(n,i+a,n,i,n+a,i,r),us(n+o-a,i,n+o,i,n+o,i+a,r),us(n+o,i+s-a,n+o,i+s,n+o-a,i+s,r),us(n+a,i+s,n,i+s,n,i+s-a,r)):r.push(n,i,n+o,i,n+o,i+s,n,i+s)}},triangulate:function(t,e){if(Ms.nextRoundedRectBehavior)ss.triangulate(t,e);else{for(var r=t.points,n=e.points,i=e.indices,o=n.length/2,s=dt(r,null,2),a=0,l=s.length;a<l;a+=3)i.push(s[a]+o),i.push(s[a+1]+o),i.push(s[a+2]+o);for(a=0,l=r.length;a<l;a++)n.push(r[a],r[++a])}}};function cs(t,e,r,n,i,o,s,a){var l,u;s?(l=n,u=-r):(l=-n,u=r);var h=t-r*i+l,c=e-n*i+u,d=t+r*o+l,f=e+n*o+u;return a.push(h,c),a.push(d,f),2}function ds(t,e,r,n,i,o,s,a){var l=r-t,u=n-e,h=Math.atan2(l,u),c=Math.atan2(i-t,o-e);a&&h<c?h+=2*Math.PI:!a&&h>c&&(c+=2*Math.PI);var d=h,f=c-h,p=Math.abs(f),m=Math.sqrt(l*l+u*u),y=1+(15*p*Math.sqrt(m)/Math.PI>>0),g=f/y;if(d+=g,a){s.push(t,e),s.push(r,n);for(var _=1,v=d;_<y;_++,v+=g)s.push(t,e),s.push(t+Math.sin(v)*m,e+Math.cos(v)*m);s.push(t,e),s.push(i,o)}else{s.push(r,n),s.push(t,e);for(_=1,v=d;_<y;_++,v+=g)s.push(t+Math.sin(v)*m,e+Math.cos(v)*m),s.push(t,e);s.push(i,o),s.push(t,e)}return 2*y}function fs(t,e){t.lineStyle.native?function(t,e){var r=0,n=t.shape,i=t.points||n.points,o=n.type!==oe.POLY||n.closeStroke;if(0!==i.length){var s=e.points,a=e.indices,l=i.length/2,u=s.length/2,h=u;for(s.push(i[0],i[1]),r=1;r<l;r++)s.push(i[2*r],i[2*r+1]),a.push(h,h+1),h++;o&&a.push(h,u)}}(t,e):function(t,e){var r=t.shape,n=t.points||r.points.slice(),i=e.closePointEps;if(0!==n.length){var o=t.lineStyle,s=new ue(n[0],n[1]),a=new ue(n[n.length-2],n[n.length-1]),l=r.type!==oe.POLY||r.closeStroke,u=Math.abs(s.x-a.x)<i&&Math.abs(s.y-a.y)<i;if(l){n=n.slice(),u&&(n.pop(),n.pop(),a.set(n[n.length-2],n[n.length-1]));var h=.5*(s.x+a.x),c=.5*(a.y+s.y);n.unshift(h,c),n.push(h,c)}var d=e.points,f=n.length/2,p=n.length,m=d.length/2,y=o.width/2,g=y*y,_=o.miterLimit*o.miterLimit,v=n[0],b=n[1],x=n[2],T=n[3],S=0,w=0,E=-(b-T),I=v-x,A=0,M=0,P=Math.sqrt(E*E+I*I);E/=P,I/=P,E*=y,I*=y;var O=o.alignment,R=2*(1-O),C=2*O;l||(o.cap===Ko.ROUND?p+=ds(v-E*(R-C)*.5,b-I*(R-C)*.5,v-E*R,b-I*R,v+E*C,b+I*C,d,!0)+2:o.cap===Ko.SQUARE&&(p+=cs(v,b,E,I,R,C,!0,d))),d.push(v-E*R,b-I*R),d.push(v+E*C,b+I*C);for(var D=1;D<f-1;++D){v=n[2*(D-1)],b=n[2*(D-1)+1],x=n[2*D],T=n[2*D+1],S=n[2*(D+1)],w=n[2*(D+1)+1],E=-(b-T),I=v-x,E/=P=Math.sqrt(E*E+I*I),I/=P,E*=y,I*=y,A=-(T-w),M=x-S,A/=P=Math.sqrt(A*A+M*M),M/=P,A*=y,M*=y;var F=x-v,L=b-T,N=x-S,B=w-T,k=F*N+L*B,U=L*N-B*F,G=U<0;if(Math.abs(U)<.001*Math.abs(k))d.push(x-E*R,T-I*R),d.push(x+E*C,T+I*C),k>=0&&(o.join===$o.ROUND?p+=ds(x,T,x-E*R,T-I*R,x-A*R,T-M*R,d,!1)+4:p+=2,d.push(x-A*C,T-M*C),d.push(x+A*R,T+M*R));else{var j=(-E+v)*(-I+T)-(-E+x)*(-I+b),X=(-A+S)*(-M+T)-(-A+x)*(-M+w),z=(F*X-N*j)/U,V=(B*j-L*X)/U,H=(z-x)*(z-x)+(V-T)*(V-T),Y=x+(z-x)*R,W=T+(V-T)*R,q=x-(z-x)*C,$=T-(V-T)*C,K=G?R:C;H<=Math.min(F*F+L*L,N*N+B*B)+K*K*g?o.join===$o.BEVEL||H/g>_?(G?(d.push(Y,W),d.push(x+E*C,T+I*C),d.push(Y,W),d.push(x+A*C,T+M*C)):(d.push(x-E*R,T-I*R),d.push(q,$),d.push(x-A*R,T-M*R),d.push(q,$)),p+=2):o.join===$o.ROUND?G?(d.push(Y,W),d.push(x+E*C,T+I*C),p+=ds(x,T,x+E*C,T+I*C,x+A*C,T+M*C,d,!0)+4,d.push(Y,W),d.push(x+A*C,T+M*C)):(d.push(x-E*R,T-I*R),d.push(q,$),p+=ds(x,T,x-E*R,T-I*R,x-A*R,T-M*R,d,!1)+4,d.push(x-A*R,T-M*R),d.push(q,$)):(d.push(Y,W),d.push(q,$)):(d.push(x-E*R,T-I*R),d.push(x+E*C,T+I*C),o.join===$o.ROUND?p+=G?ds(x,T,x+E*C,T+I*C,x+A*C,T+M*C,d,!0)+2:ds(x,T,x-E*R,T-I*R,x-A*R,T-M*R,d,!1)+2:o.join===$o.MITER&&H/g<=_&&(G?(d.push(q,$),d.push(q,$)):(d.push(Y,W),d.push(Y,W)),p+=2),d.push(x-A*R,T-M*R),d.push(x+A*C,T+M*C),p+=2)}}v=n[2*(f-2)],b=n[2*(f-2)+1],x=n[2*(f-1)],E=-(b-(T=n[2*(f-1)+1])),I=v-x,E/=P=Math.sqrt(E*E+I*I),I/=P,E*=y,I*=y,d.push(x-E*R,T-I*R),d.push(x+E*C,T+I*C),l||(o.cap===Ko.ROUND?p+=ds(x-E*(R-C)*.5,T-I*(R-C)*.5,x-E*R,T-I*R,x+E*C,T+I*C,d,!1)+2:o.cap===Ko.SQUARE&&(p+=cs(x,T,E,I,R,C,!1,d)));var Q=e.indices,Z=ts.epsilon*ts.epsilon;for(D=m;D<p+m-2;++D)v=d[2*D],b=d[2*D+1],x=d[2*(D+1)],T=d[2*(D+1)+1],S=d[2*(D+2)],w=d[2*(D+2)+1],Math.abs(v*(T-w)+x*(w-b)+S*(b-T))<Z||Q.push(D,D+1,D+2)}}(t,e)}var ps,ms=function(){function t(){}return t.curveTo=function(t,e,r,n,i,o){var s=o[o.length-2],a=o[o.length-1]-e,l=s-t,u=n-e,h=r-t,c=Math.abs(a*h-l*u);if(c<1e-8||0===i)return o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e),null;var d=a*a+l*l,f=u*u+h*h,p=a*u+l*h,m=i*Math.sqrt(d)/c,y=i*Math.sqrt(f)/c,g=m*p/d,_=y*p/f,v=m*h+y*l,b=m*u+y*a,x=l*(y+g),T=a*(y+g),S=h*(m+_),w=u*(m+_);return{cx:v+t,cy:b+e,radius:i,startAngle:Math.atan2(T-b,x-v),endAngle:Math.atan2(w-b,S-v),anticlockwise:l*u>h*a}},t.arc=function(t,e,r,n,i,o,s,a,l){for(var u=s-o,h=ts._segmentsCount(Math.abs(u)*i,40*Math.ceil(Math.abs(u)/se)),c=u/(2*h),d=2*c,f=Math.cos(c),p=Math.sin(c),m=h-1,y=m%1/m,g=0;g<=m;++g){var _=c+o+d*(g+y*g),v=Math.cos(_),b=-Math.sin(_);l.push((f*v+p*b)*i+r,(f*-b+p*v)*i+n)}},t}(),ys=function(){function t(){}return t.curveLength=function(t,e,r,n,i,o,s,a){for(var l=0,u=0,h=0,c=0,d=0,f=0,p=0,m=0,y=0,g=0,_=0,v=t,b=e,x=1;x<=10;++x)g=v-(m=(p=(f=(d=1-(u=x/10))*d)*d)*t+3*f*u*r+3*d*(h=u*u)*i+(c=h*u)*s),_=b-(y=p*e+3*f*u*n+3*d*h*o+c*a),v=m,b=y,l+=Math.sqrt(g*g+_*_);return l},t.curveTo=function(e,r,n,i,o,s,a){var l=a[a.length-2],u=a[a.length-1];a.length-=2;var h=ts._segmentsCount(t.curveLength(l,u,e,r,n,i,o,s)),c=0,d=0,f=0,p=0,m=0;a.push(l,u);for(var y=1,g=0;y<=h;++y)f=(d=(c=1-(g=y/h))*c)*c,m=(p=g*g)*g,a.push(f*l+3*d*g*e+3*c*p*n+m*o,f*u+3*d*g*r+3*c*p*i+m*s)},t}(),gs=function(){function t(){}return t.curveLength=function(t,e,r,n,i,o){var s=t-2*r+i,a=e-2*n+o,l=2*r-2*t,u=2*n-2*e,h=4*(s*s+a*a),c=4*(s*l+a*u),d=l*l+u*u,f=2*Math.sqrt(h+c+d),p=Math.sqrt(h),m=2*h*p,y=2*Math.sqrt(d),g=c/p;return(m*f+p*c*(f-y)+(4*d*h-c*c)*Math.log((2*p+g+f)/(g+y)))/(4*m)},t.curveTo=function(e,r,n,i,o){for(var s=o[o.length-2],a=o[o.length-1],l=ts._segmentsCount(t.curveLength(s,a,e,r,n,i)),u=0,h=0,c=1;c<=l;++c){var d=c/l;u=s+(e-s)*d,h=a+(r-a)*d,o.push(u+(e+(n-e)*d-u)*d,h+(r+(i-r)*d-h)*d)}},t}(),_s=function(){function t(){this.reset()}return t.prototype.begin=function(t,e,r){this.reset(),this.style=t,this.start=e,this.attribStart=r},t.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},t.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},t}(),vs=((ps={})[oe.POLY]=os,ps[oe.CIRC]=ss,ps[oe.ELIP]=ss,ps[oe.RECT]=as,ps[oe.RREC]=hs,ps),bs=[],xs=[],Ts=function(){function t(t,e,r,n){void 0===e&&(e=null),void 0===r&&(r=null),void 0===n&&(n=null),this.points=[],this.holes=[],this.shape=t,this.lineStyle=r,this.fillStyle=e,this.matrix=n,this.type=t.type}return t.prototype.clone=function(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)},t.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},t}(),Ss=new ue,ws=function(t){function e(){var e=t.call(this)||this;return e.closePointEps=1e-4,e.boundsPadding=0,e.uvsFloat32=null,e.indicesUint16=null,e.batchable=!1,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.drawCalls=[],e.batchDirty=-1,e.batches=[],e.dirty=0,e.cacheDirty=-1,e.clearDirty=0,e.shapeIndex=0,e._bounds=new Ae,e.boundsDirty=-1,e}return ns(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),xs.push(this.drawCalls[t]);this.drawCalls.length=0;for(t=0;t<this.batches.length;t++){var e=this.batches[t];e.reset(),bs.push(e)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,e,r,n){void 0===e&&(e=null),void 0===r&&(r=null),void 0===n&&(n=null);var i=new Ts(t,e,r,n);return this.graphicsData.push(i),this.dirty++,this},e.prototype.drawHole=function(t,e){if(void 0===e&&(e=null),!this.graphicsData.length)return null;var r=new Ts(t,null,null,e),n=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=n.lineStyle,n.holes.push(r),this.dirty++,this},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var e=this.graphicsData,r=0;r<e.length;++r){var n=e[r];if(n.fillStyle.visible&&(n.shape&&(n.matrix?n.matrix.applyInverse(t,Ss):Ss.copyFrom(t),n.shape.contains(Ss.x,Ss.y)))){var i=!1;if(n.holes)for(var o=0;o<n.holes.length;o++){if(n.holes[o].shape.contains(Ss.x,Ss.y)){i=!0;break}}if(!i)return!0}}return!1},e.prototype.updateBatches=function(){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var t=this.uvs,e=this.graphicsData,r=null,n=null;this.batches.length>0&&(n=(r=this.batches[this.batches.length-1]).style);for(var i=this.shapeIndex;i<e.length;i++){this.shapeIndex++;var o=e[i],s=o.fillStyle,a=o.lineStyle;vs[o.type].build(o),o.matrix&&this.transformPoints(o.points,o.matrix),(s.visible||a.visible)&&this.processHoles(o.holes);for(var l=0;l<2;l++){var u=0===l?s:a;if(u.visible){var h=u.texture.baseTexture,c=this.indices.length,d=this.points.length/2;h.wrapMode=C.REPEAT,0===l?this.processFill(o):this.processLine(o);var f=this.points.length/2-d;0!==f&&(r&&!this._compareStyles(n,u)&&(r.end(c,d),r=null),r||((r=bs.pop()||new _s).begin(u,c,d),this.batches.push(r),n=u),this.addUvs(this.points,t,u.texture,d,f,u.matrix))}}}var p=this.indices.length,m=this.points.length/2;if(r&&r.end(p,m),0!==this.batches.length){var y=m>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&y===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=y?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},e.prototype._compareStyles=function(t,e){return!(!t||!e)&&(t.texture.baseTexture===e.texture.baseTexture&&(t.color+t.alpha===e.color+e.alpha&&!!t.native===!!e.native))},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var r=this.graphicsData[t],n=r.fillStyle,i=r.lineStyle;if(n&&!n.texture.baseTexture.valid)return!1;if(i&&!i.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,r=t.length;e<r;e++)for(var n=t[e],i=0;i<n.size;i++){var o=n.start+i;this.indicesUint16[o]=this.indicesUint16[o]-n.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var t=this.batches,r=0;r<t.length;r++)if(t[r].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++Qe._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),xs.push(this.drawCalls[e]);this.drawCalls.length=0;var r=this.colors,n=this.textureIds,i=xs.pop();i||((i=new ri).texArray=new ni),i.texArray.count=0,i.start=0,i.size=0,i.type=I.TRIANGLES;var o=0,s=null,a=0,l=!1,u=I.TRIANGLES,h=0;this.drawCalls.push(i);for(e=0;e<this.batches.length;e++){var c=this.batches[e],d=c.style,f=d.texture.baseTexture;l!==!!d.native&&(u=(l=!!d.native)?I.LINES:I.TRIANGLES,s=null,o=8,t++),s!==f&&(s=f,f._batchEnabled!==t&&(8===o&&(t++,o=0,i.size>0&&((i=xs.pop())||((i=new ri).texArray=new ni),this.drawCalls.push(i)),i.start=h,i.size=0,i.texArray.count=0,i.type=u),f.touched=1,f._batchEnabled=t,f._batchLocation=o,f.wrapMode=C.REPEAT,i.texArray.elements[i.texArray.count++]=f,o++)),i.size+=c.size,h+=c.size,a=f._batchLocation,this.addColors(r,d.color,d.alpha,c.attribSize,c.attribStart),this.addTextureIds(n,a,c.attribSize,c.attribStart)}Qe._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,r=this.colors,n=this.textureIds,i=new ArrayBuffer(3*t.length*4),o=new Float32Array(i),s=new Uint32Array(i),a=0,l=0;l<t.length/2;l++)o[a++]=t[2*l],o[a++]=t[2*l+1],o[a++]=e[2*l],o[a++]=e[2*l+1],s[a++]=r[l],o[a++]=n[l];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?os.triangulate(t,this):vs[t.type].triangulate(t,this)},e.prototype.processLine=function(t){fs(t,this);for(var e=0;e<t.holes.length;e++)fs(t.holes[e],this)},e.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var r=t[e];vs[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,e){for(var r=0;r<t.length/2;r++){var n=t[2*r],i=t[2*r+1];t[2*r]=e.a*n+e.c*i+e.tx,t[2*r+1]=e.b*n+e.d*i+e.ty}},e.prototype.addColors=function(t,e,r,n,i){void 0===i&&(i=0);var o=Ct((e>>16)+(65280&e)+((255&e)<<16),r);t.length=Math.max(t.length,i+n);for(var s=0;s<n;s++)t[i+s]=o},e.prototype.addTextureIds=function(t,e,r,n){void 0===n&&(n=0),t.length=Math.max(t.length,n+r);for(var i=0;i<r;i++)t[n+i]=e},e.prototype.addUvs=function(t,e,r,n,i,o){void 0===o&&(o=null);for(var s=0,a=e.length,l=r.frame;s<i;){var u=t[2*(n+s)],h=t[2*(n+s)+1];if(o){var c=o.a*u+o.c*h+o.tx;h=o.b*u+o.d*h+o.ty,u=c}s++,e.push(u/l.width,h/l.height)}var d=r.baseTexture;(l.width<d.width||l.height<d.height)&&this.adjustUvs(e,r,a,i)},e.prototype.adjustUvs=function(t,e,r,n){for(var i=e.baseTexture,o=1e-6,s=r+2*n,a=e.frame,l=a.width/i.width,u=a.height/i.height,h=a.x/a.width,c=a.y/a.height,d=Math.floor(t[r]+o),f=Math.floor(t[r+1]+o),p=r+2;p<s;p+=2)d=Math.min(d,Math.floor(t[p]+o)),f=Math.min(f,Math.floor(t[p+1]+o));h-=d,c-=f;for(p=r;p<s;p+=2)t[p]=(t[p]+h)*l,t[p+1]=(t[p+1]+c)*u},e.BATCHABLE_SIZE=100,e}(ai),Es=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=Ko.BUTT,e.join=$o.MITER,e.miterLimit=10,e}return ns(e,t),e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(es),Is=new Float32Array(3),As={},Ms=function(t){function e(e){void 0===e&&(e=null);var r=t.call(this)||this;return r.shader=null,r.pluginName="batch",r.currentPath=null,r.batches=[],r.batchTint=-1,r.batchDirty=-1,r.vertexData=null,r._fillStyle=new es,r._lineStyle=new Es,r._matrix=null,r._holeMode=!1,r.state=mn.for2d(),r._geometry=e||new ws,r._geometry.refCount++,r._transformID=-1,r.tint=16777215,r.blendMode=E.NORMAL,r}return ns(e,t),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(t,e,r,n,i){return void 0===t&&(t=null),void 0===e&&(e=0),void 0===r&&(r=1),void 0===n&&(n=.5),void 0===i&&(i=!1),"number"===typeof t&&(t={width:t,color:e,alpha:r,alignment:n,native:i}),this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){t=Object.assign({width:0,texture:pr.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Ko.BUTT,join:$o.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var e=t.width>0&&t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:e},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new pe,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new pe,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},e.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var r=this.currentPath.points,n=r[r.length-2],i=r[r.length-1];return n===t&&i===e||r.push(t,e),this},e.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},e.prototype.quadraticCurveTo=function(t,e,r,n){this._initCurve();var i=this.currentPath.points;return 0===i.length&&this.moveTo(0,0),gs.curveTo(t,e,r,n,i),this},e.prototype.bezierCurveTo=function(t,e,r,n,i,o){return this._initCurve(),ys.curveTo(t,e,r,n,i,o,this.currentPath.points),this},e.prototype.arcTo=function(t,e,r,n,i){this._initCurve(t,e);var o=this.currentPath.points,s=ms.curveTo(t,e,r,n,i,o);if(s){var a=s.cx,l=s.cy,u=s.radius,h=s.startAngle,c=s.endAngle,d=s.anticlockwise;this.arc(a,l,u,h,c,d)}return this},e.prototype.arc=function(t,e,r,n,i,o){if(void 0===o&&(o=!1),n===i)return this;if(!o&&i<=n?i+=se:o&&n<=i&&(n+=se),0===i-n)return this;var s=t+Math.cos(n)*r,a=e+Math.sin(n)*r,l=this._geometry.closePointEps,u=this.currentPath?this.currentPath.points:null;if(u){var h=Math.abs(u[u.length-2]-s),c=Math.abs(u[u.length-1]-a);h<l&&c<l||u.push(s,a)}else this.moveTo(s,a),u=this.currentPath.points;return ms.arc(s,a,t,e,r,n,i,o,u),this},e.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill({texture:pr.WHITE,color:t,alpha:e})},e.prototype.beginTextureFill=function(t){t=Object.assign({texture:pr.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var e=t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:e},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,e,r,n){return this.drawShape(new ce(t,e,r,n))},e.prototype.drawRoundedRect=function(t,e,r,n,i){return this.drawShape(new me(t,e,r,n,i))},e.prototype.drawCircle=function(t,e,r){return this.drawShape(new de(t,e,r))},e.prototype.drawEllipse=function(t,e,r,n){return this.drawShape(new fe(t,e,r,n))},e.prototype.drawPolygon=function(){for(var t,e=arguments,r=[],n=0;n<arguments.length;n++)r[n]=e[n];var i=!0,o=r[0];o.points?(i=o.closeStroke,t=o.points):t=Array.isArray(r[0])?r[0]:r;var s=new pe(t);return s.closeStroke=i,this.drawShape(s),this},e.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return 1===t.length&&t[0].shape.type===oe.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)},e.prototype._render=function(t){this.finishPoly();var e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this._geometry,e=this.blendMode,r=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(t.points);for(var n=0;n<r;n++){var i=t.batches[n],o=i.style.color,s=new Float32Array(this.vertexData.buffer,4*i.attribStart*2,2*i.attribSize),a=new Float32Array(t.uvsFloat32.buffer,4*i.attribStart*2,2*i.attribSize),l={vertexData:s,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*i.start,i.size),uvs:a,_batchRGB:Et(o),_tintRGB:o,_texture:i.style.texture,alpha:i.style.alpha,worldAlpha:1};this.batches[n]=l}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,r=this.batches.length;e<r;e++){var n=this.batches[e];n.worldAlpha=this.worldAlpha*n.alpha,t.plugins[this.pluginName].render(n)}}},e.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),r=this._geometry,n=this.tint,i=this.worldAlpha,o=e.uniforms,s=r.drawCalls;o.translationMatrix=this.transform.worldTransform,o.tint[0]=(n>>16&255)/255*i,o.tint[1]=(n>>8&255)/255*i,o.tint[2]=(255&n)/255*i,o.tint[3]=i,t.shader.bind(e),t.geometry.bind(r,e),t.state.set(this.state);for(var a=0,l=s.length;a<l;a++)this._renderDrawCallDirect(t,r.drawCalls[a])},e.prototype._renderDrawCallDirect=function(t,e){for(var r=e.texArray,n=e.type,i=e.size,o=e.start,s=r.count,a=0;a<s;a++)t.texture.bind(r.elements[a],a);t.geometry.draw(n,i,o)},e.prototype._resolveDirectShader=function(t){var e=this.shader,r=this.pluginName;if(!e){if(!As[r]){for(var n=t.plugins[r].MAX_TEXTURES,i=new Int32Array(n),o=0;o<n;o++)i[o]=o;var s={tint:new Float32Array([1,1,1,1]),translationMatrix:new ge,default:Mr.from({uSamplers:i},!0)},a=t.plugins[r]._shader.program;As[r]=new pn(a,s)}e=As[r]}return e},e.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var e=t.bounds,r=e.minX,n=e.minY,i=e.maxX,o=e.maxY;this._bounds.addFrame(this.transform,r,n,i,o)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=Et(this.tint,Is),e=0;e<this.batches.length;e++){var r=this.batches[e],n=r._batchRGB,i=(t[0]*n[0]*255<<16)+(t[1]*n[1]*255<<8)+(0|t[2]*n[2]*255);r._tintRGB=(i>>16)+(65280&i)+((255&i)<<16)}}},e.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var e=this.transform.worldTransform,r=e.a,n=e.b,i=e.c,o=e.d,s=e.tx,a=e.ty,l=this._geometry.points,u=this.vertexData,h=0,c=0;c<l.length;c+=2){var d=l[c],f=l[c+1];u[h++]=r*d+i*f+s,u[h++]=o*f+n*d+a}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(e){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,e)},e.nextRoundedRectBehavior=!1,e._TEMP_POINT=new ue,e}(De),Ps={buildPoly:os,buildCircle:ss,buildRectangle:as,buildRoundedRectangle:hs,buildLine:fs,ArcUtils:ms,BezierUtils:ys,QuadraticUtils:gs,BatchPart:_s,FILL_COMMANDS:vs,BATCH_POOL:bs,DRAW_CALL_POOL:xs},Os=function(t,e){return Os=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},Os(t,e)};var Rs,Cs=new ue,Ds=new Uint16Array([0,1,2,0,2,3]),Fs=function(t){function e(e){var r=t.call(this)||this;return r._anchor=new ye(r._onAnchorUpdate,r,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=E.NORMAL,r._cachedTint=16777215,r.uvs=null,r.texture=e||pr.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.indices=Ds,r.pluginName="batch",r.isSprite=!0,r._roundPixels=ht.ROUND_PIXELS,r}return function(t,e){function r(){this.constructor=t}Os(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Xt(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Xt(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,r=e.a,n=e.b,i=e.c,o=e.d,s=e.tx,a=e.ty,l=this.vertexData,u=t.trim,h=t.orig,c=this._anchor,d=0,f=0,p=0,m=0;if(u?(d=(f=u.x-c._x*h.width)+u.width,p=(m=u.y-c._y*h.height)+u.height):(d=(f=-c._x*h.width)+h.width,p=(m=-c._y*h.height)+h.height),l[0]=r*f+i*m+s,l[1]=o*m+n*f+a,l[2]=r*d+i*m+s,l[3]=o*m+n*d+a,l[4]=r*d+i*p+s,l[5]=o*p+n*d+a,l[6]=r*f+i*p+s,l[7]=o*p+n*f+a,this._roundPixels)for(var y=ht.RESOLUTION,g=0;g<l.length;++g)l[g]=Math.round((l[g]*y|0)/y)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,r=t.orig,n=this._anchor,i=this.transform.worldTransform,o=i.a,s=i.b,a=i.c,l=i.d,u=i.tx,h=i.ty,c=-n._x*r.width,d=c+r.width,f=-n._y*r.height,p=f+r.height;e[0]=o*c+a*f+u,e[1]=l*f+s*c+h,e[2]=o*d+a*f+u,e[3]=l*f+s*d+h,e[4]=o*d+a*p+u,e[5]=l*p+s*d+h,e[6]=o*c+a*p+u,e[7]=l*p+s*c+h},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._localBounds||(this._localBounds=new Ae),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new ce),e=this._localBoundsRect),this._localBounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Cs);var e=this._texture.orig.width,r=this._texture.orig.height,n=-e*this.anchor.x,i=0;return Cs.x>=n&&Cs.x<n+e&&(i=-r*this.anchor.y,Cs.y>=i&&Cs.y<i+r)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"===typeof e?e:e&&e.texture){var r="boolean"===typeof e?e:e&&e.baseTexture;this._texture.destroy(!!r)}this._texture=null},e.from=function(t,r){return new e(t instanceof pr?t:pr.from(t,r))},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=Xt(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=Xt(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||pr.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(De),Ls=function(t,e){return Ls=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},Ls(t,e)};!function(t){t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(Rs||(Rs={}));var Ns={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Rs.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},Bs=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],ks=function(){function t(t){this.styleID=0,this.reset(),js(this,t,t)}return t.prototype.clone=function(){var e={};return js(e,this,Ns),new t(e)},t.prototype.reset=function(){js(this,Ns,Ns)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var e=Gs(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(t){var e=Gs(t);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var e=Gs(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),t.prototype.toFontString=function(){var t="number"===typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var r=e.length-1;r>=0;r--){var n=e[r].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&Bs.indexOf(n)<0&&(n='"'+n+'"'),e[r]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},t}();function Us(t){return"number"===typeof t?It(t):("string"===typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function Gs(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=Us(t[e]);return t}return Us(t)}function js(t,e,r){for(var n in r)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}var Xs={willReadFrequently:!0},zs=function(){function t(t,e,r,n,i,o,s,a,l){this.text=t,this.style=e,this.width=r,this.height=n,this.lines=i,this.lineWidths=o,this.lineHeight=s,this.maxLineWidth=a,this.fontProperties=l}return t.measureText=function(e,r,n,i){void 0===i&&(i=t._canvas),n=void 0===n||null===n?r.wordWrap:n;var o=r.toFontString(),s=t.measureFont(o);0===s.fontSize&&(s.fontSize=r.fontSize,s.ascent=r.fontSize);var a=i.getContext("2d",Xs);a.font=o;for(var l=(n?t.wordWrap(e,r,i):e).split(/(?:\r\n|\r|\n)/),u=new Array(l.length),h=0,c=0;c<l.length;c++){var d=a.measureText(l[c]).width+(l[c].length-1)*r.letterSpacing;u[c]=d,h=Math.max(h,d)}var f=h+r.strokeThickness;r.dropShadow&&(f+=r.dropShadowDistance);var p=r.lineHeight||s.fontSize+r.strokeThickness,m=Math.max(p,s.fontSize+r.strokeThickness)+(l.length-1)*(p+r.leading);return r.dropShadow&&(m+=r.dropShadowDistance),new t(e,r,f,m,l,u,p+r.leading,h,s)},t.wordWrap=function(e,r,n){void 0===n&&(n=t._canvas);for(var i=n.getContext("2d",Xs),o=0,s="",a="",l=Object.create(null),u=r.letterSpacing,h=r.whiteSpace,c=t.collapseSpaces(h),d=t.collapseNewlines(h),f=!c,p=r.wordWrapWidth+u,m=t.tokenize(e),y=0;y<m.length;y++){var g=m[y];if(t.isNewline(g)){if(!d){a+=t.addLine(s),f=!c,s="",o=0;continue}g=" "}if(c){var _=t.isBreakingSpace(g),v=t.isBreakingSpace(s[s.length-1]);if(_&&v)continue}var b=t.getFromCache(g,u,l,i);if(b>p)if(""!==s&&(a+=t.addLine(s),s="",o=0),t.canBreakWords(g,r.breakWords))for(var x=t.wordWrapSplit(g),T=0;T<x.length;T++){for(var S=x[T],w=1;x[T+w];){var E=x[T+w],I=S[S.length-1];if(t.canBreakChars(I,E,g,T,r.breakWords))break;S+=E,w++}T+=S.length-1;var A=t.getFromCache(S,u,l,i);A+o>p&&(a+=t.addLine(s),f=!1,s="",o=0),s+=S,o+=A}else{s.length>0&&(a+=t.addLine(s),s="",o=0);var M=y===m.length-1;a+=t.addLine(g,!M),f=!1,s="",o=0}else b+o>p&&(f=!1,a+=t.addLine(s),s="",o=0),(s.length>0||!t.isBreakingSpace(g)||f)&&(s+=g,o+=b)}return a+=t.addLine(s,!1)},t.addLine=function(e,r){return void 0===r&&(r=!0),e=t.trimRight(e),e=r?e+"\n":e},t.getFromCache=function(t,e,r,n){var i=r[t];if("number"!==typeof i){var o=t.length*e;i=n.measureText(t).width+o,r[t]=i}return i},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!==typeof e)return"";for(var r=e.length-1;r>=0;r--){var n=e[r];if(!t.isBreakingSpace(n))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"===typeof e&&t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e,r){return"string"===typeof e&&t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var r=[],n="";if("string"!==typeof e)return r;for(var i=0;i<e.length;i++){var o=e[i],s=e[i+1];t.isBreakingSpace(o,s)||t.isNewline(o)?(""!==n&&(r.push(n),n=""),r.push(o)):n+=o}return""!==n&&r.push(n),r},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,r,n,i){return!0},t.wordWrapSplit=function(t){return t.split("")},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var r={ascent:0,descent:0,fontSize:0},n=t._canvas,i=t._context;i.font=e;var o=t.METRICS_STRING+t.BASELINE_SYMBOL,s=Math.ceil(i.measureText(o).width),a=Math.ceil(i.measureText(t.BASELINE_SYMBOL).width),l=Math.ceil(t.HEIGHT_MULTIPLIER*a);a=a*t.BASELINE_MULTIPLIER|0,n.width=s,n.height=l,i.fillStyle="#f00",i.fillRect(0,0,s,l),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,a);var u=i.getImageData(0,0,s,l).data,h=u.length,c=4*s,d=0,f=0,p=!1;for(d=0;d<a;++d){for(var m=0;m<c;m+=4)if(255!==u[f+m]){p=!0;break}if(p)break;f+=c}for(r.ascent=a-d,f=h-c,p=!1,d=l;d>a;--d){for(m=0;m<c;m+=4)if(255!==u[f+m]){p=!0;break}if(p)break;f-=c}return r.descent=d-a,r.fontSize=r.ascent+r.descent,t._fonts[e]=r,r},t.clearMetrics=function(e){void 0===e&&(e=""),e?delete t._fonts[e]:t._fonts={}},Object.defineProperty(t,"_canvas",{get:function(){if(!t.__canvas){var e=void 0;try{var r=new OffscreenCanvas(0,0),n=r.getContext("2d",Xs);if(n&&n.measureText)return t.__canvas=r,r;e=ht.ADAPTER.createCanvas()}catch(i){e=ht.ADAPTER.createCanvas()}e.width=e.height=10,t.__canvas=e}return t.__canvas},enumerable:!1,configurable:!0}),Object.defineProperty(t,"_context",{get:function(){return t.__context||(t.__context=t._canvas.getContext("2d",Xs)),t.__context},enumerable:!1,configurable:!0}),t}();zs._fonts={},zs.METRICS_STRING="|\xc9q\xc5",zs.BASELINE_SYMBOL="M",zs.BASELINE_MULTIPLIER=1.4,zs.HEIGHT_MULTIPLIER=2,zs._newlines=[10,13],zs._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var Vs={texture:!0,children:!1,baseTexture:!0},Hs=function(t){function e(e,r,n){var i=this,o=!1;n||(n=ht.ADAPTER.createCanvas(),o=!0),n.width=3,n.height=3;var s=pr.from(n);return s.orig=new ce,s.trim=new ce,(i=t.call(this,s)||this)._ownCanvas=o,i.canvas=n,i.context=n.getContext("2d",{willReadFrequently:!0}),i._resolution=ht.RESOLUTION,i._autoResolution=!0,i._text=null,i._style=null,i._styleListener=null,i._font="",i.text=e,i.style=r,i.localStyleID=-1,i}return function(t,e){function r(){this.constructor=t}Ls(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype.updateText=function(t){var r=this._style;if(this.localStyleID!==r.styleID&&(this.dirty=!0,this.localStyleID=r.styleID),this.dirty||!t){this._font=this._style.toFontString();var n,i,o=this.context,s=zs.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),a=s.width,l=s.height,u=s.lines,h=s.lineHeight,c=s.lineWidths,d=s.maxLineWidth,f=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,a)+2*r.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,l)+2*r.padding)*this._resolution),o.scale(this._resolution,this._resolution),o.clearRect(0,0,this.canvas.width,this.canvas.height),o.font=this._font,o.lineWidth=r.strokeThickness,o.textBaseline=r.textBaseline,o.lineJoin=r.lineJoin,o.miterLimit=r.miterLimit;for(var p=r.dropShadow?2:1,m=0;m<p;++m){var y=r.dropShadow&&0===m,g=y?Math.ceil(Math.max(1,l)+2*r.padding):0,_=g*this._resolution;if(y){o.fillStyle="black",o.strokeStyle="black";var v=r.dropShadowColor,b=Et("number"===typeof v?v:At(v)),x=r.dropShadowBlur*this._resolution,T=r.dropShadowDistance*this._resolution;o.shadowColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+r.dropShadowAlpha+")",o.shadowBlur=x,o.shadowOffsetX=Math.cos(r.dropShadowAngle)*T,o.shadowOffsetY=Math.sin(r.dropShadowAngle)*T+_}else o.fillStyle=this._generateFillStyle(r,u,s),o.strokeStyle=r.stroke,o.shadowColor="black",o.shadowBlur=0,o.shadowOffsetX=0,o.shadowOffsetY=0;var S=(h-f.fontSize)/2;(!e.nextLineHeightBehavior||h-f.fontSize<0)&&(S=0);for(var w=0;w<u.length;w++)n=r.strokeThickness/2,i=r.strokeThickness/2+w*h+f.ascent+S,"right"===r.align?n+=d-c[w]:"center"===r.align&&(n+=(d-c[w])/2),r.stroke&&r.strokeThickness&&this.drawLetterSpacing(u[w],n+r.padding,i+r.padding-g,!0),r.fill&&this.drawLetterSpacing(u[w],n+r.padding,i+r.padding-g)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,r,n,i){void 0===i&&(i=!1);var o=this._style.letterSpacing,s=e.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(0===o||s)return s&&(this.context.letterSpacing=o,this.context.textLetterSpacing=o),void(i?this.context.strokeText(t,r,n):this.context.fillText(t,r,n));for(var a=r,l=Array.from?Array.from(t):t.split(""),u=this.context.measureText(t).width,h=0,c=0;c<l.length;++c){var d=l[c];i?this.context.strokeText(d,a,n):this.context.fillText(d,a,n);for(var f="",p=c+1;p<l.length;++p)f+=l[p];a+=u-(h=this.context.measureText(f).width)+o,u=h}},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=Jt(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var r=this._texture,n=this._style,i=n.trim?0:n.padding,o=r.baseTexture;r.trim.width=r._frame.width=t.width/this._resolution,r.trim.height=r._frame.height=t.height/this._resolution,r.trim.x=-i,r.trim.y=-i,r.orig.width=r._frame.width-2*i,r.orig.height=r._frame.height-2*i,this._onTextureUpdate(),o.setRealSize(t.width,t.height,this._resolution),r.updateUvs(),this.dirty=!1},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,e)},e.prototype.updateTransform=function(){this.updateText(!0),t.prototype.updateTransform.call(this)},e.prototype.getBounds=function(e,r){return this.updateText(!0),-1===this._textureID&&(e=!1),t.prototype.getBounds.call(this,e,r)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(t,e,r){var n,i=t.fill;if(!Array.isArray(i))return i;if(1===i.length)return i[0];var o=t.dropShadow?t.dropShadowDistance:0,s=t.padding||0,a=this.canvas.width/this._resolution-o-2*s,l=this.canvas.height/this._resolution-o-2*s,u=i.slice(),h=t.fillGradientStops.slice();if(!h.length)for(var c=u.length+1,d=1;d<c;++d)h.push(d/c);if(u.unshift(i[0]),h.unshift(0),u.push(i[i.length-1]),h.push(1),t.fillGradientType===Rs.LINEAR_VERTICAL){n=this.context.createLinearGradient(a/2,s,a/2,l+s);var f=r.fontProperties.fontSize+t.strokeThickness;for(d=0;d<e.length;d++){var p=r.lineHeight*(d-1)+f,m=r.lineHeight*d,y=m;d>0&&p>m&&(y=(m+p)/2);var g=m+f,_=r.lineHeight*(d+1),v=g;d+1<e.length&&_<g&&(v=(g+_)/2);for(var b=(v-y)/l,x=0;x<u.length;x++){var T=0;T="number"===typeof h[x]?h[x]:x/u.length;var S=Math.min(1,Math.max(0,y/l+T*b));S=Number(S.toFixed(5)),n.addColorStop(S,u[x])}}}else{n=this.context.createLinearGradient(s,l/2,a+s,l/2);var w=u.length+1,E=1;for(d=0;d<u.length;d++){var I=void 0;I="number"===typeof h[d]?h[d]:E/w,n.addColorStop(I,u[d]),E++}}return n},e.prototype.destroy=function(e){"boolean"===typeof e&&(e={children:e}),e=Object.assign({},Vs,e),t.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=Xt(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=Xt(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},this._style=t instanceof ks?t:new ks(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null===t||void 0===t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.nextLineHeightBehavior=!1,e.experimentalLetterSpacing=!1,e}(Fs);ht.UPLOADS_PER_FRAME=4;var Ys=function(t,e){return Ys=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},Ys(t,e)};var Ws=function(){function t(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();function qs(t,e){var r=!1;if(t&&t._textures&&t._textures.length)for(var n=0;n<t._textures.length;n++)if(t._textures[n]instanceof pr){var i=t._textures[n].baseTexture;-1===e.indexOf(i)&&(e.push(i),r=!0)}return r}function $s(t,e){if(t.baseTexture instanceof Qe){var r=t.baseTexture;return-1===e.indexOf(r)&&e.push(r),!0}return!1}function Ks(t,e){if(t._texture&&t._texture instanceof pr){var r=t._texture.baseTexture;return-1===e.indexOf(r)&&e.push(r),!0}return!1}function Qs(t,e){return e instanceof Hs&&(e.updateText(!0),!0)}function Zs(t,e){if(e instanceof ks){var r=e.toFontString();return zs.measureFont(r),!0}return!1}function Js(t,e){if(t instanceof Hs){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var r=t._texture.baseTexture;return-1===e.indexOf(r)&&e.push(r),!0}return!1}function ta(t,e){return t instanceof ks&&(-1===e.indexOf(t)&&e.push(t),!0)}var ea=function(){function t(t){var e=this;this.limiter=new Ws(ht.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(Js),this.registerFindHook(ta),this.registerFindHook(qs),this.registerFindHook($s),this.registerFindHook(Ks),this.registerUploadHook(Qs),this.registerUploadHook(Zs)}return t.prototype.upload=function(t,e){var r=this;return"function"===typeof t&&(e=t,t=null),e&&Yt("6.5.0","BasePrepare.upload callback is deprecated, use the return Promise instead."),new Promise((function(n){t&&r.add(t);var i=function(){null===e||void 0===e||e(),n()};r.queue.length?(r.completes.push(i),r.ticking||(r.ticking=!0,je.system.addOnce(r.tick,r,Ne.UTILITY))):i()}))},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var r=0,n=this.uploadHooks.length;r<n;r++)if(this.uploadHooks[r](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)je.system.addOnce(this.tick,this,Ne.UTILITY);else{this.ticking=!1;var i=this.completes.slice(0);this.completes.length=0;for(r=0,n=i.length;r<n;r++)i[r]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,r=this.addHooks.length;e<r&&!this.addHooks[e](t,this.queue);e++);if(t instanceof De)for(e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this},t.prototype.destroy=function(){this.ticking&&je.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();function ra(t,e){return e instanceof Qe&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function na(t,e){if(!(e instanceof Ms))return!1;var r=e.geometry;e.finishPoly(),r.updateBatches();for(var n=r.batches,i=0;i<n.length;i++){var o=n[i].style.texture;o&&ra(t,o.baseTexture)}return r.batchable||t.geometry.bind(r,e._resolveDirectShader(t)),!0}function ia(t,e){return t instanceof Ms&&(e.push(t),!0)}var oa=function(t){function e(e){var r=t.call(this,e)||this;return r.uploadHookHelper=r.renderer,r.registerFindHook(ia),r.registerUploadHook(ra),r.registerUploadHook(na),r}return function(t,e){function r(){this.constructor=t}Ys(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.extension={name:"prepare",type:Fe.RendererPlugin},e}(ea),sa=function(){function t(t){this.maxMilliseconds=t,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}(),aa=function(){function t(t,e,r){void 0===r&&(r=null),this.linkedSheets=[],this._texture=t instanceof pr?t:null,this.baseTexture=t instanceof Qe?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var n=this.baseTexture.resource;this.resolution=this._updateResolution(r||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(t){void 0===t&&(t=null);var e=this.data.meta.scale,r=ie(t,null);return null===r&&(r=void 0!==e?parseFloat(e):1),1!==r&&this.baseTexture.setResolution(r),r},t.prototype.parse=function(e){var r=this;return e&&Yt("6.5.0","Spritesheet.parse callback is deprecated, use the return Promise instead."),new Promise((function(n){r._callback=function(t){null===e||void 0===e||e(t),n(t)},r._batchIndex=0,r._frameKeys.length<=t.BATCH_SIZE?(r._processFrames(0),r._processAnimations(),r._parseComplete()):r._nextBatch()}))},t.prototype._processFrames=function(e){for(var r=e,n=t.BATCH_SIZE;r-e<n&&r<this._frameKeys.length;){var i=this._frameKeys[r],o=this._frames[i],s=o.frame;if(s){var a=null,l=null,u=!1!==o.trimmed&&o.sourceSize?o.sourceSize:o.frame,h=new ce(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);a=o.rotated?new ce(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):new ce(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),!1!==o.trimmed&&o.spriteSourceSize&&(l=new ce(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[i]=new pr(this.baseTexture,a,h,l,o.rotated?2:0,o.anchor),pr.addToCache(this.textures[i],i)}r++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var r=0;r<t[e].length;r++){var n=t[e][r];this.animations[e].push(this.textures[n])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout((function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())}),0)},t.prototype.destroy=function(t){var e;for(var r in void 0===t&&(t=!1),this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(null===(e=this._texture)||void 0===e||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]},t.BATCH_SIZE=1e3,t}(),la=function(){function t(){}return t.use=function(e,r){var n,i,o=this,s=e.name+"_image";if(e.data&&e.type===Gi.TYPE.JSON&&e.data.frames&&!o.resources[s]){var a=null===(i=null===(n=e.data)||void 0===n?void 0:n.meta)||void 0===i?void 0:i.related_multi_packs;if(Array.isArray(a))for(var l=function(t){if("string"!==typeof t)return"continue";var r=t.replace(".json",""),n=pt.resolve(e.url.replace(o.baseUrl,""),t);if(o.resources[r]||Object.values(o.resources).some((function(t){return pt.format(pt.parse(t.url))===n})))return"continue";var i={crossOrigin:e.crossOrigin,loadType:Gi.LOAD_TYPE.XHR,xhrType:Gi.XHR_RESPONSE_TYPE.JSON,parentResource:e,metadata:e.metadata};o.add(r,n,i)},u=0,h=a;u<h.length;u++){l(h[u])}var c={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},d=t.getResourcePath(e,o.baseUrl);o.add(s,d,c,(function(t){if(t.error)r(t.error);else{var n=new aa(t.texture,e.data,e.url);n.parse().then((function(){e.spritesheet=n,e.textures=n.textures,r()}))}}))}else r()},t.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:pt.resolve(t.url.replace(e,""),t.data.meta.image)},t.extension=Fe.Loader,t}(),ua=function(t,e){return ua=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},ua(t,e)};function ha(t,e){function r(){this.constructor=t}ua(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var ca=new ue,da=function(t){function e(e,r,n){void 0===r&&(r=100),void 0===n&&(n=100);var i=t.call(this,e)||this;return i.tileTransform=new Ie,i._width=r,i._height=n,i.uvMatrix=i.texture.uvMatrix||new _n(e),i.pluginName="tilingSprite",i.uvRespectAnchor=!1,i}return ha(e,t),Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,r,n)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new ce),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,ca);var e=this._width,r=this._height,n=-e*this.anchor._x;if(ca.x>=n&&ca.x<n+e){var i=-r*this.anchor._y;if(ca.y>=i&&ca.y<i+r)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,r){return new e(t instanceof pr?t:pr.from(t,r),r.width,r.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),e}(Fs),fa="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",pa=new ge,ma=function(t){function e(e){var r=t.call(this,e)||this;return e.runners.contextChange.add(r),r.quad=new Ir,r.state=mn.for2d(),r}return ha(e,t),e.prototype.contextChange=function(){var t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=pn.from(fa,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",e),this.shader=t.context.webGLVersion>1?pn.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",e):pn.from(fa,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",e)},e.prototype.render=function(t){var e=this.renderer,r=this.quad,n=r.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y);var i=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;(n=r.uvs)[0]=n[6]=-i,n[1]=n[3]=-o,n[2]=n[4]=1-i,n[5]=n[7]=1-o,r.invalidate();var s=t._texture,a=s.baseTexture,l=a.alphaMode>0,u=t.tileTransform.localTransform,h=t.uvMatrix,c=a.isPowerOfTwo&&s.frame.width===a.width&&s.frame.height===a.height;c&&(a._glTextures[e.CONTEXT_UID]?c=a.wrapMode!==C.CLAMP:a.wrapMode===C.CLAMP&&(a.wrapMode=C.REPEAT));var d=c?this.simpleShader:this.shader,f=s.width,p=s.height,m=t._width,y=t._height;pa.set(u.a*f/m,u.b*f/y,u.c*p/m,u.d*p/y,u.tx/m,u.ty/y),pa.invert(),c?pa.prepend(h.mapCoord):(d.uniforms.uMapCoord=h.mapCoord.toArray(!0),d.uniforms.uClampFrame=h.uClampFrame,d.uniforms.uClampOffset=h.uClampOffset),d.uniforms.uTransform=pa.toArray(!0),d.uniforms.uColor=Dt(t.tint,t.worldAlpha,d.uniforms.uColor,l),d.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),d.uniforms.uSampler=s,e.shader.bind(d),e.geometry.bind(r),this.state.blendMode=Ot(t.blendMode,l),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e.extension={name:"tilingSprite",type:Fe.RendererPlugin},e}(Dr),ya=function(t,e){return ya=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},ya(t,e)};function ga(t,e){function r(){this.constructor=t}ya(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var _a=function(){function t(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return t.prototype.update=function(t){if(t||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},t}(),va=new ue,ba=new pe,xa=function(t){function e(e,r,n,i){void 0===i&&(i=I.TRIANGLES);var o=t.call(this)||this;return o.geometry=e,o.shader=r,o.state=n||mn.for2d(),o.drawMode=i,o.start=0,o.size=0,o.uvs=null,o.indices=null,o.vertexData=new Float32Array(1),o.vertexDirty=-1,o._transformID=-1,o._roundPixels=ht.ROUND_PIXELS,o.batchUvs=null,o}return ga(e,t),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},set:function(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){var r=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===I.TRIANGLES&&r.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var e=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;var n=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[n]),t.plugins[n].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry.buffers[0],e=t.data,r=t._updateID;if(r!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var n=this.transform.worldTransform,i=n.a,o=n.b,s=n.c,a=n.d,l=n.tx,u=n.ty,h=this.vertexData,c=0;c<h.length/2;c++){var d=e[2*c],f=e[2*c+1];h[2*c]=i*d+s*f+l,h[2*c+1]=o*d+a*f+u}if(this._roundPixels){var p=ht.RESOLUTION;for(c=0;c<h.length;++c)h[c]=Math.round((h[c]*p|0)/p)}this.vertexDirty=r}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new _a(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,va);for(var e=this.geometry.getBuffer("aVertexPosition").data,r=ba.points,n=this.geometry.getIndex().data,i=n.length,o=4===this.drawMode?3:1,s=0;s+2<i;s+=o){var a=2*n[s],l=2*n[s+1],u=2*n[s+2];if(r[0]=e[a],r[1]=e[a+1],r[2]=e[l],r[3]=e[l+1],r[4]=e[u],r[5]=e[u+1],ba.contains(va.x,va.y))return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(De),Ta=function(t){function e(e,r){var n=this,i={uSampler:e,alpha:1,uTextureMatrix:ge.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r)).uniforms&&Object.assign(i,r.uniforms),(n=t.call(this,r.program||fn.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),i)||this)._colorDirty=!1,n.uvMatrix=new _n(e),n.batchable=void 0===r.program,n.pluginName=r.pluginName,n.tint=r.tint,n.alpha=r.alpha,n}return ga(e,t),Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!==!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;Dt(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(pn),Sa=function(t){function e(e,r,n){var i=t.call(this)||this,o=new vr(e),s=new vr(r,!0),a=new vr(n,!0,!0);return i.addAttribute("aVertexPosition",o,2,!1,P.FLOAT).addAttribute("aTextureCoord",s,2,!1,P.FLOAT).addIndex(a),i._updateId=-1,i}return ga(e,t),Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(wr),wa=function(t,e){return wa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},wa(t,e)};var Ea=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]},Ia=function(){function t(){}return t.test=function(t){return"string"===typeof t&&0===t.indexOf("info face=")},t.parse=function(t){var e=t.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var n in e){var i=e[n].match(/^[a-z]+/gm)[0],o=e[n].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),s={};for(var a in o){var l=o[a].split("="),u=l[0],h=l[1].replace(/"/gm,""),c=parseFloat(h),d=isNaN(c)?h:c;s[u]=d}r[i].push(s)}var f=new Ea;return r.info.forEach((function(t){return f.info.push({face:t.face,size:parseInt(t.size,10)})})),r.common.forEach((function(t){return f.common.push({lineHeight:parseInt(t.lineHeight,10)})})),r.page.forEach((function(t){return f.page.push({id:parseInt(t.id,10),file:t.file})})),r.char.forEach((function(t){return f.char.push({id:parseInt(t.id,10),page:parseInt(t.page,10),x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xoffset:parseInt(t.xoffset,10),yoffset:parseInt(t.yoffset,10),xadvance:parseInt(t.xadvance,10)})})),r.kerning.forEach((function(t){return f.kerning.push({first:parseInt(t.first,10),second:parseInt(t.second,10),amount:parseInt(t.amount,10)})})),r.distanceField.forEach((function(t){return f.distanceField.push({distanceRange:parseInt(t.distanceRange,10),fieldType:t.fieldType})})),f},t}(),Aa=function(){function t(){}return t.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")},t.parse=function(t){for(var e=new Ea,r=t.getElementsByTagName("info"),n=t.getElementsByTagName("common"),i=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),s=t.getElementsByTagName("kerning"),a=t.getElementsByTagName("distanceField"),l=0;l<r.length;l++)e.info.push({face:r[l].getAttribute("face"),size:parseInt(r[l].getAttribute("size"),10)});for(l=0;l<n.length;l++)e.common.push({lineHeight:parseInt(n[l].getAttribute("lineHeight"),10)});for(l=0;l<i.length;l++)e.page.push({id:parseInt(i[l].getAttribute("id"),10)||0,file:i[l].getAttribute("file")});for(l=0;l<o.length;l++){var u=o[l];e.char.push({id:parseInt(u.getAttribute("id"),10),page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xoffset:parseInt(u.getAttribute("xoffset"),10),yoffset:parseInt(u.getAttribute("yoffset"),10),xadvance:parseInt(u.getAttribute("xadvance"),10)})}for(l=0;l<s.length;l++)e.kerning.push({first:parseInt(s[l].getAttribute("first"),10),second:parseInt(s[l].getAttribute("second"),10),amount:parseInt(s[l].getAttribute("amount"),10)});for(l=0;l<a.length;l++)e.distanceField.push({fieldType:a[l].getAttribute("fieldType"),distanceRange:parseInt(a[l].getAttribute("distanceRange"),10)});return e},t}(),Ma=function(){function t(){}return t.test=function(t){if("string"===typeof t&&t.indexOf("<font>")>-1){var e=(new globalThis.DOMParser).parseFromString(t,"text/xml");return Aa.test(e)}return!1},t.parse=function(t){var e=(new globalThis.DOMParser).parseFromString(t,"text/xml");return Aa.parse(e)},t}(),Pa=[Ia,Aa,Ma];function Oa(t){for(var e=0;e<Pa.length;e++)if(Pa[e].test(t))return Pa[e];return null}function Ra(t,e,r,n,i,o,s){var a=r.text,l=r.fontProperties;e.translate(n,i),e.scale(o,o);var u=s.strokeThickness/2,h=-s.strokeThickness/2;if(e.font=s.toFontString(),e.lineWidth=s.strokeThickness,e.textBaseline=s.textBaseline,e.lineJoin=s.lineJoin,e.miterLimit=s.miterLimit,e.fillStyle=function(t,e,r,n,i,o){var s,a=r.fill;if(!Array.isArray(a))return a;if(1===a.length)return a[0];var l=r.dropShadow?r.dropShadowDistance:0,u=r.padding||0,h=t.width/n-l-2*u,c=t.height/n-l-2*u,d=a.slice(),f=r.fillGradientStops.slice();if(!f.length)for(var p=d.length+1,m=1;m<p;++m)f.push(m/p);if(d.unshift(a[0]),f.unshift(0),d.push(a[a.length-1]),f.push(1),r.fillGradientType===Rs.LINEAR_VERTICAL){s=e.createLinearGradient(h/2,u,h/2,c+u);var y=0,g=(o.fontProperties.fontSize+r.strokeThickness)/c;for(m=0;m<i.length;m++)for(var _=o.lineHeight*m,v=0;v<d.length;v++){var b=_/c+("number"===typeof f[v]?f[v]:v/d.length)*g,x=Math.max(y,b);x=Math.min(x,1),s.addColorStop(x,d[v]),y=x}}else{s=e.createLinearGradient(u,c/2,h+u,c/2);var T=d.length+1,S=1;for(m=0;m<d.length;m++){var w=void 0;w="number"===typeof f[m]?f[m]:S/T,s.addColorStop(w,d[m]),S++}}return s}(t,e,s,o,[a],r),e.strokeStyle=s.stroke,s.dropShadow){var c=s.dropShadowColor,d=Et("number"===typeof c?c:At(c)),f=s.dropShadowBlur*o,p=s.dropShadowDistance*o;e.shadowColor="rgba("+255*d[0]+","+255*d[1]+","+255*d[2]+","+s.dropShadowAlpha+")",e.shadowBlur=f,e.shadowOffsetX=Math.cos(s.dropShadowAngle)*p,e.shadowOffsetY=Math.sin(s.dropShadowAngle)*p}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;s.stroke&&s.strokeThickness&&e.strokeText(a,u,h+r.lineHeight-l.descent),s.fill&&e.fillText(a,u,h+r.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function Ca(t){return Array.from?Array.from(t):t.split("")}function Da(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}var Fa=function(){function t(t,e,r){var n,i,o=t.info[0],s=t.common[0],a=t.page[0],l=t.distanceField[0],u=ie(a.file),h={};this._ownsTextures=r,this.font=o.face,this.size=o.size,this.lineHeight=s.lineHeight/u,this.chars={},this.pageTextures=h;for(var c=0;c<t.page.length;c++){var d=t.page[c],f=d.id,p=d.file;h[f]=e instanceof Array?e[c]:e[p],(null===l||void 0===l?void 0:l.fieldType)&&"none"!==l.fieldType&&(h[f].baseTexture.alphaMode=F.NO_PREMULTIPLIED_ALPHA,h[f].baseTexture.mipmap=D.OFF)}for(c=0;c<t.char.length;c++){var m=t.char[c],y=(f=m.id,m.page),g=t.char[c],_=g.x,v=g.y,b=g.width,x=g.height,T=g.xoffset,S=g.yoffset,w=g.xadvance;v/=u,b/=u,x/=u,T/=u,S/=u,w/=u;var E=new ce((_/=u)+h[y].frame.x/u,v+h[y].frame.y/u,b,x);this.chars[f]={xOffset:T,yOffset:S,xAdvance:w,kerning:{},texture:new pr(h[y].baseTexture,E),page:y}}for(c=0;c<t.kerning.length;c++){var I=t.kerning[c],A=I.first,M=I.second,P=I.amount;A/=u,M/=u,P/=u,this.chars[M]&&(this.chars[M].kerning[A]=P)}this.distanceFieldRange=null===l||void 0===l?void 0:l.distanceRange,this.distanceFieldType=null!==(i=null===(n=null===l||void 0===l?void 0:l.fieldType)||void 0===n?void 0:n.toLowerCase())&&void 0!==i?i:"none"}return t.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},t.install=function(e,r,n){var i;if(e instanceof Ea)i=e;else{var o=Oa(e);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(e)}r instanceof pr&&(r=[r]);var s=new t(i,r,n);return t.available[s.font]=s,s},t.uninstall=function(e){var r=t.available[e];if(!r)throw new Error("No font found named '"+e+"'");r.destroy(),delete t.available[e]},t.from=function(e,r,n){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},t.defaultOptions,n),o=i.chars,s=i.padding,a=i.resolution,l=i.textureWidth,u=i.textureHeight,h=function(t){"string"===typeof t&&(t=[t]);for(var e=[],r=0,n=t.length;r<n;r++){var i=t[r];if(Array.isArray(i)){if(2!==i.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+i.length+".");var o=i[0].charCodeAt(0),s=i[1].charCodeAt(0);if(s<o)throw new Error("[BitmapFont]: Invalid character range.");for(var a=o,l=s;a<=l;a++)e.push(String.fromCharCode(a))}else e.push.apply(e,Ca(i))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(o),c=r instanceof ks?r:new ks(r),d=l,f=new Ea;f.info[0]={face:c.fontFamily,size:c.fontSize},f.common[0]={lineHeight:c.fontSize};for(var p,m,y,g=0,_=0,v=0,b=[],x=0;x<h.length;x++){p||((p=ht.ADAPTER.createCanvas()).width=l,p.height=u,m=p.getContext("2d"),y=new Qe(p,{resolution:a}),b.push(new pr(y)),f.page.push({id:b.length-1,file:""}));var T=h[x],S=zs.measureText(T,c,!1,p),w=S.width,E=Math.ceil(S.height),I=Math.ceil(("italic"===c.fontStyle?2:1)*w);if(_>=u-E*a){if(0===_)throw new Error("[BitmapFont] textureHeight "+u+"px is too small (fontFamily: '"+c.fontFamily+"', fontSize: "+c.fontSize+"px, char: '"+T+"')");--x,p=null,m=null,y=null,_=0,g=0,v=0}else if(v=Math.max(E+S.fontProperties.descent,v),I*a+g>=d){if(0===g)throw new Error("[BitmapFont] textureWidth "+l+"px is too small (fontFamily: '"+c.fontFamily+"', fontSize: "+c.fontSize+"px, char: '"+T+"')");--x,_+=v*a,_=Math.ceil(_),g=0,v=0}else{Ra(p,m,S,g,_,a,c);var A=Da(S.text);f.char.push({id:A,page:b.length-1,x:g/a,y:_/a,width:I,height:E,xoffset:0,yoffset:0,xadvance:Math.ceil(w-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0))}),g+=(I+2*s)*a,g=Math.ceil(g)}}if(!(null===n||void 0===n?void 0:n.skipKerning)){x=0;for(var M=h.length;x<M;x++)for(var P=h[x],O=0;O<M;O++){var R=h[O],C=m.measureText(P).width,D=m.measureText(R).width,F=m.measureText(P+R).width-(C+D);F&&f.kerning.push({first:Da(P),second:Da(R),amount:F})}}var L=new t(f,b,!0);return void 0!==t.available[e]&&t.uninstall(e),t.available[e]=L,L},t.ALPHA=[["a","z"],["A","Z"]," "],t.NUMERIC=[["0","9"]],t.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],t.ASCII=[[" ","~"]],t.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:t.ALPHANUMERIC},t.available={},t}(),La=[],Na=[],Ba=[],ka=function(t){function e(r,n){void 0===n&&(n={});var i=t.call(this)||this;i._tint=16777215;var o=Object.assign({},e.styleDefaults,n),s=o.align,a=o.tint,l=o.maxWidth,u=o.letterSpacing,h=o.fontName,c=o.fontSize;if(!Fa.available[h])throw new Error('Missing BitmapFont "'+h+'"');return i._activePagesMeshData=[],i._textWidth=0,i._textHeight=0,i._align=s,i._tint=a,i._font=void 0,i._fontName=h,i._fontSize=c,i.text=r,i._maxWidth=l,i._maxLineHeight=0,i._letterSpacing=u,i._anchor=new ye((function(){i.dirty=!0}),i,0,0),i._roundPixels=ht.ROUND_PIXELS,i.dirty=!0,i._resolution=ht.RESOLUTION,i._autoResolution=!0,i._textureCache={},i}return function(t,e){function r(){this.constructor=t}wa(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype.updateText=function(){for(var t,e=Fa.available[this._fontName],r=this.fontSize,n=r/e.size,i=new ue,o=[],s=[],a=[],l=Ca(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),u=this._maxWidth*e.size/r,h="none"===e.distanceFieldType?La:Na,c=null,d=0,f=0,p=0,m=-1,y=0,g=0,_=0,v=0,b=0;b<l.length;b++){var x=Da(X=l[b]);if(/(?:\s)/.test(X)&&(m=b,y=d,v++),"\r"!==X&&"\n"!==X){var T=e.chars[x];if(T){c&&T.kerning[c]&&(i.x+=T.kerning[c]);var S=Ba.pop()||{texture:pr.EMPTY,line:0,charCode:0,prevSpaces:0,position:new ue};S.texture=T.texture,S.line=p,S.charCode=x,S.position.x=i.x+T.xOffset+this._letterSpacing/2,S.position.y=i.y+T.yOffset,S.prevSpaces=v,o.push(S),d=S.position.x+Math.max(T.xAdvance-T.xOffset,T.texture.orig.width),i.x+=T.xAdvance+this._letterSpacing,_=Math.max(_,T.yOffset+T.texture.height),c=x,-1!==m&&u>0&&i.x>u&&(jt(o,1+m-++g,1+b-m),b=m,m=-1,s.push(y),a.push(o.length>0?o[o.length-1].prevSpaces:0),f=Math.max(f,y),p++,i.x=0,i.y+=e.lineHeight,c=null,v=0)}}else s.push(d),a.push(-1),f=Math.max(f,d),++p,++g,i.x=0,i.y+=e.lineHeight,c=null,v=0}var w=l[l.length-1];"\r"!==w&&"\n"!==w&&(/(?:\s)/.test(w)&&(d=y),s.push(d),f=Math.max(f,d),a.push(-1));var I=[];for(b=0;b<=p;b++){var A=0;"right"===this._align?A=f-s[b]:"center"===this._align?A=(f-s[b])/2:"justify"===this._align&&(A=a[b]<0?0:(f-s[b])/a[b]),I.push(A)}var M=o.length,P={},O=[],R=this._activePagesMeshData;h.push.apply(h,R);for(b=0;b<M;b++){var C=(V=o[b].texture).baseTexture.uid;if(!P[C]){if(!(Q=h.pop())){var D=new Sa,F=void 0,L=void 0;"none"===e.distanceFieldType?(F=new Ta(pr.EMPTY),L=E.NORMAL):(F=new Ta(pr.EMPTY,{program:fn.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),L=E.NORMAL_NPM);var N=new xa(D,F);N.blendMode=L,Q={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:N,vertices:null,uvs:null,indices:null}}Q.index=0,Q.indexCount=0,Q.vertexCount=0,Q.uvsCount=0,Q.total=0;var B=this._textureCache;B[C]=B[C]||new pr(V.baseTexture),Q.mesh.texture=B[C],Q.mesh.tint=this._tint,O.push(Q),P[C]=Q}P[C].total++}for(b=0;b<R.length;b++)-1===O.indexOf(R[b])&&this.removeChild(R[b].mesh);for(b=0;b<O.length;b++)O[b].mesh.parent!==this&&this.addChild(O[b].mesh);for(var b in this._activePagesMeshData=O,P){var k=(Q=P[b]).total;if(!((null===(t=Q.indices)||void 0===t?void 0:t.length)>6*k)||Q.vertices.length<2*xa.BATCHABLE_SIZE)Q.vertices=new Float32Array(8*k),Q.uvs=new Float32Array(8*k),Q.indices=new Uint16Array(6*k);else for(var U=Q.total,G=Q.vertices,j=4*U*2;j<G.length;j++)G[j]=0;Q.mesh.size=6*k}for(b=0;b<M;b++){var X,z=(X=o[b]).position.x+I[X.line]*("justify"===this._align?X.prevSpaces:1);this._roundPixels&&(z=Math.round(z));var V,H=z*n,Y=X.position.y*n,W=P[(V=X.texture).baseTexture.uid],q=V.frame,$=V._uvs,K=W.index++;W.indices[6*K+0]=0+4*K,W.indices[6*K+1]=1+4*K,W.indices[6*K+2]=2+4*K,W.indices[6*K+3]=0+4*K,W.indices[6*K+4]=2+4*K,W.indices[6*K+5]=3+4*K,W.vertices[8*K+0]=H,W.vertices[8*K+1]=Y,W.vertices[8*K+2]=H+q.width*n,W.vertices[8*K+3]=Y,W.vertices[8*K+4]=H+q.width*n,W.vertices[8*K+5]=Y+q.height*n,W.vertices[8*K+6]=H,W.vertices[8*K+7]=Y+q.height*n,W.uvs[8*K+0]=$.x0,W.uvs[8*K+1]=$.y0,W.uvs[8*K+2]=$.x1,W.uvs[8*K+3]=$.y1,W.uvs[8*K+4]=$.x2,W.uvs[8*K+5]=$.y2,W.uvs[8*K+6]=$.x3,W.uvs[8*K+7]=$.y3}for(var b in this._textWidth=f*n,this._textHeight=(i.y+e.lineHeight)*n,P){var Q=P[b];if(0!==this.anchor.x||0!==this.anchor.y)for(var Z=0,J=this._textWidth*this.anchor.x,tt=this._textHeight*this.anchor.y,et=0;et<Q.total;et++)Q.vertices[Z++]-=J,Q.vertices[Z++]-=tt,Q.vertices[Z++]-=J,Q.vertices[Z++]-=tt,Q.vertices[Z++]-=J,Q.vertices[Z++]-=tt,Q.vertices[Z++]-=J,Q.vertices[Z++]-=tt;this._maxLineHeight=_*n;var rt=Q.mesh.geometry.getBuffer("aVertexPosition"),nt=Q.mesh.geometry.getBuffer("aTextureCoord"),it=Q.mesh.geometry.getIndex();rt.data=Q.vertices,nt.data=Q.uvs,it.data=Q.indices,rt.update(),nt.update(),it.update()}for(b=0;b<o.length;b++)Ba.push(o[b]);this._font=e,this.dirty=!1},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);var r=Fa.available[this._fontName],n=r.distanceFieldRange,i=r.distanceFieldType,o=r.size;if("none"!==i)for(var s=this.worldTransform,a=s.a,l=s.b,u=s.c,h=s.d,c=Math.sqrt(a*a+l*l),d=Math.sqrt(u*u+h*h),f=(Math.abs(c)+Math.abs(d))/2,p=this.fontSize/o,m=0,y=this._activePagesMeshData;m<y.length;m++){y[m].mesh.shader.uniforms.uFWidth=f*n*p*this._resolution}t.prototype._render.call(this,e)},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){var t=Fa.available[this._fontName];if(!t)throw new Error('Missing BitmapFont "'+this._fontName+'"');this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!Fa.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){var t;return null!==(t=this._fontSize)&&void 0!==t?t:Fa.available[this._fontName].size},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){"number"===typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null===t||void 0===t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.prototype.destroy=function(e){var r=this._textureCache,n="none"===Fa.available[this._fontName].distanceFieldType?La:Na;n.push.apply(n,this._activePagesMeshData);for(var i=0,o=this._activePagesMeshData;i<o.length;i++){var s=o[i];this.removeChild(s.mesh)}for(var a in this._activePagesMeshData=[],n.filter((function(t){return r[t.mesh.texture.baseTexture.uid]})).forEach((function(t){t.mesh.texture=pr.EMPTY})),r){r[a].destroy(),delete r[a]}this._font=null,this._textureCache=null,t.prototype.destroy.call(this,e)},e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},e}(De),Ua=function(){function t(){}return t.add=function(){Gi.setExtensionXhrType("fnt",Gi.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,r){var n=Oa(e.data);if(n)for(var i=t.getBaseUrl(this,e),o=n.parse(e.data),s={},a=function(t){s[t.metadata.pageFile]=t.texture,Object.keys(s).length===o.page.length&&(e.bitmapFont=Fa.install(o,s,!0),r())},l=0;l<o.page.length;++l){var u=o.page[l].file,h=i+u,c=!1;for(var d in this.resources){var f=this.resources[d];if(f.url===h){f.metadata.pageFile=u,f.texture?a(f):f.onAfterMiddleware.add(a),c=!0;break}}if(!c){var p={crossOrigin:e.crossOrigin,loadType:Gi.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:u},e.metadata.imageMetadata),parentResource:e};this.add(h,p,a)}}else r()},t.getBaseUrl=function(e,r){var n=r.isDataUrl?"":t.dirname(r.url);return r.isDataUrl&&("."===n&&(n=""),e.baseUrl&&n&&"/"===e.baseUrl.charAt(e.baseUrl.length-1)&&(n+="/")),(n=n.replace(e.baseUrl,""))&&"/"!==n.charAt(n.length-1)&&(n+="/"),n},t.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},t.extension=Fe.Loader,t}(),Ga=function(t,e){return Ga=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},Ga(t,e)};var ja=function(t){function e(e){void 0===e&&(e=1);var r=t.call(this,Jn,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return r.alpha=e,r}return function(t,e){function r(){this.constructor=t}Ga(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(yn),Xa=function(t,e){return Xa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},Xa(t,e)};function za(t,e){function r(){this.constructor=t}Xa(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var Va={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Ha=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");var Ya=function(t){function e(e,r,n,i,o){void 0===r&&(r=8),void 0===n&&(n=4),void 0===i&&(i=ht.FILTER_RESOLUTION),void 0===o&&(o=5);var s=this,a=function(t,e){var r,n=Math.ceil(t/2),i="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",o="";r=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<t;s++){var a=r.replace("%index%",s.toString());o+=a=a.replace("%sampleIndex%",s-(n-1)+".0"),o+="\n"}return(i=i.replace("%blur%",o)).replace("%size%",t.toString())}(o,e),l=function(t){for(var e,r=Va[t],n=r.length,i=Ha,o="",s=0;s<t;s++){var a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",s.toString());e=s,s>=n&&(e=t-s-1),o+=a=a.replace("%value%",r[e].toString()),o+="\n"}return(i=i.replace("%blur%",o)).replace("%size%",t.toString())}(o);return(s=t.call(this,a,l)||this).horizontal=e,s.resolution=i,s._quality=0,s.quality=n,s.blur=r,s}return za(e,t),e.prototype.apply=function(t,e,r,n){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/e.width):this.uniforms.strength=1/r.height*(r.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,r,n);else{var i=t.getFilterTexture(),o=t.renderer,s=e,a=i;this.state.blend=!1,t.applyFilter(this,s,a,L.CLEAR);for(var l=1;l<this.passes-1;l++){t.bindAndClear(s,L.BLIT),this.uniforms.uSampler=a;var u=a;a=s,s=u,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,a,r,n),t.returnFilterTexture(i)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e}(yn),Wa=function(t){function e(e,r,n,i){void 0===e&&(e=8),void 0===r&&(r=4),void 0===n&&(n=ht.FILTER_RESOLUTION),void 0===i&&(i=5);var o=t.call(this)||this;return o.blurXFilter=new Ya(!0,e,r,n,i),o.blurYFilter=new Ya(!1,e,r,n,i),o.resolution=n,o.quality=r,o.blur=e,o.repeatEdgePixels=!1,o}return za(e,t),e.prototype.apply=function(t,e,r,n){var i=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(i&&o){var s=t.getFilterTexture();this.blurXFilter.apply(t,e,s,L.CLEAR),this.blurYFilter.apply(t,s,r,n),t.returnFilterTexture(s)}else o?this.blurYFilter.apply(t,e,r,n):this.blurXFilter.apply(t,e,r,n)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),e}(yn),qa=function(t,e){return qa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},qa(t,e)};var $a=function(t){function e(){var e=this,r={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(e=t.call(this,ti,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",r)||this).alpha=1,e}return function(t,e){function r(){this.constructor=t}qa(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var r=t;e&&(this._multiply(r,this.uniforms.m,t),r=this._colorMatrix(r)),this.uniforms.m=r},e.prototype._multiply=function(t,e,r){return t[0]=e[0]*r[0]+e[1]*r[5]+e[2]*r[10]+e[3]*r[15],t[1]=e[0]*r[1]+e[1]*r[6]+e[2]*r[11]+e[3]*r[16],t[2]=e[0]*r[2]+e[1]*r[7]+e[2]*r[12]+e[3]*r[17],t[3]=e[0]*r[3]+e[1]*r[8]+e[2]*r[13]+e[3]*r[18],t[4]=e[0]*r[4]+e[1]*r[9]+e[2]*r[14]+e[3]*r[19]+e[4],t[5]=e[5]*r[0]+e[6]*r[5]+e[7]*r[10]+e[8]*r[15],t[6]=e[5]*r[1]+e[6]*r[6]+e[7]*r[11]+e[8]*r[16],t[7]=e[5]*r[2]+e[6]*r[7]+e[7]*r[12]+e[8]*r[17],t[8]=e[5]*r[3]+e[6]*r[8]+e[7]*r[13]+e[8]*r[18],t[9]=e[5]*r[4]+e[6]*r[9]+e[7]*r[14]+e[8]*r[19]+e[9],t[10]=e[10]*r[0]+e[11]*r[5]+e[12]*r[10]+e[13]*r[15],t[11]=e[10]*r[1]+e[11]*r[6]+e[12]*r[11]+e[13]*r[16],t[12]=e[10]*r[2]+e[11]*r[7]+e[12]*r[12]+e[13]*r[17],t[13]=e[10]*r[3]+e[11]*r[8]+e[12]*r[13]+e[13]*r[18],t[14]=e[10]*r[4]+e[11]*r[9]+e[12]*r[14]+e[13]*r[19]+e[14],t[15]=e[15]*r[0]+e[16]*r[5]+e[17]*r[10]+e[18]*r[15],t[16]=e[15]*r[1]+e[16]*r[6]+e[17]*r[11]+e[18]*r[16],t[17]=e[15]*r[2]+e[16]*r[7]+e[17]*r[12]+e[18]*r[17],t[18]=e[15]*r[3]+e[16]*r[8]+e[17]*r[13]+e[18]*r[18],t[19]=e[15]*r[4]+e[16]*r[9]+e[17]*r[14]+e[18]*r[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var r=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.tint=function(t,e){var r=[(t>>16&255)/255,0,0,0,0,0,(t>>8&255)/255,0,0,0,0,0,(255&t)/255,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.greyscale=function(t,e){var r=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var r=Math.cos(t),n=Math.sin(t),i=1/3,o=(0,Math.sqrt)(i),s=[r+(1-r)*i,i*(1-r)-o*n,i*(1-r)+o*n,0,0,i*(1-r)+o*n,r+i*(1-r),i*(1-r)-o*n,0,0,i*(1-r)-o*n,i*(1-r)+o*n,r+i*(1-r),0,0,0,0,0,1,0];this._loadMatrix(s,e)},e.prototype.contrast=function(t,e){var r=(t||0)+1,n=-.5*(r-1),i=[r,0,0,0,n,0,r,0,0,n,0,0,r,0,n,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.saturate=function(t,e){void 0===t&&(t=0);var r=2*t/3+1,n=-.5*(r-1),i=[r,n,n,0,0,n,r,n,0,0,n,n,r,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,r,n,i){var o=((r=r||16770432)>>16&255)/255,s=(r>>8&255)/255,a=(255&r)/255,l=((n=n||3375104)>>16&255)/255,u=(n>>8&255)/255,h=(255&n)/255,c=[.3,.59,.11,0,0,o,s,a,t=t||.2,0,l,u,h,e=e||.15,0,o-l,s-u,a-h,0,0];this._loadMatrix(c,i)},e.prototype.night=function(t,e){var r=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.predator=function(t,e){var r=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(yn);$a.prototype.grayscale=$a.prototype.greyscale;var Ka=function(t,e){return Ka=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},Ka(t,e)};var Qa=function(t){function e(e,r){var n=this,i=new ge;return e.renderable=!1,(n=t.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=e,n.maskMatrix=i,null!==r&&void 0!==r||(r=20),n.scale=new ue(r,r),n}return function(t,e){function r(){this.constructor=t}Ka(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype.apply=function(t,e,r,n){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var i=this.maskSprite.worldTransform,o=Math.sqrt(i.a*i.a+i.b*i.b),s=Math.sqrt(i.c*i.c+i.d*i.d);0!==o&&0!==s&&(this.uniforms.rotation[0]=i.a/o,this.uniforms.rotation[1]=i.b/o,this.uniforms.rotation[2]=i.c/s,this.uniforms.rotation[3]=i.d/s),t.applyFilter(this,e,r,n)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),e}(yn),Za=function(t,e){return Za=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},Za(t,e)};var Ja=function(t){function e(){return t.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}return function(t,e){function r(){this.constructor=t}Za(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e}(yn),tl=function(t,e){return tl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},tl(t,e)};var el=function(t){function e(e,r){void 0===e&&(e=.5),void 0===r&&(r=Math.random());var n=t.call(this,ti,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return n.noise=e,n.seed=r,n}return function(t,e){function r(){this.constructor=t}tl(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),e}(yn),rl=new ge;Oe.prototype._cacheAsBitmap=!1,Oe.prototype._cacheData=null,Oe.prototype._cacheAsBitmapResolution=null,Oe.prototype._cacheAsBitmapMultisample=G.NONE;var nl=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(Oe.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new nl),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),Oe.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},Oe.prototype._initCachedDisplayObject=function(t){var e;if(!this._cacheData||!this._cacheData.sprite){var r=this.alpha;this.alpha=1,t.batch.flush();var n=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var i=this.filters[0].padding;n.pad(i)}n.ceil(ht.RESOLUTION);var o=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),a=t.renderTexture.destinationFrame.clone(),l=t.projection.transform,u=mr.create({width:n.width,height:n.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:null!==(e=this.cacheAsBitmapMultisample)&&void 0!==e?e:t.multisample}),h="cacheAsBitmap_"+Vt();this._cacheData.textureCacheId=h,Qe.addToCache(u.baseTexture,h),pr.addToCache(u,h);var c=this.transform.localTransform.copyTo(rl).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:u,clear:!0,transform:c,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=l,t.renderTexture.bind(o,s,a),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;var d=new Fs(u);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-n.x/n.width,d.anchor.y=-n.y/n.height,d.alpha=r,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)}},Oe.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},Oe.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;var n=t.context,i=t._projTransform;e.ceil(ht.RESOLUTION);var o=mr.create({width:e.width,height:e.height}),s="cacheAsBitmap_"+Vt();this._cacheData.textureCacheId=s,Qe.addToCache(o.baseTexture,s),pr.addToCache(o,s);var a=rl;this.transform.localTransform.copyTo(a),a.invert(),a.tx-=e.x,a.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:a,skipUpdateTransform:!1}),t.context=n,t._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;var l=new Fs(o);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-e.x/e.width,l.anchor.y=-e.y/e.height,l.alpha=r,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)}},Oe.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},Oe.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},Oe.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Qe.removeFromCache(this._cacheData.textureCacheId),pr.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},Oe.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},Oe.prototype.name=null,De.prototype.getChildByName=function(t,e){for(var r=0,n=this.children.length;r<n;r++)if(this.children[r].name===t)return this.children[r];if(e)for(r=0,n=this.children.length;r<n;r++){var i=this.children[r];if(i.getChildByName){var o=i.getChildByName(t,!0);if(o)return o}}return null},Oe.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new ue),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var il=function(){function t(){}return t.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){e._resizeTo&&(e.cancelResize(),e._resizeId=requestAnimationFrame((function(){return e.resize()})))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(e._resizeTo){var t,r;if(e.cancelResize(),e._resizeTo===globalThis.window)t=globalThis.innerWidth,r=globalThis.innerHeight;else{var n=e._resizeTo;t=n.clientWidth,r=n.clientHeight}e.renderer.resize(t,r)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},t.destroy=function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},t.extension=Fe.Application,t}(),ol=function(){function t(e){var r=this;this.stage=new De,e=Object.assign({forceCanvas:!1},e),this.renderer=Zn(e),t._plugins.forEach((function(t){t.init.call(r,e)}))}return t.registerPlugin=function(t){Yt("6.5.0","Application.registerPlugin() is deprecated, use extensions.add()"),ke.add({type:Fe.Application,ref:t})},t.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e,r){var n=this,i=t._plugins.slice(0);i.reverse(),i.forEach((function(t){t.destroy.call(n)})),this.stage.destroy(r),this.stage=null,this.renderer.destroy(e),this.renderer=null},t._plugins=[],t}();ke.handleByList(Fe.Application,ol._plugins),ke.add(il);var sl=function(t,e){return sl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},sl(t,e)};function al(t,e){function r(){this.constructor=t}sl(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var ll=function(t){function e(e,r,n,i){void 0===e&&(e=100),void 0===r&&(r=100),void 0===n&&(n=10),void 0===i&&(i=10);var o=t.call(this)||this;return o.segWidth=n,o.segHeight=i,o.width=e,o.height=r,o.build(),o}return al(e,t),e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],r=[],n=[],i=this.segWidth-1,o=this.segHeight-1,s=this.width/i,a=this.height/o,l=0;l<t;l++){var u=l%this.segWidth,h=l/this.segWidth|0;e.push(u*s,h*a),r.push(u/i,h/o)}var c=i*o;for(l=0;l<c;l++){var d=l%i,f=l/i|0,p=f*this.segWidth+d,m=f*this.segWidth+d+1,y=(f+1)*this.segWidth+d,g=(f+1)*this.segWidth+d+1;n.push(p,m,y,m,g,y)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(r),this.indexBuffer.data=new Uint16Array(n),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(Sa),ul=function(t){function e(e,r,n){void 0===e&&(e=200),void 0===n&&(n=0);var i=t.call(this,new Float32Array(4*r.length),new Float32Array(4*r.length),new Uint16Array(6*(r.length-1)))||this;return i.points=r,i._width=e,i.textureScale=n,i.build(),i}return al(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var e=this.getBuffer("aVertexPosition"),r=this.getBuffer("aTextureCoord"),n=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),r.data=new Float32Array(4*t.length),n.data=new Uint16Array(6*(t.length-1)));var i=r.data,o=n.data;i[0]=0,i[1]=0,i[2]=0,i[3]=1;for(var s=0,a=t[0],l=this._width*this.textureScale,u=t.length,h=0;h<u;h++){var c=4*h;if(this.textureScale>0){var d=a.x-t[h].x,f=a.y-t[h].y,p=Math.sqrt(d*d+f*f);a=t[h],s+=p/l}else s=h/(u-1);i[c]=s,i[c+1]=0,i[c+2]=s,i[c+3]=1}var m=0;for(h=0;h<u-1;h++){c=2*h;o[m++]=c,o[m++]=c+1,o[m++]=c+2,o[m++]=c+2,o[m++]=c+1,o[m++]=c+3}r.update(),n.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var e,r=t[0],n=0,i=0,o=this.buffers[0].data,s=t.length,a=0;a<s;a++){var l=t[a],u=4*a;i=-((e=a<t.length-1?t[a+1]:l).x-r.x),n=e.y-r.y;var h=Math.sqrt(n*n+i*i),c=this.textureScale>0?this.textureScale*this._width/2:this._width/2;n/=h,i/=h,n*=c,i*=c,o[u]=l.x+n,o[u+1]=l.y+i,o[u+2]=l.x-n,o[u+3]=l.y-i,r=l}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(Sa),hl=function(t){function e(e,r,n){void 0===n&&(n=0);var i=this,o=new ul(e.height,r,n),s=new Ta(e);return n>0&&(e.baseTexture.wrapMode=C.REPEAT),(i=t.call(this,o,s)||this).autoUpdate=!0,i}return al(e,t),e.prototype._render=function(e){var r=this.geometry;(this.autoUpdate||r._width!==this.shader.texture.height)&&(r._width=this.shader.texture.height,r.update()),t.prototype._render.call(this,e)},e}(xa),cl=function(t){function e(e,r,n){var i=this,o=new ll(e.width,e.height,r,n),s=new Ta(pr.WHITE);return(i=t.call(this,o,s)||this).texture=e,i.autoResize=!0,i}return al(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry,e=this.shader.texture,r=e.width,n=e.height;!this.autoResize||t.width===r&&t.height===n||(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,e)},e.prototype.destroy=function(e){this.shader.texture.off("update",this.textureUpdated,this),t.prototype.destroy.call(this,e)},e}(xa),dl=function(t){function e(e,r,n,i,o){void 0===e&&(e=pr.EMPTY);var s=this,a=new Sa(r,n,i);a.getBuffer("aVertexPosition").static=!1;var l=new Ta(e);return(s=t.call(this,a,l,null,o)||this).autoUpdate=!0,s}return al(e,t),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,e)},e}(xa),fl=function(t){function e(e,r,n,i,o){void 0===r&&(r=10),void 0===n&&(n=10),void 0===i&&(i=10),void 0===o&&(o=10);var s=t.call(this,pr.WHITE,4,4)||this;return s._origWidth=e.orig.width,s._origHeight=e.orig.height,s._width=s._origWidth,s._height=s._origHeight,s._leftWidth=r,s._rightWidth=i,s._topHeight=n,s._bottomHeight=o,s.texture=e,s}return al(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,r=this._topHeight+this._bottomHeight,n=this._height>r?1:this._height/r;return Math.min(e,n)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var r=1/this._origWidth,n=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=r*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-r*this._rightWidth,e[9]=e[11]=e[13]=e[15]=n*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-n*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},e}(cl),pl=function(t,e){return pl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])},pl(t,e)};var ml=function(t){function e(e,r){void 0===r&&(r=!0);var n=t.call(this,e[0]instanceof pr?e[0]:e[0].texture)||this;return n._textures=null,n._durations=null,n._autoUpdate=r,n._isConnectedToTicker=!1,n.animationSpeed=1,n.loop=!0,n.updateAnchor=!1,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n._playing=!1,n._previousFrame=null,n.textures=e,n}return function(t,e){function r(){this.constructor=t}pl(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(je.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(je.shared.add(this.update,this,Ne.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){if(this._playing){var e=this.animationSpeed*t,r=this.currentFrame;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=e/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var i=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this.updateTexture())}},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var r=[],n=0;n<t.length;++n)r.push(pr.from(t[n]));return new e(r)},e.fromImages=function(t){for(var r=[],n=0;n<t.length;++n)r.push(pr.from(t[n]));return new e(r)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof pr)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(je.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(je.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),e}(Fs);ke.add(bi,Oi,Mi,Jo,oa,ci,ma,Ua,uo,Ho,Yo,la,Xe,Wi);var yl={AlphaFilter:ja,BlurFilter:Wa,BlurFilterPass:Ya,ColorMatrixFilter:$a,DisplacementFilter:Qa,FXAAFilter:Ja,NoiseFilter:el},gl=Math.pow,_l=(t,e,r)=>new Promise(((n,i)=>{var o=t=>{try{a(r.next(t))}catch(e){i(e)}},s=t=>{try{a(r.throw(t))}catch(e){i(e)}},a=t=>t.done?n(t.value):Promise.resolve(t.value).then(o,s);a((r=r.apply(t,e)).next())}));var vl,bl,xl,Tl;(bl=vl||(vl={})).supportMoreMaskDivisions=!0,bl.setOpacityFromMotion=!1,(Tl=xl||(xl={})).LOG_LEVEL_VERBOSE=0,Tl.LOG_LEVEL_WARNING=1,Tl.LOG_LEVEL_ERROR=2,Tl.LOG_LEVEL_NONE=999,Tl.logLevel=Tl.LOG_LEVEL_WARNING,Tl.sound=!0,Tl.motionSync=!0,Tl.motionFadingDuration=500,Tl.idleMotionFadingDuration=2e3,Tl.expressionFadingDuration=500,Tl.preserveExpressionOnMotion=!0,Tl.cubism4=vl;const Sl={log(t){if(xl.logLevel<=xl.LOG_LEVEL_VERBOSE){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];console.log("[".concat(t,"]"),...r)}},warn(t){if(xl.logLevel<=xl.LOG_LEVEL_WARNING){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];console.warn("[".concat(t,"]"),...r)}},error(t){if(xl.logLevel<=xl.LOG_LEVEL_ERROR){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];console.error("[".concat(t,"]"),...r)}}};function wl(t,e,r){return t<e?e:t>r?r:t}function El(t,e,r,n,i){const o=e[n];null!==o&&typeof o===t&&(r[i]=o)}function Il(t,e,r,n,i){const o=e[n];Array.isArray(o)&&(r[i]=o.filter((e=>null!==e&&typeof e===t)))}function Al(t,e){e.forEach((e=>{Object.getOwnPropertyNames(e.prototype).forEach((r=>{"constructor"!==r&&Object.defineProperty(t.prototype,r,Object.getOwnPropertyDescriptor(e.prototype,r))}))}))}class Ml extends ct{constructor(t,e){super(),this.expressions=[],this.reserveExpressionIndex=-1,this.destroyed=!1,this.settings=t,this.tag="ExpressionManager(".concat(t.name,")")}init(){this.defaultExpression=this.createExpression({},void 0),this.currentExpression=this.defaultExpression,this.stopAllExpressions()}loadExpression(t){return _l(this,null,(function*(){if(!this.definitions[t])return void Sl.warn(this.tag,"Undefined expression at [".concat(t,"]"));if(null===this.expressions[t])return void Sl.warn(this.tag,"Cannot set expression at [".concat(t,"] because it's already failed in loading."));if(this.expressions[t])return this.expressions[t];const e=yield this._loadExpression(t);return this.expressions[t]=e,e}))}_loadExpression(t){throw new Error("Not implemented.")}setRandomExpression(){return _l(this,null,(function*(){if(this.definitions.length){const t=[];for(let e=0;e<this.definitions.length;e++)null!==this.expressions[e]&&this.expressions[e]!==this.currentExpression&&e!==this.reserveExpressionIndex&&t.push(e);if(t.length){const e=Math.floor(Math.random()*t.length);return this.setExpression(e)}}return!1}))}resetExpression(){this._setExpression(this.defaultExpression)}restoreExpression(){this._setExpression(this.currentExpression)}setExpression(t){return _l(this,null,(function*(){if("number"!==typeof t&&(t=this.getExpressionIndex(t)),!(t>-1&&t<this.definitions.length))return!1;if(t===this.expressions.indexOf(this.currentExpression))return!1;this.reserveExpressionIndex=t;const e=yield this.loadExpression(t);return!(!e||this.reserveExpressionIndex!==t)&&(this.reserveExpressionIndex=-1,this.currentExpression=e,this._setExpression(e),!0)}))}update(t,e){return!this.isFinished()&&this.updateParameters(t,e)}destroy(){this.destroyed=!0,this.emit("destroy");this.definitions=void 0,this.expressions=void 0}}class Pl{constructor(){this.targetX=0,this.targetY=0,this.x=0,this.y=0,this.vx=0,this.vy=0}focus(t,e){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.targetX=wl(t,-1,1),this.targetY=wl(e,-1,1),r&&(this.x=this.targetX,this.y=this.targetY)}update(t){const e=this.targetX-this.x,r=this.targetY-this.y;if(Math.abs(e)<.01&&Math.abs(r)<.01)return;const n=Math.sqrt(gl(e,2)+gl(r,2)),i=5.333333333333333/(1e3/t);let o=i*(e/n)-this.vx,s=i*(r/n)-this.vy;const a=Math.sqrt(gl(o,2)+gl(s,2)),l=.006666666666666667*i*t;a>l&&(o*=l/a,s*=l/a),this.vx+=o,this.vy+=s;const u=Math.sqrt(gl(this.vx,2)+gl(this.vy,2)),h=.5*(Math.sqrt(gl(l,2)+8*l*n)-l);u>h&&(this.vx*=h/u,this.vy*=h/u),this.x+=this.vx,this.y+=this.vy}}class Ol{constructor(t){this.json=t;let e=t.url;if("string"!==typeof e)throw new TypeError("The `url` field in settings JSON must be defined as a string.");this.url=e,this.name=function(t){let e=t.lastIndexOf("/");return-1!=e&&(t=t.slice(0,e)),e=t.lastIndexOf("/"),-1!==e&&(t=t.slice(e+1)),t}(this.url)}resolveURL(t){return pt.resolve(this.url,t)}replaceFiles(t){this.moc=t(this.moc,"moc"),void 0!==this.pose&&(this.pose=t(this.pose,"pose")),void 0!==this.physics&&(this.physics=t(this.physics,"physics"));for(let e=0;e<this.textures.length;e++)this.textures[e]=t(this.textures[e],"textures[".concat(e,"]"))}getDefinedFiles(){const t=[];return this.replaceFiles((e=>(t.push(e),e))),t}validateFiles(t){const e=(e,r)=>{const n=this.resolveURL(e);if(!t.includes(n)){if(r)throw new Error('File "'.concat(e,"\" is defined in settings, but doesn't exist in given files"));return!1}return!0};[this.moc,...this.textures].forEach((t=>e(t,!0)));return this.getDefinedFiles().filter((t=>e(t,!1)))}}var Rl=(t=>(t[t.NONE=0]="NONE",t[t.IDLE=1]="IDLE",t[t.NORMAL=2]="NORMAL",t[t.FORCE=3]="FORCE",t))(Rl||{});class Cl{constructor(){this.debug=!1,this.currentPriority=0,this.reservePriority=0}reserve(t,e,r){if(r<=0)return Sl.log(this.tag,"Cannot start a motion with MotionPriority.NONE."),!1;if(t===this.currentGroup&&e===this.currentIndex)return Sl.log(this.tag,"Motion is already playing.",this.dump(t,e)),!1;if(t===this.reservedGroup&&e===this.reservedIndex||t===this.reservedIdleGroup&&e===this.reservedIdleIndex)return Sl.log(this.tag,"Motion is already reserved.",this.dump(t,e)),!1;if(1===r){if(0!==this.currentPriority)return Sl.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(t,e)),!1;if(void 0!==this.reservedIdleGroup)return Sl.log(this.tag,"Cannot start idle motion because another idle motion has reserved.",this.dump(t,e)),!1;this.setReservedIdle(t,e)}else{if(r<3){if(r<=this.currentPriority)return Sl.log(this.tag,"Cannot start motion because another motion is playing as an equivalent or higher priority.",this.dump(t,e)),!1;if(r<=this.reservePriority)return Sl.log(this.tag,"Cannot start motion because another motion has reserved as an equivalent or higher priority.",this.dump(t,e)),!1}this.setReserved(t,e,r)}return!0}start(t,e,r,n){if(1===n){if(this.setReservedIdle(void 0,void 0),0!==this.currentPriority)return Sl.log(this.tag,"Cannot start idle motion because another motion is playing.",this.dump(e,r)),!1}else{if(e!==this.reservedGroup||r!==this.reservedIndex)return Sl.log(this.tag,"Cannot start motion because another motion has taken the place.",this.dump(e,r)),!1;this.setReserved(void 0,void 0,0)}return!!t&&(this.setCurrent(e,r,n),!0)}complete(){this.setCurrent(void 0,void 0,0)}setCurrent(t,e,r){this.currentPriority=r,this.currentGroup=t,this.currentIndex=e}setReserved(t,e,r){this.reservePriority=r,this.reservedGroup=t,this.reservedIndex=e}setReservedIdle(t,e){this.reservedIdleGroup=t,this.reservedIdleIndex=e}isActive(t,e){return t===this.currentGroup&&e===this.currentIndex||t===this.reservedGroup&&e===this.reservedIndex||t===this.reservedIdleGroup&&e===this.reservedIdleIndex}reset(){this.setCurrent(void 0,void 0,0),this.setReserved(void 0,void 0,0),this.setReservedIdle(void 0,void 0)}shouldRequestIdleMotion(){return void 0===this.currentGroup&&void 0===this.reservedIdleGroup}shouldOverrideExpression(){return!xl.preserveExpressionOnMotion&&this.currentPriority>1}dump(t,e){if(this.debug){const r=["currentPriority","reservePriority","currentGroup","currentIndex","reservedGroup","reservedIndex","reservedIdleGroup","reservedIdleIndex"];return'\n<Requested> group = "'.concat(t,'", index = ').concat(e,"\n")+r.map((t=>"["+t+"] "+this[t])).join("\n")}return""}}class Dl{static get volume(){return this._volume}static set volume(t){this._volume=(t>1?1:t<0?0:t)||0,this.audios.forEach((t=>t.volume=this._volume))}static add(t,e,r){const n=new Audio(t);return n.volume=this._volume,n.preload="auto",n.addEventListener("ended",(()=>{this.dispose(n),null==e||e()})),n.addEventListener("error",(e=>{this.dispose(n),Sl.warn("SoundManager",'Error occurred on "'.concat(t,'"'),e.error),null==r||r(e.error)})),this.audios.push(n),n}static play(t){return new Promise(((e,r)=>{var n;null==(n=t.play())||n.catch((e=>{t.dispatchEvent(new ErrorEvent("error",{error:e})),r(e)})),t.readyState===t.HAVE_ENOUGH_DATA?e():t.addEventListener("canplaythrough",e)}))}static dispose(t){t.pause(),t.removeAttribute("src"),function(t,e){const r=t.indexOf(e);-1!==r&&t.splice(r,1)}(this.audios,t)}static destroy(){for(let t=this.audios.length-1;t>=0;t--)this.dispose(this.audios[t])}}Dl.audios=[],Dl._volume=.5;class Fl extends ct{constructor(t,e){super(),this.motionGroups={},this.state=new Cl,this.playing=!1,this.destroyed=!1,this.settings=t,this.tag="MotionManager(".concat(t.name,")"),this.state.tag=this.tag}init(t){(null==t?void 0:t.idleMotionGroup)&&(this.groups.idle=t.idleMotionGroup),this.setupMotions(t),this.stopAllMotions()}setupMotions(t){for(const r of Object.keys(this.definitions))this.motionGroups[r]=[];let e;switch(null==t?void 0:t.motionPreload){case"NONE":return;case"ALL":e=Object.keys(this.definitions);break;default:e=[this.groups.idle]}for(const r of e)if(this.definitions[r])for(let t=0;t<this.definitions[r].length;t++)this.loadMotion(r,t).then()}loadMotion(t,e){return _l(this,null,(function*(){var r;if(!(null==(r=this.definitions[t])?void 0:r[e]))return void Sl.warn(this.tag,'Undefined motion at "'.concat(t,'"[').concat(e,"]"));if(null===this.motionGroups[t][e])return void Sl.warn(this.tag,'Cannot start motion at "'.concat(t,'"[').concat(e,"] because it's already failed in loading."));if(this.motionGroups[t][e])return this.motionGroups[t][e];const n=yield this._loadMotion(t,e);return this.destroyed?void 0:(this.motionGroups[t][e]=null!=n?n:null,n)}))}_loadMotion(t,e){throw new Error("Not implemented.")}startMotion(t,e){return _l(this,arguments,(function(t,e){var r=this;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Rl.NORMAL;return function*(){var i;if(!r.state.reserve(t,e,n))return!1;const o=null==(i=r.definitions[t])?void 0:i[e];if(!o)return!1;let s;if(r.currentAudio&&Dl.dispose(r.currentAudio),xl.sound){const t=r.getSoundFile(o);if(t)try{s=Dl.add(r.settings.resolveURL(t),(()=>r.currentAudio=void 0),(()=>r.currentAudio=void 0)),r.currentAudio=s}catch(l){Sl.warn(r.tag,"Failed to create audio",t,l)}}const a=yield r.loadMotion(t,e);if(s){const t=Dl.play(s).catch((t=>Sl.warn(r.tag,"Failed to play audio",s.src,t)));xl.motionSync&&(yield t)}return r.state.start(a,t,e,n)?(Sl.log(r.tag,"Start motion:",r.getMotionName(o)),r.emit("motionStart",t,e,s),r.state.shouldOverrideExpression()&&r.expressionManager&&r.expressionManager.resetExpression(),r.playing=!0,r._startMotion(a),!0):(s&&(Dl.dispose(s),r.currentAudio=void 0),!1)}()}))}startRandomMotion(t,e){return _l(this,null,(function*(){const r=this.definitions[t];if(null==r?void 0:r.length){const n=[];for(let e=0;e<r.length;e++)null===this.motionGroups[t][e]||this.state.isActive(t,e)||n.push(e);if(n.length){const r=Math.floor(Math.random()*n.length);return this.startMotion(t,n[r],e)}}return!1}))}stopAllMotions(){this._stopAllMotions(),this.state.reset(),this.currentAudio&&(Dl.dispose(this.currentAudio),this.currentAudio=void 0)}update(t,e){var r;return this.isFinished()&&(this.playing&&(this.playing=!1,this.emit("motionFinish")),this.state.shouldOverrideExpression()&&(null==(r=this.expressionManager)||r.restoreExpression()),this.state.complete(),this.state.shouldRequestIdleMotion()&&this.startRandomMotion(this.groups.idle,Rl.IDLE)),this.updateParameters(t,e)}destroy(){var t;this.destroyed=!0,this.emit("destroy"),this.stopAllMotions(),null==(t=this.expressionManager)||t.destroy();this.definitions=void 0,this.motionGroups=void 0}}const Ll={x:0,y:0,width:0,height:0};class Nl extends ct{constructor(){super(...arguments),this.focusController=new Pl,this.originalWidth=0,this.originalHeight=0,this.width=0,this.height=0,this.localTransform=new ge,this.drawingMatrix=new ge,this.hitAreas={},this.textureFlipY=!1,this.viewport=[0,0,0,0],this.destroyed=!1}init(){this.setupLayout(),this.setupHitAreas()}setupLayout(){const t=this,e=this.getSize();t.originalWidth=e[0],t.originalHeight=e[1];const r=Object.assign({width:2,height:2},this.getLayout());this.localTransform.scale(r.width/2,r.height/2),t.width=this.originalWidth*this.localTransform.a,t.height=this.originalHeight*this.localTransform.d;const n=void 0!==r.x&&r.x-r.width/2||void 0!==r.centerX&&r.centerX||void 0!==r.left&&r.left-r.width/2||void 0!==r.right&&r.right+r.width/2||0,i=void 0!==r.y&&r.y-r.height/2||void 0!==r.centerY&&r.centerY||void 0!==r.top&&r.top-r.height/2||void 0!==r.bottom&&r.bottom+r.height/2||0;this.localTransform.translate(this.width*n,-this.height*i)}setupHitAreas(){const t=this.getHitAreaDefs().filter((t=>t.index>=0));for(const e of t)this.hitAreas[e.name]=e}hitTest(t,e){return Object.keys(this.hitAreas).filter((r=>this.isHit(r,t,e)))}isHit(t,e,r){if(!this.hitAreas[t])return!1;const n=this.hitAreas[t].index,i=this.getDrawableBounds(n,Ll);return i.x<=e&&e<=i.x+i.width&&i.y<=r&&r<=i.y+i.height}getDrawableBounds(t,e){const r=this.getDrawableVertices(t);let n=r[0],i=r[0],o=r[1],s=r[1];for(let a=0;a<r.length;a+=2){const t=r[a],e=r[a+1];n=Math.min(t,n),i=Math.max(t,i),o=Math.min(e,o),s=Math.max(e,s)}return null!=e||(e={}),e.x=n,e.y=o,e.width=i-n,e.height=s-o,e}updateTransform(t){this.drawingMatrix.copyFrom(t).append(this.localTransform)}update(t,e){this.focusController.update(t)}destroy(){this.destroyed=!0,this.emit("destroy"),this.motionManager.destroy(),this.motionManager=void 0}}class Bl extends Error{constructor(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];super(t),this.url=e,this.status=r,this.aborted=n}}const kl=class{static createXHR(t,e,r,n,i){const o=new XMLHttpRequest;if(kl.allXhrSet.add(o),t){let e=kl.xhrMap.get(t);e?e.add(o):(e=new Set([o]),kl.xhrMap.set(t,e)),t.listeners("destroy").includes(kl.cancelXHRs)||t.once("destroy",kl.cancelXHRs)}return o.open("GET",e),o.responseType=r,o.onload=()=>{200!==o.status&&0!==o.status||!o.response?o.onerror():n(o.response)},o.onerror=()=>{Sl.warn("XHRLoader","Failed to load resource as ".concat(o.responseType," (Status ").concat(o.status,"): ").concat(e)),i(new Bl("Network error.",e,o.status))},o.onabort=()=>i(new Bl("Aborted.",e,o.status,!0)),o.onloadend=()=>{var e;kl.allXhrSet.delete(o),t&&(null==(e=kl.xhrMap.get(t))||e.delete(o))},o}static cancelXHRs(){var t;null==(t=kl.xhrMap.get(this))||t.forEach((t=>{t.abort(),kl.allXhrSet.delete(t)})),kl.xhrMap.delete(this)}static release(){kl.allXhrSet.forEach((t=>t.abort())),kl.allXhrSet.clear(),kl.xhrMap=new WeakMap}};let Ul=kl;function Gl(t,e){let r=-1;return function n(i,o){if(o)return Promise.reject(o);if(i<=r)return Promise.reject(new Error("next() called multiple times"));r=i;const s=t[i];if(!s)return Promise.resolve();try{return Promise.resolve(s(e,n.bind(null,i+1)))}catch(a){return Promise.reject(a)}}(0)}Ul.xhrMap=new WeakMap,Ul.allXhrSet=new Set,Ul.loader=(t,e)=>new Promise(((e,r)=>{kl.createXHR(t.target,t.settings?t.settings.resolveURL(t.url):t.url,t.type,(r=>{t.result=r,e()}),r).send()}));class jl{static load(t){return Gl(this.middlewares,t).then((()=>t.result))}}jl.middlewares=[Ul.loader];const Xl="Live2DFactory",zl=(t,e)=>_l(void 0,null,(function*(){if("string"===typeof t.source){const e=yield jl.load({url:t.source,type:"json",target:t.live2dModel});e.url=t.source,t.source=e,t.live2dModel.emit("settingsJSONLoaded",e)}return e()})),Vl=(t,e)=>_l(void 0,null,(function*(){if(t.source instanceof Ol)return t.settings=t.source,e();if("object"===typeof t.source){const r=Kl.findRuntime(t.source);if(r){const n=r.createModelSettings(t.source);return t.settings=n,t.live2dModel.emit("settingsLoaded",n),e()}}throw new TypeError("Unknown settings format.")})),Hl=(t,e)=>{if(t.settings){const r=Kl.findRuntime(t.settings);if(r)return r.ready().then(e)}return e()},Yl=(t,e)=>_l(void 0,null,(function*(){yield e();const r=t.internalModel;if(r){const e=t.settings,n=Kl.findRuntime(e);if(n){const i=[];e.pose&&i.push(jl.load({settings:e,url:e.pose,type:"json",target:r}).then((e=>{r.pose=n.createPose(r.coreModel,e),t.live2dModel.emit("poseLoaded",r.pose)})).catch((e=>{t.live2dModel.emit("poseLoadError",e),Sl.warn(Xl,"Failed to load pose.",e)}))),e.physics&&i.push(jl.load({settings:e,url:e.physics,type:"json",target:r}).then((e=>{r.physics=n.createPhysics(r.coreModel,e),t.live2dModel.emit("physicsLoaded",r.physics)})).catch((e=>{t.live2dModel.emit("physicsLoadError",e),Sl.warn(Xl,"Failed to load physics.",e)}))),i.length&&(yield Promise.all(i))}}})),Wl=(t,e)=>_l(void 0,null,(function*(){if(!t.settings)throw new TypeError("Missing settings.");{const r=t.live2dModel,n=t.settings.textures.map((e=>function(t){const e={resourceOptions:{crossorigin:(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).crossOrigin}};if(pr.fromURL)return pr.fromURL(t,e).catch((t=>{if(t instanceof Error)throw t;const e=new Error("Texture loading error");throw e.event=t,e}));e.resourceOptions.autoLoad=!1;const r=pr.from(t,e);if(r.baseTexture.valid)return Promise.resolve(r);const n=r.baseTexture.resource;return null!=n._live2d_load||(n._live2d_load=new Promise(((t,e)=>{const i=t=>{n.source.removeEventListener("error",i);const r=new Error("Texture loading error");r.event=t,e(r)};n.source.addEventListener("error",i),n.load().then((()=>t(r))).catch(i)}))),n._live2d_load}(t.settings.resolveURL(e),{crossOrigin:t.options.crossOrigin})));if(yield e(),!t.internalModel)throw new TypeError("Missing internal model.");r.internalModel=t.internalModel,r.emit("modelLoaded",t.internalModel),r.textures=yield Promise.all(n),r.emit("textureLoaded",r.textures)}})),ql=(t,e)=>_l(void 0,null,(function*(){const r=t.settings;if(r instanceof Ol){const n=Kl.findRuntime(r);if(!n)throw new TypeError("Unknown model settings.");const i=yield jl.load({settings:r,url:r.moc,type:"arraybuffer",target:t.live2dModel});if(!n.isValidMoc(i))throw new Error("Invalid moc data");const o=n.createCoreModel(i);return t.internalModel=n.createInternalModel(o,r,t.options),e()}throw new TypeError("Missing settings.")})),$l=class{static registerRuntime(t){$l.runtimes.push(t),$l.runtimes.sort(((t,e)=>e.version-t.version))}static findRuntime(t){for(const e of $l.runtimes)if(e.test(t))return e}static setupLive2DModel(t,e,r){return _l(this,null,(function*(){const n=new Promise((e=>t.once("textureLoaded",e))),i=new Promise((e=>t.once("modelLoaded",e))),o=Promise.all([n,i]).then((()=>t.emit("ready")));yield Gl($l.live2DModelMiddlewares,{live2dModel:t,source:e,options:r||{}}),yield o,t.emit("load")}))}static loadMotion(t,e,r){var n;const i=n=>t.emit("motionLoadError",e,r,n);try{const o=null==(n=t.definitions[e])?void 0:n[r];if(!o)return Promise.resolve(void 0);t.listeners("destroy").includes($l.releaseTasks)||t.once("destroy",$l.releaseTasks);let s=$l.motionTasksMap.get(t);s||(s={},$l.motionTasksMap.set(t,s));let a=s[e];a||(a=[],s[e]=a);const l=t.getMotionFile(o);return null!=a[r]||(a[r]=jl.load({url:l,settings:t.settings,type:t.motionDataType,target:t}).then((n=>{var i;const s=null==(i=$l.motionTasksMap.get(t))?void 0:i[e];s&&delete s[r];const a=t.createMotion(n,e,o);return t.emit("motionLoaded",e,r,a),a})).catch((e=>{Sl.warn(t.tag,"Failed to load motion: ".concat(l,"\n"),e),i(e)}))),a[r]}catch(o){Sl.warn(t.tag,'Failed to load motion at "'.concat(e,'"[').concat(r,"]\n"),o),i(o)}return Promise.resolve(void 0)}static loadExpression(t,e){const r=r=>t.emit("expressionLoadError",e,r);try{const n=t.definitions[e];if(!n)return Promise.resolve(void 0);t.listeners("destroy").includes($l.releaseTasks)||t.once("destroy",$l.releaseTasks);let i=$l.expressionTasksMap.get(t);i||(i=[],$l.expressionTasksMap.set(t,i));const o=t.getExpressionFile(n);return null!=i[e]||(i[e]=jl.load({url:o,settings:t.settings,type:"json",target:t}).then((r=>{const i=$l.expressionTasksMap.get(t);i&&delete i[e];const o=t.createExpression(r,n);return t.emit("expressionLoaded",e,o),o})).catch((e=>{Sl.warn(t.tag,"Failed to load expression: ".concat(o,"\n"),e),r(e)}))),i[e]}catch(n){Sl.warn(t.tag,"Failed to load expression at [".concat(e,"]\n"),n),r(n)}return Promise.resolve(void 0)}static releaseTasks(){this instanceof Fl?$l.motionTasksMap.delete(this):$l.expressionTasksMap.delete(this)}};let Kl=$l;Kl.runtimes=[],Kl.urlToJSON=zl,Kl.jsonToSettings=Vl,Kl.waitUntilReady=Hl,Kl.setupOptionals=Yl,Kl.setupEssentials=Wl,Kl.createInternalModel=ql,Kl.live2DModelMiddlewares=[zl,Vl,Hl,Yl,Wl,ql],Kl.motionTasksMap=new WeakMap,Kl.expressionTasksMap=new WeakMap,Fl.prototype._loadMotion=function(t,e){return Kl.loadMotion(this,t,e)},Ml.prototype._loadExpression=function(t){return Kl.loadExpression(this,t)};function Ql(t){this.tap(t.data.global.x,t.data.global.y)}function Zl(t){this.focus(t.data.global.x,t.data.global.y)}class Jl extends Ie{}const tu=new ue,eu=new ge;let ru;class nu extends De{constructor(t){super(),this.tag="Live2DModel(uninitialized)",this.textures=[],this.transform=new Jl,this.anchor=new ye(this.onAnchorChange,this,0,0),this.glContextID=-1,this.elapsedTime=performance.now(),this.deltaTime=0,this._autoUpdate=!1,this.once("modelLoaded",(()=>this.init(t)))}static from(t,e){const r=new this(e);return Kl.setupLive2DModel(r,t,e).then((()=>r))}static fromSync(t,e){const r=new this(e);return Kl.setupLive2DModel(r,t,e).then(null==e?void 0:e.onLoad).catch(null==e?void 0:e.onError),r}static registerTicker(t){ru=t}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){var e;ru||(ru=null==(e=window.PIXI)?void 0:e.Ticker),t?this._destroyed||(ru?(ru.shared.add(this.onTickerUpdate,this),this._autoUpdate=!0):Sl.warn(this.tag,"No Ticker registered, please call Live2DModel.registerTicker(Ticker).")):(null==ru||ru.shared.remove(this.onTickerUpdate,this),this._autoUpdate=!1)}init(t){this.tag="Live2DModel(".concat(this.internalModel.settings.name,")");const e=Object.assign({autoUpdate:!0,autoInteract:!0},t);e.autoInteract&&(this.interactive=!0),this.autoInteract=e.autoInteract,this.autoUpdate=e.autoUpdate}onAnchorChange(){this.pivot.set(this.anchor.x*this.internalModel.width,this.anchor.y*this.internalModel.height)}motion(t,e,r){return void 0===e?this.internalModel.motionManager.startRandomMotion(t,r):this.internalModel.motionManager.startMotion(t,e,r)}expression(t){return this.internalModel.motionManager.expressionManager?void 0===t?this.internalModel.motionManager.expressionManager.setRandomExpression():this.internalModel.motionManager.expressionManager.setExpression(t):Promise.resolve(!1)}focus(t,e){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];tu.x=t,tu.y=e,this.toModelPosition(tu,tu,!0);let n=tu.x/this.internalModel.originalWidth*2-1,i=tu.y/this.internalModel.originalHeight*2-1,o=Math.atan2(i,n);this.internalModel.focusController.focus(Math.cos(o),-Math.sin(o),r)}tap(t,e){const r=this.hitTest(t,e);r.length&&(Sl.log(this.tag,"Hit",r),this.emit("hit",r))}hitTest(t,e){return tu.x=t,tu.y=e,this.toModelPosition(tu,tu),this.internalModel.hitTest(tu.x,tu.y)}toModelPosition(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.clone();return(arguments.length>2?arguments[2]:void 0)||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.transform.worldTransform.applyInverse(t,e),this.internalModel.localTransform.applyInverse(e,e),e}containsPoint(t){return this.getBounds(!0).contains(t.x,t.y)}_calculateBounds(){this._bounds.addFrame(this.transform,0,0,this.internalModel.width,this.internalModel.height)}onTickerUpdate(){this.update(ru.shared.deltaMS)}update(t){this.deltaTime+=t,this.elapsedTime+=t}_render(t){this.registerInteraction(t.plugins.interaction),t.batch.reset(),t.geometry.reset(),t.shader.reset(),t.state.reset();let e=!1;this.glContextID!==t.CONTEXT_UID&&(this.glContextID=t.CONTEXT_UID,this.internalModel.updateWebGLContext(t.gl,this.glContextID),e=!0);for(let i=0;i<this.textures.length;i++){const r=this.textures[i];r.valid&&(!e&&r.baseTexture._glTextures[this.glContextID]||(t.gl.pixelStorei(WebGLRenderingContext.UNPACK_FLIP_Y_WEBGL,this.internalModel.textureFlipY),t.texture.bind(r.baseTexture,0)),this.internalModel.bindTexture(i,r.baseTexture._glTextures[this.glContextID].texture),r.baseTexture.touched=t.textureGC.count)}const r=t.framebuffer.viewport;this.internalModel.viewport=[r.x,r.y,r.width,r.height],this.deltaTime&&(this.internalModel.update(this.deltaTime,this.elapsedTime),this.deltaTime=0);const n=eu.copyFrom(t.globalUniforms.uniforms.projectionMatrix).append(this.worldTransform);this.internalModel.updateTransform(n),this.internalModel.draw(t.gl),t.state.reset(),t.texture.reset()}destroy(t){this.emit("destroy"),this.autoUpdate=!1,this.unregisterInteraction(),(null==t?void 0:t.texture)&&this.textures.forEach((e=>e.destroy(t.baseTexture))),this.internalModel.destroy(),super.destroy(t)}}Al(nu,[class{constructor(){this._autoInteract=!1}get autoInteract(){return this._autoInteract}set autoInteract(t){t!==this._autoInteract&&(t?this.on("pointertap",Ql,this):this.off("pointertap",Ql,this),this._autoInteract=t)}registerInteraction(t){t!==this.interactionManager&&(this.unregisterInteraction(),this._autoInteract&&t&&(this.interactionManager=t,t.on("pointermove",Zl,this)))}unregisterInteraction(){var t;this.interactionManager&&(null==(t=this.interactionManager)||t.off("pointermove",Zl,this),this.interactionManager=void 0)}}]);const iu=class{static resolveURL(t,e){var r;const n=null==(r=iu.filesMap[t])?void 0:r[e];if(void 0===n)throw new Error("Cannot find this file from uploaded files: "+e);return n}static upload(t,e){return _l(this,null,(function*(){const r={};for(const n of e.getDefinedFiles()){const i=decodeURI(pt.resolve(e.url,n)),o=t.find((t=>t.webkitRelativePath===i));o&&(r[n]=URL.createObjectURL(o))}iu.filesMap[e._objectURL]=r}))}static createSettings(t){return _l(this,null,(function*(){const e=t.find((t=>t.name.endsWith("model.json")||t.name.endsWith("model3.json")));if(!e)throw new TypeError("Settings file not found");const r=yield iu.readText(e),n=JSON.parse(r);n.url=e.webkitRelativePath;const i=Kl.findRuntime(n);if(!i)throw new Error("Unknown settings JSON");const o=i.createModelSettings(n);return o._objectURL=URL.createObjectURL(e),o}))}static readText(t){return _l(this,null,(function*(){return new Promise(((e,r)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=r,n.readAsText(t,"utf8")}))}))}};let ou=iu;ou.filesMap={},ou.factory=(t,e)=>_l(void 0,null,(function*(){if(Array.isArray(t.source)&&t.source[0]instanceof File){const e=t.source;let r=e.settings;if(r){if(!r._objectURL)throw new Error('"_objectURL" must be specified in ModelSettings')}else r=yield iu.createSettings(e);r.validateFiles(e.map((t=>encodeURI(t.webkitRelativePath)))),yield iu.upload(e,r),r.resolveURL=function(t){return iu.resolveURL(this._objectURL,t)},t.source=r,t.live2dModel.once("modelLoaded",(t=>{t.once("destroy",(function(){const t=this.settings._objectURL;if(URL.revokeObjectURL(t),iu.filesMap[t])for(const e of Object.values(iu.filesMap[t]))URL.revokeObjectURL(e);delete iu.filesMap[t]}))}))}return e()})),Kl.live2DModelMiddlewares.unshift(ou.factory);const su=class{static unzip(t,e){return _l(this,null,(function*(){const r=yield su.getFilePaths(t),n=[];for(const t of e.getDefinedFiles()){const i=decodeURI(pt.resolve(e.url,t));r.includes(i)&&n.push(i)}const i=yield su.getFiles(t,n);for(let t=0;t<i.length;t++){const e=n[t],r=i[t];Object.defineProperty(r,"webkitRelativePath",{value:e})}return i}))}static createSettings(t){return _l(this,null,(function*(){const e=(yield su.getFilePaths(t)).find((t=>t.endsWith("model.json")||t.endsWith("model3.json")));if(!e)throw new Error("Settings file not found");const r=yield su.readText(t,e);if(!r)throw new Error("Empty settings file: "+e);const n=JSON.parse(r);n.url=e;const i=Kl.findRuntime(n);if(!i)throw new Error("Unknown settings JSON");return i.createModelSettings(n)}))}static zipReader(t,e){return _l(this,null,(function*(){throw new Error("Not implemented")}))}static getFilePaths(t){return _l(this,null,(function*(){throw new Error("Not implemented")}))}static getFiles(t,e){return _l(this,null,(function*(){throw new Error("Not implemented")}))}static readText(t,e){return _l(this,null,(function*(){throw new Error("Not implemented")}))}static releaseReader(t){}};let au=su;if(au.ZIP_PROTOCOL="zip://",au.uid=0,au.factory=(t,e)=>_l(void 0,null,(function*(){const r=t.source;let n,i,o;if("string"===typeof r&&(r.endsWith(".zip")||r.startsWith(su.ZIP_PROTOCOL))?(n=r.startsWith(su.ZIP_PROTOCOL)?r.slice(su.ZIP_PROTOCOL.length):r,i=yield jl.load({url:n,type:"blob",target:t.live2dModel})):Array.isArray(r)&&1===r.length&&r[0]instanceof File&&r[0].name.endsWith(".zip")&&(i=r[0],n=URL.createObjectURL(i),o=r.settings),i){if(!i.size)throw new Error("Empty zip file");const e=yield su.zipReader(i,n);o||(o=yield su.createSettings(e)),o._objectURL=su.ZIP_PROTOCOL+su.uid+"/"+o.url;const r=yield su.unzip(e,o);r.settings=o,t.source=r,n.startsWith("blob:")&&t.live2dModel.once("modelLoaded",(t=>{t.once("destroy",(function(){URL.revokeObjectURL(n)}))})),su.releaseReader(e)}return e()})),Kl.live2DModelMiddlewares.unshift(au.factory),!window.Live2D)throw new Error("Could not find Cubism 2 runtime. This plugin requires live2d.min.js to be loaded.");const lu=Live2DMotion.prototype.updateParam;Live2DMotion.prototype.updateParam=function(t,e){lu.call(this,t,e),e.isFinished()&&this.onFinishHandler&&(this.onFinishHandler(this),delete this.onFinishHandler)};class uu extends AMotion{constructor(t){super(),this.params=[],this.setFadeIn(t.fade_in>0?t.fade_in:xl.expressionFadingDuration),this.setFadeOut(t.fade_out>0?t.fade_out:xl.expressionFadingDuration),Array.isArray(t.params)&&t.params.forEach((t=>{const e=t.calc||"add";if("add"===e){const e=t.def||0;t.val-=e}else if("mult"===e){const e=t.def||1;t.val/=e}this.params.push({calc:e,val:t.val,id:t.id})}))}updateParamExe(t,e,r,n){this.params.forEach((e=>{t.setParamFloat(e.id,e.val*r)}))}}class hu extends Ml{constructor(t,e){var r;super(t,e),this.queueManager=new MotionQueueManager,this.definitions=null!=(r=this.settings.expressions)?r:[],this.init()}isFinished(){return this.queueManager.isFinished()}getExpressionIndex(t){return this.definitions.findIndex((e=>e.name===t))}getExpressionFile(t){return t.file}createExpression(t,e){return new uu(t)}_setExpression(t){return this.queueManager.startMotion(t)}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(t,e){return this.queueManager.updateParam(t)}}class cu extends Fl{constructor(t,e){super(t,e),this.groups={idle:"idle"},this.motionDataType="arraybuffer",this.queueManager=new MotionQueueManager,this.definitions=this.settings.motions,this.init(e)}init(t){super.init(t),this.settings.expressions&&(this.expressionManager=new hu(this.settings,t))}isFinished(){return this.queueManager.isFinished()}createMotion(t,e,r){const n=Live2DMotion.loadMotion(t),i=e===this.groups.idle?xl.idleMotionFadingDuration:xl.motionFadingDuration;return n.setFadeIn(r.fade_in>0?r.fade_in:i),n.setFadeOut(r.fade_out>0?r.fade_out:i),n}getMotionFile(t){return t.file}getMotionName(t){return t.file}getSoundFile(t){return t.sound}_startMotion(t,e){return t.onFinishHandler=e,this.queueManager.stopAllMotions(),this.queueManager.startMotion(t)}_stopAllMotions(){this.queueManager.stopAllMotions()}updateParameters(t,e){return this.queueManager.updateParam(t)}destroy(){super.destroy(),this.queueManager=void 0}}class du{constructor(t){this.coreModel=t,this.blinkInterval=4e3,this.closingDuration=100,this.closedDuration=50,this.openingDuration=150,this.eyeState=0,this.eyeParamValue=1,this.closedTimer=0,this.nextBlinkTimeLeft=this.blinkInterval,this.leftParam=t.getParamIndex("PARAM_EYE_L_OPEN"),this.rightParam=t.getParamIndex("PARAM_EYE_R_OPEN")}setEyeParams(t){this.eyeParamValue=wl(t,0,1),this.coreModel.setParamFloat(this.leftParam,this.eyeParamValue),this.coreModel.setParamFloat(this.rightParam,this.eyeParamValue)}update(t){switch(this.eyeState){case 0:this.nextBlinkTimeLeft-=t,this.nextBlinkTimeLeft<0&&(this.eyeState=1,this.nextBlinkTimeLeft=this.blinkInterval+this.closingDuration+this.closedDuration+this.openingDuration+(e=0,r=2e3,Math.random()*(r-e)+e));break;case 1:this.setEyeParams(this.eyeParamValue+t/this.closingDuration),this.eyeParamValue<=0&&(this.eyeState=2,this.closedTimer=0);break;case 2:this.closedTimer+=t,this.closedTimer>=this.closedDuration&&(this.eyeState=3);break;case 3:this.setEyeParams(this.eyeParamValue+t/this.openingDuration),this.eyeParamValue>=1&&(this.eyeState=0)}var e,r}}const fu=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class pu extends Nl{constructor(t,e,r){super(),this.textureFlipY=!0,this.drawDataCount=0,this.disableCulling=!1,this.coreModel=t,this.settings=e,this.motionManager=new cu(e,r),this.eyeBlink=new du(t),this.eyeballXParamIndex=t.getParamIndex("PARAM_EYE_BALL_X"),this.eyeballYParamIndex=t.getParamIndex("PARAM_EYE_BALL_Y"),this.angleXParamIndex=t.getParamIndex("PARAM_ANGLE_X"),this.angleYParamIndex=t.getParamIndex("PARAM_ANGLE_Y"),this.angleZParamIndex=t.getParamIndex("PARAM_ANGLE_Z"),this.bodyAngleXParamIndex=t.getParamIndex("PARAM_BODY_ANGLE_X"),this.breathParamIndex=t.getParamIndex("PARAM_BREATH"),this.init()}init(){super.init(),this.settings.initParams&&this.settings.initParams.forEach((t=>{let{id:e,value:r}=t;return this.coreModel.setParamFloat(e,r)})),this.settings.initOpacities&&this.settings.initOpacities.forEach((t=>{let{id:e,value:r}=t;return this.coreModel.setPartsOpacity(e,r)})),this.coreModel.saveParam();const t=this.coreModel.getModelContext()._$aS;(null==t?void 0:t.length)&&(this.drawDataCount=t.length);let e=this.coreModel.drawParamWebGL.culling;Object.defineProperty(this.coreModel.drawParamWebGL,"culling",{set:t=>e=t,get:()=>!this.disableCulling&&e});const r=this.coreModel.getModelContext().clipManager,n=r.setupClip;r.setupClip=(t,e)=>{n.call(r,t,e),e.gl.viewport(...this.viewport)}}getSize(){return[this.coreModel.getCanvasWidth(),this.coreModel.getCanvasHeight()]}getLayout(){const t={};if(this.settings.layout)for(const e of Object.keys(this.settings.layout)){let r=e;"center_x"===e?r="centerX":"center_y"===e&&(r="centerY"),t[r]=this.settings.layout[e]}return t}updateWebGLContext(t,e){const r=this.coreModel.drawParamWebGL;r.firstDraw=!0,r.setGL(t),r.glno=e;for(const o in r)r.hasOwnProperty(o)&&r[o]instanceof WebGLBuffer&&(r[o]=null);const n=this.coreModel.getModelContext().clipManager;n.curFrameNo=e;const i=t.getParameter(t.FRAMEBUFFER_BINDING);n.getMaskRenderTexture(),t.bindFramebuffer(t.FRAMEBUFFER,i)}bindTexture(t,e){this.coreModel.setTexture(t,e)}getHitAreaDefs(){var t;return(null==(t=this.settings.hitAreas)?void 0:t.map((t=>({id:t.id,name:t.name,index:this.coreModel.getDrawDataIndex(t.id)}))))||[]}getDrawableIDs(){const t=this.coreModel.getModelContext(),e=[];for(let r=0;r<this.drawDataCount;r++){const n=t.getDrawData(r);n&&e.push(n.getDrawDataID().id)}return e}getDrawableIndex(t){return this.coreModel.getDrawDataIndex(t)}getDrawableVertices(t){if("string"===typeof t&&-1===(t=this.coreModel.getDrawDataIndex(t)))throw new TypeError("Unable to find drawable ID: "+t);return this.coreModel.getTransformedPoints(t).slice()}update(t,e){var r,n,i,o;super.update(t,e);const s=this.coreModel;this.emit("beforeMotionUpdate");const a=this.motionManager.update(this.coreModel,e);this.emit("afterMotionUpdate"),s.saveParam(),null==(r=this.motionManager.expressionManager)||r.update(s,e),a||null==(n=this.eyeBlink)||n.update(t),this.updateFocus(),this.updateNaturalMovements(t,e),null==(i=this.physics)||i.update(e),null==(o=this.pose)||o.update(t),this.emit("beforeModelUpdate"),s.update(),s.loadParam()}updateFocus(){this.coreModel.addToParamFloat(this.eyeballXParamIndex,this.focusController.x),this.coreModel.addToParamFloat(this.eyeballYParamIndex,this.focusController.y),this.coreModel.addToParamFloat(this.angleXParamIndex,30*this.focusController.x),this.coreModel.addToParamFloat(this.angleYParamIndex,30*this.focusController.y),this.coreModel.addToParamFloat(this.angleZParamIndex,this.focusController.x*this.focusController.y*-30),this.coreModel.addToParamFloat(this.bodyAngleXParamIndex,10*this.focusController.x)}updateNaturalMovements(t,e){const r=e/1e3*2*Math.PI;this.coreModel.addToParamFloat(this.angleXParamIndex,15*Math.sin(r/6.5345)*.5),this.coreModel.addToParamFloat(this.angleYParamIndex,8*Math.sin(r/3.5345)*.5),this.coreModel.addToParamFloat(this.angleZParamIndex,10*Math.sin(r/5.5345)*.5),this.coreModel.addToParamFloat(this.bodyAngleXParamIndex,4*Math.sin(r/15.5345)*.5),this.coreModel.setParamFloat(this.breathParamIndex,.5+.5*Math.sin(r/3.2345))}draw(t){const e=this.disableCulling;t.getParameter(t.FRAMEBUFFER_BINDING)&&(this.disableCulling=!0);const r=this.drawingMatrix;fu[0]=r.a,fu[1]=r.b,fu[4]=r.c,fu[5]=r.d,fu[12]=r.tx,fu[13]=r.ty,this.coreModel.setMatrix(fu),this.coreModel.draw(),this.disableCulling=e}destroy(){super.destroy(),this.coreModel=void 0}}class mu extends Ol{constructor(t){if(super(t),this.motions={},!mu.isValidJSON(t))throw new TypeError("Invalid JSON.");this.moc=t.model,Il("string",t,this,"textures","textures"),this.copy(t)}static isValidJSON(t){var e;return!!t&&"string"===typeof t.model&&(null==(e=t.textures)?void 0:e.length)>0&&t.textures.every((t=>"string"===typeof t))}copy(t){El("string",t,this,"name","name"),El("string",t,this,"pose","pose"),El("string",t,this,"physics","physics"),El("object",t,this,"layout","layout"),El("object",t,this,"motions","motions"),Il("object",t,this,"hit_areas","hitAreas"),Il("object",t,this,"expressions","expressions"),Il("object",t,this,"init_params","initParams"),Il("object",t,this,"init_opacities","initOpacities")}replaceFiles(t){super.replaceFiles(t);for(const[e,r]of Object.entries(this.motions))for(let n=0;n<r.length;n++)r[n].file=t(r[n].file,"motions.".concat(e,"[").concat(n,"].file")),void 0!==r[n].sound&&(r[n].sound=t(r[n].sound,"motions.".concat(e,"[").concat(n,"].sound")));if(this.expressions)for(let e=0;e<this.expressions.length;e++)this.expressions[e].file=t(this.expressions[e].file,"expressions[".concat(e,"].file"))}}const yu={x:PhysicsHair.Src.SRC_TO_X,y:PhysicsHair.Src.SRC_TO_Y,angle:PhysicsHair.Src.SRC_TO_G_ANGLE},gu={x:PhysicsHair.Src.SRC_TO_X,y:PhysicsHair.Src.SRC_TO_Y,angle:PhysicsHair.Src.SRC_TO_G_ANGLE};class _u{constructor(t,e){this.coreModel=t,this.physicsHairs=[],e.physics_hair&&(this.physicsHairs=e.physics_hair.map((t=>{const e=new PhysicsHair;return e.setup(t.setup.length,t.setup.regist,t.setup.mass),t.src.forEach((t=>{let{id:r,ptype:n,scale:i,weight:o}=t;const s=yu[n];s&&e.addSrcParam(s,r,i,o)})),t.targets.forEach((t=>{let{id:r,ptype:n,scale:i,weight:o}=t;const s=gu[n];s&&e.addTargetParam(s,r,i,o)})),e})))}update(t){this.physicsHairs.forEach((e=>e.update(this.coreModel,t)))}}class vu{constructor(t){this.id=t,this.paramIndex=-1,this.partsIndex=-1,this.link=[]}initIndex(t){this.paramIndex=t.getParamIndex("VISIBLE:"+this.id),this.partsIndex=t.getPartsDataIndex(PartsDataID.getID(this.id)),t.setParamFloat(this.paramIndex,1)}}class bu{constructor(t,e){this.coreModel=t,this.opacityAnimDuration=500,this.partsGroups=[],e.parts_visible&&(this.partsGroups=e.parts_visible.map((t=>{let{group:e}=t;return e.map((t=>{let{id:e,link:r}=t;const n=new vu(e);return r&&(n.link=r.map((t=>new vu(t)))),n}))})),this.init())}init(){this.partsGroups.forEach((t=>{t.forEach((t=>{if(t.initIndex(this.coreModel),t.paramIndex>=0){const e=0!==this.coreModel.getParamFloat(t.paramIndex);this.coreModel.setPartsOpacity(t.partsIndex,e?1:0),this.coreModel.setParamFloat(t.paramIndex,e?1:0),t.link.length>0&&t.link.forEach((t=>t.initIndex(this.coreModel)))}}))}))}normalizePartsOpacityGroup(t,e){const r=this.coreModel,n=.5;let i=1,o=t.findIndex((t=>{let{paramIndex:e,partsIndex:n}=t;return n>=0&&0!==r.getParamFloat(e)}));if(o>=0){const n=r.getPartsOpacity(t[o].partsIndex);i=wl(n+e/this.opacityAnimDuration,0,1)}else o=0,i=1;t.forEach(((t,e)=>{let{partsIndex:s}=t;if(s>=0)if(o==e)r.setPartsOpacity(s,i);else{let t,e=r.getPartsOpacity(s);t=i<n?-.5*i/n+1:(1-i)*n/.5,(1-t)*(1-i)>.15&&(t=1-.15/(1-i)),e>t&&(e=t),r.setPartsOpacity(s,e)}}))}copyOpacity(t){const e=this.coreModel;t.forEach((t=>{let{partsIndex:r,link:n}=t;if(r>=0&&n){const t=e.getPartsOpacity(r);n.forEach((r=>{let{partsIndex:n}=r;n>=0&&e.setPartsOpacity(n,t)}))}}))}update(t){this.partsGroups.forEach((e=>{this.normalizePartsOpacityGroup(e,t),this.copyOpacity(e)}))}}if(Kl.registerRuntime({version:2,test:t=>t instanceof mu||mu.isValidJSON(t),ready:()=>Promise.resolve(),isValidMoc(t){if(t.byteLength<3)return!1;const e=new Int8Array(t,0,3);return"moc"===String.fromCharCode(...e)},createModelSettings:t=>new mu(t),createCoreModel(t){const e=Live2DModelWebGL.loadModel(t),r=Live2D.getError();if(r)throw r;return e},createInternalModel:(t,e,r)=>new pu(t,e,r),createPose:(t,e)=>new bu(t,e),createPhysics:(t,e)=>new _u(t,e)}),!window.Live2DCubismCore)throw new Error("Could not find Cubism 4 runtime. This plugin requires live2dcubismcore.js to be loaded.");class xu{constructor(t,e){this.x=t||0,this.y=e||0}add(t){const e=new xu(0,0);return e.x=this.x+t.x,e.y=this.y+t.y,e}substract(t){const e=new xu(0,0);return e.x=this.x-t.x,e.y=this.y-t.y,e}multiply(t){const e=new xu(0,0);return e.x=this.x*t.x,e.y=this.y*t.y,e}multiplyByScaler(t){return this.multiply(new xu(t,t))}division(t){const e=new xu(0,0);return e.x=this.x/t.x,e.y=this.y/t.y,e}divisionByScalar(t){return this.division(new xu(t,t))}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}getDistanceWith(t){return Math.sqrt((this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y))}dot(t){return this.x*t.x+this.y*t.y}normalize(){const t=Math.pow(this.x*this.x+this.y*this.y,.5);this.x=this.x/t,this.y=this.y/t}isEqual(t){return this.x==t.x&&this.y==t.y}isNotEqual(t){return!this.isEqual(t)}}const Tu=class{static range(t,e,r){return t<e?t=e:t>r&&(t=r),t}static sin(t){return Math.sin(t)}static cos(t){return Math.cos(t)}static abs(t){return Math.abs(t)}static sqrt(t){return Math.sqrt(t)}static cbrt(t){if(0===t)return t;let e=t;const r=e<0;let n;return r&&(e=-e),e===1/0?n=1/0:(n=Math.exp(Math.log(e)/3),n=(e/(n*n)+2*n)/3),r?-n:n}static getEasingSine(t){return t<0?0:t>1?1:.5-.5*this.cos(t*Math.PI)}static max(t,e){return t>e?t:e}static min(t,e){return t>e?e:t}static degreesToRadian(t){return t/180*Math.PI}static radianToDegrees(t){return 180*t/Math.PI}static directionToRadian(t,e){let r=Math.atan2(e.y,e.x)-Math.atan2(t.y,t.x);for(;r<-Math.PI;)r+=2*Math.PI;for(;r>Math.PI;)r-=2*Math.PI;return r}static directionToDegrees(t,e){const r=this.directionToRadian(t,e);let n=this.radianToDegrees(r);return e.x-t.x>0&&(n=-n),n}static radianToDirection(t){const e=new xu;return e.x=this.sin(t),e.y=this.cos(t),e}static quadraticEquation(t,e,r){return this.abs(t)<Tu.Epsilon?this.abs(e)<Tu.Epsilon?-r:-r/e:-(e+this.sqrt(e*e-4*t*r))/(2*t)}static cardanoAlgorithmForBezier(t,e,r,n){if(this.sqrt(t)<Tu.Epsilon)return this.range(this.quadraticEquation(e,r,n),0,1);const i=e/t,o=r/t,s=(3*o-i*i)/3,a=s/3,l=(2*i*i*i-9*i*o+27*(n/t))/27,u=l/2,h=u*u+a*a*a,c=.5,d=.51;if(h<0){const t=-s/3,e=t*t*t,r=this.sqrt(e),n=-l/(2*r),o=this.range(n,-1,1),a=Math.acos(o),u=2*this.cbrt(r),h=u*this.cos(a/3)-i/3;if(this.abs(h-c)<d)return this.range(h,0,1);const f=u*this.cos((a+2*Math.PI)/3)-i/3;if(this.abs(f-c)<d)return this.range(f,0,1);const p=u*this.cos((a+4*Math.PI)/3)-i/3;return this.range(p,0,1)}if(0==h){let t;t=u<0?this.cbrt(-u):-this.cbrt(u);const e=2*t-i/3;if(this.abs(e-c)<d)return this.range(e,0,1);const r=-t-i/3;return this.range(r,0,1)}const f=this.sqrt(h),p=this.cbrt(f-u)-this.cbrt(f+u)-i/3;return this.range(p,0,1)}constructor(){}};let Su=Tu;Su.Epsilon=1e-5;class wu{constructor(){this._tr=new Float32Array(16),this.loadIdentity()}static multiply(t,e,r){const n=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);for(let i=0;i<4;++i)for(let r=0;r<4;++r)for(let o=0;o<4;++o)n[r+4*i]+=t[o+4*i]*e[r+4*o];for(let i=0;i<16;++i)r[i]=n[i]}loadIdentity(){const t=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(t)}setMatrix(t){for(let e=0;e<16;++e)this._tr[e]=t[e]}getArray(){return this._tr}getScaleX(){return this._tr[0]}getScaleY(){return this._tr[5]}getTranslateX(){return this._tr[12]}getTranslateY(){return this._tr[13]}transformX(t){return this._tr[0]*t+this._tr[12]}transformY(t){return this._tr[5]*t+this._tr[13]}invertTransformX(t){return(t-this._tr[12])/this._tr[0]}invertTransformY(t){return(t-this._tr[13])/this._tr[5]}translateRelative(t,e){const r=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,t,e,0,1]);wu.multiply(r,this._tr,this._tr)}translate(t,e){this._tr[12]=t,this._tr[13]=e}translateX(t){this._tr[12]=t}translateY(t){this._tr[13]=t}scaleRelative(t,e){const r=new Float32Array([t,0,0,0,0,e,0,0,0,0,1,0,0,0,0,1]);wu.multiply(r,this._tr,this._tr)}scale(t,e){this._tr[0]=t,this._tr[5]=e}multiplyByMatrix(t){wu.multiply(t.getArray(),this._tr,this._tr)}clone(){const t=new wu;for(let e=0;e<this._tr.length;e++)t._tr[e]=this._tr[e];return t}}class Eu{initialize(t){this._model=t}drawModel(){null!=this.getModel()&&this.doDrawModel()}setMvpMatrix(t){this._mvpMatrix4x4.setMatrix(t.getArray())}getMvpMatrix(){return this._mvpMatrix4x4}setModelColor(t,e,r,n){t<0?t=0:t>1&&(t=1),e<0?e=0:e>1&&(e=1),r<0?r=0:r>1&&(r=1),n<0?n=0:n>1&&(n=1),this._modelColor.R=t,this._modelColor.G=e,this._modelColor.B=r,this._modelColor.A=n}getModelColor(){return Object.assign({},this._modelColor)}setIsPremultipliedAlpha(t){this._isPremultipliedAlpha=t}isPremultipliedAlpha(){return this._isPremultipliedAlpha}setIsCulling(t){this._isCulling=t}isCulling(){return this._isCulling}setAnisotropy(t){this._anisortopy=t}getAnisotropy(){return this._anisortopy}getModel(){return this._model}constructor(){this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisortopy=0,this._modelColor=new Au,this._mvpMatrix4x4=new wu,this._mvpMatrix4x4.loadIdentity()}}var Iu=(t=>(t[t.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",t[t.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",t[t.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative",t))(Iu||{});class Au{constructor(){this.R=1,this.G=1,this.B=1,this.A=1}}let Mu,Pu=!1,Ou=!1;const Ru=0,Cu=2;class Du{static startUp(t){if(Pu)return Nu("CubismFramework.startUp() is already done."),Pu;if(Live2DCubismCore._isStarted)return Pu=!0,!0;if(Live2DCubismCore._isStarted=!0,Mu=t,Mu&&Live2DCubismCore.Logging.csmSetLogFunction(Mu.logFunction),Pu=!0,Pu){const t=Live2DCubismCore.Version.csmGetVersion(),e=(16711680&t)>>16,r=65535&t,n=t;Nu("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+((4278190080&t)>>24)).slice(-2),("00"+e).slice(-2),("0000"+r).slice(-4),n)}return Nu("CubismFramework.startUp() is complete."),Pu}static cleanUp(){Pu=!1,Ou=!1,Mu=void 0}static initialize(){Pu?Ou?Bu("CubismFramework.initialize() skipped, already initialized."):(Ou=!0,Nu("CubismFramework.initialize() is complete.")):Bu("CubismFramework is not started.")}static dispose(){Pu?Ou?(Eu.staticRelease(),Ou=!1,Nu("CubismFramework.dispose() is complete.")):Bu("CubismFramework.dispose() skipped, not initialized."):Bu("CubismFramework is not started.")}static isStarted(){return Pu}static isInitialized(){return Ou}static coreLogFunction(t){Live2DCubismCore.Logging.csmGetLogFunction()&&Live2DCubismCore.Logging.csmGetLogFunction()(t)}static getLoggingLevel(){return null!=Mu?Mu.loggingLevel:Fu.LogLevel_Off}constructor(){}}var Fu=(t=>(t[t.LogLevel_Verbose=0]="LogLevel_Verbose",t[t.LogLevel_Debug=1]="LogLevel_Debug",t[t.LogLevel_Info=2]="LogLevel_Info",t[t.LogLevel_Warning=3]="LogLevel_Warning",t[t.LogLevel_Error=4]="LogLevel_Error",t[t.LogLevel_Off=5]="LogLevel_Off",t))(Fu||{});function Lu(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];Uu.print(Fu.LogLevel_Debug,"[CSM][D]"+t+"\n",r)}function Nu(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];Uu.print(Fu.LogLevel_Info,"[CSM][I]"+t+"\n",r)}function Bu(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];Uu.print(Fu.LogLevel_Warning,"[CSM][W]"+t+"\n",r)}function ku(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];Uu.print(Fu.LogLevel_Error,"[CSM][E]"+t+"\n",r)}class Uu{static print(t,e,r){if(t<Du.getLoggingLevel())return;const n=Du.coreLogFunction;if(!n)return;n(e.replace(/{(\d+)}/g,((t,e)=>r[e])))}static dumpBytes(t,e,r){for(let n=0;n<r;n++)n%16==0&&n>0?this.print(t,"\n"):n%8==0&&n>0&&this.print(t,"  "),this.print(t,"{0} ",[255&e[n]]);this.print(t,"\n")}constructor(){}}class Gu{constructor(){this._fadeInSeconds=-1,this._fadeOutSeconds=-1,this._weight=1,this._offsetSeconds=0,this._firedEventValues=[]}release(){this._weight=0}updateParameters(t,e,r){if(!e.isAvailable()||e.isFinished())return;if(!e.isStarted()){e.setIsStarted(!0),e.setStartTime(r-this._offsetSeconds),e.setFadeInStartTime(r);const t=this.getDuration();e.getEndTime()<0&&e.setEndTime(t<=0?-1:e.getStartTime()+t)}let n=this._weight;n=n*(0==this._fadeInSeconds?1:Su.getEasingSine((r-e.getFadeInStartTime())/this._fadeInSeconds))*(0==this._fadeOutSeconds||e.getEndTime()<0?1:Su.getEasingSine((e.getEndTime()-r)/this._fadeOutSeconds)),e.setState(r,n),this.doUpdateParameters(t,r,n,e),e.getEndTime()>0&&e.getEndTime()<r&&e.setIsFinished(!0)}setFadeInTime(t){this._fadeInSeconds=t}setFadeOutTime(t){this._fadeOutSeconds=t}getFadeOutTime(){return this._fadeOutSeconds}getFadeInTime(){return this._fadeInSeconds}setWeight(t){this._weight=t}getWeight(){return this._weight}getDuration(){return-1}getLoopDuration(){return-1}setOffsetTime(t){this._offsetSeconds=t}getFiredEvent(t,e){return this._firedEventValues}setFinishedMotionHandler(t){this._onFinishedMotion=t}getFinishedMotionHandler(){return this._onFinishedMotion}}class ju extends Gu{constructor(){super(),this._parameters=[]}static create(t){const e=new ju,r=t.FadeInTime,n=t.FadeOutTime;e.setFadeInTime(void 0!==r?r:1),e.setFadeOutTime(void 0!==n?n:1);const i=t.Parameters||[];for(let o=0;o<i.length;++o){const t=i[o],r=t.Id,n=t.Value;let s;switch(t.Blend){case"Multiply":s=Xu.ExpressionBlendType_Multiply;break;case"Overwrite":s=Xu.ExpressionBlendType_Overwrite;break;default:s=Xu.ExpressionBlendType_Add}const a={parameterId:r,blendType:s,value:n};e._parameters.push(a)}return e}doUpdateParameters(t,e,r,n){for(let i=0;i<this._parameters.length;++i){const e=this._parameters[i];switch(e.blendType){case Xu.ExpressionBlendType_Add:t.addParameterValueById(e.parameterId,e.value,r);break;case Xu.ExpressionBlendType_Multiply:t.multiplyParameterValueById(e.parameterId,e.value,r);break;case Xu.ExpressionBlendType_Overwrite:t.setParameterValueById(e.parameterId,e.value,r)}}}}var Xu=(t=>(t[t.ExpressionBlendType_Add=0]="ExpressionBlendType_Add",t[t.ExpressionBlendType_Multiply=1]="ExpressionBlendType_Multiply",t[t.ExpressionBlendType_Overwrite=2]="ExpressionBlendType_Overwrite",t))(Xu||{});class zu{constructor(){this._autoDelete=!1,this._available=!0,this._finished=!1,this._started=!1,this._startTimeSeconds=-1,this._fadeInStartTimeSeconds=0,this._endTimeSeconds=-1,this._stateTimeSeconds=0,this._stateWeight=0,this._lastEventCheckSeconds=0,this._motionQueueEntryHandle=this,this._fadeOutSeconds=0,this._isTriggeredFadeOut=!1}release(){this._autoDelete&&this._motion&&this._motion.release()}setFadeOut(t){this._fadeOutSeconds=t,this._isTriggeredFadeOut=!0}startFadeOut(t,e){const r=e+t;this._isTriggeredFadeOut=!0,(this._endTimeSeconds<0||r<this._endTimeSeconds)&&(this._endTimeSeconds=r)}isFinished(){return this._finished}isStarted(){return this._started}getStartTime(){return this._startTimeSeconds}getFadeInStartTime(){return this._fadeInStartTimeSeconds}getEndTime(){return this._endTimeSeconds}setStartTime(t){this._startTimeSeconds=t}setFadeInStartTime(t){this._fadeInStartTimeSeconds=t}setEndTime(t){this._endTimeSeconds=t}setIsFinished(t){this._finished=t}setIsStarted(t){this._started=t}isAvailable(){return this._available}setIsAvailable(t){this._available=t}setState(t,e){this._stateTimeSeconds=t,this._stateWeight=e}getStateTime(){return this._stateTimeSeconds}getStateWeight(){return this._stateWeight}getLastCheckEventSeconds(){return this._lastEventCheckSeconds}setLastCheckEventSeconds(t){this._lastEventCheckSeconds=t}isTriggeredFadeOut(){return this._isTriggeredFadeOut}getFadeOutSeconds(){return this._fadeOutSeconds}}class Vu{constructor(){this._userTimeSeconds=0,this._eventCustomData=null,this._motions=[]}release(){for(let t=0;t<this._motions.length;++t)this._motions[t]&&this._motions[t].release();this._motions=void 0}startMotion(t,e,r){if(null==t)return Hu;let n;for(let i=0;i<this._motions.length;++i)n=this._motions[i],null!=n&&n.setFadeOut(n._motion.getFadeOutTime());return n=new zu,n._autoDelete=e,n._motion=t,this._motions.push(n),n._motionQueueEntryHandle}isFinished(){let t=0;for(;t<this._motions.length;){const e=this._motions[t];if(null==e){this._motions.splice(t,1);continue}if(null!=e._motion){if(!e.isFinished())return!1;t++}else e.release(),this._motions.splice(t,1)}return!0}isFinishedByHandle(t){for(let e=0;e<this._motions.length;e++){const r=this._motions[e];if(null!=r&&(r._motionQueueEntryHandle==t&&!r.isFinished()))return!1}return!0}stopAllMotions(){for(let t=0;t<this._motions.length;t++){const e=this._motions[t];null!=e&&e.release()}this._motions=[]}getCubismMotionQueueEntry(t){return this._motions.find((e=>null!=e&&e._motionQueueEntryHandle==t))}setEventCallback(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._eventCallBack=t,this._eventCustomData=e}doUpdateMotion(t,e){let r=!1,n=0;for(;n<this._motions.length;){const i=this._motions[n];if(null==i){this._motions.splice(n,1);continue}const o=i._motion;if(null==o){i.release(),this._motions.splice(n,1);continue}o.updateParameters(t,i,e),r=!0;const s=o.getFiredEvent(i.getLastCheckEventSeconds()-i.getStartTime(),e-i.getStartTime());for(let t=0;t<s.length;++t)this._eventCallBack(this,s[t],this._eventCustomData);i.setLastCheckEventSeconds(e),i.isFinished()?(i.release(),this._motions.splice(n,1)):(i.isTriggeredFadeOut()&&i.startFadeOut(i.getFadeOutSeconds(),e),n++)}return r}}const Hu=-1;class Yu extends Ml{constructor(t,e){var r;super(t,e),this.queueManager=new Vu,this.definitions=null!=(r=t.expressions)?r:[],this.init()}isFinished(){return this.queueManager.isFinished()}getExpressionIndex(t){return this.definitions.findIndex((e=>e.Name===t))}getExpressionFile(t){return t.File}createExpression(t,e){return ju.create(t)}_setExpression(t){return this.queueManager.startMotion(t,!1,performance.now())}stopAllExpressions(){this.queueManager.stopAllMotions()}updateParameters(t,e){return this.queueManager.doUpdateMotion(t,e)}}class Wu{constructor(t){this.groups=t.Groups,this.hitAreas=t.HitAreas,this.layout=t.Layout,this.moc=t.FileReferences.Moc,this.expressions=t.FileReferences.Expressions,this.motions=t.FileReferences.Motions,this.textures=t.FileReferences.Textures,this.physics=t.FileReferences.Physics,this.pose=t.FileReferences.Pose}getEyeBlinkParameters(){var t,e;return null==(e=null==(t=this.groups)?void 0:t.find((t=>"EyeBlink"===t.Name)))?void 0:e.Ids}getLipSyncParameters(){var t,e;return null==(e=null==(t=this.groups)?void 0:t.find((t=>"LipSync"===t.Name)))?void 0:e.Ids}}class qu extends Ol{constructor(t){if(super(t),!qu.isValidJSON(t))throw new TypeError("Invalid JSON.");Object.assign(this,new Wu(t))}static isValidJSON(t){var e;return!!(null==t?void 0:t.FileReferences)&&"string"===typeof t.FileReferences.Moc&&(null==(e=t.FileReferences.Textures)?void 0:e.length)>0&&t.FileReferences.Textures.every((t=>"string"===typeof t))}replaceFiles(t){if(super.replaceFiles(t),this.motions)for(const[e,r]of Object.entries(this.motions))for(let n=0;n<r.length;n++)r[n].File=t(r[n].File,"motions.".concat(e,"[").concat(n,"].File")),void 0!==r[n].Sound&&(r[n].Sound=t(r[n].Sound,"motions.".concat(e,"[").concat(n,"].Sound")));if(this.expressions)for(let e=0;e<this.expressions.length;e++)this.expressions[e].File=t(this.expressions[e].File,"expressions[".concat(e,"].File"))}}Al(qu,[Wu]);var $u=(t=>(t[t.CubismMotionCurveTarget_Model=0]="CubismMotionCurveTarget_Model",t[t.CubismMotionCurveTarget_Parameter=1]="CubismMotionCurveTarget_Parameter",t[t.CubismMotionCurveTarget_PartOpacity=2]="CubismMotionCurveTarget_PartOpacity",t))($u||{}),Ku=(t=>(t[t.CubismMotionSegmentType_Linear=0]="CubismMotionSegmentType_Linear",t[t.CubismMotionSegmentType_Bezier=1]="CubismMotionSegmentType_Bezier",t[t.CubismMotionSegmentType_Stepped=2]="CubismMotionSegmentType_Stepped",t[t.CubismMotionSegmentType_InverseStepped=3]="CubismMotionSegmentType_InverseStepped",t))(Ku||{});class Qu{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.time=t,this.value=e}}class Zu{constructor(){this.basePointIndex=0,this.segmentType=0}}class Ju{constructor(){this.id="",this.type=0,this.segmentCount=0,this.baseSegmentIndex=0,this.fadeInTime=0,this.fadeOutTime=0}}class th{constructor(){this.fireTime=0,this.value=""}}class eh{constructor(){this.duration=0,this.loop=!1,this.curveCount=0,this.eventCount=0,this.fps=0,this.curves=[],this.segments=[],this.points=[],this.events=[]}}class rh{constructor(t){this._json=t}release(){this._json=void 0}getMotionDuration(){return this._json.Meta.Duration}isMotionLoop(){return this._json.Meta.Loop||!1}getEvaluationOptionFlag(t){return nh.EvaluationOptionFlag_AreBeziersRistricted==t&&!!this._json.Meta.AreBeziersRestricted}getMotionCurveCount(){return this._json.Meta.CurveCount}getMotionFps(){return this._json.Meta.Fps}getMotionTotalSegmentCount(){return this._json.Meta.TotalSegmentCount}getMotionTotalPointCount(){return this._json.Meta.TotalPointCount}getMotionFadeInTime(){return this._json.Meta.FadeInTime}getMotionFadeOutTime(){return this._json.Meta.FadeOutTime}getMotionCurveTarget(t){return this._json.Curves[t].Target}getMotionCurveId(t){return this._json.Curves[t].Id}getMotionCurveFadeInTime(t){return this._json.Curves[t].FadeInTime}getMotionCurveFadeOutTime(t){return this._json.Curves[t].FadeOutTime}getMotionCurveSegmentCount(t){return this._json.Curves[t].Segments.length}getMotionCurveSegment(t,e){return this._json.Curves[t].Segments[e]}getEventCount(){return this._json.Meta.UserDataCount||0}getTotalEventValueSize(){return this._json.Meta.TotalUserDataSize}getEventTime(t){return this._json.UserData[t].Time}getEventValue(t){return this._json.UserData[t].Value}}var nh=(t=>(t[t.EvaluationOptionFlag_AreBeziersRistricted=0]="EvaluationOptionFlag_AreBeziersRistricted",t))(nh||{});function ih(t,e,r){const n=new Qu;return n.time=t.time+(e.time-t.time)*r,n.value=t.value+(e.value-t.value)*r,n}function oh(t,e){let r=(e-t[0].time)/(t[1].time-t[0].time);return r<0&&(r=0),t[0].value+(t[1].value-t[0].value)*r}function sh(t,e){let r=(e-t[0].time)/(t[3].time-t[0].time);r<0&&(r=0);const n=ih(t[0],t[1],r),i=ih(t[1],t[2],r),o=ih(t[2],t[3],r),s=ih(n,i,r),a=ih(i,o,r);return ih(s,a,r).value}function ah(t,e){const r=e,n=t[0].time,i=t[3].time,o=t[1].time,s=t[2].time,a=i-3*s+3*o-n,l=3*s-6*o+3*n,u=3*o-3*n,h=n-r,c=Su.cardanoAlgorithmForBezier(a,l,u,h),d=ih(t[0],t[1],c),f=ih(t[1],t[2],c),p=ih(t[2],t[3],c),m=ih(d,f,c),y=ih(f,p,c);return ih(m,y,c).value}function lh(t,e){return t[0].value}function uh(t,e){return t[1].value}function hh(t,e,r){const n=t.curves[e];let i=-1;const o=n.baseSegmentIndex+n.segmentCount;let s=0;for(let l=n.baseSegmentIndex;l<o;++l)if(s=t.segments[l].basePointIndex+(t.segments[l].segmentType==Ku.CubismMotionSegmentType_Bezier?3:1),t.points[s].time>r){i=l;break}if(-1==i)return t.points[s].value;const a=t.segments[i];return a.evaluate(t.points.slice(a.basePointIndex),r)}class ch extends Gu{constructor(){super(),this._eyeBlinkParameterIds=[],this._lipSyncParameterIds=[],this._sourceFrameRate=30,this._loopDurationSeconds=-1,this._isLoop=!1,this._isLoopFadeIn=!0,this._lastWeight=0}static create(t,e){const r=new ch;return r.parse(t),r._sourceFrameRate=r._motionData.fps,r._loopDurationSeconds=r._motionData.duration,r._onFinishedMotion=e,r}doUpdateParameters(t,e,r,n){null==this._modelCurveIdEyeBlink&&(this._modelCurveIdEyeBlink="EyeBlink"),null==this._modelCurveIdLipSync&&(this._modelCurveIdLipSync="LipSync");let i=e-n.getStartTime();i<0&&(i=0);let o=Number.MAX_VALUE,s=Number.MAX_VALUE;const a=64;let l=0,u=0;this._eyeBlinkParameterIds.length>a&&Lu("too many eye blink targets : {0}",this._eyeBlinkParameterIds.length),this._lipSyncParameterIds.length>a&&Lu("too many lip sync targets : {0}",this._lipSyncParameterIds.length);const h=this._fadeInSeconds<=0?1:Su.getEasingSine((e-n.getFadeInStartTime())/this._fadeInSeconds),c=this._fadeOutSeconds<=0||n.getEndTime()<0?1:Su.getEasingSine((n.getEndTime()-e)/this._fadeOutSeconds);let d,f,p,m=i;if(this._isLoop)for(;m>this._motionData.duration;)m-=this._motionData.duration;const y=this._motionData.curves;for(f=0;f<this._motionData.curveCount&&y[f].type==$u.CubismMotionCurveTarget_Model;++f)d=hh(this._motionData,f,m),y[f].id==this._modelCurveIdEyeBlink?s=d:y[f].id==this._modelCurveIdLipSync&&(o=d);for(;f<this._motionData.curveCount&&y[f].type==$u.CubismMotionCurveTarget_Parameter;++f){if(p=t.getParameterIndex(y[f].id),-1==p)continue;const i=t.getParameterValueByIndex(p);if(d=hh(this._motionData,f,m),s!=Number.MAX_VALUE)for(let t=0;t<this._eyeBlinkParameterIds.length&&t<a;++t)if(this._eyeBlinkParameterIds[t]==y[f].id){d*=s,u|=1<<t;break}if(o!=Number.MAX_VALUE)for(let t=0;t<this._lipSyncParameterIds.length&&t<a;++t)if(this._lipSyncParameterIds[t]==y[f].id){d+=o,l|=1<<t;break}let g;if(y[f].fadeInTime<0&&y[f].fadeOutTime<0)g=i+(d-i)*r;else{let t,r;t=y[f].fadeInTime<0?h:0==y[f].fadeInTime?1:Su.getEasingSine((e-n.getFadeInStartTime())/y[f].fadeInTime),r=y[f].fadeOutTime<0?c:0==y[f].fadeOutTime||n.getEndTime()<0?1:Su.getEasingSine((n.getEndTime()-e)/y[f].fadeOutTime);g=i+(d-i)*(this._weight*t*r)}t.setParameterValueByIndex(p,g,1)}if(s!=Number.MAX_VALUE)for(let g=0;g<this._eyeBlinkParameterIds.length&&g<a;++g){const e=t.getParameterValueById(this._eyeBlinkParameterIds[g]);if(u>>g&1)continue;const n=e+(s-e)*r;t.setParameterValueById(this._eyeBlinkParameterIds[g],n)}if(o!=Number.MAX_VALUE)for(let g=0;g<this._lipSyncParameterIds.length&&g<a;++g){const e=t.getParameterValueById(this._lipSyncParameterIds[g]);if(l>>g&1)continue;const n=e+(o-e)*r;t.setParameterValueById(this._lipSyncParameterIds[g],n)}for(;f<this._motionData.curveCount&&y[f].type==$u.CubismMotionCurveTarget_PartOpacity;++f)if(d=hh(this._motionData,f,m),vl.setOpacityFromMotion)t.setPartOpacityById(y[f].id,d);else{if(p=t.getParameterIndex(y[f].id),-1==p)continue;t.setParameterValueByIndex(p,d)}i>=this._motionData.duration&&(this._isLoop?(n.setStartTime(e),this._isLoopFadeIn&&n.setFadeInStartTime(e)):(this._onFinishedMotion&&this._onFinishedMotion(this),n.setIsFinished(!0))),this._lastWeight=r}setIsLoop(t){this._isLoop=t}isLoop(){return this._isLoop}setIsLoopFadeIn(t){this._isLoopFadeIn=t}isLoopFadeIn(){return this._isLoopFadeIn}getDuration(){return this._isLoop?-1:this._loopDurationSeconds}getLoopDuration(){return this._loopDurationSeconds}setParameterFadeInTime(t,e){const r=this._motionData.curves;for(let n=0;n<this._motionData.curveCount;++n)if(t==r[n].id)return void(r[n].fadeInTime=e)}setParameterFadeOutTime(t,e){const r=this._motionData.curves;for(let n=0;n<this._motionData.curveCount;++n)if(t==r[n].id)return void(r[n].fadeOutTime=e)}getParameterFadeInTime(t){const e=this._motionData.curves;for(let r=0;r<this._motionData.curveCount;++r)if(t==e[r].id)return e[r].fadeInTime;return-1}getParameterFadeOutTime(t){const e=this._motionData.curves;for(let r=0;r<this._motionData.curveCount;++r)if(t==e[r].id)return e[r].fadeOutTime;return-1}setEffectIds(t,e){this._eyeBlinkParameterIds=t,this._lipSyncParameterIds=e}release(){this._motionData=void 0}parse(t){this._motionData=new eh;let e=new rh(t);this._motionData.duration=e.getMotionDuration(),this._motionData.loop=e.isMotionLoop(),this._motionData.curveCount=e.getMotionCurveCount(),this._motionData.fps=e.getMotionFps(),this._motionData.eventCount=e.getEventCount();const r=e.getEvaluationOptionFlag(nh.EvaluationOptionFlag_AreBeziersRistricted),n=e.getMotionFadeInTime(),i=e.getMotionFadeOutTime();this._fadeInSeconds=void 0!==n?n<0?1:n:1,this._fadeOutSeconds=void 0!==i?i<0?1:i:1,this._motionData.curves=Array.from({length:this._motionData.curveCount}).map((()=>new Ju)),this._motionData.segments=Array.from({length:e.getMotionTotalSegmentCount()}).map((()=>new Zu)),this._motionData.events=Array.from({length:this._motionData.eventCount}).map((()=>new th)),this._motionData.points=[];let o=0,s=0;for(let a=0;a<this._motionData.curveCount;++a){const t=this._motionData.curves[a];switch(e.getMotionCurveTarget(a)){case"Model":t.type=$u.CubismMotionCurveTarget_Model;break;case"Parameter":t.type=$u.CubismMotionCurveTarget_Parameter;break;case"PartOpacity":t.type=$u.CubismMotionCurveTarget_PartOpacity;break;default:Bu('Warning : Unable to get segment type from Curve! The number of "CurveCount" may be incorrect!')}t.id=e.getMotionCurveId(a),t.baseSegmentIndex=s;const n=e.getMotionCurveFadeInTime(a),i=e.getMotionCurveFadeOutTime(a);t.fadeInTime=void 0!==n?n:-1,t.fadeOutTime=void 0!==i?i:-1;for(let l=0;l<e.getMotionCurveSegmentCount(a);){0==l?(this._motionData.segments[s].basePointIndex=o,this._motionData.points[o]=new Qu(e.getMotionCurveSegment(a,l),e.getMotionCurveSegment(a,l+1)),o+=1,l+=2):this._motionData.segments[s].basePointIndex=o-1;switch(e.getMotionCurveSegment(a,l)){case Ku.CubismMotionSegmentType_Linear:this._motionData.segments[s].segmentType=Ku.CubismMotionSegmentType_Linear,this._motionData.segments[s].evaluate=oh,this._motionData.points[o]=new Qu(e.getMotionCurveSegment(a,l+1),e.getMotionCurveSegment(a,l+2)),o+=1,l+=3;break;case Ku.CubismMotionSegmentType_Bezier:this._motionData.segments[s].segmentType=Ku.CubismMotionSegmentType_Bezier,this._motionData.segments[s].evaluate=r?sh:ah,this._motionData.points[o]=new Qu(e.getMotionCurveSegment(a,l+1),e.getMotionCurveSegment(a,l+2)),this._motionData.points[o+1]=new Qu(e.getMotionCurveSegment(a,l+3),e.getMotionCurveSegment(a,l+4)),this._motionData.points[o+2]=new Qu(e.getMotionCurveSegment(a,l+5),e.getMotionCurveSegment(a,l+6)),o+=3,l+=7;break;case Ku.CubismMotionSegmentType_Stepped:this._motionData.segments[s].segmentType=Ku.CubismMotionSegmentType_Stepped,this._motionData.segments[s].evaluate=lh,this._motionData.points[o]=new Qu(e.getMotionCurveSegment(a,l+1),e.getMotionCurveSegment(a,l+2)),o+=1,l+=3;break;case Ku.CubismMotionSegmentType_InverseStepped:this._motionData.segments[s].segmentType=Ku.CubismMotionSegmentType_InverseStepped,this._motionData.segments[s].evaluate=uh,this._motionData.points[o]=new Qu(e.getMotionCurveSegment(a,l+1),e.getMotionCurveSegment(a,l+2)),o+=1,l+=3}++t.segmentCount,++s}this._motionData.curves.push(t)}for(let a=0;a<e.getEventCount();++a)this._motionData.events[a].fireTime=e.getEventTime(a),this._motionData.events[a].value=e.getEventValue(a);e.release()}getFiredEvent(t,e){this._firedEventValues.length=0;for(let r=0;r<this._motionData.eventCount;++r)this._motionData.events[r].fireTime>t&&this._motionData.events[r].fireTime<=e&&this._firedEventValues.push(this._motionData.events[r].value);return this._firedEventValues}}class dh extends Fl{constructor(t,e){var r;super(t,e),this.groups={idle:"Idle"},this.motionDataType="json",this.queueManager=new Vu,this.definitions=null!=(r=t.motions)?r:{},this.eyeBlinkIds=t.getEyeBlinkParameters()||[],this.lipSyncIds=t.getLipSyncParameters()||[],this.init(e)}init(t){super.init(t),this.settings.expressions&&(this.expressionManager=new Yu(this.settings,t)),this.queueManager.setEventCallback(((t,e,r)=>{this.emit("motion:"+e)}))}isFinished(){return this.queueManager.isFinished()}_startMotion(t,e){return t.setFinishedMotionHandler(e),this.queueManager.stopAllMotions(),this.queueManager.startMotion(t,!1,performance.now())}_stopAllMotions(){this.queueManager.stopAllMotions()}createMotion(t,e,r){const n=ch.create(t),i=new rh(t),o=(e===this.groups.idle?xl.idleMotionFadingDuration:xl.motionFadingDuration)/1e3;return void 0===i.getMotionFadeInTime()&&n.setFadeInTime(r.FadeInTime>0?r.FadeInTime:o),void 0===i.getMotionFadeOutTime()&&n.setFadeOutTime(r.FadeOutTime>0?r.FadeOutTime:o),n.setEffectIds(this.eyeBlinkIds,this.lipSyncIds),n}getMotionFile(t){return t.File}getMotionName(t){return t.File}getSoundFile(t){return t.Sound}updateParameters(t,e){return this.queueManager.doUpdateMotion(t,e)}destroy(){super.destroy(),this.queueManager.release(),this.queueManager=void 0}}class fh{constructor(){this._breathParameters=[],this._currentTime=0}static create(){return new fh}setParameters(t){this._breathParameters=t}getParameters(){return this._breathParameters}updateParameters(t,e){this._currentTime+=e;const r=2*this._currentTime*3.14159;for(let n=0;n<this._breathParameters.length;++n){const e=this._breathParameters[n];t.addParameterValueById(e.parameterId,e.offset+e.peak*Math.sin(r/e.cycle),e.weight)}}}class ph{constructor(t,e,r,n,i){this.parameterId=void 0==t?void 0:t,this.offset=void 0==e?0:e,this.peak=void 0==r?0:r,this.cycle=void 0==n?0:n,this.weight=void 0==i?0:i}}const mh=class{static create(t){return new mh(t)}setBlinkingInterval(t){this._blinkingIntervalSeconds=t}setBlinkingSetting(t,e,r){this._closingSeconds=t,this._closedSeconds=e,this._openingSeconds=r}setParameterIds(t){this._parameterIds=t}getParameterIds(){return this._parameterIds}updateParameters(t,e){let r;this._userTimeSeconds+=e;let n=0;switch(this._blinkingState){case gh.EyeState_Closing:n=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds,n>=1&&(n=1,this._blinkingState=gh.EyeState_Closed,this._stateStartTimeSeconds=this._userTimeSeconds),r=1-n;break;case gh.EyeState_Closed:n=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds,n>=1&&(this._blinkingState=gh.EyeState_Opening,this._stateStartTimeSeconds=this._userTimeSeconds),r=0;break;case gh.EyeState_Opening:n=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds,n>=1&&(n=1,this._blinkingState=gh.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming()),r=n;break;case gh.EyeState_Interval:this._nextBlinkingTime<this._userTimeSeconds&&(this._blinkingState=gh.EyeState_Closing,this._stateStartTimeSeconds=this._userTimeSeconds),r=1;break;case gh.EyeState_First:default:this._blinkingState=gh.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming(),r=1}mh.CloseIfZero||(r=-r);for(let i=0;i<this._parameterIds.length;++i)t.setParameterValueById(this._parameterIds[i],r)}constructor(t){var e,r;this._blinkingState=gh.EyeState_First,this._nextBlinkingTime=0,this._stateStartTimeSeconds=0,this._blinkingIntervalSeconds=4,this._closingSeconds=.1,this._closedSeconds=.05,this._openingSeconds=.15,this._userTimeSeconds=0,this._parameterIds=[],null!=t&&(this._parameterIds=null!=(r=null==(e=t.getEyeBlinkParameters())?void 0:e.slice())?r:this._parameterIds)}determinNextBlinkingTiming(){const t=Math.random();return this._userTimeSeconds+t*(2*this._blinkingIntervalSeconds-1)}};let yh=mh;yh.CloseIfZero=!0;var gh=(t=>(t[t.EyeState_First=0]="EyeState_First",t[t.EyeState_Interval=1]="EyeState_Interval",t[t.EyeState_Closing=2]="EyeState_Closing",t[t.EyeState_Closed=3]="EyeState_Closed",t[t.EyeState_Opening=4]="EyeState_Opening",t))(gh||{});class _h{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.x=t,this.y=e,this.width=r,this.height=n}getCenterX(){return this.x+.5*this.width}getCenterY(){return this.y+.5*this.height}getRight(){return this.x+this.width}getBottom(){return this.y+this.height}setRect(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height}expand(t,e){this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e}}let vh,bh,xh;class Th{getChannelFlagAsColor(t){return this._channelColors[t]}getMaskRenderTexture(){let t=0;if(this._maskTexture&&0!=this._maskTexture.texture&&(this._maskTexture.frameNo=this._currentFrameNo,t=this._maskTexture.texture),0==t){const e=this._clippingMaskBufferSize;this._colorBuffer=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this._colorBuffer),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,e,e,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),t=this.gl.createFramebuffer(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this._colorBuffer,0),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,xh),this._maskTexture=new Sh(this._currentFrameNo,t)}return t}setGL(t){this.gl=t}calcClippedDrawTotalBounds(t,e){let r=Number.MAX_VALUE,n=Number.MAX_VALUE,i=Number.MIN_VALUE,o=Number.MIN_VALUE;const s=e._clippedDrawableIndexList.length;for(let a=0;a<s;a++){const s=e._clippedDrawableIndexList[a],l=t.getDrawableVertexCount(s),u=t.getDrawableVertices(s);let h=Number.MAX_VALUE,c=Number.MAX_VALUE,d=Number.MIN_VALUE,f=Number.MIN_VALUE;const p=l*Cu;for(let t=Ru;t<p;t+=Cu){const e=u[t],r=u[t+1];e<h&&(h=e),e>d&&(d=e),r<c&&(c=r),r>f&&(f=r)}if(h!=Number.MAX_VALUE)if(h<r&&(r=h),c<n&&(n=c),d>i&&(i=d),f>o&&(o=f),r==Number.MAX_VALUE)e._allClippedDrawRect.x=0,e._allClippedDrawRect.y=0,e._allClippedDrawRect.width=0,e._allClippedDrawRect.height=0,e._isUsing=!1;else{e._isUsing=!0;const t=i-r,s=o-n;e._allClippedDrawRect.x=r,e._allClippedDrawRect.y=n,e._allClippedDrawRect.width=t,e._allClippedDrawRect.height=s}}}constructor(){this._maskRenderTexture=null,this._colorBuffer=null,this._currentFrameNo=0,this._clippingMaskBufferSize=256,this._clippingContextListForMask=[],this._clippingContextListForDraw=[],this._channelColors=[],this._tmpBoundsOnModel=new _h,this._tmpMatrix=new wu,this._tmpMatrixForMask=new wu,this._tmpMatrixForDraw=new wu;let t=new Au;t.R=1,t.G=0,t.B=0,t.A=0,this._channelColors.push(t),t=new Au,t.R=0,t.G=1,t.B=0,t.A=0,this._channelColors.push(t),t=new Au,t.R=0,t.G=0,t.B=1,t.A=0,this._channelColors.push(t),t=new Au,t.R=0,t.G=0,t.B=0,t.A=1,this._channelColors.push(t)}release(){var t,e,r;const n=this;for(let i=0;i<this._clippingContextListForMask.length;i++)this._clippingContextListForMask[i]&&(null==(t=this._clippingContextListForMask[i])||t.release());n._clippingContextListForMask=void 0,n._clippingContextListForDraw=void 0,this._maskTexture&&(null==(e=this.gl)||e.deleteFramebuffer(this._maskTexture.texture),n._maskTexture=void 0),n._channelColors=void 0,null==(r=this.gl)||r.deleteTexture(this._colorBuffer),this._colorBuffer=null}initialize(t,e,r,n){for(let i=0;i<e;i++){if(n[i]<=0){this._clippingContextListForDraw.push(null);continue}let t=this.findSameClip(r[i],n[i]);null==t&&(t=new wh(this,r[i],n[i]),this._clippingContextListForMask.push(t)),t.addClippedDrawable(i),this._clippingContextListForDraw.push(t)}}setupClippingContext(t,e){this._currentFrameNo++;let r=0;for(let n=0;n<this._clippingContextListForMask.length;n++){const e=this._clippingContextListForMask[n];this.calcClippedDrawTotalBounds(t,e),e._isUsing&&r++}if(r>0){this.gl.viewport(0,0,this._clippingMaskBufferSize,this._clippingMaskBufferSize),this._maskRenderTexture=this.getMaskRenderTexture(),e.getMvpMatrix(),e.preDraw(),this.setupLayoutBounds(r),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._maskRenderTexture),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT);for(let r=0;r<this._clippingContextListForMask.length;r++){const n=this._clippingContextListForMask[r],i=n._allClippedDrawRect,o=n._layoutBounds,s=.05;this._tmpBoundsOnModel.setRect(i),this._tmpBoundsOnModel.expand(i.width*s,i.height*s);const a=o.width/this._tmpBoundsOnModel.width,l=o.height/this._tmpBoundsOnModel.height;this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(-1,-1),this._tmpMatrix.scaleRelative(2,2),this._tmpMatrix.translateRelative(o.x,o.y),this._tmpMatrix.scaleRelative(a,l),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()),this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(o.x,o.y),this._tmpMatrix.scaleRelative(a,l),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()),n._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()),n._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());const u=n._clippingIdCount;for(let r=0;r<u;r++){const i=n._clippingIdList[r];t.getDrawableDynamicFlagVertexPositionsDidChange(i)&&(e.setIsCulling(0!=t.getDrawableCulling(i)),e.setClippingContextBufferForMask(n),e.drawMesh(t.getDrawableTextureIndices(i),t.getDrawableVertexIndexCount(i),t.getDrawableVertexCount(i),t.getDrawableVertexIndices(i),t.getDrawableVertices(i),t.getDrawableVertexUvs(i),t.getDrawableOpacity(i),Iu.CubismBlendMode_Normal,!1))}}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,xh),e.setClippingContextBufferForMask(null),this.gl.viewport(bh[0],bh[1],bh[2],bh[3])}}findSameClip(t,e){for(let r=0;r<this._clippingContextListForMask.length;r++){const n=this._clippingContextListForMask[r],i=n._clippingIdCount;if(i!=e)continue;let o=0;for(let e=0;e<i;e++){const r=n._clippingIdList[e];for(let e=0;e<i;e++)if(t[e]==r){o++;break}}if(o==i)return n}return null}setupLayoutBounds(t){let e=t/4,r=t%4;e=~~e,r=~~r;let n=0;for(let i=0;i<4;i++){const t=e+(i<r?1:0);if(0==t);else if(1==t){const t=this._clippingContextListForMask[n++];t._layoutChannelNo=i,t._layoutBounds.x=0,t._layoutBounds.y=0,t._layoutBounds.width=1,t._layoutBounds.height=1}else if(2==t)for(let e=0;e<t;e++){let t=e%2;t=~~t;const r=this._clippingContextListForMask[n++];r._layoutChannelNo=i,r._layoutBounds.x=.5*t,r._layoutBounds.y=0,r._layoutBounds.width=.5,r._layoutBounds.height=1}else if(t<=4)for(let e=0;e<t;e++){let t=e%2,r=e/2;t=~~t,r=~~r;const o=this._clippingContextListForMask[n++];o._layoutChannelNo=i,o._layoutBounds.x=.5*t,o._layoutBounds.y=.5*r,o._layoutBounds.width=.5,o._layoutBounds.height=.5}else if(t<=9)for(let e=0;e<t;e++){let t=e%3,r=e/3;t=~~t,r=~~r;const o=this._clippingContextListForMask[n++];o._layoutChannelNo=i,o._layoutBounds.x=t/3,o._layoutBounds.y=r/3,o._layoutBounds.width=1/3,o._layoutBounds.height=1/3}else if(vl.supportMoreMaskDivisions&&t<=16)for(let e=0;e<t;e++){let t=e%4,r=e/4;t=~~t,r=~~r;const o=this._clippingContextListForMask[n++];o._layoutChannelNo=i,o._layoutBounds.x=t/4,o._layoutBounds.y=r/4,o._layoutBounds.width=1/4,o._layoutBounds.height=1/4}else ku("not supported mask count : {0}",t)}}getColorBuffer(){return this._colorBuffer}getClippingContextListForDraw(){return this._clippingContextListForDraw}setClippingMaskBufferSize(t){this._clippingMaskBufferSize=t}getClippingMaskBufferSize(){return this._clippingMaskBufferSize}}class Sh{constructor(t,e){this.frameNo=t,this.texture=e}}class wh{constructor(t,e,r){this._isUsing=!1,this._owner=t,this._clippingIdList=e,this._clippingIdCount=r,this._allClippedDrawRect=new _h,this._layoutBounds=new _h,this._clippedDrawableIndexList=[],this._matrixForMask=new wu,this._matrixForDraw=new wu}release(){const t=this;t._layoutBounds=void 0,t._allClippedDrawRect=void 0,t._clippedDrawableIndexList=void 0}addClippedDrawable(t){this._clippedDrawableIndexList.push(t)}getClippingManager(){return this._owner}setGl(t){this._owner.setGL(t)}}class Eh{static getInstance(){return null==vh?(vh=new Eh,vh):vh}static deleteInstance(){vh&&(vh.release(),vh=void 0)}constructor(){this._shaderSets=[]}release(){this.releaseShaderProgram()}setupShaderProgram(t,e,r,n,i,o,s,a,l,u,h,c,d){let f,p,m,y;h||ku("NoPremultipliedAlpha is not allowed"),0==this._shaderSets.length&&this.generateShaders();const g=t.getClippingContextBufferForMask();if(null!=g){const t=this._shaderSets[Ih.ShaderNames_SetupMask];this.gl.useProgram(t.shaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.uniform1i(t.samplerTexture0Location,0),null==s.vertex&&(s.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,n,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(t.attributePositionLocation),this.gl.vertexAttribPointer(t.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),null==s.uv&&(s.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(t.attributeTexCoordLocation),this.gl.vertexAttribPointer(t.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0);const r=g._layoutChannelNo,i=g.getClippingManager().getChannelFlagAsColor(r);this.gl.uniform4f(t.uniformChannelFlagLocation,i.R,i.G,i.B,i.A),this.gl.uniformMatrix4fv(t.uniformClipMatrixLocation,!1,g._matrixForMask.getArray());const a=g._layoutBounds;this.gl.uniform4f(t.uniformBaseColorLocation,2*a.x-1,2*a.y-1,2*a.getRight()-1,2*a.getBottom()-1),f=this.gl.ZERO,p=this.gl.ONE_MINUS_SRC_COLOR,m=this.gl.ZERO,y=this.gl.ONE_MINUS_SRC_ALPHA}else{const r=t.getClippingContextBufferForDraw(),i=null!=r?d?2:1:0;let a;switch(l){case Iu.CubismBlendMode_Normal:default:a=this._shaderSets[Ih.ShaderNames_NormalPremultipliedAlpha+i],f=this.gl.ONE,p=this.gl.ONE_MINUS_SRC_ALPHA,m=this.gl.ONE,y=this.gl.ONE_MINUS_SRC_ALPHA;break;case Iu.CubismBlendMode_Additive:a=this._shaderSets[Ih.ShaderNames_AddPremultipliedAlpha+i],f=this.gl.ONE,p=this.gl.ONE,m=this.gl.ZERO,y=this.gl.ONE;break;case Iu.CubismBlendMode_Multiplicative:a=this._shaderSets[Ih.ShaderNames_MultPremultipliedAlpha+i],f=this.gl.DST_COLOR,p=this.gl.ONE_MINUS_SRC_ALPHA,m=this.gl.ZERO,y=this.gl.ONE}if(this.gl.useProgram(a.shaderProgram),null==s.vertex&&(s.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,n,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(a.attributePositionLocation),this.gl.vertexAttribPointer(a.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),null==s.uv&&(s.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(a.attributeTexCoordLocation),this.gl.vertexAttribPointer(a.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),null!=r){this.gl.activeTexture(this.gl.TEXTURE1);const t=r.getClippingManager().getColorBuffer();this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.uniform1i(a.samplerTexture1Location,1),this.gl.uniformMatrix4fv(a.uniformClipMatrixLocation,!1,r._matrixForDraw.getArray());const e=r._layoutChannelNo,n=r.getClippingManager().getChannelFlagAsColor(e);this.gl.uniform4f(a.uniformChannelFlagLocation,n.R,n.G,n.B,n.A)}this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.uniform1i(a.samplerTexture0Location,0),this.gl.uniformMatrix4fv(a.uniformMatrixLocation,!1,c.getArray()),this.gl.uniform4f(a.uniformBaseColorLocation,u.R,u.G,u.B,u.A)}null==s.index&&(s.index=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,s.index),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,i,this.gl.DYNAMIC_DRAW),this.gl.blendFuncSeparate(f,p,m,y)}releaseShaderProgram(){for(let t=0;t<this._shaderSets.length;t++)this.gl.deleteProgram(this._shaderSets[t].shaderProgram),this._shaderSets[t].shaderProgram=0;this._shaderSets=[]}generateShaders(){for(let t=0;t<10;t++)this._shaderSets.push({});this._shaderSets[0].shaderProgram=this.loadShaderProgram(Ah,Mh),this._shaderSets[1].shaderProgram=this.loadShaderProgram(Ph,Rh),this._shaderSets[2].shaderProgram=this.loadShaderProgram(Oh,Ch),this._shaderSets[3].shaderProgram=this.loadShaderProgram(Oh,Dh),this._shaderSets[4].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[5].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[6].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[7].shaderProgram=this._shaderSets[1].shaderProgram,this._shaderSets[8].shaderProgram=this._shaderSets[2].shaderProgram,this._shaderSets[9].shaderProgram=this._shaderSets[3].shaderProgram,this._shaderSets[0].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_position"),this._shaderSets[0].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[0].shaderProgram,"a_texCoord"),this._shaderSets[0].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"s_texture0"),this._shaderSets[0].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_clipMatrix"),this._shaderSets[0].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_channelFlag"),this._shaderSets[0].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[0].shaderProgram,"u_baseColor"),this._shaderSets[1].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_position"),this._shaderSets[1].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[1].shaderProgram,"a_texCoord"),this._shaderSets[1].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"s_texture0"),this._shaderSets[1].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_matrix"),this._shaderSets[1].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[1].shaderProgram,"u_baseColor"),this._shaderSets[2].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_position"),this._shaderSets[2].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[2].shaderProgram,"a_texCoord"),this._shaderSets[2].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture0"),this._shaderSets[2].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"s_texture1"),this._shaderSets[2].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_matrix"),this._shaderSets[2].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_clipMatrix"),this._shaderSets[2].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_channelFlag"),this._shaderSets[2].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[2].shaderProgram,"u_baseColor"),this._shaderSets[3].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_position"),this._shaderSets[3].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[3].shaderProgram,"a_texCoord"),this._shaderSets[3].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture0"),this._shaderSets[3].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"s_texture1"),this._shaderSets[3].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_matrix"),this._shaderSets[3].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_clipMatrix"),this._shaderSets[3].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_channelFlag"),this._shaderSets[3].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[3].shaderProgram,"u_baseColor"),this._shaderSets[4].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_position"),this._shaderSets[4].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[4].shaderProgram,"a_texCoord"),this._shaderSets[4].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"s_texture0"),this._shaderSets[4].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_matrix"),this._shaderSets[4].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[4].shaderProgram,"u_baseColor"),this._shaderSets[5].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_position"),this._shaderSets[5].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[5].shaderProgram,"a_texCoord"),this._shaderSets[5].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture0"),this._shaderSets[5].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"s_texture1"),this._shaderSets[5].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_matrix"),this._shaderSets[5].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_clipMatrix"),this._shaderSets[5].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_channelFlag"),this._shaderSets[5].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[5].shaderProgram,"u_baseColor"),this._shaderSets[6].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_position"),this._shaderSets[6].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[6].shaderProgram,"a_texCoord"),this._shaderSets[6].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture0"),this._shaderSets[6].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"s_texture1"),this._shaderSets[6].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_matrix"),this._shaderSets[6].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_clipMatrix"),this._shaderSets[6].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_channelFlag"),this._shaderSets[6].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[6].shaderProgram,"u_baseColor"),this._shaderSets[7].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_position"),this._shaderSets[7].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[7].shaderProgram,"a_texCoord"),this._shaderSets[7].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"s_texture0"),this._shaderSets[7].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_matrix"),this._shaderSets[7].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[7].shaderProgram,"u_baseColor"),this._shaderSets[8].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_position"),this._shaderSets[8].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[8].shaderProgram,"a_texCoord"),this._shaderSets[8].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture0"),this._shaderSets[8].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"s_texture1"),this._shaderSets[8].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_matrix"),this._shaderSets[8].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_clipMatrix"),this._shaderSets[8].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_channelFlag"),this._shaderSets[8].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[8].shaderProgram,"u_baseColor"),this._shaderSets[9].attributePositionLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_position"),this._shaderSets[9].attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets[9].shaderProgram,"a_texCoord"),this._shaderSets[9].samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture0"),this._shaderSets[9].samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"s_texture1"),this._shaderSets[9].uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_matrix"),this._shaderSets[9].uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_clipMatrix"),this._shaderSets[9].uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_channelFlag"),this._shaderSets[9].uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets[9].shaderProgram,"u_baseColor")}loadShaderProgram(t,e){let r=this.gl.createProgram(),n=this.compileShaderSource(this.gl.VERTEX_SHADER,t);if(!n)return ku("Vertex shader compile error!"),0;let i=this.compileShaderSource(this.gl.FRAGMENT_SHADER,e);if(!i)return ku("Vertex shader compile error!"),0;this.gl.attachShader(r,n),this.gl.attachShader(r,i),this.gl.linkProgram(r);return this.gl.getProgramParameter(r,this.gl.LINK_STATUS)?(this.gl.deleteShader(n),this.gl.deleteShader(i),r):(ku("Failed to link program: {0}",r),this.gl.deleteShader(n),this.gl.deleteShader(i),r&&this.gl.deleteProgram(r),0)}compileShaderSource(t,e){const r=e,n=this.gl.createShader(t);if(this.gl.shaderSource(n,r),this.gl.compileShader(n),!n){ku("Shader compile log: {0} ",this.gl.getShaderInfoLog(n))}return this.gl.getShaderParameter(n,this.gl.COMPILE_STATUS)?n:(this.gl.deleteShader(n),null)}setGl(t){this.gl=t}}var Ih=(t=>(t[t.ShaderNames_SetupMask=0]="ShaderNames_SetupMask",t[t.ShaderNames_NormalPremultipliedAlpha=1]="ShaderNames_NormalPremultipliedAlpha",t[t.ShaderNames_NormalMaskedPremultipliedAlpha=2]="ShaderNames_NormalMaskedPremultipliedAlpha",t[t.ShaderNames_NomralMaskedInvertedPremultipliedAlpha=3]="ShaderNames_NomralMaskedInvertedPremultipliedAlpha",t[t.ShaderNames_AddPremultipliedAlpha=4]="ShaderNames_AddPremultipliedAlpha",t[t.ShaderNames_AddMaskedPremultipliedAlpha=5]="ShaderNames_AddMaskedPremultipliedAlpha",t[t.ShaderNames_AddMaskedPremultipliedAlphaInverted=6]="ShaderNames_AddMaskedPremultipliedAlphaInverted",t[t.ShaderNames_MultPremultipliedAlpha=7]="ShaderNames_MultPremultipliedAlpha",t[t.ShaderNames_MultMaskedPremultipliedAlpha=8]="ShaderNames_MultMaskedPremultipliedAlpha",t[t.ShaderNames_MultMaskedPremultipliedAlphaInverted=9]="ShaderNames_MultMaskedPremultipliedAlphaInverted",t))(Ih||{});const Ah="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",Mh="precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}",Ph="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",Oh="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",Rh="precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;void main(){   gl_FragColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;}",Ch="precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;void main(){   vec4 col_formask = texture2D(s_texture0 , v_texCoord) * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}",Dh="precision mediump float;varying vec2 v_texCoord;varying vec4 v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4 u_channelFlag;uniform vec4 u_baseColor;void main(){vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;col_formask = col_formask * (1.0 - maskVal);gl_FragColor = col_formask;}";class Fh extends Eu{constructor(){super(),this._clippingContextBufferForMask=null,this._clippingContextBufferForDraw=null,this._clippingManager=new Th,this.firstDraw=!0,this._textures={},this._sortedDrawableIndexList=[],this._bufferData={vertex:null,uv:null,index:null}}initialize(t){t.isUsingMasking()&&(this._clippingManager=new Th,this._clippingManager.initialize(t,t.getDrawableCount(),t.getDrawableMasks(),t.getDrawableMaskCounts()));for(let e=t.getDrawableCount()-1;e>=0;e--)this._sortedDrawableIndexList[e]=0;super.initialize(t)}bindTexture(t,e){this._textures[t]=e}getBindedTextures(){return this._textures}setClippingMaskBufferSize(t){this._clippingManager.release(),this._clippingManager=new Th,this._clippingManager.setClippingMaskBufferSize(t),this._clippingManager.initialize(this.getModel(),this.getModel().getDrawableCount(),this.getModel().getDrawableMasks(),this.getModel().getDrawableMaskCounts())}getClippingMaskBufferSize(){return this._clippingManager.getClippingMaskBufferSize()}release(){var t,e,r;const n=this;this._clippingManager.release(),n._clippingManager=void 0,null==(t=this.gl)||t.deleteBuffer(this._bufferData.vertex),this._bufferData.vertex=null,null==(e=this.gl)||e.deleteBuffer(this._bufferData.uv),this._bufferData.uv=null,null==(r=this.gl)||r.deleteBuffer(this._bufferData.index),this._bufferData.index=null,n._bufferData=void 0,n._textures=void 0}doDrawModel(){this.preDraw(),null!=this._clippingManager&&this._clippingManager.setupClippingContext(this.getModel(),this);const t=this.getModel().getDrawableCount(),e=this.getModel().getDrawableRenderOrders();for(let r=0;r<t;++r){const t=e[r];this._sortedDrawableIndexList[t]=r}for(let r=0;r<t;++r){const t=this._sortedDrawableIndexList[r];this.getModel().getDrawableDynamicFlagIsVisible(t)&&(this.setClippingContextBufferForDraw(null!=this._clippingManager?this._clippingManager.getClippingContextListForDraw()[t]:null),this.setIsCulling(this.getModel().getDrawableCulling(t)),this.drawMesh(this.getModel().getDrawableTextureIndices(t),this.getModel().getDrawableVertexIndexCount(t),this.getModel().getDrawableVertexCount(t),this.getModel().getDrawableVertexIndices(t),this.getModel().getDrawableVertices(t),this.getModel().getDrawableVertexUvs(t),this.getModel().getDrawableOpacity(t),this.getModel().getDrawableBlendMode(t),this.getModel().getDrawableInvertedMaskBit(t)))}}drawMesh(t,e,r,n,i,o,s,a,l){this.isCulling()?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW);const u=this.getModelColor();null==this.getClippingContextBufferForMask()&&(u.A*=s,this.isPremultipliedAlpha()&&(u.R*=u.A,u.G*=u.A,u.B*=u.A));let h=null;null!=this._textures[t]&&(h=this._textures[t]),Eh.getInstance().setupShaderProgram(this,h,r,i,n,o,this._bufferData,s,a,u,this.isPremultipliedAlpha(),this.getMvpMatrix(),l),this.gl.drawElements(this.gl.TRIANGLES,e,this.gl.UNSIGNED_SHORT,0),this.gl.useProgram(null),this.setClippingContextBufferForDraw(null),this.setClippingContextBufferForMask(null)}static doStaticRelease(){Eh.deleteInstance()}setRenderState(t,e){xh=t,bh=e}preDraw(){this.firstDraw&&(this.firstDraw=!1,this._anisortopy=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")),this.gl.disable(this.gl.SCISSOR_TEST),this.gl.disable(this.gl.STENCIL_TEST),this.gl.disable(this.gl.DEPTH_TEST),this.gl.frontFace(this.gl.CW),this.gl.enable(this.gl.BLEND),this.gl.colorMask(!0,!0,!0,!0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)}setClippingContextBufferForMask(t){this._clippingContextBufferForMask=t}getClippingContextBufferForMask(){return this._clippingContextBufferForMask}setClippingContextBufferForDraw(t){this._clippingContextBufferForDraw=t}getClippingContextBufferForDraw(){return this._clippingContextBufferForDraw}startUp(t){this.gl=t,this._clippingManager.setGL(t),Eh.getInstance().setGl(t)}}Eu.staticRelease=()=>{Fh.doStaticRelease()};const Lh=new wu;class Nh extends Nl{constructor(t,e,r){super(),this.lipSync=!0,this.breath=fh.create(),this.renderer=new Fh,this.idParamAngleX="ParamAngleX",this.idParamAngleY="ParamAngleY",this.idParamAngleZ="ParamAngleZ",this.idParamEyeBallX="ParamEyeBallX",this.idParamEyeBallY="ParamEyeBallY",this.idParamBodyAngleX="ParamBodyAngleX",this.idParamBreath="ParamBreath",this.pixelsPerUnit=1,this.centeringTransform=new ge,this.coreModel=t,this.settings=e,this.motionManager=new dh(e,r),this.init()}init(){var t;super.init(),(null==(t=this.settings.getEyeBlinkParameters())?void 0:t.length)>0&&(this.eyeBlink=yh.create(this.settings)),this.breath.setParameters([new ph(this.idParamAngleX,0,15,6.5345,.5),new ph(this.idParamAngleY,0,8,3.5345,.5),new ph(this.idParamAngleZ,0,10,5.5345,.5),new ph(this.idParamBodyAngleX,0,4,15.5345,.5),new ph(this.idParamBreath,0,.5,3.2345,.5)]),this.renderer.initialize(this.coreModel),this.renderer.setIsPremultipliedAlpha(!0)}getSize(){return[this.coreModel.getModel().canvasinfo.CanvasWidth,this.coreModel.getModel().canvasinfo.CanvasHeight]}getLayout(){const t={};if(this.settings.layout)for(const e of Object.keys(this.settings.layout)){t[e.charAt(0).toLowerCase()+e.slice(1)]=this.settings.layout[e]}return t}setupLayout(){super.setupLayout(),this.pixelsPerUnit=this.coreModel.getModel().canvasinfo.PixelsPerUnit,this.centeringTransform.scale(this.pixelsPerUnit,this.pixelsPerUnit).translate(this.originalWidth/2,this.originalHeight/2)}updateWebGLContext(t,e){this.renderer.firstDraw=!0,this.renderer._bufferData={vertex:null,uv:null,index:null},this.renderer.startUp(t),this.renderer._clippingManager._currentFrameNo=e,this.renderer._clippingManager._maskTexture=void 0,Eh.getInstance()._shaderSets=[]}bindTexture(t,e){this.renderer.bindTexture(t,e)}getHitAreaDefs(){var t,e;return null!=(e=null==(t=this.settings.hitAreas)?void 0:t.map((t=>({id:t.Id,name:t.Name,index:this.coreModel.getDrawableIndex(t.Id)}))))?e:[]}getDrawableIDs(){return this.coreModel.getDrawableIds()}getDrawableIndex(t){return this.coreModel.getDrawableIndex(t)}getDrawableVertices(t){if("string"===typeof t&&-1===(t=this.coreModel.getDrawableIndex(t)))throw new TypeError("Unable to find drawable ID: "+t);const e=this.coreModel.getDrawableVertices(t).slice();for(let r=0;r<e.length;r+=2)e[r]=e[r]*this.pixelsPerUnit+this.originalWidth/2,e[r+1]=-e[r+1]*this.pixelsPerUnit+this.originalHeight/2;return e}updateTransform(t){this.drawingMatrix.copyFrom(this.centeringTransform).prepend(this.localTransform).prepend(t)}update(t,e){var r,n,i,o;super.update(t,e),t/=1e3,e/=1e3;const s=this.coreModel;this.emit("beforeMotionUpdate");const a=this.motionManager.update(this.coreModel,e);this.emit("afterMotionUpdate"),s.saveParameters(),null==(r=this.motionManager.expressionManager)||r.update(s,e),a||null==(n=this.eyeBlink)||n.updateParameters(s,t),this.updateFocus(),this.updateNaturalMovements(1e3*t,1e3*e),null==(i=this.physics)||i.evaluate(s,t),null==(o=this.pose)||o.updateParameters(s,t),this.emit("beforeModelUpdate"),s.update(),s.loadParameters()}updateFocus(){this.coreModel.addParameterValueById(this.idParamEyeBallX,this.focusController.x),this.coreModel.addParameterValueById(this.idParamEyeBallY,this.focusController.y),this.coreModel.addParameterValueById(this.idParamAngleX,30*this.focusController.x),this.coreModel.addParameterValueById(this.idParamAngleY,30*this.focusController.y),this.coreModel.addParameterValueById(this.idParamAngleZ,this.focusController.x*this.focusController.y*-30),this.coreModel.addParameterValueById(this.idParamBodyAngleX,10*this.focusController.x)}updateNaturalMovements(t,e){var r;null==(r=this.breath)||r.updateParameters(this.coreModel,t/1e3)}draw(t){const e=this.drawingMatrix,r=Lh.getArray();r[0]=e.a,r[1]=e.b,r[4]=-e.c,r[5]=-e.d,r[12]=e.tx,r[13]=e.ty,this.renderer.setMvpMatrix(Lh),this.renderer.setRenderState(t.getParameter(t.FRAMEBUFFER_BINDING),this.viewport),this.renderer.drawModel()}destroy(){super.destroy(),this.renderer.release(),this.coreModel.release(),this.renderer=void 0,this.coreModel=void 0}}let Bh,kh=20;class Uh{static create(t){const e=new Uh;"number"===typeof t.FadeInTime&&(e._fadeTimeSeconds=t.FadeInTime,e._fadeTimeSeconds<=0&&(e._fadeTimeSeconds=.5));const r=t.Groups,n=r.length;for(let i=0;i<n;++i){const t=r[i],n=t.length;let o=0;for(let r=0;r<n;++r){const n=t[r],i=new Gh;i.partId=n.Id;const s=n.Link;if(s){const t=s.length;for(let e=0;e<t;++e){const t=new Gh;t.partId=s[e],i.link.push(t)}}e._partGroups.push(i),++o}e._partGroupCounts.push(o)}return e}updateParameters(t,e){t!=this._lastModel&&this.reset(t),this._lastModel=t,e<0&&(e=0);let r=0;for(let n=0;n<this._partGroupCounts.length;n++){const i=this._partGroupCounts[n];this.doFade(t,e,r,i),r+=i}this.copyPartOpacities(t)}reset(t){let e=0;for(let r=0;r<this._partGroupCounts.length;++r){const n=this._partGroupCounts[r];for(let r=e;r<e+n;++r){this._partGroups[r].initialize(t);const n=this._partGroups[r].partIndex,i=this._partGroups[r].parameterIndex;if(!(n<0)){t.setPartOpacityByIndex(n,r==e?1:0),t.setParameterValueByIndex(i,r==e?1:0);for(let e=0;e<this._partGroups[r].link.length;++e)this._partGroups[r].link[e].initialize(t)}}e+=n}}copyPartOpacities(t){for(let e=0;e<this._partGroups.length;++e){const r=this._partGroups[e];if(0==r.link.length)continue;const n=this._partGroups[e].partIndex,i=t.getPartOpacityByIndex(n);for(let e=0;e<r.link.length;++e){const n=r.link[e].partIndex;n<0||t.setPartOpacityByIndex(n,i)}}}doFade(t,e,r,n){let i=-1,o=1;const s=.5;for(let a=r;a<r+n;++a){const r=this._partGroups[a].partIndex,n=this._partGroups[a].parameterIndex;if(t.getParameterValueByIndex(n)>.001){if(i>=0)break;i=a,o=t.getPartOpacityByIndex(r),o+=e/this._fadeTimeSeconds,o>1&&(o=1)}}i<0&&(i=0,o=1);for(let a=r;a<r+n;++a){const e=this._partGroups[a].partIndex;if(i==a)t.setPartOpacityByIndex(e,o);else{let r,n=t.getPartOpacityByIndex(e);r=o<s?-.5*o/s+1:(1-o)*s/.5;(1-r)*(1-o)>.15&&(r=1-.15/(1-o)),n>r&&(n=r),t.setPartOpacityByIndex(e,n)}}}constructor(){this._fadeTimeSeconds=.5,this._lastModel=void 0,this._partGroups=[],this._partGroupCounts=[]}}class Gh{constructor(t){this.parameterIndex=0,this.partIndex=0,this.partId="",this.link=[],void 0!=t&&this.assignment(t)}assignment(t){return this.partId=t.partId,this.link=t.link.map((t=>t.clone())),this}initialize(t){this.parameterIndex=t.getParameterIndex(this.partId),this.partIndex=t.getPartIndex(this.partId),t.setParameterValueByIndex(this.parameterIndex,1)}clone(){const t=new Gh;return t.partId=this.partId,t.parameterIndex=this.parameterIndex,t.partIndex=this.partIndex,t.link=this.link.map((t=>t.clone())),t}}class jh{update(){this._model.update(),this._model.drawables.resetDynamicFlags()}getCanvasWidth(){return null==this._model?0:this._model.canvasinfo.CanvasWidth/this._model.canvasinfo.PixelsPerUnit}getCanvasHeight(){return null==this._model?0:this._model.canvasinfo.CanvasHeight/this._model.canvasinfo.PixelsPerUnit}saveParameters(){const t=this._model.parameters.count,e=this._savedParameters.length;for(let r=0;r<t;++r)r<e?this._savedParameters[r]=this._parameterValues[r]:this._savedParameters.push(this._parameterValues[r])}getModel(){return this._model}getPartIndex(t){let e;const r=this._model.parts.count;for(e=0;e<r;++e)if(t==this._partIds[e])return e;return t in this._notExistPartId?this._notExistPartId[t]:(e=r+this._notExistPartId.length,this._notExistPartId[t]=e,this._notExistPartOpacities[e]=0,e)}getPartCount(){return this._model.parts.count}setPartOpacityByIndex(t,e){t in this._notExistPartOpacities?this._notExistPartOpacities[t]=e:(0<=t&&this.getPartCount(),this._partOpacities[t]=e)}setPartOpacityById(t,e){const r=this.getPartIndex(t);r<0||this.setPartOpacityByIndex(r,e)}getPartOpacityByIndex(t){return t in this._notExistPartOpacities?this._notExistPartOpacities[t]:(0<=t&&this.getPartCount(),this._partOpacities[t])}getPartOpacityById(t){const e=this.getPartIndex(t);return e<0?0:this.getPartOpacityByIndex(e)}getParameterIndex(t){let e;const r=this._model.parameters.count;for(e=0;e<r;++e)if(t==this._parameterIds[e])return e;return t in this._notExistParameterId?this._notExistParameterId[t]:(e=this._model.parameters.count+Object.keys(this._notExistParameterId).length,this._notExistParameterId[t]=e,this._notExistParameterValues[e]=0,e)}getParameterCount(){return this._model.parameters.count}getParameterMaximumValue(t){return this._model.parameters.maximumValues[t]}getParameterMinimumValue(t){return this._model.parameters.minimumValues[t]}getParameterDefaultValue(t){return this._model.parameters.defaultValues[t]}getParameterValueByIndex(t){return t in this._notExistParameterValues?this._notExistParameterValues[t]:(0<=t&&this.getParameterCount(),this._parameterValues[t])}getParameterValueById(t){const e=this.getParameterIndex(t);return this.getParameterValueByIndex(e)}setParameterValueByIndex(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t in this._notExistParameterValues?this._notExistParameterValues[t]=1==r?e:this._notExistParameterValues[t]*(1-r)+e*r:(0<=t&&this.getParameterCount(),this._model.parameters.maximumValues[t]<e&&(e=this._model.parameters.maximumValues[t]),this._model.parameters.minimumValues[t]>e&&(e=this._model.parameters.minimumValues[t]),this._parameterValues[t]=1==r?e:this._parameterValues[t]=this._parameterValues[t]*(1-r)+e*r)}setParameterValueById(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const n=this.getParameterIndex(t);this.setParameterValueByIndex(n,e,r)}addParameterValueByIndex(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.setParameterValueByIndex(t,this.getParameterValueByIndex(t)+e*r)}addParameterValueById(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const n=this.getParameterIndex(t);this.addParameterValueByIndex(n,e,r)}multiplyParameterValueById(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const n=this.getParameterIndex(t);this.multiplyParameterValueByIndex(n,e,r)}multiplyParameterValueByIndex(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.setParameterValueByIndex(t,this.getParameterValueByIndex(t)*(1+(e-1)*r))}getDrawableIds(){return this._drawableIds.slice()}getDrawableIndex(t){const e=this._model.drawables.count;for(let r=0;r<e;++r)if(this._drawableIds[r]==t)return r;return-1}getDrawableCount(){return this._model.drawables.count}getDrawableId(t){return this._model.drawables.ids[t]}getDrawableRenderOrders(){return this._model.drawables.renderOrders}getDrawableTextureIndices(t){return this._model.drawables.textureIndices[t]}getDrawableDynamicFlagVertexPositionsDidChange(t){const e=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(e[t])}getDrawableVertexIndexCount(t){return this._model.drawables.indexCounts[t]}getDrawableVertexCount(t){return this._model.drawables.vertexCounts[t]}getDrawableVertices(t){return this.getDrawableVertexPositions(t)}getDrawableVertexIndices(t){return this._model.drawables.indices[t]}getDrawableVertexPositions(t){return this._model.drawables.vertexPositions[t]}getDrawableVertexUvs(t){return this._model.drawables.vertexUvs[t]}getDrawableOpacity(t){return this._model.drawables.opacities[t]}getDrawableCulling(t){const e=this._model.drawables.constantFlags;return!Live2DCubismCore.Utils.hasIsDoubleSidedBit(e[t])}getDrawableBlendMode(t){const e=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasBlendAdditiveBit(e[t])?Iu.CubismBlendMode_Additive:Live2DCubismCore.Utils.hasBlendMultiplicativeBit(e[t])?Iu.CubismBlendMode_Multiplicative:Iu.CubismBlendMode_Normal}getDrawableInvertedMaskBit(t){const e=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasIsInvertedMaskBit(e[t])}getDrawableMasks(){return this._model.drawables.masks}getDrawableMaskCounts(){return this._model.drawables.maskCounts}isUsingMasking(){for(let t=0;t<this._model.drawables.count;++t)if(!(this._model.drawables.maskCounts[t]<=0))return!0;return!1}getDrawableDynamicFlagIsVisible(t){const e=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasIsVisibleBit(e[t])}getDrawableDynamicFlagVisibilityDidChange(t){const e=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(e[t])}getDrawableDynamicFlagOpacityDidChange(t){const e=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasOpacityDidChangeBit(e[t])}getDrawableDynamicFlagRenderOrderDidChange(t){const e=this._model.drawables.dynamicFlags;return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(e[t])}loadParameters(){let t=this._model.parameters.count;const e=this._savedParameters.length;t>e&&(t=e);for(let r=0;r<t;++r)this._parameterValues[r]=this._savedParameters[r]}initialize(){this._parameterValues=this._model.parameters.values,this._partOpacities=this._model.parts.opacities,this._parameterMaximumValues=this._model.parameters.maximumValues,this._parameterMinimumValues=this._model.parameters.minimumValues;{const t=this._model.parameters.ids,e=this._model.parameters.count;for(let r=0;r<e;++r)this._parameterIds.push(t[r])}{const t=this._model.parts.ids,e=this._model.parts.count;for(let r=0;r<e;++r)this._partIds.push(t[r])}{const t=this._model.drawables.ids,e=this._model.drawables.count;for(let r=0;r<e;++r)this._drawableIds.push(t[r])}}constructor(t){this._model=t,this._savedParameters=[],this._parameterIds=[],this._drawableIds=[],this._partIds=[],this._notExistPartId={},this._notExistParameterId={},this._notExistParameterValues={},this._notExistPartOpacities={},this.initialize()}release(){this._model.release(),this._model=void 0}}class Xh{static create(t){const e=Live2DCubismCore.Moc.fromArrayBuffer(t);if(e)return new Xh(e);throw new Error("Unknown error")}createModel(){let t;const e=Live2DCubismCore.Model.fromMoc(this._moc);if(e)return t=new jh(e),++this._modelCount,t;throw new Error("Unknown error")}deleteModel(t){null!=t&&--this._modelCount}constructor(t){this._moc=t,this._modelCount=0}release(){this._moc._release(),this._moc=void 0}}var zh=(t=>(t[t.CubismPhysicsTargetType_Parameter=0]="CubismPhysicsTargetType_Parameter",t))(zh||{}),Vh=(t=>(t[t.CubismPhysicsSource_X=0]="CubismPhysicsSource_X",t[t.CubismPhysicsSource_Y=1]="CubismPhysicsSource_Y",t[t.CubismPhysicsSource_Angle=2]="CubismPhysicsSource_Angle",t))(Vh||{});class Hh{constructor(){this.initialPosition=new xu(0,0),this.position=new xu(0,0),this.lastPosition=new xu(0,0),this.lastGravity=new xu(0,0),this.force=new xu(0,0),this.velocity=new xu(0,0)}}class Yh{constructor(){this.normalizationPosition={},this.normalizationAngle={}}}class Wh{constructor(){this.source={}}}class qh{constructor(){this.destination={},this.translationScale=new xu(0,0)}}class $h{constructor(){this.settings=[],this.inputs=[],this.outputs=[],this.particles=[],this.gravity=new xu(0,0),this.wind=new xu(0,0)}}class Kh{constructor(t){this._json=t}release(){this._json=void 0}getGravity(){const t=new xu(0,0);return t.x=this._json.Meta.EffectiveForces.Gravity.X,t.y=this._json.Meta.EffectiveForces.Gravity.Y,t}getWind(){const t=new xu(0,0);return t.x=this._json.Meta.EffectiveForces.Wind.X,t.y=this._json.Meta.EffectiveForces.Wind.Y,t}getSubRigCount(){return this._json.Meta.PhysicsSettingCount}getTotalInputCount(){return this._json.Meta.TotalInputCount}getTotalOutputCount(){return this._json.Meta.TotalOutputCount}getVertexCount(){return this._json.Meta.VertexCount}getNormalizationPositionMinimumValue(t){return this._json.PhysicsSettings[t].Normalization.Position.Minimum}getNormalizationPositionMaximumValue(t){return this._json.PhysicsSettings[t].Normalization.Position.Maximum}getNormalizationPositionDefaultValue(t){return this._json.PhysicsSettings[t].Normalization.Position.Default}getNormalizationAngleMinimumValue(t){return this._json.PhysicsSettings[t].Normalization.Angle.Minimum}getNormalizationAngleMaximumValue(t){return this._json.PhysicsSettings[t].Normalization.Angle.Maximum}getNormalizationAngleDefaultValue(t){return this._json.PhysicsSettings[t].Normalization.Angle.Default}getInputCount(t){return this._json.PhysicsSettings[t].Input.length}getInputWeight(t,e){return this._json.PhysicsSettings[t].Input[e].Weight}getInputReflect(t,e){return this._json.PhysicsSettings[t].Input[e].Reflect}getInputType(t,e){return this._json.PhysicsSettings[t].Input[e].Type}getInputSourceId(t,e){return this._json.PhysicsSettings[t].Input[e].Source.Id}getOutputCount(t){return this._json.PhysicsSettings[t].Output.length}getOutputVertexIndex(t,e){return this._json.PhysicsSettings[t].Output[e].VertexIndex}getOutputAngleScale(t,e){return this._json.PhysicsSettings[t].Output[e].Scale}getOutputWeight(t,e){return this._json.PhysicsSettings[t].Output[e].Weight}getOutputDestinationId(t,e){return this._json.PhysicsSettings[t].Output[e].Destination.Id}getOutputType(t,e){return this._json.PhysicsSettings[t].Output[e].Type}getOutputReflect(t,e){return this._json.PhysicsSettings[t].Output[e].Reflect}getParticleCount(t){return this._json.PhysicsSettings[t].Vertices.length}getParticleMobility(t,e){return this._json.PhysicsSettings[t].Vertices[e].Mobility}getParticleDelay(t,e){return this._json.PhysicsSettings[t].Vertices[e].Delay}getParticleAcceleration(t,e){return this._json.PhysicsSettings[t].Vertices[e].Acceleration}getParticleRadius(t,e){return this._json.PhysicsSettings[t].Vertices[e].Radius}getParticlePosition(t,e){const r=new xu(0,0);return r.x=this._json.PhysicsSettings[t].Vertices[e].Position.X,r.y=this._json.PhysicsSettings[t].Vertices[e].Position.Y,r}}const Qh="Angle";class Zh{static create(t){const e=new Zh;return e.parse(t),e._physicsRig.gravity.y=0,e}evaluate(t,e){let r,n,i,o;const s=new xu;let a,l,u,h,c,d,f,p;c=t.getModel().parameters.values,d=t.getModel().parameters.maximumValues,f=t.getModel().parameters.minimumValues,p=t.getModel().parameters.defaultValues;for(let m=0;m<this._physicsRig.subRigCount;++m){r={angle:0},s.x=0,s.y=0,a=this._physicsRig.settings[m],l=this._physicsRig.inputs.slice(a.baseInputIndex),u=this._physicsRig.outputs.slice(a.baseOutputIndex),h=this._physicsRig.particles.slice(a.baseParticleIndex);for(let e=0;e<a.inputCount;++e)n=l[e].weight/100,-1==l[e].sourceParameterIndex&&(l[e].sourceParameterIndex=t.getParameterIndex(l[e].source.id)),l[e].getNormalizedParameterValue(s,r,c[l[e].sourceParameterIndex],f[l[e].sourceParameterIndex],d[l[e].sourceParameterIndex],p[l[e].sourceParameterIndex],a.normalizationPosition,a.normalizationAngle,l[e].reflect,n);i=Su.degreesToRadian(-r.angle),s.x=s.x*Su.cos(i)-s.y*Su.sin(i),s.y=s.x*Su.sin(i)+s.y*Su.cos(i),hc(h,a.particleCount,s,r.angle,this._options.wind,.001*a.normalizationPosition.maximum,e,5);for(let e=0;e<a.outputCount;++e){const r=u[e].vertexIndex;if(r<1||r>=a.particleCount)break;-1==u[e].destinationParameterIndex&&(u[e].destinationParameterIndex=t.getParameterIndex(u[e].destination.id));const n=new xu;n.x=h[r].position.x-h[r-1].position.x,n.y=h[r].position.y-h[r-1].position.y,o=u[e].getValue(n,h,r,u[e].reflect,this._options.gravity);const i=u[e].destinationParameterIndex,s=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(c.subarray(i))):c.slice(i);cc(s,f[i],d[i],o,u[e]);for(let t=i,e=0;t<c.length;t++,e++)c[t]=s[e]}}}setOptions(t){this._options=t}getOption(){return this._options}constructor(){this._options=new Jh,this._options.gravity.y=-1,this._options.gravity.x=0,this._options.wind.x=0,this._options.wind.y=0}release(){this._physicsRig=void 0}parse(t){this._physicsRig=new $h;let e=new Kh(t);this._physicsRig.gravity=e.getGravity(),this._physicsRig.wind=e.getWind(),this._physicsRig.subRigCount=e.getSubRigCount();let r=0,n=0,i=0;for(let o=0;o<this._physicsRig.subRigCount;++o){const t=new Yh;t.normalizationPosition.minimum=e.getNormalizationPositionMinimumValue(o),t.normalizationPosition.maximum=e.getNormalizationPositionMaximumValue(o),t.normalizationPosition.defalut=e.getNormalizationPositionDefaultValue(o),t.normalizationAngle.minimum=e.getNormalizationAngleMinimumValue(o),t.normalizationAngle.maximum=e.getNormalizationAngleMaximumValue(o),t.normalizationAngle.defalut=e.getNormalizationAngleDefaultValue(o),t.inputCount=e.getInputCount(o),t.baseInputIndex=r,r+=t.inputCount;for(let r=0;r<t.inputCount;++r){const t=new Wh;switch(t.sourceParameterIndex=-1,t.weight=e.getInputWeight(o,r),t.reflect=e.getInputReflect(o,r),e.getInputType(o,r)){case"X":t.type=Vh.CubismPhysicsSource_X,t.getNormalizedParameterValue=tc;break;case"Y":t.type=Vh.CubismPhysicsSource_Y,t.getNormalizedParameterValue=ec;break;case Qh:t.type=Vh.CubismPhysicsSource_Angle,t.getNormalizedParameterValue=rc}t.source.targetType=zh.CubismPhysicsTargetType_Parameter,t.source.id=e.getInputSourceId(o,r),this._physicsRig.inputs.push(t)}t.outputCount=e.getOutputCount(o),t.baseOutputIndex=n,n+=t.outputCount;for(let r=0;r<t.outputCount;++r){const t=new qh;switch(t.destinationParameterIndex=-1,t.vertexIndex=e.getOutputVertexIndex(o,r),t.angleScale=e.getOutputAngleScale(o,r),t.weight=e.getOutputWeight(o,r),t.destination.targetType=zh.CubismPhysicsTargetType_Parameter,t.destination.id=e.getOutputDestinationId(o,r),e.getOutputType(o,r)){case"X":t.type=Vh.CubismPhysicsSource_X,t.getValue=nc,t.getScale=ac;break;case"Y":t.type=Vh.CubismPhysicsSource_Y,t.getValue=ic,t.getScale=lc;break;case Qh:t.type=Vh.CubismPhysicsSource_Angle,t.getValue=oc,t.getScale=uc}t.reflect=e.getOutputReflect(o,r),this._physicsRig.outputs.push(t)}t.particleCount=e.getParticleCount(o),t.baseParticleIndex=i,i+=t.particleCount;for(let r=0;r<t.particleCount;++r){const t=new Hh;t.mobility=e.getParticleMobility(o,r),t.delay=e.getParticleDelay(o,r),t.acceleration=e.getParticleAcceleration(o,r),t.radius=e.getParticleRadius(o,r),t.position=e.getParticlePosition(o,r),this._physicsRig.particles.push(t)}this._physicsRig.settings.push(t)}this.initialize(),e.release()}initialize(){let t,e,r;for(let n=0;n<this._physicsRig.subRigCount;++n){e=this._physicsRig.settings[n],t=this._physicsRig.particles.slice(e.baseParticleIndex),t[0].initialPosition=new xu(0,0),t[0].lastPosition=new xu(t[0].initialPosition.x,t[0].initialPosition.y),t[0].lastGravity=new xu(0,-1),t[0].lastGravity.y*=-1,t[0].velocity=new xu(0,0),t[0].force=new xu(0,0);for(let n=1;n<e.particleCount;++n)r=new xu(0,0),r.y=t[n].radius,t[n].initialPosition=new xu(t[n-1].initialPosition.x+r.x,t[n-1].initialPosition.y+r.y),t[n].position=new xu(t[n].initialPosition.x,t[n].initialPosition.y),t[n].lastPosition=new xu(t[n].initialPosition.x,t[n].initialPosition.y),t[n].lastGravity=new xu(0,-1),t[n].lastGravity.y*=-1,t[n].velocity=new xu(0,0),t[n].force=new xu(0,0)}}}class Jh{constructor(){this.gravity=new xu(0,0),this.wind=new xu(0,0)}}function tc(t,e,r,n,i,o,s,a,l,u){t.x+=dc(r,n,i,o,s.minimum,s.maximum,s.defalut,l)*u}function ec(t,e,r,n,i,o,s,a,l,u){t.y+=dc(r,n,i,o,s.minimum,s.maximum,s.defalut,l)*u}function rc(t,e,r,n,i,o,s,a,l,u){e.angle+=dc(r,n,i,o,a.minimum,a.maximum,a.defalut,l)*u}function nc(t,e,r,n,i){let o=t.x;return n&&(o*=-1),o}function ic(t,e,r,n,i){let o=t.y;return n&&(o*=-1),o}function oc(t,e,r,n,i){let o;return i=r>=2?e[r-1].position.substract(e[r-2].position):i.multiplyByScaler(-1),o=Su.directionToRadian(i,t),n&&(o*=-1),o}function sc(t,e){return Math.min(t,e)+function(t,e){return Math.abs(Math.max(t,e)-Math.min(t,e))}(t,e)/2}function ac(t,e){return t.x}function lc(t,e){return t.y}function uc(t,e){return e}function hc(t,e,r,n,i,o,s,a){let l,u,h,c,d=new xu(0,0),f=new xu(0,0),p=new xu(0,0),m=new xu(0,0);t[0].position=new xu(r.x,r.y),l=Su.degreesToRadian(n),c=Su.radianToDirection(l),c.normalize();for(let y=1;y<e;++y)t[y].force=c.multiplyByScaler(t[y].acceleration).add(i),t[y].lastPosition=new xu(t[y].position.x,t[y].position.y),u=t[y].delay*s*30,d=t[y].position.substract(t[y-1].position),h=Su.directionToRadian(t[y].lastGravity,c)/a,d.x=Su.cos(h)*d.x-d.y*Su.sin(h),d.y=Su.sin(h)*d.x+d.y*Su.cos(h),t[y].position=t[y-1].position.add(d),f=t[y].velocity.multiplyByScaler(u),p=t[y].force.multiplyByScaler(u).multiplyByScaler(u),t[y].position=t[y].position.add(f).add(p),m=t[y].position.substract(t[y-1].position),m.normalize(),t[y].position=t[y-1].position.add(m.multiplyByScaler(t[y].radius)),Su.abs(t[y].position.x)<o&&(t[y].position.x=0),0!=u&&(t[y].velocity=t[y].position.substract(t[y].lastPosition),t[y].velocity=t[y].velocity.divisionByScalar(u),t[y].velocity=t[y].velocity.multiplyByScaler(t[y].mobility)),t[y].force=new xu(0,0),t[y].lastGravity=new xu(c.x,c.y)}function cc(t,e,r,n,i){let o,s,a;o=i.getScale(i.translationScale,i.angleScale),s=n*o,s<e?(s<i.valueBelowMinimum&&(i.valueBelowMinimum=s),s=e):s>r&&(s>i.valueExceededMaximum&&(i.valueExceededMaximum=s),s=r),a=i.weight/100,a>=1||(s=t[0]*(1-a)+s*a),t[0]=s}function dc(t,e,r,n,i,o,s,a){let l=0;const u=Su.max(r,e);u<t&&(t=u);const h=Su.min(r,e);h>t&&(t=h);const c=Su.min(i,o),d=Su.max(i,o),f=s,p=sc(h,u),m=t-p;switch(Math.sign(m)){case 1:{const t=u-p;0!=t&&(l=m*((d-f)/t),l+=f);break}case-1:{const t=h-p;0!=t&&(l=m*((c-f)/t),l+=f);break}case 0:l=f}return a?l:-1*l}function fc(){var t;null==(t=this.__moc)||t.release()}Kl.registerRuntime({version:4,ready:function(){return Du.isStarted()?Promise.resolve():(null!=Bh||(Bh=new Promise(((t,e)=>{!function r(){try{n=Object.assign({logFunction:console.log,loggingLevel:Fu.LogLevel_Verbose},n),Du.startUp(n),Du.initialize(),t()}catch(i){if(kh--,kh<0){const t=new Error("Failed to start up Cubism 4 framework.");return t.cause=i,void e(t)}Sl.log("Cubism4","Startup failed, retrying 10ms later..."),setTimeout(r,10)}var n}()}))),Bh)},test:t=>t instanceof qu||qu.isValidJSON(t),isValidMoc(t){if(t.byteLength<4)return!1;const e=new Int8Array(t,0,4);return"MOC3"===String.fromCharCode(...e)},createModelSettings:t=>new qu(t),createCoreModel(t){const e=Xh.create(t);try{const t=e.createModel();return t.__moc=e,t}catch(r){try{e.release()}catch(n){}throw r}},createInternalModel(t,e,r){const n=new Nh(t,e,r),i=t;return i.__moc&&(n.__moc=i.__moc,delete i.__moc,n.once("destroy",fc)),n},createPhysics:(t,e)=>Zh.create(e),createPose:(t,e)=>Uh.create(e)});var pc,mc,yc,gc,_c,vc,bc,xc,Tc,Sc=r(219),wc=r.n(Sc),Ec=r(904);!function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"}(pc||(pc={})),function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"}(mc||(mc={})),function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}(yc||(yc={})),function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"}(gc||(gc={})),function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"}(_c||(_c={})),function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(vc||(vc={})),function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"}(bc||(bc={})),function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"}(xc||(xc={})),function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"}(Tc||(Tc={}));const[Ic,Ac]=(()=>{const t=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw t()}return e.asIntN=()=>{throw t()},e.asUintN=()=>{throw t()},"undefined"!==typeof BigInt?[BigInt,!0]:[e,!1]})(),[Mc,Pc]=(()=>{const t=()=>{throw new Error("BigInt64Array is not available in this environment")};return"undefined"!==typeof BigInt64Array?[BigInt64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}},!1]})(),[Oc,Rc]=(()=>{const t=()=>{throw new Error("BigUint64Array is not available in this environment")};return"undefined"!==typeof BigUint64Array?[BigUint64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}},!1]})(),Cc=t=>"number"===typeof t,Dc=t=>"boolean"===typeof t,Fc=t=>"function"===typeof t,Lc=t=>null!=t&&Object(t)===t,Nc=t=>Lc(t)&&Fc(t.then),Bc=t=>Lc(t)&&Fc(t[Symbol.iterator]),kc=t=>Lc(t)&&Fc(t[Symbol.asyncIterator]),Uc=t=>Lc(t)&&Lc(t.schema),Gc=t=>Lc(t)&&"done"in t&&"value"in t,jc=t=>Lc(t)&&Fc(t.stat)&&Cc(t.fd),Xc=t=>Lc(t)&&Vc(t.body),zc=t=>"_getDOMStream"in t&&"_getNodeStream"in t,Vc=t=>Lc(t)&&Fc(t.cancel)&&Fc(t.getReader)&&!zc(t),Hc=t=>Lc(t)&&Fc(t.read)&&Fc(t.pipe)&&Dc(t.readable)&&!zc(t),Yc=t=>Lc(t)&&Fc(t.clear)&&Fc(t.bytes)&&Fc(t.position)&&Fc(t.setPosition)&&Fc(t.capacity)&&Fc(t.getBufferIdentifier)&&Fc(t.createLong);function Wc(t){if(null===t)return"null";if(undefined===t)return"undefined";switch(typeof t){case"number":case"bigint":return"".concat(t);case"string":return'"'.concat(t,'"')}return"function"===typeof t[Symbol.toPrimitive]?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?"[".concat(t instanceof Mc||t instanceof Oc?[...t].map((t=>Wc(t))):t,"]"):ArrayBuffer.isView(t)?"[".concat(t,"]"):JSON.stringify(t,((t,e)=>"bigint"===typeof e?"".concat(e):e))}function qc(t,e,r,n){return new(r||(r=Promise))((function(i,o){function s(t){try{l(n.next(t))}catch(e){o(e)}}function a(t){try{l(n.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,a)}l((n=n.apply(t,e||[])).next())}))}Object.create;function $c(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kc(t){return this instanceof Kc?(this.v=t,this):new Kc(t)}function Qc(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(t,e||[]),o=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(t){i[t]&&(n[t]=function(e){return new Promise((function(r,n){o.push([t,e,r,n])>1||a(t,e)}))})}function a(t,e){try{(r=i[t](e)).value instanceof Kc?Promise.resolve(r.value.v).then(l,u):h(o[0][2],r)}catch(n){h(o[0][3],n)}var r}function l(t){a("next",t)}function u(t){a("throw",t)}function h(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function Zc(t){var e,r;return e={},n("next"),n("throw",(function(t){throw t})),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,i){e[n]=t[n]?function(e){return(r=!r)?{value:Kc(t[n](e)),done:!1}:i?i(e):e}:i}}function Jc(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t=$c(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,i){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,i,(e=t[r](e)).done,e.value)}))}}}Object.create;"function"===typeof SuppressedError&&SuppressedError;const td=new TextDecoder("utf-8"),ed=t=>td.decode(t),rd=new TextEncoder,nd=t=>rd.encode(t),id="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function od(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.byteLength;const i=t.byteLength,o=new Uint8Array(t.buffer,t.byteOffset,i),s=new Uint8Array(e.buffer,e.byteOffset,Math.min(n,i));return o.set(s,r),t}function sd(t,e){const r=function(t){const e=t[0]?[t[0]]:[];let r,n,i,o;for(let s,a,l=0,u=0,h=t.length;++l<h;)s=e[u],a=t[l],!s||!a||s.buffer!==a.buffer||a.byteOffset<s.byteOffset?a&&(e[++u]=a):(({byteOffset:r,byteLength:i}=s),({byteOffset:n,byteLength:o}=a),r+i<n||n+o<r?a&&(e[++u]=a):e[u]=new Uint8Array(s.buffer,r,n-r+o));return e}(t),n=r.reduce(((t,e)=>t+e.byteLength),0);let i,o,s,a=0,l=-1;const u=Math.min(e||Number.POSITIVE_INFINITY,n);for(const h=r.length;++l<h;){if(i=r[l],o=i.subarray(0,Math.min(i.length,u-a)),u<=a+o.length){o.length<i.length?r[l]=i.subarray(o.length):o.length===i.length&&l++,s?od(s,o,a):s=o;break}od(s||(s=new Uint8Array(u)),o,a),a+=o.length}return[s||new Uint8Array(0),r.slice(l),n-(s?s.byteLength:0)]}function ad(t,e){let r=Gc(e)?e.value:e;return r instanceof t?t===Uint8Array?new t(r.buffer,r.byteOffset,r.byteLength):r:r?("string"===typeof r&&(r=nd(r)),r instanceof ArrayBuffer||r instanceof id?new t(r):Yc(r)?ad(t,r.bytes()):ArrayBuffer.isView(r)?r.byteLength<=0?new t(0):new t(r.buffer,r.byteOffset,r.byteLength/t.BYTES_PER_ELEMENT):t.from(r)):new t(0)}const ld=t=>ad(Int32Array,t),ud=t=>ad(Uint8Array,t),hd=t=>(t.next(),t);function*cd(t,e){const r=function*(t){yield t},n="string"===typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof id?r(e):Bc(e)?e:r(e);return yield*hd(function*(e){let r=null;do{r=e.next(yield ad(t,r))}while(!r.done)}(n[Symbol.iterator]())),new t}function dd(t,e){return Qc(this,arguments,(function*(){if(Nc(e))return yield Kc(yield Kc(yield*Zc(Jc(dd(t,yield Kc(e))))));const r=function(t){return Qc(this,arguments,(function*(){yield yield Kc(yield Kc(t))}))},n="string"===typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof id?r(e):Bc(e)?function(t){return Qc(this,arguments,(function*(){yield Kc(yield*Zc(Jc(hd(function*(t){let e=null;do{e=t.next(yield null===e||void 0===e?void 0:e.value)}while(!e.done)}(t[Symbol.iterator]())))))}))}(e):kc(e)?e:r(e);return yield Kc(yield*Zc(Jc(hd(function(e){return Qc(this,arguments,(function*(){let r=null;do{r=yield Kc(e.next(yield yield Kc(ad(t,r))))}while(!r.done)}))}(n[Symbol.asyncIterator]()))))),yield Kc(new t)}))}function fd(t,e,r){if(0!==t){r=r.slice(0,e+1);for(let n=-1;++n<=e;)r[n]+=t}return r}const pd=Symbol.for("isArrowBigNum");function md(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return 0===r.length?Object.setPrototypeOf(ad(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...r),this.constructor.prototype)}function yd(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return md.apply(this,e)}function gd(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return md.apply(this,e)}function _d(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return md.apply(this,e)}function vd(t){const{buffer:e,byteOffset:r,length:n,signed:i}=t,o=new Oc(e,r,n),s=i&&o[o.length-1]&BigInt(1)<<BigInt(63);let a=s?BigInt(1):BigInt(0),l=BigInt(0);if(s){for(const t of o)a+=~t*(BigInt(1)<<BigInt(32)*l++);a*=BigInt(-1)}else for(const u of o)a+=u*(BigInt(1)<<BigInt(32)*l++);return a}let bd,xd;function Td(t){let e="";const r=new Uint32Array(2);let n=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const i=new Uint32Array((n=new Uint16Array(n).reverse()).buffer);let o=-1;const s=n.length-1;do{for(r[0]=n[o=0];o<s;)n[o++]=r[1]=r[0]/10,r[0]=(r[0]-10*r[1]<<16)+n[o];n[o]=r[1]=r[0]/10,r[0]=r[0]-10*r[1],e="".concat(r[0]).concat(e)}while(i[0]||i[1]||i[2]||i[3]);return null!==e&&void 0!==e?e:"0"}md.prototype[pd]=!0,md.prototype.toJSON=function(){return'"'.concat(bd(this),'"')},md.prototype.valueOf=function(){return vd(this)},md.prototype.toString=function(){return bd(this)},md.prototype[Symbol.toPrimitive]=function(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default"){case"number":return vd(this);case"string":return bd(this);case"default":return xd(this)}return bd(this)},Object.setPrototypeOf(yd.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(gd.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(_d.prototype,Object.create(Uint32Array.prototype)),Object.assign(yd.prototype,md.prototype,{constructor:yd,signed:!0,TypedArray:Int32Array,BigIntArray:Mc}),Object.assign(gd.prototype,md.prototype,{constructor:gd,signed:!1,TypedArray:Uint32Array,BigIntArray:Oc}),Object.assign(_d.prototype,md.prototype,{constructor:_d,signed:!0,TypedArray:Uint32Array,BigIntArray:Oc}),Ac?(xd=t=>8===t.byteLength?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:Td(t),bd=t=>8===t.byteLength?"".concat(new t.BigIntArray(t.buffer,t.byteOffset,1)[0]):Td(t)):(bd=Td,xd=bd);class Sd{static new(t,e){switch(e){case!0:return new yd(t);case!1:return new gd(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case Mc:return new yd(t)}return 16===t.byteLength?new _d(t):new gd(t)}static signed(t){return new yd(t)}static unsigned(t){return new gd(t)}static decimal(t){return new _d(t)}constructor(t,e){return Sd.new(t,e)}}var wd,Ed,Id,Ad,Md,Pd,Od,Rd,Cd,Dd,Fd,Ld,Nd,Bd,kd,Ud,Gd,jd,Xd,zd;class Vd{static isNull(t){return(null===t||void 0===t?void 0:t.typeId)===xc.Null}static isInt(t){return(null===t||void 0===t?void 0:t.typeId)===xc.Int}static isFloat(t){return(null===t||void 0===t?void 0:t.typeId)===xc.Float}static isBinary(t){return(null===t||void 0===t?void 0:t.typeId)===xc.Binary}static isUtf8(t){return(null===t||void 0===t?void 0:t.typeId)===xc.Utf8}static isBool(t){return(null===t||void 0===t?void 0:t.typeId)===xc.Bool}static isDecimal(t){return(null===t||void 0===t?void 0:t.typeId)===xc.Decimal}static isDate(t){return(null===t||void 0===t?void 0:t.typeId)===xc.Date}static isTime(t){return(null===t||void 0===t?void 0:t.typeId)===xc.Time}static isTimestamp(t){return(null===t||void 0===t?void 0:t.typeId)===xc.Timestamp}static isInterval(t){return(null===t||void 0===t?void 0:t.typeId)===xc.Interval}static isList(t){return(null===t||void 0===t?void 0:t.typeId)===xc.List}static isStruct(t){return(null===t||void 0===t?void 0:t.typeId)===xc.Struct}static isUnion(t){return(null===t||void 0===t?void 0:t.typeId)===xc.Union}static isFixedSizeBinary(t){return(null===t||void 0===t?void 0:t.typeId)===xc.FixedSizeBinary}static isFixedSizeList(t){return(null===t||void 0===t?void 0:t.typeId)===xc.FixedSizeList}static isMap(t){return(null===t||void 0===t?void 0:t.typeId)===xc.Map}static isDictionary(t){return(null===t||void 0===t?void 0:t.typeId)===xc.Dictionary}static isDenseUnion(t){return Vd.isUnion(t)&&t.mode===mc.Dense}static isSparseUnion(t){return Vd.isUnion(t)&&t.mode===mc.Sparse}get typeId(){return xc.NONE}}wd=Symbol.toStringTag,Vd[wd]=((zd=Vd.prototype).children=null,zd.ArrayType=Array,zd[Symbol.toStringTag]="DataType");class Hd extends Vd{toString(){return"Null"}get typeId(){return xc.Null}}Ed=Symbol.toStringTag,Hd[Ed]=(t=>t[Symbol.toStringTag]="Null")(Hd.prototype);class Yd extends Vd{constructor(t,e){super(),this.isSigned=t,this.bitWidth=e}get typeId(){return xc.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?Mc:Oc}throw new Error("Unrecognized ".concat(this[Symbol.toStringTag]," type"))}toString(){return"".concat(this.isSigned?"I":"Ui","nt").concat(this.bitWidth)}}Id=Symbol.toStringTag,Yd[Id]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(Yd.prototype);class Wd extends Yd{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(class extends Yd{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(class extends Yd{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(Wd.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(class extends Yd{constructor(){super(!0,64)}get ArrayType(){return Mc}}.prototype,"ArrayType",{value:Mc}),Object.defineProperty(class extends Yd{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(class extends Yd{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(class extends Yd{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty(class extends Yd{constructor(){super(!1,64)}get ArrayType(){return Oc}}.prototype,"ArrayType",{value:Oc});class qd extends Vd{constructor(t){super(),this.precision=t}get typeId(){return xc.Float}get ArrayType(){switch(this.precision){case yc.HALF:return Uint16Array;case yc.SINGLE:return Float32Array;case yc.DOUBLE:return Float64Array}throw new Error("Unrecognized ".concat(this[Symbol.toStringTag]," type"))}toString(){return"Float".concat(this.precision<<5||16)}}Ad=Symbol.toStringTag,qd[Ad]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(qd.prototype);Object.defineProperty(class extends qd{constructor(){super(yc.HALF)}}.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(class extends qd{constructor(){super(yc.SINGLE)}}.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty(class extends qd{constructor(){super(yc.DOUBLE)}}.prototype,"ArrayType",{value:Float64Array});class $d extends Vd{constructor(){super()}get typeId(){return xc.Binary}toString(){return"Binary"}}Md=Symbol.toStringTag,$d[Md]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))($d.prototype);class Kd extends Vd{constructor(){super()}get typeId(){return xc.Utf8}toString(){return"Utf8"}}Pd=Symbol.toStringTag,Kd[Pd]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(Kd.prototype);class Qd extends Vd{constructor(){super()}get typeId(){return xc.Bool}toString(){return"Bool"}}Od=Symbol.toStringTag,Qd[Od]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(Qd.prototype);class Zd extends Vd{constructor(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:128;super(),this.scale=t,this.precision=e,this.bitWidth=r}get typeId(){return xc.Decimal}toString(){return"Decimal[".concat(this.precision,"e").concat(this.scale>0?"+":"").concat(this.scale,"]")}}Rd=Symbol.toStringTag,Zd[Rd]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(Zd.prototype);class Jd extends Vd{constructor(t){super(),this.unit=t}get typeId(){return xc.Date}toString(){return"Date".concat(32*(this.unit+1),"<").concat(gc[this.unit],">")}}Cd=Symbol.toStringTag,Jd[Cd]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(Jd.prototype);class tf extends Vd{constructor(t,e){super(),this.unit=t,this.bitWidth=e}get typeId(){return xc.Time}toString(){return"Time".concat(this.bitWidth,"<").concat(_c[this.unit],">")}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return Mc}throw new Error("Unrecognized ".concat(this[Symbol.toStringTag]," type"))}}Dd=Symbol.toStringTag,tf[Dd]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))(tf.prototype);class ef extends Vd{constructor(t,e){super(),this.unit=t,this.timezone=e}get typeId(){return xc.Timestamp}toString(){return"Timestamp<".concat(_c[this.unit]).concat(this.timezone?", ".concat(this.timezone):"",">")}}Fd=Symbol.toStringTag,ef[Fd]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(ef.prototype);class rf extends Vd{constructor(t){super(),this.unit=t}get typeId(){return xc.Interval}toString(){return"Interval<".concat(vc[this.unit],">")}}Ld=Symbol.toStringTag,rf[Ld]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(rf.prototype);class nf extends Vd{constructor(t){super(),this.children=[t]}get typeId(){return xc.List}toString(){return"List<".concat(this.valueType,">")}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}Nd=Symbol.toStringTag,nf[Nd]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(nf.prototype);class of extends Vd{constructor(t){super(),this.children=t}get typeId(){return xc.Struct}toString(){return"Struct<{".concat(this.children.map((t=>"".concat(t.name,":").concat(t.type))).join(", "),"}>")}}Bd=Symbol.toStringTag,of[Bd]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(of.prototype);class sf extends Vd{constructor(t,e,r){super(),this.mode=t,this.children=r,this.typeIds=e=Int32Array.from(e),this.typeIdToChildIndex=e.reduce(((t,e,r)=>(t[e]=r)&&t||t),Object.create(null))}get typeId(){return xc.Union}toString(){return"".concat(this[Symbol.toStringTag],"<").concat(this.children.map((t=>"".concat(t.type))).join(" | "),">")}}kd=Symbol.toStringTag,sf[kd]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(sf.prototype);class af extends Vd{constructor(t){super(),this.byteWidth=t}get typeId(){return xc.FixedSizeBinary}toString(){return"FixedSizeBinary[".concat(this.byteWidth,"]")}}Ud=Symbol.toStringTag,af[Ud]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(af.prototype);class lf extends Vd{constructor(t,e){super(),this.listSize=t,this.children=[e]}get typeId(){return xc.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return"FixedSizeList[".concat(this.listSize,"]<").concat(this.valueType,">")}}Gd=Symbol.toStringTag,lf[Gd]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(lf.prototype);class uf extends Vd{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.children=[t],this.keysSorted=e}get typeId(){return xc.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return"Map<{".concat(this.children[0].type.children.map((t=>"".concat(t.name,":").concat(t.type))).join(", "),"}>")}}jd=Symbol.toStringTag,uf[jd]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(uf.prototype);const hf=(cf=-1,()=>++cf);var cf;class df extends Vd{constructor(t,e,r,n){super(),this.indices=e,this.dictionary=t,this.isOrdered=n||!1,this.id=null==r?hf():"number"===typeof r?r:r.low}get typeId(){return xc.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return"Dictionary<".concat(this.indices,", ").concat(this.dictionary,">")}}function ff(t){const e=t;switch(t.typeId){case xc.Decimal:return t.bitWidth/32;case xc.Timestamp:return 2;case xc.Date:case xc.Interval:return 1+e.unit;case xc.FixedSizeList:return e.listSize;case xc.FixedSizeBinary:return e.byteWidth;default:return 1}}Xd=Symbol.toStringTag,df[Xd]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(df.prototype);class pf{visitMany(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return t.map(((t,e)=>this.visit(t,...r.map((t=>t[e])))))}visit(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(t){return function(t,e){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("number"===typeof e)return mf(t,e,r);if("string"===typeof e&&e in xc)return mf(t,xc[e],r);if(e&&e instanceof Vd)return mf(t,yf(e),r);if((null===e||void 0===e?void 0:e.type)&&e.type instanceof Vd)return mf(t,yf(e.type),r);return mf(t,xc.NONE,r)}(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}getVisitFnByTypeId(t){return mf(this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}visitNull(t){return null}visitBool(t){return null}visitInt(t){return null}visitFloat(t){return null}visitUtf8(t){return null}visitBinary(t){return null}visitFixedSizeBinary(t){return null}visitDate(t){return null}visitTimestamp(t){return null}visitTime(t){return null}visitDecimal(t){return null}visitList(t){return null}visitStruct(t){return null}visitUnion(t){return null}visitDictionary(t){return null}visitInterval(t){return null}visitFixedSizeList(t){return null}visitMap(t){return null}}function mf(t,e){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=null;switch(e){case xc.Null:n=t.visitNull;break;case xc.Bool:n=t.visitBool;break;case xc.Int:n=t.visitInt;break;case xc.Int8:n=t.visitInt8||t.visitInt;break;case xc.Int16:n=t.visitInt16||t.visitInt;break;case xc.Int32:n=t.visitInt32||t.visitInt;break;case xc.Int64:n=t.visitInt64||t.visitInt;break;case xc.Uint8:n=t.visitUint8||t.visitInt;break;case xc.Uint16:n=t.visitUint16||t.visitInt;break;case xc.Uint32:n=t.visitUint32||t.visitInt;break;case xc.Uint64:n=t.visitUint64||t.visitInt;break;case xc.Float:n=t.visitFloat;break;case xc.Float16:n=t.visitFloat16||t.visitFloat;break;case xc.Float32:n=t.visitFloat32||t.visitFloat;break;case xc.Float64:n=t.visitFloat64||t.visitFloat;break;case xc.Utf8:n=t.visitUtf8;break;case xc.Binary:n=t.visitBinary;break;case xc.FixedSizeBinary:n=t.visitFixedSizeBinary;break;case xc.Date:n=t.visitDate;break;case xc.DateDay:n=t.visitDateDay||t.visitDate;break;case xc.DateMillisecond:n=t.visitDateMillisecond||t.visitDate;break;case xc.Timestamp:n=t.visitTimestamp;break;case xc.TimestampSecond:n=t.visitTimestampSecond||t.visitTimestamp;break;case xc.TimestampMillisecond:n=t.visitTimestampMillisecond||t.visitTimestamp;break;case xc.TimestampMicrosecond:n=t.visitTimestampMicrosecond||t.visitTimestamp;break;case xc.TimestampNanosecond:n=t.visitTimestampNanosecond||t.visitTimestamp;break;case xc.Time:n=t.visitTime;break;case xc.TimeSecond:n=t.visitTimeSecond||t.visitTime;break;case xc.TimeMillisecond:n=t.visitTimeMillisecond||t.visitTime;break;case xc.TimeMicrosecond:n=t.visitTimeMicrosecond||t.visitTime;break;case xc.TimeNanosecond:n=t.visitTimeNanosecond||t.visitTime;break;case xc.Decimal:n=t.visitDecimal;break;case xc.List:n=t.visitList;break;case xc.Struct:n=t.visitStruct;break;case xc.Union:n=t.visitUnion;break;case xc.DenseUnion:n=t.visitDenseUnion||t.visitUnion;break;case xc.SparseUnion:n=t.visitSparseUnion||t.visitUnion;break;case xc.Dictionary:n=t.visitDictionary;break;case xc.Interval:n=t.visitInterval;break;case xc.IntervalDayTime:n=t.visitIntervalDayTime||t.visitInterval;break;case xc.IntervalYearMonth:n=t.visitIntervalYearMonth||t.visitInterval;break;case xc.FixedSizeList:n=t.visitFixedSizeList;break;case xc.Map:n=t.visitMap}if("function"===typeof n)return n;if(!r)return()=>null;throw new Error("Unrecognized type '".concat(xc[e],"'"))}function yf(t){switch(t.typeId){case xc.Null:return xc.Null;case xc.Int:{const{bitWidth:e,isSigned:r}=t;switch(e){case 8:return r?xc.Int8:xc.Uint8;case 16:return r?xc.Int16:xc.Uint16;case 32:return r?xc.Int32:xc.Uint32;case 64:return r?xc.Int64:xc.Uint64}return xc.Int}case xc.Float:switch(t.precision){case yc.HALF:return xc.Float16;case yc.SINGLE:return xc.Float32;case yc.DOUBLE:return xc.Float64}return xc.Float;case xc.Binary:return xc.Binary;case xc.Utf8:return xc.Utf8;case xc.Bool:return xc.Bool;case xc.Decimal:return xc.Decimal;case xc.Time:switch(t.unit){case _c.SECOND:return xc.TimeSecond;case _c.MILLISECOND:return xc.TimeMillisecond;case _c.MICROSECOND:return xc.TimeMicrosecond;case _c.NANOSECOND:return xc.TimeNanosecond}return xc.Time;case xc.Timestamp:switch(t.unit){case _c.SECOND:return xc.TimestampSecond;case _c.MILLISECOND:return xc.TimestampMillisecond;case _c.MICROSECOND:return xc.TimestampMicrosecond;case _c.NANOSECOND:return xc.TimestampNanosecond}return xc.Timestamp;case xc.Date:switch(t.unit){case gc.DAY:return xc.DateDay;case gc.MILLISECOND:return xc.DateMillisecond}return xc.Date;case xc.Interval:switch(t.unit){case vc.DAY_TIME:return xc.IntervalDayTime;case vc.YEAR_MONTH:return xc.IntervalYearMonth}return xc.Interval;case xc.Map:return xc.Map;case xc.List:return xc.List;case xc.Struct:return xc.Struct;case xc.Union:switch(t.mode){case mc.Dense:return xc.DenseUnion;case mc.Sparse:return xc.SparseUnion}return xc.Union;case xc.FixedSizeBinary:return xc.FixedSizeBinary;case xc.FixedSizeList:return xc.FixedSizeList;case xc.Dictionary:return xc.Dictionary}throw new Error("Unrecognized type '".concat(xc[t.typeId],"'"))}pf.prototype.visitInt8=null,pf.prototype.visitInt16=null,pf.prototype.visitInt32=null,pf.prototype.visitInt64=null,pf.prototype.visitUint8=null,pf.prototype.visitUint16=null,pf.prototype.visitUint32=null,pf.prototype.visitUint64=null,pf.prototype.visitFloat16=null,pf.prototype.visitFloat32=null,pf.prototype.visitFloat64=null,pf.prototype.visitDateDay=null,pf.prototype.visitDateMillisecond=null,pf.prototype.visitTimestampSecond=null,pf.prototype.visitTimestampMillisecond=null,pf.prototype.visitTimestampMicrosecond=null,pf.prototype.visitTimestampNanosecond=null,pf.prototype.visitTimeSecond=null,pf.prototype.visitTimeMillisecond=null,pf.prototype.visitTimeMicrosecond=null,pf.prototype.visitTimeNanosecond=null,pf.prototype.visitDenseUnion=null,pf.prototype.visitSparseUnion=null,pf.prototype.visitIntervalDayTime=null,pf.prototype.visitIntervalYearMonth=null;const gf=new Float64Array(1),_f=new Uint32Array(gf.buffer);function vf(t){const e=(31744&t)>>10,r=(1023&t)/1024,n=Math.pow(-1,(32768&t)>>15);switch(e){case 31:return n*(r?Number.NaN:1/0);case 0:return n*(r?6103515625e-14*r:0)}return n*Math.pow(2,e-15)*(1+r)}class bf extends pf{}function xf(t){return(e,r,n)=>{if(e.setValid(r,null!=n))return t(e,r,n)}}const Tf=(t,e,r)=>{t[e]=Math.trunc(r%4294967296),t[e+1]=Math.trunc(r/4294967296)},Sf=(t,e,r,n)=>{if(r+1<e.length){const{[r]:i,[r+1]:o}=e;t.set(n.subarray(0,o-i),i)}},wf=(t,e,r)=>{let{values:n}=t;n[e]=r},Ef=(t,e,r)=>{let{values:n}=t;n[e]=r},If=(t,e,r)=>{let{values:n}=t;n[e]=function(t){if(t!==t)return 32256;gf[0]=t;const e=(2147483648&_f[1])>>16&65535;let r=2146435072&_f[1],n=0;return r>=1089470464?_f[0]>0?r=31744:(r=(2080374784&r)>>16,n=(1048575&_f[1])>>10):r<=1056964608?(n=1048576+(1048575&_f[1]),n=1048576+(n<<(r>>20)-998)>>21,r=0):(r=r-1056964608>>10,n=512+(1048575&_f[1])>>10),e|r|65535&n}(r)},Af=(t,e,r)=>{let{values:n}=t;((t,e,r)=>{t[e]=Math.trunc(r/864e5)})(n,e,r.valueOf())},Mf=(t,e,r)=>{let{values:n}=t;Tf(n,2*e,r.valueOf())},Pf=(t,e,r)=>{let{values:n}=t;return Tf(n,2*e,r/1e3)},Of=(t,e,r)=>{let{values:n}=t;return Tf(n,2*e,r)},Rf=(t,e,r)=>{let{values:n}=t;return((t,e,r)=>{t[e]=Math.trunc(1e3*r%4294967296),t[e+1]=Math.trunc(1e3*r/4294967296)})(n,2*e,r)},Cf=(t,e,r)=>{let{values:n}=t;return((t,e,r)=>{t[e]=Math.trunc(1e6*r%4294967296),t[e+1]=Math.trunc(1e6*r/4294967296)})(n,2*e,r)},Df=(t,e,r)=>{let{values:n}=t;n[e]=r},Ff=(t,e,r)=>{let{values:n}=t;n[e]=r},Lf=(t,e,r)=>{let{values:n}=t;n[e]=r},Nf=(t,e,r)=>{let{values:n}=t;n[e]=r},Bf=(t,e,r)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];jf.visit(i,t.valueOffsets[e],r)},kf=(t,e,r)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];jf.visit(i,e,r)},Uf=(t,e,r)=>{let{values:n}=t;n.set(r.subarray(0,2),2*e)},Gf=(t,e,r)=>{let{values:n}=t;n[e]=12*r[0]+r[1]%12};bf.prototype.visitBool=xf(((t,e,r)=>{let{offset:n,values:i}=t;const o=n+e;r?i[o>>3]|=1<<o%8:i[o>>3]&=~(1<<o%8)})),bf.prototype.visitInt=xf(wf),bf.prototype.visitInt8=xf(wf),bf.prototype.visitInt16=xf(wf),bf.prototype.visitInt32=xf(wf),bf.prototype.visitInt64=xf(wf),bf.prototype.visitUint8=xf(wf),bf.prototype.visitUint16=xf(wf),bf.prototype.visitUint32=xf(wf),bf.prototype.visitUint64=xf(wf),bf.prototype.visitFloat=xf(((t,e,r)=>{switch(t.type.precision){case yc.HALF:return If(t,e,r);case yc.SINGLE:case yc.DOUBLE:return Ef(t,e,r)}})),bf.prototype.visitFloat16=xf(If),bf.prototype.visitFloat32=xf(Ef),bf.prototype.visitFloat64=xf(Ef),bf.prototype.visitUtf8=xf(((t,e,r)=>{let{values:n,valueOffsets:i}=t;Sf(n,i,e,nd(r))})),bf.prototype.visitBinary=xf(((t,e,r)=>{let{values:n,valueOffsets:i}=t;return Sf(n,i,e,r)})),bf.prototype.visitFixedSizeBinary=xf(((t,e,r)=>{let{stride:n,values:i}=t;i.set(r.subarray(0,n),n*e)})),bf.prototype.visitDate=xf(((t,e,r)=>{t.type.unit===gc.DAY?Af(t,e,r):Mf(t,e,r)})),bf.prototype.visitDateDay=xf(Af),bf.prototype.visitDateMillisecond=xf(Mf),bf.prototype.visitTimestamp=xf(((t,e,r)=>{switch(t.type.unit){case _c.SECOND:return Pf(t,e,r);case _c.MILLISECOND:return Of(t,e,r);case _c.MICROSECOND:return Rf(t,e,r);case _c.NANOSECOND:return Cf(t,e,r)}})),bf.prototype.visitTimestampSecond=xf(Pf),bf.prototype.visitTimestampMillisecond=xf(Of),bf.prototype.visitTimestampMicrosecond=xf(Rf),bf.prototype.visitTimestampNanosecond=xf(Cf),bf.prototype.visitTime=xf(((t,e,r)=>{switch(t.type.unit){case _c.SECOND:return Df(t,e,r);case _c.MILLISECOND:return Ff(t,e,r);case _c.MICROSECOND:return Lf(t,e,r);case _c.NANOSECOND:return Nf(t,e,r)}})),bf.prototype.visitTimeSecond=xf(Df),bf.prototype.visitTimeMillisecond=xf(Ff),bf.prototype.visitTimeMicrosecond=xf(Lf),bf.prototype.visitTimeNanosecond=xf(Nf),bf.prototype.visitDecimal=xf(((t,e,r)=>{let{values:n,stride:i}=t;n.set(r.subarray(0,i),i*e)})),bf.prototype.visitList=xf(((t,e,r)=>{const n=t.children[0],i=t.valueOffsets,o=jf.getVisitFn(n);if(Array.isArray(r))for(let s=-1,a=i[e],l=i[e+1];a<l;)o(n,a++,r[++s]);else for(let s=-1,a=i[e],l=i[e+1];a<l;)o(n,a++,r.get(++s))})),bf.prototype.visitStruct=xf(((t,e,r)=>{const n=t.type.children.map((t=>jf.getVisitFn(t.type))),i=r instanceof Map?(o=e,s=r,(t,e,r,n)=>e&&t(e,o,s.get(r.name))):r instanceof im?((t,e)=>(r,n,i,o)=>n&&r(n,t,e.get(o)))(e,r):Array.isArray(r)?((t,e)=>(r,n,i,o)=>n&&r(n,t,e[o]))(e,r):((t,e)=>(r,n,i,o)=>n&&r(n,t,e[i.name]))(e,r);var o,s;t.type.children.forEach(((e,r)=>i(n[r],t.children[r],e,r)))})),bf.prototype.visitUnion=xf(((t,e,r)=>{t.type.mode===mc.Dense?Bf(t,e,r):kf(t,e,r)})),bf.prototype.visitDenseUnion=xf(Bf),bf.prototype.visitSparseUnion=xf(kf),bf.prototype.visitDictionary=xf(((t,e,r)=>{var n;null===(n=t.dictionary)||void 0===n||n.set(t.values[e],r)})),bf.prototype.visitInterval=xf(((t,e,r)=>{t.type.unit===vc.DAY_TIME?Uf(t,e,r):Gf(t,e,r)})),bf.prototype.visitIntervalDayTime=xf(Uf),bf.prototype.visitIntervalYearMonth=xf(Gf),bf.prototype.visitFixedSizeList=xf(((t,e,r)=>{const{stride:n}=t,i=t.children[0],o=jf.getVisitFn(i);if(Array.isArray(r))for(let s=-1,a=e*n;++s<n;)o(i,a+s,r[s]);else for(let s=-1,a=e*n;++s<n;)o(i,a+s,r.get(s))})),bf.prototype.visitMap=xf(((t,e,r)=>{const n=t.children[0],{valueOffsets:i}=t,o=jf.getVisitFn(n);let{[e]:s,[e+1]:a}=i;const l=r instanceof Map?r.entries():Object.entries(r);for(const u of l)if(o(n,s,u),++s>=a)break}));const jf=new bf,Xf=Symbol.for("parent"),zf=Symbol.for("rowIndex");class Vf{constructor(t,e){return this[Xf]=t,this[zf]=e,new Proxy(this,new Yf)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[zf],e=this[Xf],r=e.type.children,n={};for(let i=-1,o=r.length;++i<o;)n[r[i].name]=pp.visit(e.children[i],t);return n}toString(){return"{".concat([...this].map((t=>{let[e,r]=t;return"".concat(Wc(e),": ").concat(Wc(r))})).join(", "),"}")}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new Hf(this[Xf],this[zf])}}class Hf{constructor(t,e){this.childIndex=0,this.children=t.children,this.rowIndex=e,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,pp.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(Vf.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Xf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[zf]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class Yf{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Xf].type.children.map((t=>t.name))}has(t,e){return-1!==t[Xf].type.children.findIndex((t=>t.name===e))}getOwnPropertyDescriptor(t,e){if(-1!==t[Xf].type.children.findIndex((t=>t.name===e)))return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];const r=t[Xf].type.children.findIndex((t=>t.name===e));if(-1!==r){const n=pp.visit(t[Xf].children[r],t[zf]);return Reflect.set(t,e,n),n}}set(t,e,r){const n=t[Xf].type.children.findIndex((t=>t.name===e));return-1!==n?(jf.visit(t[Xf].children[n],t[zf],r),Reflect.set(t,e,r)):!(!Reflect.has(t,e)&&"symbol"!==typeof e)&&Reflect.set(t,e,r)}}class Wf extends pf{}function qf(t){return(e,r)=>e.getValid(r)?t(e,r):null}const $f=(t,e)=>4294967296*t[e+1]+(t[e]>>>0),Kf=t=>new Date(t),Qf=(t,e,r)=>{if(r+1>=e.length)return null;const n=e[r],i=e[r+1];return t.subarray(n,i)},Zf=(t,e)=>{let{values:r}=t;return((t,e)=>Kf(((t,e)=>864e5*t[e])(t,e)))(r,e)},Jf=(t,e)=>{let{values:r}=t;return((t,e)=>Kf($f(t,e)))(r,2*e)},tp=(t,e)=>{let{stride:r,values:n}=t;return n[r*e]},ep=(t,e)=>{let{values:r}=t;return r[e]},rp=(t,e)=>{let{values:r}=t;return 1e3*$f(r,2*e)},np=(t,e)=>{let{values:r}=t;return $f(r,2*e)},ip=(t,e)=>{let{values:r}=t;return((t,e)=>t[e+1]/1e3*4294967296+(t[e]>>>0)/1e3)(r,2*e)},op=(t,e)=>{let{values:r}=t;return((t,e)=>t[e+1]/1e6*4294967296+(t[e]>>>0)/1e6)(r,2*e)},sp=(t,e)=>{let{values:r}=t;return r[e]},ap=(t,e)=>{let{values:r}=t;return r[e]},lp=(t,e)=>{let{values:r}=t;return r[e]},up=(t,e)=>{let{values:r}=t;return r[e]},hp=(t,e)=>{const r=t.type.typeIdToChildIndex[t.typeIds[e]],n=t.children[r];return pp.visit(n,t.valueOffsets[e])},cp=(t,e)=>{const r=t.type.typeIdToChildIndex[t.typeIds[e]],n=t.children[r];return pp.visit(n,e)},dp=(t,e)=>{let{values:r}=t;return r.subarray(2*e,2*(e+1))},fp=(t,e)=>{let{values:r}=t;const n=r[e],i=new Int32Array(2);return i[0]=Math.trunc(n/12),i[1]=Math.trunc(n%12),i};Wf.prototype.visitNull=qf(((t,e)=>null)),Wf.prototype.visitBool=qf(((t,e)=>{let{offset:r,values:n}=t;const i=r+e;return 0!==(n[i>>3]&1<<i%8)})),Wf.prototype.visitInt=qf(((t,e)=>{let{values:r}=t;return r[e]})),Wf.prototype.visitInt8=qf(tp),Wf.prototype.visitInt16=qf(tp),Wf.prototype.visitInt32=qf(tp),Wf.prototype.visitInt64=qf(ep),Wf.prototype.visitUint8=qf(tp),Wf.prototype.visitUint16=qf(tp),Wf.prototype.visitUint32=qf(tp),Wf.prototype.visitUint64=qf(ep),Wf.prototype.visitFloat=qf(((t,e)=>{let{type:r,values:n}=t;return r.precision!==yc.HALF?n[e]:vf(n[e])})),Wf.prototype.visitFloat16=qf(((t,e)=>{let{stride:r,values:n}=t;return vf(n[r*e])})),Wf.prototype.visitFloat32=qf(tp),Wf.prototype.visitFloat64=qf(tp),Wf.prototype.visitUtf8=qf(((t,e)=>{let{values:r,valueOffsets:n}=t;const i=Qf(r,n,e);return null!==i?ed(i):null})),Wf.prototype.visitBinary=qf(((t,e)=>{let{values:r,valueOffsets:n}=t;return Qf(r,n,e)})),Wf.prototype.visitFixedSizeBinary=qf(((t,e)=>{let{stride:r,values:n}=t;return n.subarray(r*e,r*(e+1))})),Wf.prototype.visitDate=qf(((t,e)=>t.type.unit===gc.DAY?Zf(t,e):Jf(t,e))),Wf.prototype.visitDateDay=qf(Zf),Wf.prototype.visitDateMillisecond=qf(Jf),Wf.prototype.visitTimestamp=qf(((t,e)=>{switch(t.type.unit){case _c.SECOND:return rp(t,e);case _c.MILLISECOND:return np(t,e);case _c.MICROSECOND:return ip(t,e);case _c.NANOSECOND:return op(t,e)}})),Wf.prototype.visitTimestampSecond=qf(rp),Wf.prototype.visitTimestampMillisecond=qf(np),Wf.prototype.visitTimestampMicrosecond=qf(ip),Wf.prototype.visitTimestampNanosecond=qf(op),Wf.prototype.visitTime=qf(((t,e)=>{switch(t.type.unit){case _c.SECOND:return sp(t,e);case _c.MILLISECOND:return ap(t,e);case _c.MICROSECOND:return lp(t,e);case _c.NANOSECOND:return up(t,e)}})),Wf.prototype.visitTimeSecond=qf(sp),Wf.prototype.visitTimeMillisecond=qf(ap),Wf.prototype.visitTimeMicrosecond=qf(lp),Wf.prototype.visitTimeNanosecond=qf(up),Wf.prototype.visitDecimal=qf(((t,e)=>{let{values:r,stride:n}=t;return Sd.decimal(r.subarray(n*e,n*(e+1)))})),Wf.prototype.visitList=qf(((t,e)=>{const{valueOffsets:r,stride:n,children:i}=t,{[e*n]:o,[e*n+1]:s}=r,a=i[0].slice(o,s-o);return new im([a])})),Wf.prototype.visitStruct=qf(((t,e)=>new Vf(t,e))),Wf.prototype.visitUnion=qf(((t,e)=>t.type.mode===mc.Dense?hp(t,e):cp(t,e))),Wf.prototype.visitDenseUnion=qf(hp),Wf.prototype.visitSparseUnion=qf(cp),Wf.prototype.visitDictionary=qf(((t,e)=>{var r;return null===(r=t.dictionary)||void 0===r?void 0:r.get(t.values[e])})),Wf.prototype.visitInterval=qf(((t,e)=>t.type.unit===vc.DAY_TIME?dp(t,e):fp(t,e))),Wf.prototype.visitIntervalDayTime=qf(dp),Wf.prototype.visitIntervalYearMonth=qf(fp),Wf.prototype.visitFixedSizeList=qf(((t,e)=>{const{stride:r,children:n}=t,i=n[0].slice(e*r,r);return new im([i])})),Wf.prototype.visitMap=qf(((t,e)=>{const{valueOffsets:r,children:n}=t,{[e]:i,[e+1]:o}=r,s=n[0];return new gp(s.slice(i,o-i))}));const pp=new Wf,mp=Symbol.for("keys"),yp=Symbol.for("vals");class gp{constructor(t){return this[mp]=new im([t.children[0]]).memoize(),this[yp]=t.children[1],new Proxy(this,new vp)}[Symbol.iterator](){return new _p(this[mp],this[yp])}get size(){return this[mp].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[mp],e=this[yp],r={};for(let n=-1,i=t.length;++n<i;)r[t.get(n)]=pp.visit(e,n);return r}toString(){return"{".concat([...this].map((t=>{let[e,r]=t;return"".concat(Wc(e),": ").concat(Wc(r))})).join(", "),"}")}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class _p{constructor(t,e){this.keys=t,this.vals=e,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),pp.visit(this.vals,t)]})}}class vp{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[mp].toArray().map(String)}has(t,e){return t[mp].includes(e)}getOwnPropertyDescriptor(t,e){if(-1!==t[mp].indexOf(e))return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];const r=t[mp].indexOf(e);if(-1!==r){const n=pp.visit(Reflect.get(t,yp),r);return Reflect.set(t,e,n),n}}set(t,e,r){const n=t[mp].indexOf(e);return-1!==n?(jf.visit(Reflect.get(t,yp),n,r),Reflect.set(t,e,r)):!!Reflect.has(t,e)&&Reflect.set(t,e,r)}}let bp;function xp(t,e,r,n){const{length:i=0}=t;let o="number"!==typeof e?0:e,s="number"!==typeof r?i:r;return o<0&&(o=(o%i+i)%i),s<0&&(s=(s%i+i)%i),s<o&&(bp=o,o=s,s=bp),s>i&&(s=i),n?n(t,o,s):[o,s]}Object.defineProperties(gp.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[mp]:{writable:!0,enumerable:!1,configurable:!1,value:null},[yp]:{writable:!0,enumerable:!1,configurable:!1,value:null}});const Tp=t=>t!==t;function Sp(t){if("object"!==typeof t||null===t)return Tp(t)?Tp:e=>e===t;if(t instanceof Date){const e=t.valueOf();return t=>t instanceof Date&&t.valueOf()===e}return ArrayBuffer.isView(t)?e=>!!e&&function(t,e){let r=0;const n=t.length;if(n!==e.length)return!1;if(n>0)do{if(t[r]!==e[r])return!1}while(++r<n);return!0}(t,e):t instanceof Map?function(t){let e=-1;const r=[];for(const n of t.values())r[++e]=Sp(n);return wp(r)}(t):Array.isArray(t)?function(t){const e=[];for(let r=-1,n=t.length;++r<n;)e[r]=Sp(t[r]);return wp(e)}(t):t instanceof im?function(t){const e=[];for(let r=-1,n=t.length;++r<n;)e[r]=Sp(t.get(r));return wp(e)}(t):function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=Object.keys(t);if(!e&&0===r.length)return()=>!1;const n=[];for(let i=-1,o=r.length;++i<o;)n[i]=Sp(t[r[i]]);return wp(n,r)}(t,!0)}function wp(t,e){return r=>{if(!r||"object"!==typeof r)return!1;switch(r.constructor){case Array:return function(t,e){const r=t.length;if(e.length!==r)return!1;for(let n=-1;++n<r;)if(!t[n](e[n]))return!1;return!0}(t,r);case Map:return Ep(t,r,r.keys());case gp:case Vf:case Object:case void 0:return Ep(t,r,e||Object.keys(r))}return r instanceof im&&function(t,e){const r=t.length;if(e.length!==r)return!1;for(let n=-1;++n<r;)if(!t[n](e.get(n)))return!1;return!0}(t,r)}}function Ep(t,e,r){const n=r[Symbol.iterator](),i=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),o=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let s=0;const a=t.length;let l=o.next(),u=n.next(),h=i.next();for(;s<a&&!u.done&&!h.done&&!l.done&&(u.value===h.value&&t[s](l.value));++s,u=n.next(),h=i.next(),l=o.next());return!!(s===a&&u.done&&h.done&&l.done)||(n.return&&n.return(),i.return&&i.return(),o.return&&o.return(),!1)}class Ip{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;this.numChunks=t,this.getChunkIterator=e,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function Ap(t){return t.reduce(((t,e)=>t+e.nullCount),0)}function Mp(t){return t.reduce(((t,e,r)=>(t[r+1]=t[r]+e.length,t)),new Uint32Array(t.length+1))}function Pp(t,e,r,n){const i=[];for(let o=-1,s=t.length;++o<s;){const s=t[o],a=e[o],{length:l}=s;if(a>=n)break;if(r>=a+l)continue;if(a>=r&&a+l<=n){i.push(s);continue}const u=Math.max(0,r-a),h=Math.min(n-a,l);i.push(s.slice(u,h-u))}return 0===i.length&&i.push(t[0].slice(0,0)),i}function Op(t,e,r,n){let i=0,o=0,s=e.length-1;do{if(i>=s-1)return r<e[s]?n(t,i,r-e[i]):null;o=i+Math.trunc(.5*(s-i)),r<e[o]?s=o:i=o}while(i<s)}function Rp(t,e){return t.getValid(e)}function Cp(t){function e(e,r,n){return t(e[r],n)}return function(t){return Op(this.data,this._offsets,t,e)}}function Dp(t){let e;function r(r,n,i){return t(r[n],i,e)}return function(t,n){const i=this.data;e=n;const o=Op(i,this._offsets,t,r);return e=void 0,o}}function Fp(t){let e;function r(r,n,i){let o=i,s=0,a=0;for(let l=n-1,u=r.length;++l<u;){const n=r[l];if(~(s=t(n,e,o)))return a+s;o=0,a+=n.length}return-1}return function(t,n){e=t;const i=this.data,o="number"!==typeof n?r(i,0,0):Op(i,this._offsets,n,r);return e=void 0,o}}function Lp(t,e,r,n){return 0!==(r&1<<n)}function Np(t,e,r,n){return(r&1<<n)>>n}function Bp(t,e,r){const n=r.byteLength+7&-8;if(t>0||r.byteLength<n){const i=new Uint8Array(n);return i.set(t%8===0?r.subarray(t>>3):kp(new Up(r,t,e,null,Lp)).subarray(0,n)),i}return r}function kp(t){const e=[];let r=0,n=0,i=0;for(const s of t)s&&(i|=1<<n),8===++n&&(e[r++]=i,i=n=0);(0===r||n>0)&&(e[r++]=i);const o=new Uint8Array(e.length+7&-8);return o.set(e),o}class Up{constructor(t,e,r,n,i){this.bytes=t,this.length=r,this.context=n,this.get=i,this.bit=e%8,this.byteIndex=e>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(8===this.bit&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function Gp(t,e,r){if(r-e<=0)return 0;if(r-e<8){let n=0;for(const i of new Up(t,e,r-e,t,Np))n+=i;return n}const n=r>>3<<3,i=e+(e%8===0?0:8-e%8);return Gp(t,e,i)+Gp(t,n,r)+function(t,e,r){let n=0,i=Math.trunc(e);const o=new DataView(t.buffer,t.byteOffset,t.byteLength),s=void 0===r?t.byteLength:i+r;for(;s-i>=4;)n+=jp(o.getUint32(i)),i+=4;for(;s-i>=2;)n+=jp(o.getUint16(i)),i+=2;for(;s-i>=1;)n+=jp(o.getUint8(i)),i+=1;return n}(t,i>>3,n-i>>3)}function jp(t){let e=Math.trunc(t);return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24}class Xp extends pf{}function zp(t,e,r){if(void 0===e)return-1;if(null===e)return function(t,e){const{nullBitmap:r}=t;if(!r||t.nullCount<=0)return-1;let n=0;for(const i of new Up(r,t.offset+(e||0),t.length,r,Lp)){if(!i)return n;++n}return-1}(t,r);const n=pp.getVisitFn(t),i=Sp(e);for(let o=(r||0)-1,s=t.length;++o<s;)if(i(n(t,o)))return o;return-1}function Vp(t,e,r){const n=pp.getVisitFn(t),i=Sp(e);for(let o=(r||0)-1,s=t.length;++o<s;)if(i(n(t,o)))return o;return-1}Xp.prototype.visitNull=function(t,e){return null===e&&t.length>0?0:-1},Xp.prototype.visitBool=zp,Xp.prototype.visitInt=zp,Xp.prototype.visitInt8=zp,Xp.prototype.visitInt16=zp,Xp.prototype.visitInt32=zp,Xp.prototype.visitInt64=zp,Xp.prototype.visitUint8=zp,Xp.prototype.visitUint16=zp,Xp.prototype.visitUint32=zp,Xp.prototype.visitUint64=zp,Xp.prototype.visitFloat=zp,Xp.prototype.visitFloat16=zp,Xp.prototype.visitFloat32=zp,Xp.prototype.visitFloat64=zp,Xp.prototype.visitUtf8=zp,Xp.prototype.visitBinary=zp,Xp.prototype.visitFixedSizeBinary=zp,Xp.prototype.visitDate=zp,Xp.prototype.visitDateDay=zp,Xp.prototype.visitDateMillisecond=zp,Xp.prototype.visitTimestamp=zp,Xp.prototype.visitTimestampSecond=zp,Xp.prototype.visitTimestampMillisecond=zp,Xp.prototype.visitTimestampMicrosecond=zp,Xp.prototype.visitTimestampNanosecond=zp,Xp.prototype.visitTime=zp,Xp.prototype.visitTimeSecond=zp,Xp.prototype.visitTimeMillisecond=zp,Xp.prototype.visitTimeMicrosecond=zp,Xp.prototype.visitTimeNanosecond=zp,Xp.prototype.visitDecimal=zp,Xp.prototype.visitList=zp,Xp.prototype.visitStruct=zp,Xp.prototype.visitUnion=zp,Xp.prototype.visitDenseUnion=Vp,Xp.prototype.visitSparseUnion=Vp,Xp.prototype.visitDictionary=zp,Xp.prototype.visitInterval=zp,Xp.prototype.visitIntervalDayTime=zp,Xp.prototype.visitIntervalYearMonth=zp,Xp.prototype.visitFixedSizeList=zp,Xp.prototype.visitMap=zp;const Hp=new Xp;class Yp extends pf{}function Wp(t){const{type:e}=t;if(0===t.nullCount&&1===t.stride&&(e.typeId===xc.Timestamp||e instanceof Yd&&64!==e.bitWidth||e instanceof tf&&64!==e.bitWidth||e instanceof qd&&e.precision!==yc.HALF))return new Ip(t.data.length,(e=>{const r=t.data[e];return r.values.subarray(0,r.length)[Symbol.iterator]()}));let r=0;return new Ip(t.data.length,(e=>{const n=t.data[e].length,i=t.slice(r,r+n);return r+=n,new qp(i)}))}class qp{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Yp.prototype.visitNull=Wp,Yp.prototype.visitBool=Wp,Yp.prototype.visitInt=Wp,Yp.prototype.visitInt8=Wp,Yp.prototype.visitInt16=Wp,Yp.prototype.visitInt32=Wp,Yp.prototype.visitInt64=Wp,Yp.prototype.visitUint8=Wp,Yp.prototype.visitUint16=Wp,Yp.prototype.visitUint32=Wp,Yp.prototype.visitUint64=Wp,Yp.prototype.visitFloat=Wp,Yp.prototype.visitFloat16=Wp,Yp.prototype.visitFloat32=Wp,Yp.prototype.visitFloat64=Wp,Yp.prototype.visitUtf8=Wp,Yp.prototype.visitBinary=Wp,Yp.prototype.visitFixedSizeBinary=Wp,Yp.prototype.visitDate=Wp,Yp.prototype.visitDateDay=Wp,Yp.prototype.visitDateMillisecond=Wp,Yp.prototype.visitTimestamp=Wp,Yp.prototype.visitTimestampSecond=Wp,Yp.prototype.visitTimestampMillisecond=Wp,Yp.prototype.visitTimestampMicrosecond=Wp,Yp.prototype.visitTimestampNanosecond=Wp,Yp.prototype.visitTime=Wp,Yp.prototype.visitTimeSecond=Wp,Yp.prototype.visitTimeMillisecond=Wp,Yp.prototype.visitTimeMicrosecond=Wp,Yp.prototype.visitTimeNanosecond=Wp,Yp.prototype.visitDecimal=Wp,Yp.prototype.visitList=Wp,Yp.prototype.visitStruct=Wp,Yp.prototype.visitUnion=Wp,Yp.prototype.visitDenseUnion=Wp,Yp.prototype.visitSparseUnion=Wp,Yp.prototype.visitDictionary=Wp,Yp.prototype.visitInterval=Wp,Yp.prototype.visitIntervalDayTime=Wp,Yp.prototype.visitIntervalYearMonth=Wp,Yp.prototype.visitFixedSizeList=Wp,Yp.prototype.visitMap=Wp;const $p=new Yp,Kp=(t,e)=>t+e;class Qp extends pf{visitNull(t,e){return 0}visitInt(t,e){return t.type.bitWidth/8}visitFloat(t,e){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,e){return 1/8}visitDecimal(t,e){return t.type.bitWidth/8}visitDate(t,e){return 4*(t.type.unit+1)}visitTime(t,e){return t.type.bitWidth/8}visitTimestamp(t,e){return t.type.unit===_c.SECOND?4:8}visitInterval(t,e){return 4*(t.type.unit+1)}visitStruct(t,e){return t.children.reduce(((t,r)=>t+tm.visit(r,e)),0)}visitFixedSizeBinary(t,e){return t.type.byteWidth}visitMap(t,e){return 8+t.children.reduce(((t,r)=>t+tm.visit(r,e)),0)}visitDictionary(t,e){var r;return t.type.indices.bitWidth/8+((null===(r=t.dictionary)||void 0===r?void 0:r.getByteLength(t.values[e]))||0)}}const Zp=(t,e)=>{let{type:r,children:n,typeIds:i,valueOffsets:o}=t;const s=r.typeIdToChildIndex[i[e]];return 8+tm.visit(n[s],o[e])},Jp=(t,e)=>{let{children:r}=t;return 4+tm.visitMany(r,r.map((()=>e))).reduce(Kp,0)};Qp.prototype.visitUtf8=(t,e)=>{let{valueOffsets:r}=t;return r[e+1]-r[e]+8},Qp.prototype.visitBinary=(t,e)=>{let{valueOffsets:r}=t;return r[e+1]-r[e]+8},Qp.prototype.visitList=(t,e)=>{let{valueOffsets:r,stride:n,children:i}=t;const o=i[0],{[e*n]:s}=r,{[e*n+1]:a}=r,l=tm.getVisitFn(o.type),u=o.slice(s,a-s);let h=8;for(let c=-1,d=a-s;++c<d;)h+=l(u,c);return h},Qp.prototype.visitFixedSizeList=(t,e)=>{let{stride:r,children:n}=t;const i=n[0],o=i.slice(e*r,r),s=tm.getVisitFn(i.type);let a=0;for(let l=-1,u=o.length;++l<u;)a+=s(o,l);return a},Qp.prototype.visitUnion=(t,e)=>t.type.mode===mc.Dense?Zp(t,e):Jp(t,e),Qp.prototype.visitDenseUnion=Zp,Qp.prototype.visitSparseUnion=Jp;const tm=new Qp;var em;const rm={},nm={};class im{constructor(t){var e,r,n;const i=t[0]instanceof im?t.flatMap((t=>t.data)):t;if(0===i.length||i.some((t=>!(t instanceof sm))))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=null===(e=i[0])||void 0===e?void 0:e.type;switch(i.length){case 0:this._offsets=[0];break;case 1:{const{get:t,set:e,indexOf:r,byteLength:n}=rm[o.typeId],s=i[0];this.isValid=t=>Rp(s,t),this.get=e=>t(s,e),this.set=(t,r)=>e(s,t,r),this.indexOf=t=>r(s,t),this.getByteLength=t=>n(s,t),this._offsets=[0,s.length];break}default:Object.setPrototypeOf(this,nm[o.typeId]),this._offsets=Mp(i)}this.data=i,this.type=o,this.stride=ff(o),this.numChildren=null!==(n=null===(r=o.children)||void 0===r?void 0:r.length)&&void 0!==n?n:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return-1===this._byteLength&&(this._byteLength=this.data.reduce(((t,e)=>t+e.byteLength),0)),this._byteLength}get nullCount(){return-1===this._nullCount&&(this._nullCount=Ap(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return"".concat(this.VectorName,"<").concat(this.type[Symbol.toStringTag],">")}get VectorName(){return"".concat(xc[this.type.typeId],"Vector")}isValid(t){return!1}get(t){return null}set(t,e){}indexOf(t,e){return-1}includes(t,e){return this.indexOf(t,e)>0}getByteLength(t){return 0}[Symbol.iterator](){return $p.visit(this)}concat(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return new im(this.data.concat(e.flatMap((t=>t.data)).flat(Number.POSITIVE_INFINITY)))}slice(t,e){return new im(xp(this,t,e,((t,e,r)=>{let{data:n,_offsets:i}=t;return Pp(n,i,e,r)})))}toJSON(){return[...this]}toArray(){const{type:t,data:e,length:r,stride:n,ArrayType:i}=this;switch(t.typeId){case xc.Int:case xc.Float:case xc.Decimal:case xc.Time:case xc.Timestamp:switch(e.length){case 0:return new i;case 1:return e[0].values.subarray(0,r*n);default:return e.reduce(((t,e)=>{let{values:r,length:i}=e;return t.array.set(r.subarray(0,i*n),t.offset),t.offset+=i*n,t}),{array:new i(r*n),offset:0}).array}}return[...this]}toString(){return"[".concat([...this].join(","),"]")}getChild(t){var e;return this.getChildAt(null===(e=this.type.children)||void 0===e?void 0:e.findIndex((e=>e.name===t)))}getChildAt(t){return t>-1&&t<this.numChildren?new im(this.data.map((e=>{let{children:r}=e;return r[t]}))):null}get isMemoized(){return!!Vd.isDictionary(this.type)&&this.data[0].dictionary.isMemoized}memoize(){if(Vd.isDictionary(this.type)){const t=new om(this.data[0].dictionary),e=this.data.map((e=>{const r=e.clone();return r.dictionary=t,r}));return new im(e)}return new om(this)}unmemoize(){if(Vd.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),e=this.data.map((e=>{const r=e.clone();return r.dictionary=t,r}));return new im(e)}return this}}em=Symbol.toStringTag,im[em]=(t=>{t.type=Vd.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._nullCount=-1,t._byteLength=-1,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(xc).map((t=>xc[t])).filter((t=>"number"===typeof t&&t!==xc.NONE));for(const r of e){const e=pp.getVisitFnByTypeId(r),n=jf.getVisitFnByTypeId(r),i=Hp.getVisitFnByTypeId(r),o=tm.getVisitFnByTypeId(r);rm[r]={get:e,set:n,indexOf:i,byteLength:o},nm[r]=Object.create(t,{isValid:{value:Cp(Rp)},get:{value:Cp(pp.getVisitFnByTypeId(r))},set:{value:Dp(jf.getVisitFnByTypeId(r))},indexOf:{value:Fp(Hp.getVisitFnByTypeId(r))},getByteLength:{value:Cp(tm.getVisitFnByTypeId(r))}})}return"Vector"})(im.prototype);class om extends im{constructor(t){super(t.data);const e=this.get,r=this.set,n=this.slice,i=new Array(this.length);Object.defineProperty(this,"get",{value(t){const r=i[t];if(void 0!==r)return r;const n=e.call(this,t);return i[t]=n,n}}),Object.defineProperty(this,"set",{value(t,e){r.call(this,t,e),i[t]=e}}),Object.defineProperty(this,"slice",{value:(t,e)=>new om(n.call(this,t,e))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new im(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class sm{constructor(t,e,r,n,i){let o,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=arguments.length>6?arguments[6]:void 0;this.type=t,this.children=s,this.dictionary=a,this.offset=Math.floor(Math.max(e||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(n||0,-1)),i instanceof sm?(this.stride=i.stride,this.values=i.values,this.typeIds=i.typeIds,this.nullBitmap=i.nullBitmap,this.valueOffsets=i.valueOffsets):(this.stride=ff(t),i&&((o=i[0])&&(this.valueOffsets=o),(o=i[1])&&(this.values=o),(o=i[2])&&(this.nullBitmap=o),(o=i[3])&&(this.typeIds=o))),this.nullable=0!==this._nullCount&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:e,values:r,nullBitmap:n,typeIds:i}=this;return e&&(t+=e.byteLength),r&&(t+=r.byteLength),n&&(t+=n.byteLength),i&&(t+=i.byteLength),this.children.reduce(((t,e)=>t+e.byteLength),t)}get nullCount(){let t,e=this._nullCount;return e<=-1&&(t=this.nullBitmap)&&(this._nullCount=e=this.length-Gp(t,this.offset,this.offset+this.length)),e}getValid(t){if(this.nullable&&this.nullCount>0){const e=this.offset+t;return 0!==(this.nullBitmap[e>>3]&1<<e%8)}return!0}setValid(t,e){if(!this.nullable)return e;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:t}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:t,_nullCount:0})}const{nullBitmap:r,offset:n}=this,i=n+t>>3,o=(n+t)%8,s=r[i]>>o&1;return e?0===s&&(r[i]|=1<<o,this._nullCount=this.nullCount+1):1===s&&(r[i]&=~(1<<o),this._nullCount=this.nullCount-1),e}clone(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.type,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.offset,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.length,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._nullCount,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.children;return new sm(t,e,r,n,i,o,this.dictionary)}slice(t,e){const{stride:r,typeId:n,children:i}=this,o=+(0===this._nullCount)-1,s=16===n?r:1,a=this._sliceBuffers(t,e,r,n);return this.clone(this.type,this.offset+t,e,o,a,0===i.length||this.valueOffsets?i:this._sliceChildren(i,s*t,s*e))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===xc.Null)return this.clone(this.type,0,t,0);const{length:e,nullCount:r}=this,n=new Uint8Array((t+63&-64)>>3).fill(255,0,e>>3);n[e>>3]=(1<<e-(-8&e))-1,r>0&&n.set(Bp(this.offset,e,this.nullBitmap),0);const i=this.buffers;return i[Tc.VALIDITY]=n,this.clone(this.type,0,t,r+(t-e),i)}_sliceBuffers(t,e,r,n){let i;const{buffers:o}=this;return(i=o[Tc.TYPE])&&(o[Tc.TYPE]=i.subarray(t,t+e)),(i=o[Tc.OFFSET])&&(o[Tc.OFFSET]=i.subarray(t,t+e+1))||(i=o[Tc.DATA])&&(o[Tc.DATA]=6===n?i:i.subarray(r*t,r*(t+e))),o}_sliceChildren(t,e,r){return t.map((t=>t.slice(e,r)))}}sm.prototype.children=Object.freeze([]);class am extends pf{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{type:e,offset:r=0,length:n=0}=t;return new sm(e,r,n,0)}visitBool(t){const{type:e,offset:r=0}=t,n=ud(t.nullBitmap),i=ad(e.ArrayType,t.data),{length:o=i.length>>3,nullCount:s=(t.nullBitmap?-1:0)}=t;return new sm(e,r,o,s,[void 0,i,n])}visitInt(t){const{type:e,offset:r=0}=t,n=ud(t.nullBitmap),i=ad(e.ArrayType,t.data),{length:o=i.length,nullCount:s=(t.nullBitmap?-1:0)}=t;return new sm(e,r,o,s,[void 0,i,n])}visitFloat(t){const{type:e,offset:r=0}=t,n=ud(t.nullBitmap),i=ad(e.ArrayType,t.data),{length:o=i.length,nullCount:s=(t.nullBitmap?-1:0)}=t;return new sm(e,r,o,s,[void 0,i,n])}visitUtf8(t){const{type:e,offset:r=0}=t,n=ud(t.data),i=ud(t.nullBitmap),o=ld(t.valueOffsets),{length:s=o.length-1,nullCount:a=(t.nullBitmap?-1:0)}=t;return new sm(e,r,s,a,[o,n,i])}visitBinary(t){const{type:e,offset:r=0}=t,n=ud(t.data),i=ud(t.nullBitmap),o=ld(t.valueOffsets),{length:s=o.length-1,nullCount:a=(t.nullBitmap?-1:0)}=t;return new sm(e,r,s,a,[o,n,i])}visitFixedSizeBinary(t){const{type:e,offset:r=0}=t,n=ud(t.nullBitmap),i=ad(e.ArrayType,t.data),{length:o=i.length/ff(e),nullCount:s=(t.nullBitmap?-1:0)}=t;return new sm(e,r,o,s,[void 0,i,n])}visitDate(t){const{type:e,offset:r=0}=t,n=ud(t.nullBitmap),i=ad(e.ArrayType,t.data),{length:o=i.length/ff(e),nullCount:s=(t.nullBitmap?-1:0)}=t;return new sm(e,r,o,s,[void 0,i,n])}visitTimestamp(t){const{type:e,offset:r=0}=t,n=ud(t.nullBitmap),i=ad(e.ArrayType,t.data),{length:o=i.length/ff(e),nullCount:s=(t.nullBitmap?-1:0)}=t;return new sm(e,r,o,s,[void 0,i,n])}visitTime(t){const{type:e,offset:r=0}=t,n=ud(t.nullBitmap),i=ad(e.ArrayType,t.data),{length:o=i.length/ff(e),nullCount:s=(t.nullBitmap?-1:0)}=t;return new sm(e,r,o,s,[void 0,i,n])}visitDecimal(t){const{type:e,offset:r=0}=t,n=ud(t.nullBitmap),i=ad(e.ArrayType,t.data),{length:o=i.length/ff(e),nullCount:s=(t.nullBitmap?-1:0)}=t;return new sm(e,r,o,s,[void 0,i,n])}visitList(t){const{type:e,offset:r=0,child:n}=t,i=ud(t.nullBitmap),o=ld(t.valueOffsets),{length:s=o.length-1,nullCount:a=(t.nullBitmap?-1:0)}=t;return new sm(e,r,s,a,[o,void 0,i],[n])}visitStruct(t){const{type:e,offset:r=0,children:n=[]}=t,i=ud(t.nullBitmap),{length:o=n.reduce(((t,e)=>{let{length:r}=e;return Math.max(t,r)}),0),nullCount:s=(t.nullBitmap?-1:0)}=t;return new sm(e,r,o,s,[void 0,void 0,i],n)}visitUnion(t){const{type:e,offset:r=0,children:n=[]}=t,i=ud(t.nullBitmap),o=ad(e.ArrayType,t.typeIds),{length:s=o.length,nullCount:a=(t.nullBitmap?-1:0)}=t;if(Vd.isSparseUnion(e))return new sm(e,r,s,a,[void 0,void 0,i,o],n);const l=ld(t.valueOffsets);return new sm(e,r,s,a,[l,void 0,i,o],n)}visitDictionary(t){const{type:e,offset:r=0}=t,n=ud(t.nullBitmap),i=ad(e.indices.ArrayType,t.data),{dictionary:o=new im([(new am).visit({type:e.dictionary})])}=t,{length:s=i.length,nullCount:a=(t.nullBitmap?-1:0)}=t;return new sm(e,r,s,a,[void 0,i,n],[],o)}visitInterval(t){const{type:e,offset:r=0}=t,n=ud(t.nullBitmap),i=ad(e.ArrayType,t.data),{length:o=i.length/ff(e),nullCount:s=(t.nullBitmap?-1:0)}=t;return new sm(e,r,o,s,[void 0,i,n])}visitFixedSizeList(t){const{type:e,offset:r=0,child:n=(new am).visit({type:e.valueType})}=t,i=ud(t.nullBitmap),{length:o=n.length/ff(e),nullCount:s=(t.nullBitmap?-1:0)}=t;return new sm(e,r,o,s,[void 0,void 0,i],[n])}visitMap(t){const{type:e,offset:r=0,child:n=(new am).visit({type:e.childType})}=t,i=ud(t.nullBitmap),o=ld(t.valueOffsets),{length:s=o.length-1,nullCount:a=(t.nullBitmap?-1:0)}=t;return new sm(e,r,s,a,[o,void 0,i],[n])}}function lm(t){return(new am).visit(t)}class um{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;this.fields=t||[],this.metadata=e||new Map,r||(r=dm(t)),this.dictionaries=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map((t=>t.name))}toString(){return"Schema<{ ".concat(this.fields.map(((t,e)=>"".concat(e,": ").concat(t))).join(", ")," }>")}select(t){const e=new Set(t),r=this.fields.filter((t=>e.has(t.name)));return new um(r,this.metadata)}selectAt(t){const e=t.map((t=>this.fields[t])).filter(Boolean);return new um(e,this.metadata)}assign(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];const n=e[0]instanceof um?e[0]:Array.isArray(e[0])?new um(e[0]):new um(e),i=[...this.fields],o=cm(cm(new Map,this.metadata),n.metadata),s=n.fields.filter((t=>{const e=i.findIndex((e=>e.name===t.name));return!~e||(i[e]=t.clone({metadata:cm(cm(new Map,i[e].metadata),t.metadata)}))&&!1})),a=dm(s,new Map);return new um([...i,...s],o,new Map([...this.dictionaries,...a]))}}um.prototype.fields=null,um.prototype.metadata=null,um.prototype.dictionaries=null;class hm{constructor(t,e){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;this.name=t,this.type=e,this.nullable=r,this.metadata=n||new Map}static new(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];let[n,i,o,s]=e;return e[0]&&"object"===typeof e[0]&&(({name:n}=e[0]),void 0===i&&(i=e[0].type),void 0===o&&(o=e[0].nullable),void 0===s&&(s=e[0].metadata)),new hm("".concat(n),i,o,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return"".concat(this.name,": ").concat(this.type)}clone(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];let[n,i,o,s]=e;return e[0]&&"object"===typeof e[0]?({name:n=this.name,type:i=this.type,nullable:o=this.nullable,metadata:s=this.metadata}=e[0]):[n=this.name,i=this.type,o=this.nullable,s=this.metadata]=e,hm.new(n,i,o,s)}}function cm(t,e){return new Map([...t||new Map,...e||new Map])}function dm(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;for(let r=-1,n=t.length;++r<n;){const n=t[r].type;if(Vd.isDictionary(n))if(e.has(n.id)){if(e.get(n.id)!==n.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else e.set(n.id,n.dictionary);n.children&&n.children.length>0&&dm(n.children,e)}return e}hm.prototype.type=null,hm.prototype.name=null,hm.prototype.nullable=null,hm.prototype.metadata=null;class fm extends pf{compareSchemas(t,e){return t===e||e instanceof t.constructor&&this.compareManyFields(t.fields,e.fields)}compareManyFields(t,e){return t===e||Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every(((t,r)=>this.compareFields(t,e[r])))}compareFields(t,e){return t===e||e instanceof t.constructor&&t.name===e.name&&t.nullable===e.nullable&&this.visit(t.type,e.type)}}function pm(t,e){return e instanceof t.constructor}function mm(t,e){return t===e||pm(t,e)}function ym(t,e){return t===e||pm(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function gm(t,e){return t===e||pm(t,e)&&t.precision===e.precision}function _m(t,e){return t===e||pm(t,e)&&t.unit===e.unit}function vm(t,e){return t===e||pm(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function bm(t,e){return t===e||pm(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function xm(t,e){return t===e||pm(t,e)&&t.mode===e.mode&&t.typeIds.every(((t,r)=>t===e.typeIds[r]))&&Sm.compareManyFields(t.children,e.children)}function Tm(t,e){return t===e||pm(t,e)&&t.unit===e.unit}fm.prototype.visitNull=mm,fm.prototype.visitBool=mm,fm.prototype.visitInt=ym,fm.prototype.visitInt8=ym,fm.prototype.visitInt16=ym,fm.prototype.visitInt32=ym,fm.prototype.visitInt64=ym,fm.prototype.visitUint8=ym,fm.prototype.visitUint16=ym,fm.prototype.visitUint32=ym,fm.prototype.visitUint64=ym,fm.prototype.visitFloat=gm,fm.prototype.visitFloat16=gm,fm.prototype.visitFloat32=gm,fm.prototype.visitFloat64=gm,fm.prototype.visitUtf8=mm,fm.prototype.visitBinary=mm,fm.prototype.visitFixedSizeBinary=function(t,e){return t===e||pm(t,e)&&t.byteWidth===e.byteWidth},fm.prototype.visitDate=_m,fm.prototype.visitDateDay=_m,fm.prototype.visitDateMillisecond=_m,fm.prototype.visitTimestamp=vm,fm.prototype.visitTimestampSecond=vm,fm.prototype.visitTimestampMillisecond=vm,fm.prototype.visitTimestampMicrosecond=vm,fm.prototype.visitTimestampNanosecond=vm,fm.prototype.visitTime=bm,fm.prototype.visitTimeSecond=bm,fm.prototype.visitTimeMillisecond=bm,fm.prototype.visitTimeMicrosecond=bm,fm.prototype.visitTimeNanosecond=bm,fm.prototype.visitDecimal=mm,fm.prototype.visitList=function(t,e){return t===e||pm(t,e)&&t.children.length===e.children.length&&Sm.compareManyFields(t.children,e.children)},fm.prototype.visitStruct=function(t,e){return t===e||pm(t,e)&&t.children.length===e.children.length&&Sm.compareManyFields(t.children,e.children)},fm.prototype.visitUnion=xm,fm.prototype.visitDenseUnion=xm,fm.prototype.visitSparseUnion=xm,fm.prototype.visitDictionary=function(t,e){return t===e||pm(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&Sm.visit(t.indices,e.indices)&&Sm.visit(t.dictionary,e.dictionary)},fm.prototype.visitInterval=Tm,fm.prototype.visitIntervalDayTime=Tm,fm.prototype.visitIntervalYearMonth=Tm,fm.prototype.visitFixedSizeList=function(t,e){return t===e||pm(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&Sm.compareManyFields(t.children,e.children)},fm.prototype.visitMap=function(t,e){return t===e||pm(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&Sm.compareManyFields(t.children,e.children)};const Sm=new fm;function wm(t,e){return Sm.compareSchemas(t,e)}var Em,Im;class Am{constructor(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];switch(e.length){case 2:if([this.schema]=e,!(this.schema instanceof um))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=lm({nullCount:0,type:new of(this.schema.fields),children:this.schema.fields.map((t=>lm({type:t.type,nullCount:0})))})]=e,!(this.data instanceof sm))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Mm(this.schema,this.data.children);break;case 1:{const[t]=e,{fields:r,children:n,length:i}=Object.keys(t).reduce(((e,r,n)=>(e.children[n]=t[r],e.length=Math.max(e.length,t[r].length),e.fields[n]=hm.new({name:r,type:t[r].type,nullable:!0}),e)),{length:0,fields:new Array,children:new Array}),o=new um(r),s=lm({type:new of(r),length:i,children:n,nullCount:0});[this.schema,this.data]=Mm(o,s.children,i);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=Pm(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return pp.visit(this.data,t)}set(t,e){return jf.visit(this.data,t,e)}indexOf(t,e){return Hp.visit(this.data,t,e)}getByteLength(t){return tm.visit(this.data,t)}[Symbol.iterator](){return $p.visit(new im([this.data]))}toArray(){return[...this]}concat(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return new Dm(this.schema,[this,...e])}slice(t,e){const[r]=new im([this.data]).slice(t,e).data;return new Am(this.schema,r)}getChild(t){var e;return this.getChildAt(null===(e=this.schema.fields)||void 0===e?void 0:e.findIndex((e=>e.name===t)))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new im([this.data.children[t]]):null}setChild(t,e){var r;return this.setChildAt(null===(r=this.schema.fields)||void 0===r?void 0:r.findIndex((e=>e.name===t)),e)}setChildAt(t,e){let r=this.schema,n=this.data;if(t>-1&&t<this.numCols){e||(e=new im([lm({type:new Hd,length:this.numRows})]));const i=r.fields.slice(),o=n.children.slice(),s=i[t].clone({type:e.type});[i[t],o[t]]=[s,e.data[0]],r=new um(i,new Map(this.schema.metadata)),n=lm({type:new of(i),children:o})}return new Am(r,n)}select(t){const e=this.schema.select(t),r=new of(e.fields),n=[];for(const i of t){const t=this.schema.fields.findIndex((t=>t.name===i));~t&&(n[t]=this.data.children[t])}return new Am(e,lm({type:r,length:this.numRows,children:n}))}selectAt(t){const e=this.schema.selectAt(t),r=t.map((t=>this.data.children[t])).filter(Boolean),n=lm({type:new of(e.fields),length:this.numRows,children:r});return new Am(e,n)}}function Mm(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.reduce(((t,e)=>Math.max(t,e.length)),0);var n;const i=[...t.fields],o=[...e],s=(r+63&-64)>>3;for(const[a,l]of t.fields.entries()){const t=e[a];t&&t.length===r||(i[a]=l.clone({nullable:!0}),o[a]=null!==(n=null===t||void 0===t?void 0:t._changeLengthAndBackfillNullBitmap(r))&&void 0!==n?n:lm({type:l.type,length:r,nullCount:r,nullBitmap:new Uint8Array(s)}))}return[t.assign(i),lm({type:new of(i),length:r,children:o})]}function Pm(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map;for(let n=-1,i=t.length;++n<i;){const i=t[n].type,o=e[n];if(Vd.isDictionary(i))if(r.has(i.id)){if(r.get(i.id)!==o.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else o.dictionary&&r.set(i.id,o.dictionary);i.children&&i.children.length>0&&Pm(i.children,o.children,r)}return r}Em=Symbol.toStringTag,Am[Em]=(t=>(t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Am.prototype);class Om extends Am{constructor(t){const e=t.fields.map((t=>lm({type:t.type})));super(t,lm({type:new of(t.fields),nullCount:0,children:e}))}}function Rm(t,e){return function(t,e){const r=[...t.fields],n=[],i={numBatches:e.reduce(((t,e)=>Math.max(t,e.length)),0)};let o=0,s=0,a=-1;const l=e.length;let u,h=[];for(;i.numBatches-- >0;){for(s=Number.POSITIVE_INFINITY,a=-1;++a<l;)h[a]=u=e[a].shift(),s=Math.min(s,u?u.length:s);Number.isFinite(s)&&(h=Cm(r,s,h,e,i),s>0&&(n[o++]=lm({type:new of(r),length:s,nullCount:0,children:h.slice()})))}return[t=t.assign(r),n.map((e=>new Am(t,e)))]}(t,e.map((t=>t.data.concat())))}function Cm(t,e,r,n,i){var o;const s=(e+63&-64)>>3;for(let a=-1,l=n.length;++a<l;){const l=r[a],u=null===l||void 0===l?void 0:l.length;if(u>=e)u===e?r[a]=l:(r[a]=l.slice(0,e),i.numBatches=Math.max(i.numBatches,n[a].unshift(l.slice(e,u-e))));else{const n=t[a];t[a]=n.clone({nullable:!0}),r[a]=null!==(o=null===l||void 0===l?void 0:l._changeLengthAndBackfillNullBitmap(e))&&void 0!==o?o:lm({type:n.type,length:e,nullCount:e,nullBitmap:new Uint8Array(s)})}}return r}class Dm{constructor(){for(var t,e,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];if(0===n.length)return this.batches=[],this.schema=new um([]),this._offsets=[0],this;let o,s;n[0]instanceof um&&(o=n.shift()),n[n.length-1]instanceof Uint32Array&&(s=n.pop());const a=t=>{if(t){if(t instanceof Am)return[t];if(t instanceof Dm)return t.batches;if(t instanceof sm){if(t.type instanceof of)return[new Am(new um(t.type.children),t)]}else{if(Array.isArray(t))return t.flatMap((t=>a(t)));if("function"===typeof t[Symbol.iterator])return[...t].flatMap((t=>a(t)));if("object"===typeof t){const e=Object.keys(t),r=e.map((e=>new im([t[e]]))),n=new um(e.map(((t,e)=>new hm(String(t),r[e].type)))),[,i]=Rm(n,r);return 0===i.length?[new Am(t)]:i}}}return[]},l=n.flatMap((t=>a(t)));if(o=null!==(e=null!==o&&void 0!==o?o:null===(t=l[0])||void 0===t?void 0:t.schema)&&void 0!==e?e:new um([]),!(o instanceof um))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of l){if(!(u instanceof Am))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!wm(o,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=o,this.batches=l,this._offsets=null!==s&&void 0!==s?s:Mp(this.data)}get data(){return this.batches.map((t=>{let{data:e}=t;return e}))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce(((t,e)=>t+e.length),0)}get nullCount(){return-1===this._nullCount&&(this._nullCount=Ap(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,e){}indexOf(t,e){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?$p.visit(new im(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return"[\n  ".concat(this.toArray().join(",\n  "),"\n]")}concat(){const t=this.schema;for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];const i=this.data.concat(r.flatMap((t=>{let{data:e}=t;return e})));return new Dm(t,i.map((e=>new Am(t,e))))}slice(t,e){const r=this.schema;[t,e]=xp({length:this.numRows},t,e);const n=Pp(this.data,this._offsets,t,e);return new Dm(r,n.map((t=>new Am(r,t))))}getChild(t){return this.getChildAt(this.schema.fields.findIndex((e=>e.name===t)))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const e=this.data.map((e=>e.children[t]));if(0===e.length){const{type:r}=this.schema.fields[t],n=lm({type:r,length:0,nullCount:0});e.push(n._changeLengthAndBackfillNullBitmap(this.numRows))}return new im(e)}return null}setChild(t,e){var r;return this.setChildAt(null===(r=this.schema.fields)||void 0===r?void 0:r.findIndex((e=>e.name===t)),e)}setChildAt(t,e){let r=this.schema,n=[...this.batches];if(t>-1&&t<this.numCols){e||(e=new im([lm({type:new Hd,length:this.numRows})]));const i=r.fields.slice(),o=i[t].clone({type:e.type}),s=this.schema.fields.map(((t,e)=>this.getChildAt(e)));[i[t],s[t]]=[o,e],[r,n]=Rm(r,s)}return new Dm(r,n)}select(t){const e=this.schema.fields.reduce(((t,e,r)=>t.set(e.name,r)),new Map);return this.selectAt(t.map((t=>e.get(t))).filter((t=>t>-1)))}selectAt(t){const e=this.schema.selectAt(t),r=this.batches.map((e=>e.selectAt(t)));return new Dm(e,r)}assign(t){const e=this.schema.fields,[r,n]=t.schema.fields.reduce(((t,r,n)=>{const[i,o]=t,s=e.findIndex((t=>t.name===r.name));return~s?o[s]=n:i.push(n),t}),[[],[]]),i=this.schema.assign(t.schema),o=[...e.map(((t,e)=>[e,n[e]])).map((e=>{let[r,n]=e;return void 0===n?this.getChildAt(r):t.getChildAt(n)})),...r.map((e=>t.getChildAt(e)))].filter(Boolean);return new Dm(...Rm(i,o))}}Im=Symbol.toStringTag,Dm[Im]=(t=>(t.schema=null,t.batches=[],t._offsets=new Uint32Array([0]),t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,t.isValid=Cp(Rp),t.get=Cp(pp.getVisitFn(xc.Struct)),t.set=Dp(jf.getVisitFn(xc.Struct)),t.indexOf=Fp(Hp.getVisitFn(xc.Struct)),t.getByteLength=Cp(tm.getVisitFn(xc.Struct)),"Table"))(Dm.prototype);class Fm{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,e,r,n){return t.prep(8,24),t.writeInt64(n),t.pad(4),t.writeInt32(r),t.writeInt64(e),t.offset()}}const Lm=new Int32Array(2),Nm=new Float32Array(Lm.buffer),Bm=new Float64Array(Lm.buffer),km=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];class Um{constructor(t,e){this.low=0|t,this.high=0|e}static create(t,e){return 0==t&&0==e?Um.ZERO:new Um(t,e)}toFloat64(){return(this.low>>>0)+4294967296*this.high}equals(t){return this.low==t.low&&this.high==t.high}}var Gm,jm,Xm,zm,Vm;Um.ZERO=new Um(0,0),function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"}(Gm||(Gm={}));class Hm{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new Hm(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new Um(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new Um(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return Lm[0]=this.readInt32(t),Nm[0]}readFloat64(t){return Lm[km?0:1]=this.readInt32(t),Lm[km?1:0]=this.readInt32(t+4),Bm[0]}writeInt8(t,e){this.bytes_[t]=e}writeUint8(t,e){this.bytes_[t]=e}writeInt16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeUint16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeInt32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeUint32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeInt64(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)}writeUint64(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)}writeFloat32(t,e){Nm[0]=e,this.writeInt32(t,Lm[0])}writeFloat64(t,e){Bm[0]=e,this.writeInt32(t,Lm[km?0:1]),this.writeInt32(t+4,Lm[km?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let e=0;e<4;e++)t+=String.fromCharCode(this.readInt8(this.position_+4+e));return t}__offset(t,e){const r=t-this.readInt32(t);return e<this.readInt16(r)?this.readInt16(r+e):0}__union(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}__string(t,e){t+=this.readInt32(t);const r=this.readInt32(t);let n="",i=0;if(t+=4,e===Gm.UTF8_BYTES)return this.bytes_.subarray(t,t+r);for(;i<r;){let e;const r=this.readUint8(t+i++);if(r<192)e=r;else{const n=this.readUint8(t+i++);if(r<224)e=(31&r)<<6|63&n;else{const o=this.readUint8(t+i++);if(r<240)e=(15&r)<<12|(63&n)<<6|63&o;else{e=(7&r)<<18|(63&n)<<12|(63&o)<<6|63&this.readUint8(t+i++)}}}e<65536?n+=String.fromCharCode(e):(e-=65536,n+=String.fromCharCode(55296+(e>>10),56320+(1023&e)))}return n}__union_with_string(t,e){return"string"===typeof t?this.__string(e):this.__union(t,e)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+4}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let e=0;e<4;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+4+e))return!1;return!0}createLong(t,e){return Um.create(t,e)}createScalarList(t,e){const r=[];for(let n=0;n<e;++n)null!==t(n)&&r.push(t(n));return r}createObjList(t,e){const r=[];for(let n=0;n<e;++n){const e=t(n);null!==e&&r.push(e.unpack())}return r}}class Ym{constructor(t){let e;this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,e=t||1024,this.bb=Hm.allocate(e),this.space=e}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,e){t>this.minalign&&(this.minalign=t);const r=1+~(this.bb.capacity()-this.space+e)&t-1;for(;this.space<r+t+e;){const t=this.bb.capacity();this.bb=Ym.growByteBuffer(this.bb),this.space+=this.bb.capacity()-t}this.pad(r)}pad(t){for(let e=0;e<t;e++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,e,r){(this.force_defaults||e!=r)&&(this.addInt8(e),this.slot(t))}addFieldInt16(t,e,r){(this.force_defaults||e!=r)&&(this.addInt16(e),this.slot(t))}addFieldInt32(t,e,r){(this.force_defaults||e!=r)&&(this.addInt32(e),this.slot(t))}addFieldInt64(t,e,r){!this.force_defaults&&e.equals(r)||(this.addInt64(e),this.slot(t))}addFieldFloat32(t,e,r){(this.force_defaults||e!=r)&&(this.addFloat32(e),this.slot(t))}addFieldFloat64(t,e,r){(this.force_defaults||e!=r)&&(this.addFloat64(e),this.slot(t))}addFieldOffset(t,e,r){(this.force_defaults||e!=r)&&(this.addOffset(e),this.slot(t))}addFieldStruct(t,e,r){e!=r&&(this.nested(e),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){null!==this.vtable&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=e<<1,n=Hm.allocate(r);return n.setPosition(r-e),n.bytes().set(t.bytes(),r-e),n}addOffset(t){this.prep(4,0),this.writeInt32(this.offset()-t+4)}startObject(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(let e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let e=this.vtable_in_use-1;for(;e>=0&&0==this.vtable[e];e--);const r=e+1;for(;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);const n=2*(r+2);this.addInt16(n);let i=0;const o=this.space;t:for(e=0;e<this.vtables.length;e++){const t=this.bb.capacity()-this.vtables[e];if(n==this.bb.readInt16(t)){for(let e=2;e<n;e+=2)if(this.bb.readInt16(o+e)!=this.bb.readInt16(t+e))continue t;i=this.vtables[e];break}}return i?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,i-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,e,r){const n=r?4:0;if(e){const t=e;if(this.prep(this.minalign,8+n),4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let e=3;e>=0;e--)this.writeInt8(t.charCodeAt(e))}this.prep(this.minalign,4+n),this.addOffset(t),n&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,e){this.finish(t,e,!0)}requiredField(t,e){const r=this.bb.capacity()-t,n=r-this.bb.readInt32(r);if(!(0!=this.bb.readInt16(n+e)))throw new Error("FlatBuffers: field "+e+" must be set")}startVector(t,e,r){this.notNested(),this.vector_num_elems=e,this.prep(4,t*e),this.prep(r,t*e)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const e=this.createString(t);return this.string_maps.set(t,e),e}createString(t){if(!t)return 0;let e;if(t instanceof Uint8Array)e=t;else{e=[];let r=0;for(;r<t.length;){let n;const i=t.charCodeAt(r++);if(i<55296||i>=56320)n=i;else{n=(i<<10)+t.charCodeAt(r++)+-56613888}n<128?e.push(n):(n<2048?e.push(n>>6&31|192):(n<65536?e.push(n>>12&15|224):e.push(n>>18&7|240,n>>12&63|128),e.push(n>>6&63|128)),e.push(63&n|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);for(let r=0,n=this.space,i=this.bb.bytes();r<e.length;r++)i[n++]=e[r];return this.endVector()}createLong(t,e){return Um.create(t,e)}createObjectOffset(t){return null===t?0:"string"===typeof t?this.createString(t):t.pack(this)}createObjectOffsetList(t){const e=[];for(let r=0;r<t.length;++r){const n=t[r];if(null===n)throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.");e.push(this.createObjectOffset(n))}return e}createStructOffsetList(t,e){return e(this,t.length),this.createObjectOffsetList(t),this.endVector()}}class Wm{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsKeyValue(t,e){return(e||new Wm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,e){return t.setPosition(t.position()+4),(e||new Wm).__init(t.readInt32(t.position())+t.position(),t)}key(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}value(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,e){t.addFieldOffset(0,e,0)}static addValue(t,e){t.addFieldOffset(1,e,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,e,r){return Wm.startKeyValue(t),Wm.addKey(t,e),Wm.addValue(t,r),Wm.endKeyValue(t)}}!function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"}(jm||(jm={})),function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"}(Xm||(Xm={})),function(t){t[t.DenseArray=0]="DenseArray"}(zm||(zm={}));class qm{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInt(t,e){return(e||new qm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,e){return t.setPosition(t.position()+4),(e||new qm).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startInt(t){t.startObject(2)}static addBitWidth(t,e){t.addFieldInt32(0,e,0)}static addIsSigned(t,e){t.addFieldInt8(1,+e,0)}static endInt(t){return t.endObject()}static createInt(t,e,r){return qm.startInt(t),qm.addBitWidth(t,e),qm.addIsSigned(t,r),qm.endInt(t)}}class $m{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryEncoding(t,e){return(e||new $m).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,e){return t.setPosition(t.position()+4),(e||new $m).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new qm).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):zm.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addIndexType(t,e){t.addFieldOffset(1,e,0)}static addIsOrdered(t,e){t.addFieldInt8(2,+e,0)}static addDictionaryKind(t,e){t.addFieldInt16(3,e,zm.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList"}(Vm||(Vm={}));class Km{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsField(t,e){return(e||new Km).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,e){return t.setPosition(t.position()+4),(e||new Km).__init(t.readInt32(t.position())+t.position(),t)}name(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Vm.NONE}type(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__union(t,this.bb_pos+e):null}dictionary(t){const e=this.bb.__offset(this.bb_pos,12);return e?(t||new $m).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}children(t,e){const r=this.bb.__offset(this.bb_pos,14);return r?(e||new Km).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const r=this.bb.__offset(this.bb_pos,16);return r?(e||new Wm).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,e){t.addFieldOffset(0,e,0)}static addNullable(t,e){t.addFieldInt8(1,+e,0)}static addTypeType(t,e){t.addFieldInt8(2,e,Vm.NONE)}static addType(t,e){t.addFieldOffset(3,e,0)}static addDictionary(t,e){t.addFieldOffset(4,e,0)}static addChildren(t,e){t.addFieldOffset(5,e,0)}static createChildrenVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startChildrenVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(6,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endField(t){return t.endObject()}}class Qm{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSchema(t,e){return(e||new Qm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,e){return t.setPosition(t.position()+4),(e||new Qm).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Xm.Little}fields(t,e){const r=this.bb.__offset(this.bb_pos,6);return r?(e||new Km).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const r=this.bb.__offset(this.bb_pos,8);return r?(e||new Wm).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,e){t.addFieldInt16(0,e,Xm.Little)}static addFields(t,e){t.addFieldOffset(1,e,0)}static createFieldsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startFieldsVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(2,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static addFeatures(t,e){t.addFieldOffset(3,e,0)}static createFeaturesVector(t,e){t.startVector(8,e.length,8);for(let r=e.length-1;r>=0;r--)t.addInt64(e[r]);return t.endVector()}static startFeaturesVector(t,e){t.startVector(8,e,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,e){t.finish(e)}static finishSizePrefixedSchemaBuffer(t,e){t.finish(e,void 0,!0)}static createSchema(t,e,r,n,i){return Qm.startSchema(t),Qm.addEndianness(t,e),Qm.addFields(t,r),Qm.addCustomMetadata(t,n),Qm.addFeatures(t,i),Qm.endSchema(t)}}class Zm{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFooter(t,e){return(e||new Zm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,e){return t.setPosition(t.position()+4),(e||new Zm).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):jm.V1}schema(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new Qm).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}dictionaries(t,e){const r=this.bb.__offset(this.bb_pos,8);return r?(e||new Fm).__init(this.bb.__vector(this.bb_pos+r)+24*t,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,e){const r=this.bb.__offset(this.bb_pos,10);return r?(e||new Fm).__init(this.bb.__vector(this.bb_pos+r)+24*t,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const r=this.bb.__offset(this.bb_pos,12);return r?(e||new Wm).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,jm.V1)}static addSchema(t,e){t.addFieldOffset(1,e,0)}static addDictionaries(t,e){t.addFieldOffset(2,e,0)}static startDictionariesVector(t,e){t.startVector(24,e,8)}static addRecordBatches(t,e){t.addFieldOffset(3,e,0)}static startRecordBatchesVector(t,e){t.startVector(24,e,8)}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,e){t.finish(e)}static finishSizePrefixedFooterBuffer(t,e){t.finish(e,void 0,!0)}}var Jm=Um,ty=Ym,ey=Hm;class ry{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pc.V4,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;this.schema=t,this.version=e,r&&(this._recordBatches=r),n&&(this._dictionaryBatches=n)}static decode(t){t=new ey(ud(t));const e=Zm.getRootAsFooter(t),r=um.decode(e.schema());return new ny(r,e)}static encode(t){const e=new ty,r=um.encode(e,t.schema);Zm.startRecordBatchesVector(e,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())iy.encode(e,o);const n=e.endVector();Zm.startDictionariesVector(e,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())iy.encode(e,o);const i=e.endVector();return Zm.startFooter(e),Zm.addSchema(e,r),Zm.addVersion(e,pc.V4),Zm.addRecordBatches(e,n),Zm.addDictionaries(e,i),Zm.finishFooterBuffer(e,Zm.endFooter(e)),e.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,e=-1,r=this.numRecordBatches;++e<r;)(t=this.getRecordBatch(e))&&(yield t)}*dictionaryBatches(){for(let t,e=-1,r=this.numDictionaries;++e<r;)(t=this.getDictionaryBatch(e))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class ny extends ry{constructor(t,e){super(t,e.version()),this._footer=e}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const e=this._footer.recordBatches(t);if(e)return iy.decode(e)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const e=this._footer.dictionaries(t);if(e)return iy.decode(e)}return null}}class iy{constructor(t,e,r){this.metaDataLength=t,this.offset="number"===typeof r?r:r.low,this.bodyLength="number"===typeof e?e:e.low}static decode(t){return new iy(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,e){const{metaDataLength:r}=e,n=new Jm(e.offset,0),i=new Jm(e.bodyLength,0);return Fm.createBlock(t,n,r,i)}}const oy={fromIterable:t=>sy(function*(t){let e,r,n,i,o=!1,s=[],a=0;function l(){return"peek"===n?sd(s,i)[0]:([r,s,a]=sd(s,i),r)}({cmd:n,size:i}=yield null);const u=(h=t,cd(Uint8Array,h))[Symbol.iterator]();var h;try{do{if(({done:e,value:r}=Number.isNaN(i-a)?u.next():u.next(i-a)),!e&&r.byteLength>0&&(s.push(r),a+=r.byteLength),e||i<=a)do{({cmd:n,size:i}=yield l())}while(i<a)}while(!e)}catch(c){(o=!0)&&"function"===typeof u.throw&&u.throw(c)}finally{!1===o&&"function"===typeof u.return&&u.return(null)}return null}(t)),fromAsyncIterable:t=>sy(function(t){return Qc(this,arguments,(function*(){let e,r,n,i,o=!1,s=[],a=0;function l(){return"peek"===n?sd(s,i)[0]:([r,s,a]=sd(s,i),r)}({cmd:n,size:i}=yield yield Kc(null));const u=(h=t,dd(Uint8Array,h))[Symbol.asyncIterator]();var h;try{do{if(({done:e,value:r}=Number.isNaN(i-a)?yield Kc(u.next()):yield Kc(u.next(i-a))),!e&&r.byteLength>0&&(s.push(r),a+=r.byteLength),e||i<=a)do{({cmd:n,size:i}=yield yield Kc(l()))}while(i<a)}while(!e)}catch(c){(o=!0)&&"function"===typeof u.throw&&(yield Kc(u.throw(c)))}finally{!1===o&&"function"===typeof u.return&&(yield Kc(u.return(new Uint8Array(0))))}return yield Kc(null)}))}(t)),fromDOMStream:t=>sy(function(t){return Qc(this,arguments,(function*(){let e,r,n,i=!1,o=!1,s=[],a=0;function l(){return"peek"===r?sd(s,n)[0]:([e,s,a]=sd(s,n),e)}({cmd:r,size:n}=yield yield Kc(null));const u=new ay(t);try{do{if(({done:i,value:e}=Number.isNaN(n-a)?yield Kc(u.read()):yield Kc(u.read(n-a))),!i&&e.byteLength>0&&(s.push(ud(e)),a+=e.byteLength),i||n<=a)do{({cmd:r,size:n}=yield yield Kc(l()))}while(n<a)}while(!i)}catch(h){(o=!0)&&(yield Kc(u.cancel(h)))}finally{!1===o?yield Kc(u.cancel()):t.locked&&u.releaseLock()}return yield Kc(null)}))}(t)),fromNodeStream:t=>sy(function(t){return Qc(this,arguments,(function*(){const e=[];let r,n,i,o="error",s=!1,a=null,l=0,u=[];function h(){return"peek"===r?sd(u,n)[0]:([i,u,l]=sd(u,n),i)}if(({cmd:r,size:n}=yield yield Kc(null)),t.isTTY)return yield yield Kc(new Uint8Array(0)),yield Kc(null);try{e[0]=ly(t,"end"),e[1]=ly(t,"error");do{if(e[2]=ly(t,"readable"),[o,a]=yield Kc(Promise.race(e.map((t=>t[2])))),"error"===o)break;if((s="end"===o)||(Number.isFinite(n-l)?(i=ud(t.read(n-l)),i.byteLength<n-l&&(i=ud(t.read()))):i=ud(t.read()),i.byteLength>0&&(u.push(i),l+=i.byteLength)),s||n<=l)do{({cmd:r,size:n}=yield yield Kc(h()))}while(n<l)}while(!s)}finally{yield Kc(c(e,"error"===o?a:null))}return yield Kc(null);function c(e,r){return i=u=null,new Promise(((n,i)=>{for(const[r,s]of e)t.off(r,s);try{const e=t.destroy;e&&e.call(t,r),r=void 0}catch(o){r=o||r}finally{null!=r?i(r):n()}}))}}))}(t)),toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}},sy=t=>(t.next(),t);class ay{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch((()=>{}))}get closed(){return this.reader?this.reader.closed.catch((()=>{})):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return qc(this,void 0,void 0,(function*(){const{reader:e,source:r}=this;e&&(yield e.cancel(t).catch((()=>{}))),r&&r.locked&&this.releaseLock()}))}read(t){return qc(this,void 0,void 0,(function*(){if(0===t)return{done:null==this.reader,value:new Uint8Array(0)};const e=yield this.reader.read();return!e.done&&(e.value=ud(e)),e}))}}const ly=(t,e)=>{const r=t=>n([e,t]);let n;return[e,r,new Promise((i=>(n=i)&&t.once(e,r)))]};const uy=Object.freeze({done:!0,value:void 0});class hy{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class cy{tee(){return this._getDOMStream().tee()}pipe(t,e){return this._getNodeStream().pipe(t,e)}pipeTo(t,e){return this._getDOMStream().pipeTo(t,e)}pipeThrough(t,e){return this._getDOMStream().pipeThrough(t,e)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class dy extends cy{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise((t=>this._closedPromiseResolve=t))}get closed(){return this._closedPromise}cancel(t){return qc(this,void 0,void 0,(function*(){yield this.return(t)}))}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(uy);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return oy.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return oy.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return qc(this,void 0,void 0,(function*(){return yield this.abort(t),uy}))}return(t){return qc(this,void 0,void 0,(function*(){return yield this.close(),uy}))}read(t){return qc(this,void 0,void 0,(function*(){return(yield this.next(t,"read")).value}))}peek(t){return qc(this,void 0,void 0,(function*(){return(yield this.next(t,"peek")).value}))}next(){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise(((t,e)=>{this.resolvers.push({resolve:t,reject:e})})):Promise.resolve(uy)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class fy extends dy{write(t){if((t=ud(t)).byteLength>0)return super.write(t)}toString(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?ed(this.toUint8Array(!0)):this.toUint8Array(!1).then(ed)}toUint8Array(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?sd(this._values)[0]:(()=>qc(this,void 0,void 0,(function*(){var t,e;const r=[];let n=0;try{for(var i,o=Jc(this);!(i=yield o.next()).done;){const t=i.value;r.push(t),n+=t.byteLength}}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=o.return)&&(yield e.call(o))}finally{if(t)throw t.error}}return sd(r,n)[0]})))()}}class py{constructor(t){t&&(this.source=new yy(oy.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class my{constructor(t){t instanceof my?this.source=t.source:t instanceof fy?this.source=new gy(oy.fromAsyncIterable(t)):Hc(t)?this.source=new gy(oy.fromNodeStream(t)):Vc(t)?this.source=new gy(oy.fromDOMStream(t)):Xc(t)?this.source=new gy(oy.fromDOMStream(t.body)):Bc(t)?this.source=new gy(oy.fromIterable(t)):(Nc(t)||kc(t))&&(this.source=new gy(oy.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class yy{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"read";return this.source.next({cmd:e,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||uy)}return(t){return Object.create(this.source.return&&this.source.return(t)||uy)}}class gy{constructor(t){this.source=t,this._closedPromise=new Promise((t=>this._closedPromiseResolve=t))}cancel(t){return qc(this,void 0,void 0,(function*(){yield this.return(t)}))}get closed(){return this._closedPromise}read(t){return qc(this,void 0,void 0,(function*(){return(yield this.next(t,"read")).value}))}peek(t){return qc(this,void 0,void 0,(function*(){return(yield this.next(t,"peek")).value}))}next(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"read";return qc(this,void 0,void 0,(function*(){return yield this.source.next({cmd:e,size:t})}))}throw(t){return qc(this,void 0,void 0,(function*(){const e=this.source.throw&&(yield this.source.throw(t))||uy;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}))}return(t){return qc(this,void 0,void 0,(function*(){const e=this.source.return&&(yield this.source.return(t))||uy;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}))}}class _y extends py{constructor(t,e){super(),this.position=0,this.buffer=ud(t),this.size="undefined"===typeof e?this.buffer.byteLength:e}readInt32(t){const{buffer:e,byteOffset:r}=this.readAt(t,4);return new DataView(e,r).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:e,size:r,position:n}=this;return e&&n<r?("number"!==typeof t&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(r,n+Math.min(r-n,t)),e.subarray(n,this.position)):null}readAt(t,e){const r=this.buffer,n=Math.min(this.size,t+e);return r?r.subarray(t,n):new Uint8Array(e)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class vy extends my{constructor(t,e){super(),this.position=0,this._handle=t,"number"===typeof e?this.size=e:this._pending=(()=>qc(this,void 0,void 0,(function*(){this.size=(yield t.stat()).size,delete this._pending})))()}readInt32(t){return qc(this,void 0,void 0,(function*(){const{buffer:e,byteOffset:r}=yield this.readAt(t,4);return new DataView(e,r).getInt32(0,!0)}))}seek(t){return qc(this,void 0,void 0,(function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size}))}read(t){return qc(this,void 0,void 0,(function*(){this._pending&&(yield this._pending);const{_handle:e,size:r,position:n}=this;if(e&&n<r){"number"!==typeof t&&(t=Number.POSITIVE_INFINITY);let i=n,o=0,s=0;const a=Math.min(r,i+Math.min(r-i,t)),l=new Uint8Array(Math.max(0,(this.position=a)-i));for(;(i+=s)<a&&(o+=s)<l.byteLength;)({bytesRead:s}=yield e.read(l,o,l.byteLength-o,i));return l}return null}))}readAt(t,e){return qc(this,void 0,void 0,(function*(){this._pending&&(yield this._pending);const{_handle:r,size:n}=this;if(r&&t+e<n){const i=Math.min(n,t+e),o=new Uint8Array(i-t);return(yield r.read(o,0,e,t)).buffer}return new Uint8Array(e)}))}close(){return qc(this,void 0,void 0,(function*(){const t=this._handle;this._handle=null,t&&(yield t.close())}))}throw(t){return qc(this,void 0,void 0,(function*(){return yield this.close(),{done:!0,value:t}}))}return(t){return qc(this,void 0,void 0,(function*(){return yield this.close(),{done:!0,value:t}}))}}function by(t){return t<0&&(t=4294967295+t+1),"0x".concat(t.toString(16))}const xy=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class Ty{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const e=new Uint32Array([this.buffer[1]>>>16,65535&this.buffer[1],this.buffer[0]>>>16,65535&this.buffer[0]]),r=new Uint32Array([t.buffer[1]>>>16,65535&t.buffer[1],t.buffer[0]>>>16,65535&t.buffer[0]]);let n=e[3]*r[3];this.buffer[0]=65535&n;let i=n>>>16;return n=e[2]*r[3],i+=n,n=e[3]*r[2]>>>0,i+=n,this.buffer[0]+=i<<16,this.buffer[1]=i>>>0<n?65536:0,this.buffer[1]+=i>>>16,this.buffer[1]+=e[1]*r[3]+e[2]*r[2]+e[3]*r[1],this.buffer[1]+=e[0]*r[3]+e[1]*r[2]+e[2]*r[1]+e[3]*r[0]<<16,this}_plus(t){const e=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],e<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=e}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return"".concat(by(this.buffer[1])," ").concat(by(this.buffer[0]))}}class Sy extends Ty{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return Sy.fromString("string"===typeof t?t:t.toString(),e)}static fromNumber(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return Sy.fromString(t.toString(),e)}static fromString(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);const r=t.length,n=new Sy(e);for(let i=0;i<r;){const e=8<r-i?8:r-i,o=new Sy(new Uint32Array([Number.parseInt(t.slice(i,i+e),10),0])),s=new Sy(new Uint32Array([xy[e],0]));n.times(s),n.plus(o),i+=e}return n}static convertArray(t){const e=new Uint32Array(2*t.length);for(let r=-1,n=t.length;++r<n;)Sy.from(t[r],new Uint32Array(e.buffer,e.byteOffset+2*r*4,2));return e}static multiply(t,e){return new Sy(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new Sy(new Uint32Array(t.buffer)).plus(e)}}class wy extends Ty{negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],0==this.buffer[0]&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const e=this.buffer[1]<<0,r=t.buffer[1]<<0;return e<r||e===r&&this.buffer[0]<t.buffer[0]}static from(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return wy.fromString("string"===typeof t?t:t.toString(),e)}static fromNumber(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return wy.fromString(t.toString(),e)}static fromString(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);const r=t.startsWith("-"),n=t.length,i=new wy(e);for(let o=r?1:0;o<n;){const e=8<n-o?8:n-o,r=new wy(new Uint32Array([Number.parseInt(t.slice(o,o+e),10),0])),s=new wy(new Uint32Array([xy[e],0]));i.times(s),i.plus(r),o+=e}return r?i.negate():i}static convertArray(t){const e=new Uint32Array(2*t.length);for(let r=-1,n=t.length;++r<n;)wy.from(t[r],new Uint32Array(e.buffer,e.byteOffset+2*r*4,2));return e}static multiply(t,e){return new wy(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new wy(new Uint32Array(t.buffer)).plus(e)}}class Ey{constructor(t){this.buffer=t}high(){return new wy(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new wy(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],0==this.buffer[0]&&++this.buffer[1],0==this.buffer[1]&&++this.buffer[2],0==this.buffer[2]&&++this.buffer[3],this}times(t){const e=new Sy(new Uint32Array([this.buffer[3],0])),r=new Sy(new Uint32Array([this.buffer[2],0])),n=new Sy(new Uint32Array([this.buffer[1],0])),i=new Sy(new Uint32Array([this.buffer[0],0])),o=new Sy(new Uint32Array([t.buffer[3],0])),s=new Sy(new Uint32Array([t.buffer[2],0])),a=new Sy(new Uint32Array([t.buffer[1],0])),l=new Sy(new Uint32Array([t.buffer[0],0]));let u=Sy.multiply(i,l);this.buffer[0]=u.low();const h=new Sy(new Uint32Array([u.high(),0]));u=Sy.multiply(n,l),h.plus(u),u=Sy.multiply(i,a),h.plus(u),this.buffer[1]=h.low(),this.buffer[3]=h.lessThan(u)?1:0,this.buffer[2]=h.high();return new Sy(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(Sy.multiply(r,l)).plus(Sy.multiply(n,a)).plus(Sy.multiply(i,s)),this.buffer[3]+=Sy.multiply(e,l).plus(Sy.multiply(r,a)).plus(Sy.multiply(n,s)).plus(Sy.multiply(i,o)).low(),this}plus(t){const e=new Uint32Array(4);return e[3]=this.buffer[3]+t.buffer[3]>>>0,e[2]=this.buffer[2]+t.buffer[2]>>>0,e[1]=this.buffer[1]+t.buffer[1]>>>0,e[0]=this.buffer[0]+t.buffer[0]>>>0,e[0]<this.buffer[0]>>>0&&++e[1],e[1]<this.buffer[1]>>>0&&++e[2],e[2]<this.buffer[2]>>>0&&++e[3],this.buffer[3]=e[3],this.buffer[2]=e[2],this.buffer[1]=e[1],this.buffer[0]=e[0],this}hex(){return"".concat(by(this.buffer[3])," ").concat(by(this.buffer[2])," ").concat(by(this.buffer[1])," ").concat(by(this.buffer[0]))}static multiply(t,e){return new Ey(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new Ey(new Uint32Array(t.buffer)).plus(e)}static from(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(4);return Ey.fromString("string"===typeof t?t:t.toString(),e)}static fromNumber(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(4);return Ey.fromString(t.toString(),e)}static fromString(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(4);const r=t.startsWith("-"),n=t.length,i=new Ey(e);for(let o=r?1:0;o<n;){const e=8<n-o?8:n-o,r=new Ey(new Uint32Array([Number.parseInt(t.slice(o,o+e),10),0,0,0])),s=new Ey(new Uint32Array([xy[e],0,0,0]));i.times(s),i.plus(r),o+=e}return r?i.negate():i}static convertArray(t){const e=new Uint32Array(4*t.length);for(let r=-1,n=t.length;++r<n;)Ey.from(t[r],new Uint32Array(e.buffer,e.byteOffset+16*r,4));return e}}class Iy extends pf{constructor(t,e,r,n){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=e,this.buffers=r,this.dictionaries=n}visit(t){return super.visit(t instanceof hm?t.type:t)}visitNull(t){let{length:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return lm({type:t,length:e})}visitBool(t){let{length:e,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return lm({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitInt(t){let{length:e,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return lm({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFloat(t){let{length:e,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return lm({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitUtf8(t){let{length:e,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return lm({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t){let{length:e,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return lm({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t){let{length:e,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return lm({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDate(t){let{length:e,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return lm({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTimestamp(t){let{length:e,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return lm({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTime(t){let{length:e,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return lm({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDecimal(t){let{length:e,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return lm({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitList(t){let{length:e,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return lm({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t){let{length:e,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return lm({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),children:this.visitMany(t.children)})}visitUnion(t){return t.mode===mc.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t){let{length:e,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return lm({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t){let{length:e,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return lm({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t){let{length:e,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return lm({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t){let{length:e,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return lm({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFixedSizeList(t){let{length:e,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return lm({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),child:this.visit(t.children[0])})}visitMap(t){let{length:e,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return lm({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.nextBufferRange();return e>0&&this.readData(t,r)||new Uint8Array(0)}readOffsets(t,e){return this.readData(t,e)}readTypeIds(t,e){return this.readData(t,e)}readData(t){let{length:e,offset:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();return this.bytes.subarray(r,r+e)}readDictionary(t){return this.dictionaries.get(t.id)}}class Ay extends Iy{constructor(t,e,r,n){super(new Uint8Array(0),e,r,n),this.sources=t}readNullBitmap(t,e){let{offset:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.nextBufferRange();return e<=0?new Uint8Array(0):kp(this.sources[r])}readOffsets(t){let{offset:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();return ad(Uint8Array,ad(Int32Array,this.sources[e]))}readTypeIds(t){let{offset:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();return ad(Uint8Array,ad(t.ArrayType,this.sources[e]))}readData(t){let{offset:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();const{sources:r}=this;return Vd.isTimestamp(t)||(Vd.isInt(t)||Vd.isTime(t))&&64===t.bitWidth||Vd.isDate(t)&&t.unit===gc.MILLISECOND?ad(Uint8Array,wy.convertArray(r[e])):Vd.isDecimal(t)?ad(Uint8Array,Ey.convertArray(r[e])):Vd.isBinary(t)||Vd.isFixedSizeBinary(t)?function(t){const e=t.join(""),r=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2)r[n>>1]=Number.parseInt(e.slice(n,n+2),16);return r}(r[e]):Vd.isBool(t)?kp(r[e]):Vd.isUtf8(t)?nd(r[e].join("")):ad(Uint8Array,ad(t.ArrayType,r[e].map((t=>+t))))}}var My,Py,Oy,Ry,Cy,Dy,Fy,Ly;!function(t){t[t.BUFFER=0]="BUFFER"}(My||(My={})),function(t){t[t.LZ4_FRAME=0]="LZ4_FRAME",t[t.ZSTD=1]="ZSTD"}(Py||(Py={}));class Ny{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBodyCompression(t,e){return(e||new Ny).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,e){return t.setPosition(t.position()+4),(e||new Ny).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):Py.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):My.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,e){t.addFieldInt8(0,e,Py.LZ4_FRAME)}static addMethod(t,e){t.addFieldInt8(1,e,My.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,e,r){return Ny.startBodyCompression(t),Ny.addCodec(t,e),Ny.addMethod(t,r),Ny.endBodyCompression(t)}}class By{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,e,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(e),t.offset()}}class ky{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,e,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(e),t.offset()}}class Uy{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsRecordBatch(t,e){return(e||new Uy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,e){return t.setPosition(t.position()+4),(e||new Uy).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,e){const r=this.bb.__offset(this.bb_pos,6);return r?(e||new ky).__init(this.bb.__vector(this.bb_pos+r)+16*t,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,e){const r=this.bb.__offset(this.bb_pos,8);return r?(e||new By).__init(this.bb.__vector(this.bb_pos+r)+16*t,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const e=this.bb.__offset(this.bb_pos,10);return e?(t||new Ny).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addNodes(t,e){t.addFieldOffset(1,e,0)}static startNodesVector(t,e){t.startVector(16,e,8)}static addBuffers(t,e){t.addFieldOffset(2,e,0)}static startBuffersVector(t,e){t.startVector(16,e,8)}static addCompression(t,e){t.addFieldOffset(3,e,0)}static endRecordBatch(t){return t.endObject()}}class Gy{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryBatch(t,e){return(e||new Gy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,e){return t.setPosition(t.position()+4),(e||new Gy).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new Uy).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startDictionaryBatch(t){t.startObject(3)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addData(t,e){t.addFieldOffset(1,e,0)}static addIsDelta(t,e){t.addFieldInt8(2,+e,0)}static endDictionaryBatch(t){return t.endObject()}}!function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}(Oy||(Oy={}));class jy{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFloatingPoint(t,e){return(e||new jy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,e){return t.setPosition(t.position()+4),(e||new jy).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Oy.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,e){t.addFieldInt16(0,e,Oy.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,e){return jy.startFloatingPoint(t),jy.addPrecision(t,e),jy.endFloatingPoint(t)}}class Xy{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDecimal(t,e){return(e||new Xy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,e){return t.setPosition(t.position()+4),(e||new Xy).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,e){t.addFieldInt32(0,e,0)}static addScale(t,e){t.addFieldInt32(1,e,0)}static addBitWidth(t,e){t.addFieldInt32(2,e,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,e,r,n){return Xy.startDecimal(t),Xy.addPrecision(t,e),Xy.addScale(t,r),Xy.addBitWidth(t,n),Xy.endDecimal(t)}}!function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"}(Ry||(Ry={}));class zy{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDate(t,e){return(e||new zy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,e){return t.setPosition(t.position()+4),(e||new zy).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ry.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,Ry.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,e){return zy.startDate(t),zy.addUnit(t,e),zy.endDate(t)}}!function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"}(Cy||(Cy={}));class Vy{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTime(t,e){return(e||new Vy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,e){return t.setPosition(t.position()+4),(e||new Vy).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Cy.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,Cy.MILLISECOND)}static addBitWidth(t,e){t.addFieldInt32(1,e,32)}static endTime(t){return t.endObject()}static createTime(t,e,r){return Vy.startTime(t),Vy.addUnit(t,e),Vy.addBitWidth(t,r),Vy.endTime(t)}}class Hy{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTimestamp(t,e){return(e||new Hy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,e){return t.setPosition(t.position()+4),(e||new Hy).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Cy.SECOND}timezone(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,Cy.SECOND)}static addTimezone(t,e){t.addFieldOffset(1,e,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,e,r){return Hy.startTimestamp(t),Hy.addUnit(t,e),Hy.addTimezone(t,r),Hy.endTimestamp(t)}}!function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(Dy||(Dy={}));class Yy{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInterval(t,e){return(e||new Yy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,e){return t.setPosition(t.position()+4),(e||new Yy).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Dy.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,Dy.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,e){return Yy.startInterval(t),Yy.addUnit(t,e),Yy.endInterval(t)}}!function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"}(Fy||(Fy={}));class Wy{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUnion(t,e){return(e||new Wy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,e){return t.setPosition(t.position()+4),(e||new Wy).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Fy.Sparse}typeIds(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+4*t):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,e){t.addFieldInt16(0,e,Fy.Sparse)}static addTypeIds(t,e){t.addFieldOffset(1,e,0)}static createTypeIdsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addInt32(e[r]);return t.endVector()}static startTypeIdsVector(t,e){t.startVector(4,e,4)}static endUnion(t){return t.endObject()}static createUnion(t,e,r){return Wy.startUnion(t),Wy.addMode(t,e),Wy.addTypeIds(t,r),Wy.endUnion(t)}}class qy{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeBinary(t,e){return(e||new qy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,e){return t.setPosition(t.position()+4),(e||new qy).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,e){return qy.startFixedSizeBinary(t),qy.addByteWidth(t,e),qy.endFixedSizeBinary(t)}}class $y{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeList(t,e){return(e||new $y).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,e){return t.setPosition(t.position()+4),(e||new $y).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,e){return $y.startFixedSizeList(t),$y.addListSize(t,e),$y.endFixedSizeList(t)}}class Ky{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMap(t,e){return(e||new Ky).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,e){return t.setPosition(t.position()+4),(e||new Ky).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startMap(t){t.startObject(1)}static addKeysSorted(t,e){t.addFieldInt8(0,+e,0)}static endMap(t){return t.endObject()}static createMap(t,e){return Ky.startMap(t),Ky.addKeysSorted(t,e),Ky.endMap(t)}}!function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"}(Ly||(Ly={}));class Qy{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMessage(t,e){return(e||new Qy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,e){return t.setPosition(t.position()+4),(e||new Qy).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):jm.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Ly.NONE}header(t){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,e){const r=this.bb.__offset(this.bb_pos,12);return r?(e||new Wm).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,jm.V1)}static addHeaderType(t,e){t.addFieldInt8(1,e,Ly.NONE)}static addHeader(t,e){t.addFieldOffset(2,e,0)}static addBodyLength(t,e){t.addFieldInt64(3,e,t.createLong(0,0))}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,e){t.finish(e)}static finishSizePrefixedMessageBuffer(t,e){t.finish(e,void 0,!0)}static createMessage(t,e,r,n,i,o){return Qy.startMessage(t),Qy.addVersion(t,e),Qy.addHeaderType(t,r),Qy.addHeader(t,n),Qy.addBodyLength(t,i),Qy.addCustomMetadata(t,o),Qy.endMessage(t)}}class Zy{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNull(t,e){return(e||new Zy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,e){return t.setPosition(t.position()+4),(e||new Zy).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Zy.startNull(t),Zy.endNull(t)}}class Jy{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBinary(t,e){return(e||new Jy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,e){return t.setPosition(t.position()+4),(e||new Jy).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Jy.startBinary(t),Jy.endBinary(t)}}class tg{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBool(t,e){return(e||new tg).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,e){return t.setPosition(t.position()+4),(e||new tg).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return tg.startBool(t),tg.endBool(t)}}class eg{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUtf8(t,e){return(e||new eg).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,e){return t.setPosition(t.position()+4),(e||new eg).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return eg.startUtf8(t),eg.endUtf8(t)}}class rg{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsList(t,e){return(e||new rg).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,e){return t.setPosition(t.position()+4),(e||new rg).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return rg.startList(t),rg.endList(t)}}class ng{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsStruct_(t,e){return(e||new ng).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,e){return t.setPosition(t.position()+4),(e||new ng).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return ng.startStruct_(t),ng.endStruct_(t)}}var ig=Um;const og=new class extends pf{visit(t,e){return null==t||null==e?void 0:super.visit(t,e)}visitNull(t,e){return Zy.startNull(e),Zy.endNull(e)}visitInt(t,e){return qm.startInt(e),qm.addBitWidth(e,t.bitWidth),qm.addIsSigned(e,t.isSigned),qm.endInt(e)}visitFloat(t,e){return jy.startFloatingPoint(e),jy.addPrecision(e,t.precision),jy.endFloatingPoint(e)}visitBinary(t,e){return Jy.startBinary(e),Jy.endBinary(e)}visitBool(t,e){return tg.startBool(e),tg.endBool(e)}visitUtf8(t,e){return eg.startUtf8(e),eg.endUtf8(e)}visitDecimal(t,e){return Xy.startDecimal(e),Xy.addScale(e,t.scale),Xy.addPrecision(e,t.precision),Xy.addBitWidth(e,t.bitWidth),Xy.endDecimal(e)}visitDate(t,e){return zy.startDate(e),zy.addUnit(e,t.unit),zy.endDate(e)}visitTime(t,e){return Vy.startTime(e),Vy.addUnit(e,t.unit),Vy.addBitWidth(e,t.bitWidth),Vy.endTime(e)}visitTimestamp(t,e){const r=t.timezone&&e.createString(t.timezone)||void 0;return Hy.startTimestamp(e),Hy.addUnit(e,t.unit),void 0!==r&&Hy.addTimezone(e,r),Hy.endTimestamp(e)}visitInterval(t,e){return Yy.startInterval(e),Yy.addUnit(e,t.unit),Yy.endInterval(e)}visitList(t,e){return rg.startList(e),rg.endList(e)}visitStruct(t,e){return ng.startStruct_(e),ng.endStruct_(e)}visitUnion(t,e){Wy.startTypeIdsVector(e,t.typeIds.length);const r=Wy.createTypeIdsVector(e,t.typeIds);return Wy.startUnion(e),Wy.addMode(e,t.mode),Wy.addTypeIds(e,r),Wy.endUnion(e)}visitDictionary(t,e){const r=this.visit(t.indices,e);return $m.startDictionaryEncoding(e),$m.addId(e,new ig(t.id,0)),$m.addIsOrdered(e,t.isOrdered),void 0!==r&&$m.addIndexType(e,r),$m.endDictionaryEncoding(e)}visitFixedSizeBinary(t,e){return qy.startFixedSizeBinary(e),qy.addByteWidth(e,t.byteWidth),qy.endFixedSizeBinary(e)}visitFixedSizeList(t,e){return $y.startFixedSizeList(e),$y.addListSize(e,t.listSize),$y.endFixedSizeList(e)}visitMap(t,e){return Ky.startMap(e),Ky.addKeysSorted(e,t.keysSorted),Ky.endMap(e)}};function sg(t){return new gg(t.count,lg(t.columns),ug(t.columns))}function ag(t,e){return(t.children||[]).filter(Boolean).map((t=>hm.fromJSON(t,e)))}function lg(t){return(t||[]).reduce(((t,e)=>{return[...t,new bg(e.count,(r=e.VALIDITY,(r||[]).reduce(((t,e)=>t+ +(0===e)),0))),...lg(e.children)];var r}),[])}function ug(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(let r=-1,n=(t||[]).length;++r<n;){const n=t[r];n.VALIDITY&&e.push(new vg(e.length,n.VALIDITY.length)),n.TYPE&&e.push(new vg(e.length,n.TYPE.length)),n.OFFSET&&e.push(new vg(e.length,n.OFFSET.length)),n.DATA&&e.push(new vg(e.length,n.DATA.length)),e=ug(n.children,e)}return e}function hg(t){return new Map(Object.entries(t||{}))}function cg(t){return new Yd(t.isSigned,t.bitWidth)}function dg(t,e){const r=t.type.name;switch(r){case"NONE":case"null":return new Hd;case"binary":return new $d;case"utf8":return new Kd;case"bool":return new Qd;case"list":return new nf((e||[])[0]);case"struct":case"struct_":return new of(e||[])}switch(r){case"int":{const e=t.type;return new Yd(e.isSigned,e.bitWidth)}case"floatingpoint":{const e=t.type;return new qd(yc[e.precision])}case"decimal":{const e=t.type;return new Zd(e.scale,e.precision,e.bitWidth)}case"date":{const e=t.type;return new Jd(gc[e.unit])}case"time":{const e=t.type;return new tf(_c[e.unit],e.bitWidth)}case"timestamp":{const e=t.type;return new ef(_c[e.unit],e.timezone)}case"interval":{const e=t.type;return new rf(vc[e.unit])}case"union":{const r=t.type;return new sf(mc[r.mode],r.typeIds||[],e||[])}case"fixedsizebinary":{const e=t.type;return new af(e.byteWidth)}case"fixedsizelist":{const r=t.type;return new lf(r.listSize,(e||[])[0])}case"map":{const r=t.type;return new uf((e||[])[0],r.keysSorted)}}throw new Error('Unrecognized type: "'.concat(r,'"'))}var fg=Um,pg=Ym,mg=Hm;class yg{constructor(t,e,r,n){this._version=e,this._headerType=r,this.body=new Uint8Array(0),n&&(this._createHeader=()=>n),this._bodyLength="number"===typeof t?t:t.low}static fromJSON(t,e){const r=new yg(0,pc.V4,e);return r._createHeader=function(t,e){return()=>{switch(e){case bc.Schema:return um.fromJSON(t);case bc.RecordBatch:return gg.fromJSON(t);case bc.DictionaryBatch:return _g.fromJSON(t)}throw new Error("Unrecognized Message type: { name: ".concat(bc[e],", type: ").concat(e," }"))}}(t,e),r}static decode(t){t=new mg(ud(t));const e=Qy.getRootAsMessage(t),r=e.bodyLength(),n=e.version(),i=e.headerType(),o=new yg(r,n,i);return o._createHeader=function(t,e){return()=>{switch(e){case bc.Schema:return um.decode(t.header(new Qm));case bc.RecordBatch:return gg.decode(t.header(new Uy),t.version());case bc.DictionaryBatch:return _g.decode(t.header(new Gy),t.version())}throw new Error("Unrecognized Message type: { name: ".concat(bc[e],", type: ").concat(e," }"))}}(e,i),o}static encode(t){const e=new pg;let r=-1;return t.isSchema()?r=um.encode(e,t.header()):t.isRecordBatch()?r=gg.encode(e,t.header()):t.isDictionaryBatch()&&(r=_g.encode(e,t.header())),Qy.startMessage(e),Qy.addVersion(e,pc.V4),Qy.addHeader(e,r),Qy.addHeaderType(e,t.headerType),Qy.addBodyLength(e,new fg(t.bodyLength,0)),Qy.finishMessageBuffer(e,Qy.endMessage(e)),e.asUint8Array()}static from(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t instanceof um)return new yg(0,pc.V4,bc.Schema,t);if(t instanceof gg)return new yg(e,pc.V4,bc.RecordBatch,t);if(t instanceof _g)return new yg(e,pc.V4,bc.DictionaryBatch,t);throw new Error("Unrecognized Message header: ".concat(t))}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===bc.Schema}isRecordBatch(){return this.headerType===bc.RecordBatch}isDictionaryBatch(){return this.headerType===bc.DictionaryBatch}}class gg{constructor(t,e,r){this._nodes=e,this._buffers=r,this._length="number"===typeof t?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class _g{constructor(t,e){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._data=t,this._isDelta=r,this._id="number"===typeof e?e:e.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class vg{constructor(t,e){this.offset="number"===typeof t?t:t.low,this.length="number"===typeof e?e:e.low}}class bg{constructor(t,e){this.length="number"===typeof t?t:t.low,this.nullCount="number"===typeof e?e:e.low}}function xg(t,e){const r=[];for(let n,i=-1,o=-1,s=t.childrenLength();++i<s;)(n=t.children(i))&&(r[++o]=hm.decode(n,e));return r}function Tg(t){const e=new Map;if(t)for(let r,n,i=-1,o=Math.trunc(t.customMetadataLength());++i<o;)(r=t.customMetadata(i))&&null!=(n=r.key())&&e.set(n,r.value());return e}function Sg(t){return new Yd(t.isSigned(),t.bitWidth())}function wg(t,e){const r=t.typeType();switch(r){case Vm.NONE:case Vm.Null:return new Hd;case Vm.Binary:return new $d;case Vm.Utf8:return new Kd;case Vm.Bool:return new Qd;case Vm.List:return new nf((e||[])[0]);case Vm.Struct_:return new of(e||[])}switch(r){case Vm.Int:{const e=t.type(new qm);return new Yd(e.isSigned(),e.bitWidth())}case Vm.FloatingPoint:{const e=t.type(new jy);return new qd(e.precision())}case Vm.Decimal:{const e=t.type(new Xy);return new Zd(e.scale(),e.precision(),e.bitWidth())}case Vm.Date:{const e=t.type(new zy);return new Jd(e.unit())}case Vm.Time:{const e=t.type(new Vy);return new tf(e.unit(),e.bitWidth())}case Vm.Timestamp:{const e=t.type(new Hy);return new ef(e.unit(),e.timezone())}case Vm.Interval:{const e=t.type(new Yy);return new rf(e.unit())}case Vm.Union:{const r=t.type(new Wy);return new sf(r.mode(),r.typeIdsArray()||[],e||[])}case Vm.FixedSizeBinary:{const e=t.type(new qy);return new af(e.byteWidth())}case Vm.FixedSizeList:{const r=t.type(new $y);return new lf(r.listSize(),(e||[])[0])}case Vm.Map:{const r=t.type(new Ky);return new uf((e||[])[0],r.keysSorted())}}throw new Error('Unrecognized type: "'.concat(Vm[r],'" (').concat(r,")"))}hm.encode=function(t,e){let r=-1,n=-1,i=-1;const o=e.type;let s=e.typeId;Vd.isDictionary(o)?(s=o.dictionary.typeId,i=og.visit(o,t),n=og.visit(o.dictionary,t)):n=og.visit(o,t);const a=(o.children||[]).map((e=>hm.encode(t,e))),l=Km.createChildrenVector(t,a),u=e.metadata&&e.metadata.size>0?Km.createCustomMetadataVector(t,[...e.metadata].map((e=>{let[r,n]=e;const i=t.createString("".concat(r)),o=t.createString("".concat(n));return Wm.startKeyValue(t),Wm.addKey(t,i),Wm.addValue(t,o),Wm.endKeyValue(t)}))):-1;e.name&&(r=t.createString(e.name));Km.startField(t),Km.addType(t,n),Km.addTypeType(t,s),Km.addChildren(t,l),Km.addNullable(t,!!e.nullable),-1!==r&&Km.addName(t,r);-1!==i&&Km.addDictionary(t,i);-1!==u&&Km.addCustomMetadata(t,u);return Km.endField(t)},hm.decode=function(t,e){let r,n,i,o,s,a;e&&(a=t.dictionary())?e.has(r=a.id().low)?(o=(o=a.indexType())?Sg(o):new Wd,s=new df(e.get(r),o,r,a.isOrdered()),n=new hm(t.name(),s,t.nullable(),Tg(t))):(o=(o=a.indexType())?Sg(o):new Wd,e.set(r,i=wg(t,xg(t,e))),s=new df(i,o,r,a.isOrdered()),n=new hm(t.name(),s,t.nullable(),Tg(t))):(i=wg(t,xg(t,e)),n=new hm(t.name(),i,t.nullable(),Tg(t)));return n||null},hm.fromJSON=function(t,e){let r,n,i,o,s,a;return e&&(o=t.dictionary)?e.has(r=o.id)?(n=(n=o.indexType)?cg(n):new Wd,a=new df(e.get(r),n,r,o.isOrdered),i=new hm(t.name,a,t.nullable,hg(t.customMetadata))):(n=(n=o.indexType)?cg(n):new Wd,e.set(r,s=dg(t,ag(t,e))),a=new df(s,n,r,o.isOrdered),i=new hm(t.name,a,t.nullable,hg(t.customMetadata))):(s=dg(t,ag(t,e)),i=new hm(t.name,s,t.nullable,hg(t.customMetadata))),i||null},um.encode=function(t,e){const r=e.fields.map((e=>hm.encode(t,e)));Qm.startFieldsVector(t,r.length);const n=Qm.createFieldsVector(t,r),i=e.metadata&&e.metadata.size>0?Qm.createCustomMetadataVector(t,[...e.metadata].map((e=>{let[r,n]=e;const i=t.createString("".concat(r)),o=t.createString("".concat(n));return Wm.startKeyValue(t),Wm.addKey(t,i),Wm.addValue(t,o),Wm.endKeyValue(t)}))):-1;Qm.startSchema(t),Qm.addFields(t,n),Qm.addEndianness(t,Eg?Xm.Little:Xm.Big),-1!==i&&Qm.addCustomMetadata(t,i);return Qm.endSchema(t)},um.decode=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;const r=function(t,e){const r=[];for(let n,i=-1,o=-1,s=t.fieldsLength();++i<s;)(n=t.fields(i))&&(r[++o]=hm.decode(n,e));return r}(t,e);return new um(r,Tg(t),e)},um.fromJSON=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;return new um(function(t,e){return(t.fields||[]).filter(Boolean).map((t=>hm.fromJSON(t,e)))}(t,e),hg(t.customMetadata),e)},gg.encode=function(t,e){const r=e.nodes||[],n=e.buffers||[];Uy.startNodesVector(t,r.length);for(const s of r.slice().reverse())bg.encode(t,s);const i=t.endVector();Uy.startBuffersVector(t,n.length);for(const s of n.slice().reverse())vg.encode(t,s);const o=t.endVector();return Uy.startRecordBatch(t),Uy.addLength(t,new fg(e.length,0)),Uy.addNodes(t,i),Uy.addBuffers(t,o),Uy.endRecordBatch(t)},gg.decode=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pc.V4;if(null!==t.compression())throw new Error("Record batch compression not implemented");return new gg(t.length(),function(t){const e=[];for(let r,n=-1,i=-1,o=t.nodesLength();++n<o;)(r=t.nodes(n))&&(e[++i]=bg.decode(r));return e}(t),function(t,e){const r=[];for(let n,i=-1,o=-1,s=t.buffersLength();++i<s;)(n=t.buffers(i))&&(e<pc.V4&&(n.bb_pos+=8*(i+1)),r[++o]=vg.decode(n));return r}(t,e))},gg.fromJSON=sg,_g.encode=function(t,e){const r=gg.encode(t,e.data);return Gy.startDictionaryBatch(t),Gy.addId(t,new fg(e.id,0)),Gy.addIsDelta(t,e.isDelta),Gy.addData(t,r),Gy.endDictionaryBatch(t)},_g.decode=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pc.V4;return new _g(gg.decode(t.data(),e),t.id(),t.isDelta())},_g.fromJSON=function(t){return new _g(sg(t.data),t.id,t.isDelta)},bg.encode=function(t,e){return ky.createFieldNode(t,new fg(e.length,0),new fg(e.nullCount,0))},bg.decode=function(t){return new bg(t.length(),t.nullCount())},vg.encode=function(t,e){return By.createBuffer(t,new fg(e.offset,0),new fg(e.length,0))},vg.decode=function(t){return new vg(t.offset(),t.length())};const Eg=(()=>{const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0]})(),Ig=t=>"Expected ".concat(bc[t]," Message in stream, but was null or length 0."),Ag=t=>"Header pointer of flatbuffer-encoded ".concat(bc[t]," Message is null or length 0."),Mg=(t,e)=>"Expected to read ".concat(t," metadata bytes, but only read ").concat(e,"."),Pg=(t,e)=>"Expected to read ".concat(t," bytes for message body, but only read ").concat(e,".");class Og{constructor(t){this.source=t instanceof py?t:new py(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||-1===t.value&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?uy:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(Ig(t));return e.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const e=ud(this.source.read(t));if(e.byteLength<t)throw new Error(Pg(t,e.byteLength));return e.byteOffset%8===0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}readSchema(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const e=bc.Schema,r=this.readMessage(e),n=null===r||void 0===r?void 0:r.header();if(t&&!n)throw new Error(Ag(e));return n}readMetadataLength(){const t=this.source.read(Dg),e=t&&new Hm(t),r=(null===e||void 0===e?void 0:e.readInt32(0))||0;return{done:0===r,value:r}}readMetadata(t){const e=this.source.read(t);if(!e)return uy;if(e.byteLength<t)throw new Error(Mg(t,e.byteLength));return{done:!1,value:yg.decode(e)}}}class Rg{constructor(t,e){this.source=t instanceof my?t:jc(t)?new vy(t,e):new my(t)}[Symbol.asyncIterator](){return this}next(){return qc(this,void 0,void 0,(function*(){let t;return(t=yield this.readMetadataLength()).done||-1===t.value&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?uy:t}))}throw(t){return qc(this,void 0,void 0,(function*(){return yield this.source.throw(t)}))}return(t){return qc(this,void 0,void 0,(function*(){return yield this.source.return(t)}))}readMessage(t){return qc(this,void 0,void 0,(function*(){let e;if((e=yield this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(Ig(t));return e.value}))}readMessageBody(t){return qc(this,void 0,void 0,(function*(){if(t<=0)return new Uint8Array(0);const e=ud(yield this.source.read(t));if(e.byteLength<t)throw new Error(Pg(t,e.byteLength));return e.byteOffset%8===0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}))}readSchema(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return qc(this,void 0,void 0,(function*(){const e=bc.Schema,r=yield this.readMessage(e),n=null===r||void 0===r?void 0:r.header();if(t&&!n)throw new Error(Ag(e));return n}))}readMetadataLength(){return qc(this,void 0,void 0,(function*(){const t=yield this.source.read(Dg),e=t&&new Hm(t),r=(null===e||void 0===e?void 0:e.readInt32(0))||0;return{done:0===r,value:r}}))}readMetadata(t){return qc(this,void 0,void 0,(function*(){const e=yield this.source.read(t);if(!e)return uy;if(e.byteLength<t)throw new Error(Mg(t,e.byteLength));return{done:!1,value:yg.decode(e)}}))}}class Cg extends Og{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof hy?t:new hy(t)}next(){const{_json:t}=this;if(!this._schema){this._schema=!0;return{done:!1,value:yg.fromJSON(t.schema,bc.Schema)}}if(this._dictionaryIndex<t.dictionaries.length){const e=t.dictionaries[this._dictionaryIndex++];this._body=e.data.columns;return{done:!1,value:yg.fromJSON(e,bc.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const e=t.batches[this._batchIndex++];this._body=e.columns;return{done:!1,value:yg.fromJSON(e,bc.RecordBatch)}}return this._body=[],uy}readMessageBody(t){return function t(e){return(e||[]).reduce(((e,r)=>[...e,...r.VALIDITY&&[r.VALIDITY]||[],...r.TYPE&&[r.TYPE]||[],...r.OFFSET&&[r.OFFSET]||[],...r.DATA&&[r.DATA]||[],...t(r.children)]),[])}(this._body)}readMessage(t){let e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(Ig(t));return e.value}readSchema(){const t=bc.Schema,e=this.readMessage(t),r=null===e||void 0===e?void 0:e.header();if(!e||!r)throw new Error(Ag(t));return r}}const Dg=4,Fg="ARROW1",Lg=new Uint8Array(6);for(let r=0;r<6;r+=1)Lg[r]=Fg.codePointAt(r);function Ng(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let r=-1,n=Lg.length;++r<n;)if(Lg[r]!==t[e+r])return!1;return!0}const Bg=Lg.length,kg=Bg+Dg,Ug=2*Bg+Dg;class Gg extends cy{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const e=this._impl.open(t);return Nc(e)?e.then((()=>this)):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return oy.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return oy.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof Gg?t:Uc(t)?function(t){return new jg(new Kg(t))}(t):jc(t)?function(t){return qc(this,void 0,void 0,(function*(){const{size:e}=yield t.stat(),r=new vy(t,e);return e>=Ug&&Ng(yield r.readAt(0,Bg+7&-8))?new Vg(new $g(r)):new Xg(new Wg(r))}))}(t):Nc(t)?(()=>qc(this,void 0,void 0,(function*(){return yield Gg.from(yield t)})))():Xc(t)||Vc(t)||Hc(t)||kc(t)?function(t){return qc(this,void 0,void 0,(function*(){const e=yield t.peek(Bg+7&-8);return e&&e.byteLength>=4?Ng(e)?new zg(new qg(yield t.read())):new Xg(new Wg(t)):new Xg(new Wg(function(){return Qc(this,arguments,(function*(){}))}()))}))}(new my(t)):function(t){const e=t.peek(Bg+7&-8);return e&&e.byteLength>=4?Ng(e)?new zg(new qg(t.read())):new jg(new Yg(t)):new jg(new Yg(function*(){}()))}(new py(t))}static readAll(t){return t instanceof Gg?t.isSync()?Zg(t):Jg(t):Uc(t)||ArrayBuffer.isView(t)||Bc(t)||Gc(t)?Zg(t):Jg(t)}}class jg extends Gg{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return Qc(this,arguments,(function*(){yield Kc(yield*Zc(Jc(this[Symbol.iterator]())))}))}}class Xg extends Gg{constructor(t){super(t),this._impl=t}readAll(){var t,e;return qc(this,void 0,void 0,(function*(){const r=new Array;try{for(var n,i=Jc(this);!(n=yield i.next()).done;){const t=n.value;r.push(t)}}catch(o){t={error:o}}finally{try{n&&!n.done&&(e=i.return)&&(yield e.call(i))}finally{if(t)throw t.error}}return r}))}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class zg extends jg{constructor(t){super(t),this._impl=t}}class Vg extends Xg{constructor(t){super(t),this._impl=t}}class Hg{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,e){const r=this._loadVectors(t,e,this.schema.fields),n=lm({type:new of(this.schema.fields),length:t.length,children:r});return new Am(this.schema,n)}_loadDictionaryBatch(t,e){const{id:r,isDelta:n}=t,{dictionaries:i,schema:o}=this,s=i.get(r);if(n||!s){const i=o.dictionaries.get(r),a=this._loadVectors(t.data,e,[i]);return(s&&n?s.concat(new im(a)):new im(a)).memoize()}return s.memoize()}_loadVectors(t,e,r){return new Iy(e,t.nodes,t.buffers,this.dictionaries).visitMany(r)}}class Yg extends Hg{constructor(t,e){super(e),this._reader=Uc(t)?new Cg(this._handle=t):new Og(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=Qg(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):uy}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):uy}next(){if(this.closed)return uy;let t;const{_reader:e}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),n=e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,n)}}if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),n=e.readMessageBody(t.bodyLength),i=this._loadDictionaryBatch(r,n);this.dictionaries.set(r.id,i)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new Om(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class Wg extends Hg{constructor(t,e){super(e),this._reader=new Rg(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return qc(this,void 0,void 0,(function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}))}open(t){return qc(this,void 0,void 0,(function*(){return this.closed||(this.autoDestroy=Qg(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this}))}throw(t){return qc(this,void 0,void 0,(function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):uy}))}return(t){return qc(this,void 0,void 0,(function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):uy}))}next(){return qc(this,void 0,void 0,(function*(){if(this.closed)return uy;let t;const{_reader:e}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),n=yield e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,n)}}if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),n=yield e.readMessageBody(t.bodyLength),i=this._loadDictionaryBatch(r,n);this.dictionaries.set(r.id,i)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new Om(this.schema)}):yield this.return()}))}_readNextMessageAndValidate(t){return qc(this,void 0,void 0,(function*(){return yield this._reader.readMessage(t)}))}}class qg extends Yg{constructor(t,e){super(t instanceof _y?t:new _y(t),e)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var e;if(this.closed)return null;this._footer||this.open();const r=null===(e=this._footer)||void 0===e?void 0:e.getRecordBatch(t);if(r&&this._handle.seek(r.offset)){const t=this._reader.readMessage(bc.RecordBatch);if(null===t||void 0===t?void 0:t.isRecordBatch()){const e=t.header(),r=this._reader.readMessageBody(t.bodyLength);return this._loadRecordBatch(e,r)}}return null}_readDictionaryBatch(t){var e;const r=null===(e=this._footer)||void 0===e?void 0:e.getDictionaryBatch(t);if(r&&this._handle.seek(r.offset)){const t=this._reader.readMessage(bc.DictionaryBatch);if(null===t||void 0===t?void 0:t.isDictionaryBatch()){const e=t.header(),r=this._reader.readMessageBody(t.bodyLength),n=this._loadDictionaryBatch(e,r);this.dictionaries.set(e.id,n)}}}_readFooter(){const{_handle:t}=this,e=t.size-kg,r=t.readInt32(e),n=t.readAt(e-r,r);return ry.decode(n)}_readNextMessageAndValidate(t){var e;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const r=null===(e=this._footer)||void 0===e?void 0:e.getRecordBatch(this._recordBatchIndex);if(r&&this._handle.seek(r.offset))return this._reader.readMessage(t)}return null}}class $g extends Wg{constructor(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];const i="number"!==typeof r[0]?r.shift():void 0,o=r[0]instanceof Map?r.shift():void 0;super(t instanceof vy?t:new vy(t,i),o)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(t){const e=Object.create(null,{open:{get:()=>super.open}});return qc(this,void 0,void 0,(function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield e.open.call(this,t)}))}readRecordBatch(t){var e;return qc(this,void 0,void 0,(function*(){if(this.closed)return null;this._footer||(yield this.open());const r=null===(e=this._footer)||void 0===e?void 0:e.getRecordBatch(t);if(r&&(yield this._handle.seek(r.offset))){const t=yield this._reader.readMessage(bc.RecordBatch);if(null===t||void 0===t?void 0:t.isRecordBatch()){const e=t.header(),r=yield this._reader.readMessageBody(t.bodyLength);return this._loadRecordBatch(e,r)}}return null}))}_readDictionaryBatch(t){var e;return qc(this,void 0,void 0,(function*(){const r=null===(e=this._footer)||void 0===e?void 0:e.getDictionaryBatch(t);if(r&&(yield this._handle.seek(r.offset))){const t=yield this._reader.readMessage(bc.DictionaryBatch);if(null===t||void 0===t?void 0:t.isDictionaryBatch()){const e=t.header(),r=yield this._reader.readMessageBody(t.bodyLength),n=this._loadDictionaryBatch(e,r);this.dictionaries.set(e.id,n)}}}))}_readFooter(){return qc(this,void 0,void 0,(function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const e=t.size-kg,r=yield t.readInt32(e),n=yield t.readAt(e-r,r);return ry.decode(n)}))}_readNextMessageAndValidate(t){return qc(this,void 0,void 0,(function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const e=this._footer.getRecordBatch(this._recordBatchIndex);if(e&&(yield this._handle.seek(e.offset)))return yield this._reader.readMessage(t)}return null}))}}class Kg extends Yg{constructor(t,e){super(t,e)}_loadVectors(t,e,r){return new Ay(e,t.nodes,t.buffers,this.dictionaries).visitMany(r)}}function Qg(t,e){return e&&"boolean"===typeof e.autoDestroy?e.autoDestroy:t.autoDestroy}function*Zg(t){const e=Gg.from(t);try{if(!e.open({autoDestroy:!1}).closed)do{yield e}while(!e.reset().open().closed)}finally{e.cancel()}}function Jg(t){return Qc(this,arguments,(function*(){const e=yield Kc(Gg.from(t));try{if(!(yield Kc(e.open({autoDestroy:!1}))).closed)do{yield yield Kc(e)}while(!(yield Kc(e.reset().open())).closed)}finally{yield Kc(e.cancel())}}))}class t_ extends pf{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(){const t=e=>e.flatMap((e=>Array.isArray(e)?t(e):e instanceof Am?e.data.children:e.data)),e=new t_;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e.visitMany(t(n)),e}visit(t){if(t instanceof im)return this.visitMany(t.data),this;const{type:e}=t;if(!Vd.isDictionary(e)){const{length:r,nullCount:n}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");Vd.isNull(e)||e_.call(this,n<=0?new Uint8Array(0):Bp(t.offset,r,t.nullBitmap)),this.nodes.push(new bg(r,n))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function e_(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new vg(this._byteLength,e)),this._byteLength+=e,this}function r_(t){return e_.call(this,t.values.subarray(0,t.length*t.stride))}function n_(t){const{length:e,values:r,valueOffsets:n}=t,i=n[0],o=n[e],s=Math.min(o-i,r.byteLength-i);return e_.call(this,fd(-n[0],e,n)),e_.call(this,r.subarray(i,i+s)),this}function i_(t){const{length:e,valueOffsets:r}=t;return r&&e_.call(this,fd(r[0],e,r)),this.visit(t.children[0])}function o_(t){return this.visitMany(t.type.children.map(((e,r)=>t.children[r])).filter(Boolean))[0]}t_.prototype.visitBool=function(t){let e;return t.nullCount>=t.length?e_.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?e_.call(this,Bp(t.offset,t.length,e)):e_.call(this,kp(t.values))},t_.prototype.visitInt=r_,t_.prototype.visitFloat=r_,t_.prototype.visitUtf8=n_,t_.prototype.visitBinary=n_,t_.prototype.visitFixedSizeBinary=r_,t_.prototype.visitDate=r_,t_.prototype.visitTimestamp=r_,t_.prototype.visitTime=r_,t_.prototype.visitDecimal=r_,t_.prototype.visitList=i_,t_.prototype.visitStruct=o_,t_.prototype.visitUnion=function(t){const{type:e,length:r,typeIds:n,valueOffsets:i}=t;if(e_.call(this,n),e.mode===mc.Sparse)return o_.call(this,t);if(e.mode===mc.Dense){if(t.offset<=0)return e_.call(this,i),o_.call(this,t);{const o=n.reduce(((t,e)=>Math.max(t,e)),n[0]),s=new Int32Array(o+1),a=new Int32Array(o+1).fill(-1),l=new Int32Array(r),u=fd(-i[0],r,i);for(let t,e,i=-1;++i<r;)-1===(e=a[t=n[i]])&&(e=a[t]=u[t]),l[i]=u[i]-e,++s[t];e_.call(this,l);for(let n,i=-1,h=e.children.length;++i<h;)if(n=t.children[i]){const t=e.typeIds[i],o=Math.min(r,s[t]);this.visit(n.slice(a[t],o))}}}return this},t_.prototype.visitInterval=r_,t_.prototype.visitFixedSizeList=i_,t_.prototype.visitMap=i_;class s_ extends cy{constructor(t){super(),this._position=0,this._started=!1,this._sink=new fy,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Lc(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy="boolean"!==typeof t.autoDestroy||t.autoDestroy,this._writeLegacyIpcFormat="boolean"===typeof t.writeLegacyIpcFormat&&t.writeLegacyIpcFormat}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}toString(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sink.toString(t)}toUint8Array(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sink.toUint8Array(t)}writeAll(t){return Nc(t)?t.then((t=>this.writeAll(t))):kc(t)?h_(this,t):u_(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._sink,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t===this._sink||t instanceof fy?this._sink=t:(this._sink=new fy,t&&(t=>Lc(t)&&Fc(t.abort)&&Fc(t.getWriter)&&!zc(t))(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&(t=>Lc(t)&&Fc(t.end)&&Fc(t.write)&&Dc(t.writable)&&!zc(t))(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,e&&wm(e,this._schema)||(null==e?(this._position=0,this._schema=null):(this._started=!0,this._schema=e,this._writeSchema(e))),this}write(t){let e=null;if(!this._sink)throw new Error("RecordBatchWriter is closed");if(null==t)return this.finish()&&void 0;if(t instanceof Dm&&!(e=t.schema))return this.finish()&&void 0;if(t instanceof Am&&!(e=t.schema))return this.finish()&&void 0;if(e&&!wm(e,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,e)}t instanceof Am?t instanceof Om||this._writeRecordBatch(t):t instanceof Dm?this.writeAll(t.batches):Bc(t)&&this.writeAll(t)}_writeMessage(t){const e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-1,r=yg.encode(t),n=r.byteLength,i=this._writeLegacyIpcFormat?4:8,o=n+i+e&~e,s=o-n-i;return t.headerType===bc.RecordBatch?this._recordBatchBlocks.push(new iy(o,t.bodyLength,this._position)):t.headerType===bc.DictionaryBatch&&this._dictionaryBlocks.push(new iy(o,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(o-i)),n>0&&this._write(r),this._writePadding(s)}_write(t){if(this._started){const e=ud(t);e&&e.byteLength>0&&(this._sink.write(e),this._position+=e.byteLength)}return this}_writeSchema(t){return this._writeMessage(yg.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Lg)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:e,nodes:r,bufferRegions:n,buffers:i}=t_.assemble(t),o=new gg(t.numRows,r,n),s=yg.from(o,e);return this._writeDictionaries(t)._writeMessage(s)._writeBodyBuffers(i)}_writeDictionaryBatch(t,e){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._dictionaryDeltaOffsets.set(e,t.length+(this._dictionaryDeltaOffsets.get(e)||0));const{byteLength:n,nodes:i,bufferRegions:o,buffers:s}=t_.assemble(new im([t])),a=new gg(t.length,i,o),l=new _g(a,e,r),u=yg.from(l,n);return this._writeMessage(u)._writeBodyBuffers(s)}_writeBodyBuffers(t){let e,r,n;for(let i=-1,o=t.length;++i<o;)(e=t[i])&&(r=e.byteLength)>0&&(this._write(e),(n=(r+7&-8)-r)>0&&this._writePadding(n));return this}_writeDictionaries(t){for(let[e,r]of t.dictionaries){let t=this._dictionaryDeltaOffsets.get(e)||0;if(0===t||(r=null===r||void 0===r?void 0:r.slice(t)).length>0)for(const n of r.data)this._writeDictionaryBatch(n,e,t>0),t+=n.length}return this}}class a_ extends s_{static writeAll(t,e){const r=new a_(e);return Nc(t)?t.then((t=>r.writeAll(t))):kc(t)?h_(r,t):u_(r,t)}}class l_ extends s_{static writeAll(t){const e=new l_;return Nc(t)?t.then((t=>e.writeAll(t))):kc(t)?h_(e,t):u_(e,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const e=ry.encode(new ry(t,pc.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(e)._write(Int32Array.of(e.byteLength))._writeMagic()}}function u_(t,e){let r=e;e instanceof Dm&&(r=e.batches,t.reset(void 0,e.schema));for(const n of r)t.write(n);return t.finish()}function h_(t,e){var r,n,i,o;return qc(this,void 0,void 0,(function*(){try{for(r=Jc(e);!(n=yield r.next()).done;){const e=n.value;t.write(e)}}catch(s){i={error:s}}finally{try{n&&!n.done&&(o=r.return)&&(yield o.call(r))}finally{if(i)throw i.error}}return t.finish()}))}function c_(t){const e=Gg.from(t);return Nc(e)?e.then((t=>c_(t))):e.isAsync()?e.readAll().then((t=>new Dm(t))):new Dm(e.readAll())}function d_(t){return("stream"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"stream")?a_:l_).writeAll(t).toUint8Array(!0)}var f_,p_=function(){function t(t,e,r,n){var i=this;this.getCell=function(t,e){var r=t<i.headerRows&&e<i.headerColumns,n=t>=i.headerRows&&e<i.headerColumns,o=t<i.headerRows&&e>=i.headerColumns;if(r){var s=["blank"];return e>0&&s.push("level"+t),{type:"blank",classNames:s.join(" "),content:""}}if(o)return{type:"columns",classNames:(s=["col_heading","level"+t,"col"+(l=e-i.headerColumns)]).join(" "),content:i.getContent(i.columnsTable,l,t)};if(n){s=["row_heading","level"+e,"row"+(a=t-i.headerRows)];return{type:"index",id:"T_".concat(i.uuid,"level").concat(e,"_row").concat(a),classNames:s.join(" "),content:i.getContent(i.indexTable,a,e)}}s=["data","row"+(a=t-i.headerRows),"col"+(l=e-i.headerColumns)];var a,l,u=i.styler?i.getContent(i.styler.displayValuesTable,a,l):i.getContent(i.dataTable,a,l);return{type:"data",id:"T_".concat(i.uuid,"row").concat(a,"_col").concat(l),classNames:s.join(" "),content:u}},this.getContent=function(t,e,r){var n=t.getChildAt(r);return null===n?"":i.getColumnTypeId(t,r)===xc.Timestamp?i.nanosToDate(n.get(e)):n.get(e)},this.dataTable=c_(t),this.indexTable=c_(e),this.columnsTable=c_(r),this.styler=n?{caption:n.caption,displayValuesTable:c_(n.displayValues),styles:n.styles,uuid:n.uuid}:void 0}return Object.defineProperty(t.prototype,"rows",{get:function(){return this.indexTable.numRows+this.columnsTable.numCols},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){return this.indexTable.numCols+this.columnsTable.numRows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headerRows",{get:function(){return this.rows-this.dataRows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headerColumns",{get:function(){return this.columns-this.dataColumns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataRows",{get:function(){return this.dataTable.numRows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataColumns",{get:function(){return this.dataTable.numCols},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uuid",{get:function(){return this.styler&&this.styler.uuid},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"caption",{get:function(){return this.styler&&this.styler.caption},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"styles",{get:function(){return this.styler&&this.styler.styles},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"table",{get:function(){return this.dataTable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.indexTable},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnTable",{get:function(){return this.columnsTable},enumerable:!1,configurable:!0}),t.prototype.serialize=function(){return{data:d_(this.dataTable),index:d_(this.indexTable),columns:d_(this.columnsTable)}},t.prototype.getColumnTypeId=function(t,e){return t.schema.fields[e].type.typeId},t.prototype.nanosToDate=function(t){return new Date(t/1e6)},t}(),m_=function(){return m_=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},m_.apply(this,arguments)};!function(t){t.COMPONENT_READY="streamlit:componentReady",t.SET_COMPONENT_VALUE="streamlit:setComponentValue",t.SET_FRAME_HEIGHT="streamlit:setFrameHeight"}(f_||(f_={}));var y_=function(){function t(){}return t.API_VERSION=1,t.RENDER_EVENT="streamlit:render",t.events=new EventTarget,t.registeredMessageListener=!1,t.setComponentReady=function(){t.registeredMessageListener||(window.addEventListener("message",t.onMessageEvent),t.registeredMessageListener=!0),t.sendBackMsg(f_.COMPONENT_READY,{apiVersion:t.API_VERSION})},t.setFrameHeight=function(e){void 0===e&&(e=document.body.scrollHeight),e!==t.lastFrameHeight&&(t.lastFrameHeight=e,t.sendBackMsg(f_.SET_FRAME_HEIGHT,{height:e}))},t.setComponentValue=function(e){var r;e instanceof p_?(r="dataframe",e=e.serialize()):!function(t){var e=!1;try{e=t instanceof BigInt64Array||t instanceof BigUint64Array}catch(r){}return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array||e}(e)?e instanceof ArrayBuffer?(r="bytes",e=new Uint8Array(e)):r="json":(r="bytes",e=new Uint8Array(e.buffer)),t.sendBackMsg(f_.SET_COMPONENT_VALUE,{value:e,dataType:r})},t.onMessageEvent=function(e){if(e.data.type===t.RENDER_EVENT)t.onRenderMessage(e.data)},t.onRenderMessage=function(e){var r=e.args;null==r&&(console.error("Got null args in onRenderMessage. This should never happen"),r={});var n=e.dfs&&e.dfs.length>0?t.argsDataframeToObject(e.dfs):{};r=m_(m_({},r),n);var i=Boolean(e.disabled),o=e.theme;o&&g_(o);var s={disabled:i,args:r,theme:o},a=new CustomEvent(t.RENDER_EVENT,{detail:s});t.events.dispatchEvent(a)},t.argsDataframeToObject=function(e){var r=e.map((function(e){var r=e.key,n=e.value;return[r,t.toArrowTable(n)]}));return Object.fromEntries(r)},t.toArrowTable=function(t){var e,r=(e=t.data).data,n=e.index,i=e.columns,o=e.styler;return new p_(r,n,i,o)},t.sendBackMsg=function(t,e){window.parent.postMessage(m_({isStreamlitMessage:!0,type:t},e),"*")},t}(),g_=function(t){var e=document.createElement("style");document.head.appendChild(e),e.innerHTML="\n    :root {\n      --primary-color: ".concat(t.primaryColor,";\n      --background-color: ").concat(t.backgroundColor,";\n      --secondary-background-color: ").concat(t.secondaryBackgroundColor,";\n      --text-color: ").concat(t.textColor,";\n      --font: ").concat(t.font,";\n    }\n\n    body {\n      background-color: var(--background-color);\n      color: var(--text-color);\n    }\n  ")};var __=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}__(e,t),e.prototype.componentDidMount=function(){y_.setFrameHeight()},e.prototype.componentDidUpdate=function(){y_.setFrameHeight()}}(Ec.PureComponent);var v_=r(579);const b_=function(t){var e=function(e){function r(t){var r=e.call(this,t)||this;return r.componentDidMount=function(){y_.events.addEventListener(y_.RENDER_EVENT,r.onRenderEvent),y_.setComponentReady()},r.componentDidUpdate=function(){null!=r.state.componentError&&y_.setFrameHeight()},r.componentWillUnmount=function(){y_.events.removeEventListener(y_.RENDER_EVENT,r.onRenderEvent)},r.onRenderEvent=function(t){r.setState({renderData:t.detail})},r.state={renderData:void 0,componentError:void 0},r}return __(r,e),r.prototype.render=function(){return null!=this.state.componentError?Ec.createElement("div",null,Ec.createElement("h1",null,"Component Error"),Ec.createElement("span",null,this.state.componentError.message)):null==this.state.renderData?null:Ec.createElement(t,{width:window.innerWidth,disabled:this.state.renderData.disabled,args:this.state.renderData.args,theme:this.state.renderData.theme})},r.getDerivedStateFromError=function(t){return{componentError:t}},r}(Ec.PureComponent);return wc()(e,t)}((t=>{let{args:r}=t;const{modelPath:i}=r,o=(0,n.useRef)(null);return y_.setFrameHeight(1e3),(0,n.useEffect)((()=>{var t;window.PIXI=e;const r=new ol({view:null!==(t=o.current)&&void 0!==t?t:void 0,resizeTo:window,transparent:!0}),n=t=>{t.position.set(r.screen.width/2,r.screen.height/2)};return async function(){const t=await nu.from(i);r.stage.addChild(t),window.addEventListener("resize",(()=>{r.renderer.resize(window.innerWidth,window.innerHeight),n(t)})),t.x=r.renderer.width/2,t.y=r.renderer.height/2,t.rotation=Math.PI,t.skew.x=Math.PI,t.scale.set(.2),t.anchor.set(.5,.5),y_.setFrameHeight(t.height),t.on("hit",(e=>{e.includes("Body")&&t.motion("Tap"),e.includes("Head")&&t.expression()}))}(),()=>window.removeEventListener("resize",n)}),[]),(0,v_.jsx)(v_.Fragment,{children:(0,v_.jsx)("canvas",{ref:o,style:{width:"100",height:"100"}})})}));i.render((0,v_.jsx)(n.StrictMode,{children:(0,v_.jsx)(b_,{})}),document.getElementById("root"))})()})();
//# sourceMappingURL=main.4339a96b.js.map